"use strict";(self.webpackChunkSetTrackerApp=self.webpackChunkSetTrackerApp||[]).push([[179],{2011:(ht,Se,O)=>{O.d(Se,{Dh:()=>_e,GT:()=>le,cc:()=>se,hO:()=>ve,on:()=>j,pX:()=>ae,xv:()=>fe});var h=O(4650),K=O(9260),P=O(4976);ht=O.hmd(ht);const oe=["ngOnDestroy"],ae=(pe,pt,It,ke={})=>new Proxy(pe,{get:(we,ye)=>It.runOutsideAngular(()=>{var ze;if(pe[ye])return!(null===(ze=ke?.spy)||void 0===ze)&&ze.get&&ke.spy.get(ye,pe[ye]),pe[ye];if(oe.indexOf(ye)>-1)return()=>{};const $e=pt.toPromise().then(Xe=>{const te=Xe&&Xe[ye];return"function"==typeof te?te.bind(Xe):te&&te.then?te.then(xt=>It.run(()=>xt)):It.run(()=>te)});return new Proxy(()=>{},{get:(Xe,te)=>$e[te],apply:(Xe,te,xt)=>$e.then(it=>{var jt;const rt=it&&it(...xt);return!(null===(jt=ke?.spy)||void 0===jt)&&jt.apply&&ke.spy.apply(ye,xt,rt),rt})})})}),le=(pe,pt)=>{pt.forEach(It=>{Object.getOwnPropertyNames(It.prototype||It).forEach(ke=>{Object.defineProperty(pe.prototype,ke,Object.getOwnPropertyDescriptor(It.prototype||It,ke))})})};class de{constructor(pt){return pt}}const _e=new h.OlP("angularfire2.app.options"),fe=new h.OlP("angularfire2.app.name");function j(pe,pt,It){const we="object"==typeof It&&It||{};we.name=we.name||"string"==typeof It&&It||"[DEFAULT]";const ze=K.Z.apps.filter($e=>$e&&$e.name===we.name)[0]||pt.runOutsideAngular(()=>K.Z.initializeApp(pe,we));try{JSON.stringify(pe)!==JSON.stringify(ze.options)&&V("error",`${ze.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(ze)}const V=(pe,...pt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[pe](...pt)},z={provide:de,useFactory:j,deps:[_e,h.R0b,[new h.FiY,fe]]};let ve=(()=>{class pe{constructor(It){K.Z.registerVersion("angularfire",P.q4.full,"core"),K.Z.registerVersion("angularfire",P.q4.full,"app-compat"),K.Z.registerVersion("angular",h.q4F.full,It.toString())}static initializeApp(It,ke){return{ngModule:pe,providers:[{provide:_e,useValue:It},{provide:fe,useValue:ke}]}}}return pe.\u0275fac=function(It){return new(It||pe)(h.LFG(h.Lbi))},pe.\u0275mod=h.oAB({type:pe}),pe.\u0275inj=h.cJS({providers:[z]}),pe})();function se(pe,pt,It,ke,we){const[,ye,ze]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===pe)||[];if(ye)return function Ce(pe,pt){try{return pe.toString()===pt.toString()}catch{return pe===pt}}(we,ze)||(me("error",`${pt} was already initialized on the ${It} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:we,was:ze})),ye;{const $e=ke();return globalThis.\u0275AngularfireInstanceCache.push([pe,$e,we]),$e}}const Qe=!!ht.hot,me=(pe,...pt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[pe](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(ht,Se,O)=>{O.d(Se,{q4:()=>kn,iC:()=>Yu,HU:()=>Ua,vb:()=>ul,JM:()=>Nf});var h=O(4650),K=O(259),P=O(5861),oe=O(6881),ae=O(2090),le=O(4859),de=O(1877);let fe,j;const ve=new WeakMap,se=new WeakMap,Ce=new WeakMap,Qe=new WeakMap,me=new WeakMap;let It={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return se.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Ce.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return ze(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function ye(E){return"function"==typeof E?function we(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function z(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply($e(this),D),ze(ve.get(this))}:function(...D){return ze(E.apply($e(this),D))}:function(D,...A){const k=E.call($e(this),D,...A);return Ce.set(k,D.sort?D.sort():[D]),ze(k)}}(E):(E instanceof IDBTransaction&&function pt(E){if(se.has(E))return;const D=new Promise((A,k)=>{const G=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",he),E.removeEventListener("abort",he)},W=()=>{A(),G()},he=()=>{k(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",W),E.addEventListener("error",he),E.addEventListener("abort",he)});se.set(E,D)}(E),((E,D)=>D.some(A=>E instanceof A))(E,function V(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,It):E)}function ze(E){if(E instanceof IDBRequest)return function pe(E){const D=new Promise((A,k)=>{const G=()=>{E.removeEventListener("success",W),E.removeEventListener("error",he)},W=()=>{A(ze(E.result)),G()},he=()=>{k(E.error),G()};E.addEventListener("success",W),E.addEventListener("error",he)});return D.then(A=>{A instanceof IDBCursor&&ve.set(A,E)}).catch(()=>{}),me.set(D,E),D}(E);if(Qe.has(E))return Qe.get(E);const D=ye(E);return D!==E&&(Qe.set(E,D),me.set(D,E)),D}const $e=E=>me.get(E),xt=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],jt=new Map;function rt(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(jt.get(D))return jt.get(D);const A=D.replace(/FromIndex$/,""),k=D!==A,G=it.includes(A);if(!(A in(k?IDBIndex:IDBObjectStore).prototype)||!G&&!xt.includes(A))return;const W=function(){var he=(0,P.Z)(function*(We,...He){const ut=this.transaction(We,G?"readwrite":"readonly");let dt=ut.store;return k&&(dt=dt.index(He.shift())),(yield Promise.all([dt[A](...He),G&&ut.done]))[0]});return function(He){return he.apply(this,arguments)}}();return jt.set(D,W),W}!function ke(E){It=E(It)}(E=>({...E,get:(D,A,k)=>rt(D,A)||E.get(D,A,k),has:(D,A)=>!!rt(D,A)||E.has(D,A)}));const gs="@firebase/installations",es="w:0.6.4",ne="FIS_v2",st=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mt(E){return E instanceof ae.ZR&&E.code.includes("request-failed")}function un({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function vt(E){return{token:E.token,requestStatus:2,expiresIn:Jr(E.expiresIn),creationTime:Date.now()}}function qt(E,D){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*(E,D){const k=(yield D.json()).error;return st.create("request-failed",{requestName:E,serverCode:k.code,serverMessage:k.message,serverStatus:k.status})})).apply(this,arguments)}function _n({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Fn(E,{refreshToken:D}){const A=_n(E);return A.append("Authorization",function yi(E){return`${ne} ${E}`}(D)),A}function Jn(E){return zn.apply(this,arguments)}function zn(){return(zn=(0,P.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Jr(E){return Number(E.replace("s","000"))}function lt(E,D){return jr.apply(this,arguments)}function jr(){return(jr=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const k=un(E),G=_n(E),W=D.getImmediate({optional:!0});if(W){const ut=yield W.getHeartbeatsHeader();ut&&G.append("x-firebase-client",ut)}const We={method:"POST",headers:G,body:JSON.stringify({fid:A,authVersion:ne,appId:E.appId,sdkVersion:es})},He=yield Jn(()=>fetch(k,We));if(He.ok){const ut=yield He.json();return{fid:ut.fid||A,registrationStatus:2,refreshToken:ut.refreshToken,authToken:vt(ut.authToken)}}throw yield qt("Create Installation",He)})).apply(this,arguments)}function Ni(E){return new Promise(D=>{setTimeout(D,E)})}const Po=/^[cdef][\w-]{21}$/;function ar(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function In(E){return function $r(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Po.test(A)?A:""}catch{return""}}function Kt(E){return`${E.appName}!${E.appId}`}const et=new Map;function _t(E,D){const A=Kt(E);Xr(A,D),function Xn(E,D){const A=function wr(){return!bt&&"BroadcastChannel"in self&&(bt=new BroadcastChannel("[Firebase] FID Change"),bt.onmessage=E=>{Xr(E.data.key,E.data.fid)}),bt}();A&&A.postMessage({key:E,fid:D}),function cn(){0===et.size&&bt&&(bt.close(),bt=null)}()}(A,D)}function Xr(E,D){const A=et.get(E);if(A)for(const k of A)k(D)}let bt=null;const ur="firebase-installations-store";let Er=null;function Pi(){return Er||(Er=function Xe(E,D,{blocked:A,upgrade:k,blocking:G,terminated:W}={}){const he=indexedDB.open(E,D),We=ze(he);return k&&he.addEventListener("upgradeneeded",He=>{k(ze(he.result),He.oldVersion,He.newVersion,ze(he.transaction))}),A&&he.addEventListener("blocked",()=>A()),We.then(He=>{W&&He.addEventListener("close",()=>W()),G&&He.addEventListener("versionchange",()=>G())}).catch(()=>{}),We}("firebase-installations-database",1,{upgrade:(E,D)=>{0===D&&E.createObjectStore(ur)}})),Er}function xn(E,D){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,P.Z)(function*(E,D){const A=Kt(E),G=(yield Pi()).transaction(ur,"readwrite"),W=G.objectStore(ur),he=yield W.get(A);return yield W.put(D,A),yield G.done,(!he||he.fid!==D.fid)&&_t(E,D.fid),D})).apply(this,arguments)}function ns(E){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,P.Z)(function*(E){const D=Kt(E),k=(yield Pi()).transaction(ur,"readwrite");yield k.objectStore(ur).delete(D),yield k.done})).apply(this,arguments)}function ei(E,D){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,P.Z)(function*(E,D){const A=Kt(E),G=(yield Pi()).transaction(ur,"readwrite"),W=G.objectStore(ur),he=yield W.get(A),We=D(he);return void 0===We?yield W.delete(A):yield W.put(We,A),yield G.done,We&&(!he||he.fid!==We.fid)&&_t(E,We.fid),We})).apply(this,arguments)}function U(E){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*(E){let D;const A=yield ei(E.appConfig,k=>{const G=q(k),W=ue(E,G);return D=W.registrationPromise,W.installationEntry});return""===A.fid?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}})).apply(this,arguments)}function q(E){return Ue(E||{fid:ar(),registrationStatus:0})}function ue(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(st.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},k=function J(E,D){return qe.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:k}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Tt(E)}:{installationEntry:D}}function qe(){return(qe=(0,P.Z)(function*(E,D){try{const A=yield lt(E,D);return xn(E.appConfig,A)}catch(A){throw Mt(A)&&409===A.customData.serverCode?yield ns(E.appConfig):yield xn(E.appConfig,{fid:D.fid,registrationStatus:0}),A}})).apply(this,arguments)}function Tt(E){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,P.Z)(function*(E){let D=yield tn(E.appConfig);for(;1===D.registrationStatus;)yield Ni(100),D=yield tn(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:k}=yield U(E);return k||A}return D})).apply(this,arguments)}function tn(E){return ei(E,D=>{if(!D)throw st.create("installation-not-found");return Ue(D)})}function Ue(E){return function ot(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function mt(E,D){return fn.apply(this,arguments)}function fn(){return(fn=(0,P.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const k=Dr(E,A),G=Fn(E,A),W=D.getImmediate({optional:!0});if(W){const ut=yield W.getHeartbeatsHeader();ut&&G.append("x-firebase-client",ut)}const We={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:es,appId:E.appId}})},He=yield Jn(()=>fetch(k,We));if(He.ok)return vt(yield He.json());throw yield qt("Generate Auth Token",He)})).apply(this,arguments)}function Dr(E,{fid:D}){return`${un(E)}/${D}/authTokens:generate`}function pn(E){return ki.apply(this,arguments)}function ki(){return(ki=(0,P.Z)(function*(E,D=!1){let A;const k=yield ei(E.appConfig,W=>{if(!Ft(W))throw st.create("not-registered");const he=W.authToken;if(!D&&Qt(he))return W;if(1===he.requestStatus)return A=re(E,D),W;{if(!navigator.onLine)throw st.create("app-offline");const We=zt(W);return A=Oe(E,We),We}});return A?yield A:k.authToken})).apply(this,arguments)}function re(E,D){return ee.apply(this,arguments)}function ee(){return(ee=(0,P.Z)(function*(E,D){let A=yield Pe(E.appConfig);for(;1===A.authToken.requestStatus;)yield Ni(100),A=yield Pe(E.appConfig);const k=A.authToken;return 0===k.requestStatus?pn(E,D):k})).apply(this,arguments)}function Pe(E){return ei(E,D=>{if(!Ft(D))throw st.create("not-registered");return function Cr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Oe(E,D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,P.Z)(function*(E,D){try{const A=yield mt(E,D),k=Object.assign(Object.assign({},D),{authToken:A});return yield xn(E.appConfig,k),A}catch(A){if(!Mt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const k=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield xn(E.appConfig,k)}else yield ns(E.appConfig);throw A}})).apply(this,arguments)}function Ft(E){return void 0!==E&&2===E.registrationStatus}function Qt(E){return 2===E.requestStatus&&!function Tn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+36e5}(E)}function zt(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}function ti(){return(ti=(0,P.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:k}=yield U(D);return k?k.catch(console.error):pn(D).catch(console.error),A.fid})).apply(this,arguments)}function du(){return(du=(0,P.Z)(function*(E,D=!1){const A=E;return yield gn(A),(yield pn(A,D)).token})).apply(this,arguments)}function gn(E){return rs.apply(this,arguments)}function rs(){return(rs=(0,P.Z)(function*(E){const{registrationPromise:D}=yield U(E);D&&(yield D)})).apply(this,arguments)}function lr(E){return st.create("missing-app-config-values",{valueName:E})}const Gr="installations",fu=E=>{const D=E.getProvider("app").getImmediate(),A=function cd(E){if(!E||!E.options)throw lr("App Configuration");if(!E.name)throw lr("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw lr(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ms=E=>{const D=E.getProvider("app").getImmediate(),A=(0,oe._getProvider)(D,Gr).getImmediate();return{getId:()=>function _i(E){return ti.apply(this,arguments)}(A),getToken:G=>function ga(E){return du.apply(this,arguments)}(A,G)}};(function Oi(){(0,oe._registerComponent)(new le.wA(Gr,fu,"PUBLIC")),(0,oe._registerComponent)(new le.wA("installations-internal",ms,"PRIVATE"))})(),(0,oe.registerVersion)(gs,"0.6.4"),(0,oe.registerVersion)(gs,"0.6.4","esm2017");const Lo="@firebase/remote-config",wn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wi{constructor(D,A,k,G){this.client=D,this.storage=A,this.storageCache=k,this.logger=G}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const k=Date.now()-A,G=k<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${k}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${G}.`),G}fetch(D){var A=this;return(0,P.Z)(function*(){const[k,G]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(G&&A.isCachedDataFresh(D.cacheMaxAgeMillis,k))return G;D.eTag=G&&G.eTag;const W=yield A.client.fetch(D),he=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&he.push(A.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(he),W})()}}function yd(E=navigator){return E.languages&&E.languages[0]||E.language}class ya{constructor(D,A,k,G,W,he){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=k,this.projectId=G,this.apiKey=W,this.appId=he}fetch(D){var A=this;return(0,P.Z)(function*(){const[k,G]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),he=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},He={sdk_version:A.sdkVersion,app_instance_id:k,app_instance_id_token:G,app_id:A.appId,language_code:yd()},ut={method:"POST",headers:We,body:JSON.stringify(He)},dt=fetch(he,ut),Pt=new Promise((mr,Ss)=>{D.signal.addEventListener(()=>{const Qu=new Error("The operation was aborted.");Qu.name="AbortError",Ss(Qu)})});let Sr;try{yield Promise.race([dt,Pt]),Sr=yield dt}catch(mr){let Ss="fetch-client-network";throw"AbortError"===mr?.name&&(Ss="fetch-timeout"),wn.create(Ss,{originalErrorMessage:mr?.message})}let mn=Sr.status;const ft=Sr.headers.get("ETag")||void 0;let Wi,Qs;if(200===Sr.status){let mr;try{mr=yield Sr.json()}catch(Ss){throw wn.create("fetch-client-parse",{originalErrorMessage:Ss?.message})}Wi=mr.entries,Qs=mr.state}if("INSTANCE_STATE_UNSPECIFIED"===Qs?mn=500:"NO_CHANGE"===Qs?mn=304:("NO_TEMPLATE"===Qs||"EMPTY_CONFIG"===Qs)&&(Wi={}),304!==mn&&200!==mn)throw wn.create("fetch-status",{httpStatus:mn});return{status:mn,eTag:ft,config:Wi}})()}}class lf{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,P.Z)(function*(){const k=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,k)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:k}){var G=this;return(0,P.Z)(function*(){yield function Vc(E,D){return new Promise((A,k)=>{const G=Math.max(D-Date.now(),0),W=setTimeout(A,G);E.addEventListener(()=>{clearTimeout(W),k(wn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const W=yield G.client.fetch(D);return yield G.storage.deleteThrottleMetadata(),W}catch(W){if(!function mu(E){if(!(E instanceof ae.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(W))throw W;const he={throttleEndTimeMillis:Date.now()+(0,ae.$s)(k),backoffCount:k+1};return yield G.storage.setThrottleMetadata(he),G.attemptFetch(D,he)}})()}}class df{constructor(D,A,k,G,W){this.app=D,this._client=A,this._storageCache=k,this._storage=G,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function gr(E,D){const A=E.target.error||void 0;return wn.create(D,{originalErrorMessage:A&&A?.message})}const Rr="app_namespace_store";class pw{constructor(D,A,k,G=function _u(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=k=>{D(gr(k,"storage-open"))},A.onsuccess=k=>{E(k.target.result)},A.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(Rr,{keyPath:"compositeKey"})}}catch(A){D(wn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=k,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,P.Z)(function*(){const k=yield A.openDbPromise;return new Promise((G,W)=>{const We=k.transaction([Rr],"readonly").objectStore(Rr),He=A.createCompositeKey(D);try{const ut=We.get(He);ut.onerror=dt=>{W(gr(dt,"storage-get"))},ut.onsuccess=dt=>{const Pt=dt.target.result;G(Pt?Pt.value:void 0)}}catch(ut){W(wn.create("storage-get",{originalErrorMessage:ut?.message}))}})})()}set(D,A){var k=this;return(0,P.Z)(function*(){const G=yield k.openDbPromise;return new Promise((W,he)=>{const He=G.transaction([Rr],"readwrite").objectStore(Rr),ut=k.createCompositeKey(D);try{const dt=He.put({compositeKey:ut,value:A});dt.onerror=Pt=>{he(gr(Pt,"storage-set"))},dt.onsuccess=()=>{W()}}catch(dt){he(wn.create("storage-set",{originalErrorMessage:dt?.message}))}})})()}delete(D){var A=this;return(0,P.Z)(function*(){const k=yield A.openDbPromise;return new Promise((G,W)=>{const We=k.transaction([Rr],"readwrite").objectStore(Rr),He=A.createCompositeKey(D);try{const ut=We.delete(He);ut.onerror=dt=>{W(gr(dt,"storage-delete"))},ut.onsuccess=()=>{G()}}catch(ut){W(wn.create("storage-delete",{originalErrorMessage:ut?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Vn{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const A=D.storage.getLastFetchStatus(),k=D.storage.getLastSuccessfulFetchTimestampMillis(),G=D.storage.getActiveConfig(),W=yield A;W&&(D.lastFetchStatus=W);const he=yield k;he&&(D.lastSuccessfulFetchTimestampMillis=he);const We=yield G;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function zr(){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,P.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}let Vo,Un;!function vs(){(0,oe._registerComponent)(new le.wA("remote-config",function E(D,{instanceIdentifier:A}){const k=D.getProvider("app").getImmediate(),G=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wn.create("registration-window");if(!(0,ae.hl)())throw wn.create("indexed-db-unavailable");const{projectId:W,apiKey:he,appId:We}=k.options;if(!W)throw wn.create("registration-project-id");if(!he)throw wn.create("registration-api-key");if(!We)throw wn.create("registration-app-id");const He=new pw(We,k.name,A=A||"firebase"),ut=new Vn(He),dt=new de.Yd(Lo);dt.logLevel=de.in.ERROR;const Pt=new ya(G,oe.SDK_VERSION,A,W,he,We),Sr=new lf(Pt,He),mn=new wi(Sr,He,ut,dt),ft=new df(k,mn,ut,He,dt);return function Fg(E){const D=(0,ae.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ft),ft},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Lo,"0.4.4"),(0,oe.registerVersion)(Lo,"0.4.4","esm2017")}();const jc=new WeakMap,ni=new WeakMap,zs=new WeakMap,br=new WeakMap,St=new WeakMap;let va={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return ni.get(E);if("objectStoreNames"===D)return E.objectStoreNames||zs.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Li(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Dd(E){return"function"==typeof E?function Id(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oo(){return Un||(Un=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Iu(this),D),Li(jc.get(this))}:function(...D){return Li(E.apply(Iu(this),D))}:function(D,...A){const k=E.call(Iu(this),D,...A);return zs.set(k,D.sort?D.sort():[D]),Li(k)}}(E):(E instanceof IDBTransaction&&function wd(E){if(ni.has(E))return;const D=new Promise((A,k)=>{const G=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",he),E.removeEventListener("abort",he)},W=()=>{A(),G()},he=()=>{k(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",W),E.addEventListener("error",he),E.addEventListener("abort",he)});ni.set(E,D)}(E),((E,D)=>D.some(A=>E instanceof A))(E,function Lg(){return Vo||(Vo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,va):E)}function Li(E){if(E instanceof IDBRequest)return function _d(E){const D=new Promise((A,k)=>{const G=()=>{E.removeEventListener("success",W),E.removeEventListener("error",he)},W=()=>{A(Li(E.result)),G()},he=()=>{k(E.error),G()};E.addEventListener("success",W),E.addEventListener("error",he)});return D.then(A=>{A instanceof IDBCursor&&jc.set(A,E)}).catch(()=>{}),St.set(D,E),D}(E);if(br.has(E))return br.get(E);const D=Dd(E);return D!==E&&(br.set(E,D),St.set(D,E)),D}const Iu=E=>St.get(E);function Ae(E,D,{blocked:A,upgrade:k,blocking:G,terminated:W}={}){const he=indexedDB.open(E,D),We=Li(he);return k&&he.addEventListener("upgradeneeded",He=>{k(Li(he.result),He.oldVersion,He.newVersion,Li(he.transaction))}),A&&he.addEventListener("blocked",()=>A()),We.then(He=>{W&&He.addEventListener("close",()=>W()),G&&He.addEventListener("versionchange",()=>G())}).catch(()=>{}),We}function $t(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),Li(A).then(()=>{})}const Du=["get","getKey","getAll","getAllKeys","count"],$c=["put","add","delete","clear"],Mn=new Map;function Cu(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Mn.get(D))return Mn.get(D);const A=D.replace(/FromIndex$/,""),k=D!==A,G=$c.includes(A);if(!(A in(k?IDBIndex:IDBObjectStore).prototype)||!G&&!Du.includes(A))return;const W=function(){var he=(0,P.Z)(function*(We,...He){const ut=this.transaction(We,G?"readwrite":"readonly");let dt=ut.store;return k&&(dt=dt.index(He.shift())),(yield Promise.all([dt[A](...He),G&&ut.done]))[0]});return function(He){return he.apply(this,arguments)}}();return Mn.set(D,W),W}!function Ed(E){va=E(va)}(E=>({...E,get:(D,A,k)=>Cu(D,A)||E.get(D,A,k),has:(D,A)=>!!Cu(D,A)||E.has(D,A)}));const ao="/firebase-messaging-sw.js",ri="/firebase-cloud-messaging-push-scope",Uo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Gc="google.c.a.c_id",Rn="google.c.a.c_l",hf="google.c.a.ts",ff="google.c.a.e";var ii=(()=>{return(E=ii||(ii={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ii;var E})();function Vi(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _s(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),k=atob(A),G=new Uint8Array(k.length);for(let W=0;W<k.length;++W)G[W]=k.charCodeAt(W);return G}const si="fcm_token_details_db",uo="fcm_token_object_Store";function Vg(E){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,P.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(si))return null;let D=null;return(yield Ae(si,5,{upgrade:(k=(0,P.Z)(function*(G,W,he,We){var He;if(W<2||!G.objectStoreNames.contains(uo))return;const ut=We.objectStore(uo),dt=yield ut.index("fcmSenderId").get(E);if(yield ut.clear(),dt)if(2===W){const Pt=dt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;D={token:Pt.fcmToken,createTime:null!==(He=Pt.createTime)&&void 0!==He?He:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Vi(Pt.vapidKey)}}}else if(3===W){const Pt=dt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Vi(Pt.auth),p256dh:Vi(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Vi(Pt.vapidKey)}}}else if(4===W){const Pt=dt;D={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Vi(Pt.auth),p256dh:Vi(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Vi(Pt.vapidKey)}}}}),function(W,he,We,He){return k.apply(this,arguments)})})).close(),yield $t(si),yield $t("fcm_vapid_details_db"),yield $t("undefined"),zc(D)?D:null;var k}),Bo.apply(this,arguments)}function zc(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Pr="firebase-messaging-store";let qc=null;function wa(){return qc||(qc=Ae("firebase-messaging-database",1,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Pr)}})),qc}function Ea(E){return co.apply(this,arguments)}function co(){return(co=(0,P.Z)(function*(E){const D=Tu(E),k=yield(yield wa()).transaction(Pr).objectStore(Pr).get(D);if(k)return k;{const G=yield Vg(E.appConfig.senderId);if(G)return yield Wc(E,G),G}})).apply(this,arguments)}function Wc(E,D){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(E,D){const A=Tu(E),G=(yield wa()).transaction(Pr,"readwrite");return yield G.objectStore(Pr).put(D,A),yield G.done,D})).apply(this,arguments)}function bd(E){return jo.apply(this,arguments)}function jo(){return(jo=(0,P.Z)(function*(E){const D=Tu(E),k=(yield wa()).transaction(Pr,"readwrite");yield k.objectStore(Pr).delete(D),yield k.done})).apply(this,arguments)}function Tu({appConfig:E}){return E.appId}const Xt=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ws(E,D){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,P.Z)(function*(E,D){const A=yield Kc(E),k=Da(D),G={method:"POST",headers:A,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(Su(E.appConfig),G)).json()}catch(he){throw Xt.create("token-subscribe-failed",{errorInfo:he?.toString()})}if(W.error)throw Xt.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw Xt.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function Td(E,D){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,P.Z)(function*(E,D){const A=yield Kc(E),k=Da(D.subscriptionOptions),G={method:"PATCH",headers:A,body:JSON.stringify(k)};let W;try{W=yield(yield fetch(`${Su(E.appConfig)}/${D.token}`,G)).json()}catch(he){throw Xt.create("token-update-failed",{errorInfo:he?.toString()})}if(W.error)throw Xt.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw Xt.create("token-update-no-token");return W.token})).apply(this,arguments)}function Zc(E,D){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,P.Z)(function*(E,D){const k={method:"DELETE",headers:yield Kc(E)};try{const W=yield(yield fetch(`${Su(E.appConfig)}/${D}`,k)).json();if(W.error)throw Xt.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(G){throw Xt.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function Su({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Kc(E){return lo.apply(this,arguments)}function lo(){return(lo=(0,P.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Da({p256dh:E,auth:D,endpoint:A,vapidKey:k}){const G={web:{endpoint:A,auth:D,p256dh:E}};return k!==Uo&&(G.web.applicationPubKey=k),G}const $o=6048e5;function xd(E){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*(E){const D=yield Yc(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Vi(D.getKey("auth")),p256dh:Vi(D.getKey("p256dh"))},k=yield Ea(E.firebaseDependencies);if(k){if(mf(k.subscriptionOptions,A))return Date.now()>=k.createTime+$o?ba(E,{token:k.token,createTime:Date.now(),subscriptionOptions:A}):k.token;try{yield Zc(E.firebaseDependencies,k.token)}catch(G){console.warn(G)}return gf(E.firebaseDependencies,A)}return gf(E.firebaseDependencies,A)})).apply(this,arguments)}function pf(E){return Es.apply(this,arguments)}function Es(){return(Es=(0,P.Z)(function*(E){const D=yield Ea(E.firebaseDependencies);D&&(yield Zc(E.firebaseDependencies,D.token),yield bd(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function ba(E,D){return Au.apply(this,arguments)}function Au(){return(Au=(0,P.Z)(function*(E,D){try{const A=yield Td(E.firebaseDependencies,D),k=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield Wc(E.firebaseDependencies,k),A}catch(A){throw yield pf(E),A}})).apply(this,arguments)}function gf(E,D){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,P.Z)(function*(E,D){const k={token:yield ws(E,D),createTime:Date.now(),subscriptionOptions:D};return yield Wc(E,k),k.token})).apply(this,arguments)}function Yc(E,D){return Md.apply(this,arguments)}function Md(){return(Md=(0,P.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_s(D)})})).apply(this,arguments)}function mf(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}function Qc(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function xu(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const k=D.notification.body;k&&(E.notification.body=k);const G=D.notification.image;G&&(E.notification.image=G);const W=D.notification.icon;W&&(E.notification.icon=W)}(D,E),function Mu(E,D){!D.data||(E.data=D.data)}(D,E),function Ru(E,D){var A,k,G,W,he;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const We=null!==(G=null===(k=D.fcmOptions)||void 0===k?void 0:k.link)&&void 0!==G?G:null===(W=D.notification)||void 0===W?void 0:W.click_action;We&&(E.fcmOptions.link=We);const He=null===(he=D.fcmOptions)||void 0===he?void 0:he.analytics_label;He&&(E.fcmOptions.analyticsLabel=He)}(D,E),D}function yf(E){return"object"==typeof E&&!!E&&Gc in E}function Ho(E,D){const A=[];for(let k=0;k<E.length;k++)A.push(E.charAt(k)),k<D.length&&A.push(D.charAt(k));return A.join("")}function Jc(E){return Xt.create("missing-app-config-values",{valueName:E})}Ho("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ho("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ta{constructor(D,A,k){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function Rd(E){if(!E||!E.options)throw Jc("App Configuration Object");if(!E.name)throw Jc("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const k of D)if(!A[k])throw Jc(k);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:G,installations:A,analyticsProvider:k}}_delete(){return Promise.resolve()}}function vf(E){return is.apply(this,arguments)}function is(){return(is=(0,P.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(ao,{scope:ri}),E.swRegistration.update().catch(()=>{})}catch(D){throw Xt.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Sa(E,D){return Is.apply(this,arguments)}function Is(){return(Is=(0,P.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield vf(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Xt.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function ho(E,D){return ss.apply(this,arguments)}function ss(){return(ss=(0,P.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Uo)})).apply(this,arguments)}function Aa(){return(Aa=(0,P.Z)(function*(E,D){if(!navigator)throw Xt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xt.create("permission-blocked");return yield ho(E,D?.vapidKey),yield Sa(E,D?.serviceWorkerRegistration),xd(E)})).apply(this,arguments)}function Ii(E,D,A){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,P.Z)(function*(E,D,A){const k=Go(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(k,{message_id:A[Gc],message_name:A[Rn],message_time:A[hf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Go(E){switch(E){case ii.NOTIFICATION_CLICKED:return"notification_open";case ii.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fo(){return(fo=(0,P.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===ii.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Qc(A)):E.onMessageHandler.next(Qc(A)));const k=A.data;yf(k)&&"1"===k[ff]&&(yield Ii(E,A.messageType,k))})).apply(this,arguments)}const po="@firebase/messaging",go=E=>{const D=new Ta(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function el(E,D){return fo.apply(this,arguments)}(D,A)),D},Pu=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:k=>function Nu(E,D){return Aa.apply(this,arguments)}(D,k)}};function Ma(){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _f(){(0,oe._registerComponent)(new le.wA("messaging",go,"PUBLIC")),(0,oe._registerComponent)(new le.wA("messaging-internal",Pu,"PRIVATE")),(0,oe.registerVersion)(po,"0.12.4"),(0,oe.registerVersion)(po,"0.12.4","esm2017")}();const Cn="analytics",tl="firebase_id",Ou="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ds="https://www.googletagmanager.com/gtag/js",Nn=new de.Yd("@firebase/analytics"),Tr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function qo(E){if(!E.startsWith(Ds)){const D=Tr.create("invalid-gtag-resource",{gtagURL:E});return Nn.warn(D.message),""}return E}function Cs(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function Pa(E,D){const A=function Fu(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:qo}),k=document.createElement("script"),G=`${Ds}?l=${E}&id=${D}`;k.src=A?A?.createScriptURL(G):G,k.async=!0,document.head.appendChild(k)}function nl(E,D,A,k,G,W){return rl.apply(this,arguments)}function rl(){return(rl=(0,P.Z)(function*(E,D,A,k,G,W){const he=k[G];try{if(he)yield D[he];else{const He=(yield Cs(A)).find(ut=>ut.measurementId===G);He&&(yield D[He.appId])}}catch(We){Nn.error(We)}E("config",G,W)})).apply(this,arguments)}function If(E,D,A,k,G){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,P.Z)(function*(E,D,A,k,G){try{let W=[];if(G&&G.send_to){let he=G.send_to;Array.isArray(he)||(he=[he]);const We=yield Cs(A);for(const He of he){const ut=We.find(Pt=>Pt.measurementId===He),dt=ut&&D[ut.appId];if(!dt){W=[];break}W.push(dt)}}0===W.length&&(W=Object.values(D)),yield Promise.all(W),E("event",k,G||{})}catch(W){Nn.error(W)}})).apply(this,arguments)}function bf(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(Ds)&&A.src.includes(E))return A;return null}const er=new class Lu{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Vu(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Di(E){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,P.Z)(function*(E){var D;const{appId:A,apiKey:k}=E,G={method:"GET",headers:Vu(k)},W=Ou.replace("{app-id}",A),he=yield fetch(W,G);if(200!==he.status&&304!==he.status){let We="";try{const He=yield he.json();null!==(D=He.error)&&void 0!==D&&D.message&&(We=He.error.message)}catch{}throw Tr.create("config-fetch-failed",{httpStatus:he.status,responseMessage:We})}return he.json()})).apply(this,arguments)}function Tf(E){return qn.apply(this,arguments)}function qn(){return(qn=(0,P.Z)(function*(E,D=er,A){const{appId:k,apiKey:G,measurementId:W}=E.options;if(!k)throw Tr.create("no-app-id");if(!G){if(W)return{measurementId:W,appId:k};throw Tr.create("no-api-key")}const he=D.getThrottleMetadata(k)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new kd;return setTimeout((0,P.Z)(function*(){We.abort()}),void 0!==A?A:6e4),Bi({appId:k,apiKey:G,measurementId:W},he,We,D)})).apply(this,arguments)}function Bi(E,D,A){return il.apply(this,arguments)}function il(){return(il=(0,P.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},k,G=er){var W;const{appId:he,measurementId:We}=E;try{yield sl(k,D)}catch(He){if(We)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${He?.message}]`),{appId:he,measurementId:We};throw He}try{const He=yield Di(E);return G.deleteThrottleMetadata(he),He}catch(He){const ut=He;if(!Wo(ut)){if(G.deleteThrottleMetadata(he),We)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${ut?.message}]`),{appId:he,measurementId:We};throw He}const dt=503===Number(null===(W=ut?.customData)||void 0===W?void 0:W.httpStatus)?(0,ae.$s)(A,G.intervalMillis,30):(0,ae.$s)(A,G.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+dt,backoffCount:A+1};return G.setThrottleMetadata(he,Pt),Nn.debug(`Calling attemptFetch again in ${dt} millis`),Bi(E,Pt,k,G)}})).apply(this,arguments)}function sl(E,D){return new Promise((A,k)=>{const G=Math.max(D-Date.now(),0),W=setTimeout(A,G);E.addEventListener(()=>{clearTimeout(W),k(Tr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Wo(E){if(!(E instanceof ae.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}class kd{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Od,Fd;function Sf(){return(Sf=(0,P.Z)(function*(E,D,A,k,G){if(G&&G.global)E("event",A,k);else{const W=yield D;E("event",A,Object.assign(Object.assign({},k),{send_to:W}))}})).apply(this,arguments)}function Hu(E){Fd=E}function Gu(E){Od=E}function rn(){return ji.apply(this,arguments)}function ji(){return(ji=(0,P.Z)(function*(){if(!(0,ae.hl)())return Nn.warn(Tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(E){return Nn.warn(Tr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*(E,D,A,k,G,W,he){var We;const He=Tf(E);He.then(mn=>{A[mn.measurementId]=mn.appId,E.options.measurementId&&mn.measurementId!==E.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mn=>Nn.error(mn)),D.push(He);const ut=rn().then(mn=>{if(mn)return k.getId()}),[dt,Pt]=yield Promise.all([He,ut]);bf(W)||Pa(W,dt.measurementId),Fd&&(G("consent","default",Fd),Hu(void 0)),G("js",new Date);const Sr=null!==(We=he?.config)&&void 0!==We?We:{};return Sr.origin="firebase",Sr.update=!0,null!=Pt&&(Sr[tl]=Pt),G("config",dt.measurementId,Sr),Od&&(G("set",Od),Gu(void 0)),dt.measurementId})).apply(this,arguments)}class Wn{constructor(D){this.app=D}_delete(){return delete kr[this.app.options.appId],Promise.resolve()}}let kr={},Fa=[];const qr={};let vo,Or,zu="dataLayer",qu=!1;function yt(E,D,A){!function Zo(){const E=[];if((0,ae.ru)()&&E.push("This is a browser extension environment."),(0,ae.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((k,G)=>`(${G+1}) ${k}`).join(" "),A=Tr.create("invalid-analytics-context",{errorInfo:D});Nn.warn(A.message)}}();const k=E.options.appId;if(!k)throw Tr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Tr.create("no-api-key");Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kr[k])throw Tr.create("already-exists",{id:k});if(!qu){!function ln(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(zu);const{wrappedGtag:W,gtagCore:he}=function Cf(E,D,A,k,G){let W=function(...he){window[k].push(arguments)};return window[G]&&"function"==typeof window[G]&&(W=window[G]),window[G]=function Df(E,D,A,k){function W(){return(W=(0,P.Z)(function*(he,...We){try{if("event"===he){const[He,ut]=We;yield If(E,D,A,He,ut)}else if("config"===he){const[He,ut]=We;yield nl(E,D,A,k,He,ut)}else if("consent"===he){const[He]=We;E("consent","update",He)}else if("get"===he){const[He,ut,dt]=We;E("get",He,ut,dt)}else if("set"===he){const[He]=We;E("set",He)}else E(he,...We)}catch(He){Nn.error(He)}})).apply(this,arguments)}return function G(he){return W.apply(this,arguments)}}(W,E,D,A),{gtagCore:W,wrappedGtag:window[G]}}(kr,Fa,qr,zu,"gtag");Or=W,vo=he,qu=!0}return kr[k]=function at(E,D,A,k,G,W,he){return Pn.apply(this,arguments)}(E,Fa,qr,D,vo,zu,A),new Wn(E)}function Va(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,P.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Eo="@firebase/analytics";!function Ci(){(0,oe._registerComponent)(new le.wA(Cn,(D,{options:A})=>yt(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,oe._registerComponent)(new le.wA("analytics-internal",function E(D){try{const A=D.getProvider(Cn).getImmediate();return{logEvent:(k,G,W)=>function $i(E,D,A,k){E=(0,ae.m9)(E),function $g(E,D,A,k,G){return Sf.apply(this,arguments)}(Or,kr[E.app.options.appId],D,A,k).catch(G=>Nn.error(G))}(A,k,G,W)}}catch(A){throw Tr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,oe.registerVersion)(Eo,"0.10.0"),(0,oe.registerVersion)(Eo,"0.10.0","esm2017")}();var ai=O(4408),Bd=O(7565);const Zu=new class dr extends Bd.v{}(class Hi extends ai.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,k=0){return null!=k&&k>0||null==k&&this.delay>0?super.requestAsyncId(D,A,k):(D.flush(this),0)}});var Sn=O(4986),ui=O(8505),Yo=O(9468),jn=O(5363);const kn=new h.GfV("7.6.1"),Ws="__angularfire_symbol__analyticsIsSupportedValue",Qo="__angularfire_symbol__analyticsIsSupported",Ku="__angularfire_symbol__remoteConfigIsSupportedValue",Gi="__angularfire_symbol__remoteConfigIsSupported",zi="__angularfire_symbol__messagingIsSupportedValue",tr="__angularfire_symbol__messagingIsSupported";function Nf(E,D,A){if(D){if(1===D.length)return D[0];const W=D.filter(he=>he.app===A);if(1===W.length)return W[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Qo]||(globalThis[Qo]=Va().then(E=>globalThis[Ws]=E).catch(()=>globalThis[Ws]=!1)),globalThis[tr]||(globalThis[tr]=Ma().then(E=>globalThis[zi]=E).catch(()=>globalThis[zi]=!1)),globalThis[Gi]||(globalThis[Gi]=zr().then(E=>globalThis[Ku]=E).catch(()=>globalThis[Ku]=!1));const ul=(E,D)=>{const A=D?[D]:(0,K.C6)(),k=[];return A.forEach(G=>{G.container.getProvider(E).instances.forEach(he=>{k.includes(he)||k.push(he)})}),k};function Ks(){}class cl{constructor(D,A=Zu){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,k){const G=this.zone;return this.delegate.schedule(function(he){G.runGuarded(()=>{D.apply(this,[he])})},A,k)}}class Ht{constructor(D){this.zone=D,this.task=null}call(D,A){const k=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ks,{},Ks,Ks)),A.pipe((0,ui.b)({next:k,complete:k,error:k})).subscribe(D).add(k)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ua=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new cl(Zone.current)),this.insideAngular=A.run(()=>new cl(Zone.current,Sn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(h.LFG(h.R0b))},E.\u0275prov=h.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Jo(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Yu(E){return Jo(),function ll(E){return function(A){return(A=A.lift(new Ht(E.ngZone))).pipe((0,Yo.R)(E.outsideAngular),(0,jn.Q)(E.insideAngular))}}(Jo())(E)}},2090:(ht,Se,O)=>{O.d(Se,{$s:()=>ns,BH:()=>ye,G6:()=>es,L:()=>fe,LL:()=>ge,Pz:()=>we,Sg:()=>ze,UG:()=>te,US:()=>le,ZB:()=>z,ZR:()=>xe,aH:()=>ke,b$:()=>jt,eu:()=>X,hl:()=>ne,jU:()=>xt,m9:()=>Hr,ne:()=>Kt,pd:()=>ar,r3:()=>zn,ru:()=>it,tV:()=>j,uI:()=>Xe,vZ:()=>jr,w1:()=>gs,xO:()=>Po,xb:()=>yi,z$:()=>$e,zI:()=>Te,zd:()=>vi});const oe=function(U){const L=[];let q=0;for(let ue=0;ue<U.length;ue++){let J=U.charCodeAt(ue);J<128?L[q++]=J:J<2048?(L[q++]=J>>6|192,L[q++]=63&J|128):55296==(64512&J)&&ue+1<U.length&&56320==(64512&U.charCodeAt(ue+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++ue)),L[q++]=J>>18|240,L[q++]=J>>12&63|128,L[q++]=J>>6&63|128,L[q++]=63&J|128):(L[q++]=J>>12|224,L[q++]=J>>6&63|128,L[q++]=63&J|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ue=[];for(let J=0;J<U.length;J+=3){const qe=U[J],Tt=J+1<U.length,Ot=Tt?U[J+1]:0,tn=J+2<U.length,Ue=tn?U[J+2]:0;let fn=(15&Ot)<<2|Ue>>6,Dr=63&Ue;tn||(Dr=64,Tt||(fn=64)),ue.push(q[qe>>2],q[(3&qe)<<4|Ot>>4],q[fn],q[Dr])}return ue.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(oe(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let q=0,ue=0;for(;q<U.length;){const J=U[q++];if(J<128)L[ue++]=String.fromCharCode(J);else if(J>191&&J<224){const qe=U[q++];L[ue++]=String.fromCharCode((31&J)<<6|63&qe)}else if(J>239&&J<365){const tn=((7&J)<<18|(63&U[q++])<<12|(63&U[q++])<<6|63&U[q++])-65536;L[ue++]=String.fromCharCode(55296+(tn>>10)),L[ue++]=String.fromCharCode(56320+(1023&tn))}else{const qe=U[q++],Tt=U[q++];L[ue++]=String.fromCharCode((15&J)<<12|(63&qe)<<6|63&Tt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const q=L?this.charToByteMapWebSafe_:this.charToByteMap_,ue=[];for(let J=0;J<U.length;){const qe=q[U.charAt(J++)],Ot=J<U.length?q[U.charAt(J)]:0;++J;const Ue=J<U.length?q[U.charAt(J)]:64;++J;const mt=J<U.length?q[U.charAt(J)]:64;if(++J,null==qe||null==Ot||null==Ue||null==mt)throw new de;ue.push(qe<<2|Ot>>4),64!==Ue&&(ue.push(Ot<<4&240|Ue>>2),64!==mt&&ue.push(Ue<<6&192|mt))}return ue},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(U){return function(U){const L=oe(U);return le.encodeByteArray(L,!0)}(U).replace(/\./g,"")},j=function(U){try{return le.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function z(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const q in L)!L.hasOwnProperty(q)||!ve(q)||(U[q]=z(U[q],L[q]));return U}function ve(U){return"__proto__"!==U}const pe=()=>{try{return function se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&j(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},ke=()=>{var U;return null===(U=pe())||void 0===U?void 0:U.config},we=U=>{var L;return null===(L=pe())||void 0===L?void 0:L[`_${U}`]};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,q)=>{this.resolve=L,this.reject=q})}wrapCallback(L){return(q,ue)=>{q?this.reject(q):this.resolve(ue),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(q):L(q,ue))}}}function ze(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ue=L||"demo-project",J=U.iat||0,qe=U.sub||U.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Tt=Object.assign({iss:`https://securetoken.google.com/${ue}`,aud:ue,iat:J,exp:J+3600,auth_time:J,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},U);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Tt)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function te(){var U;const L=null===(U=pe())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function it(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function gs(){const U=$e();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function es(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){try{return"object"==typeof indexedDB}catch{return!1}}function X(){return new Promise((U,L)=>{try{let q=!0;const ue="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ue);J.onsuccess=()=>{J.result.close(),q||self.indexedDB.deleteDatabase(ue),U(!0)},J.onupgradeneeded=()=>{q=!1},J.onerror=()=>{var qe;L((null===(qe=J.error)||void 0===qe?void 0:qe.message)||"")}}catch(q){L(q)}})}function Te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(L,q,ue){super(q),this.code=L,this.customData=ue,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(L,q,ue){this.service=L,this.serviceName=q,this.errors=ue}create(L,...q){const ue=q[0]||{},J=`${this.service}/${L}`,qe=this.errors[L],Tt=qe?function st(U,L){return U.replace(Mt,(q,ue)=>{const J=L[ue];return null!=J?String(J):`<${ue}?>`})}(qe,ue):"Error";return new xe(J,`${this.serviceName}: ${Tt} (${J}).`,ue)}}const Mt=/\{\$([^}]+)}/g;function zn(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function yi(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function jr(U,L){if(U===L)return!0;const q=Object.keys(U),ue=Object.keys(L);for(const J of q){if(!ue.includes(J))return!1;const qe=U[J],Tt=L[J];if(Ni(qe)&&Ni(Tt)){if(!jr(qe,Tt))return!1}else if(qe!==Tt)return!1}for(const J of ue)if(!q.includes(J))return!1;return!0}function Ni(U){return null!==U&&"object"==typeof U}function Po(U){const L=[];for(const[q,ue]of Object.entries(U))Array.isArray(ue)?ue.forEach(J=>{L.push(encodeURIComponent(q)+"="+encodeURIComponent(J))}):L.push(encodeURIComponent(q)+"="+encodeURIComponent(ue));return L.length?"&"+L.join("&"):""}function vi(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ue=>{if(ue){const[J,qe]=ue.split("=");L[decodeURIComponent(J)]=decodeURIComponent(qe)}}),L}function ar(U){const L=U.indexOf("?");if(!L)return"";const q=U.indexOf("#",L);return U.substring(L,q>0?q:void 0)}function Kt(U,L){const q=new et(U,L);return q.subscribe.bind(q)}class et{constructor(L,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{L(this)}).catch(ue=>{this.error(ue)})}next(L){this.forEachObserver(q=>{q.next(L)})}error(L){this.forEachObserver(q=>{q.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,q,ue){let J;if(void 0===L&&void 0===q&&void 0===ue)throw new Error("Missing Observer.");J=function hn(U,L){if("object"!=typeof U||null===U)return!1;for(const q of L)if(q in U&&"function"==typeof U[q])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:q,complete:ue},void 0===J.next&&(J.next=ts),void 0===J.error&&(J.error=ts),void 0===J.complete&&(J.complete=ts);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),qe}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,L)}sendOne(L,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{q(this.observers[L])}catch(ue){typeof console<"u"&&console.error&&console.error(ue)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ts(){}function ns(U,L=1e3,q=2){const ue=L*Math.pow(q,U),J=Math.round(.5*ue*(Math.random()-.5)*2);return Math.min(144e5,ue+J)}function Hr(U){return U&&U._delegate?U._delegate:U}},3741:(ht,Se,O)=>{var h=O(4650);let K=null;function P(){return K}const de=new h.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function fe(){return(0,h.LFG)(V)}()},providedIn:"platform"}),n})();const j=new h.OlP("Location Initialized");let V=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){z()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){z()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ve(){return new V((0,h.LFG)(de))}()},providedIn:"platform"}),n})();function z(){return!!window.history.pushState}function se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(pt)},providedIn:"root"}),n})();const pe=new h.OlP("appBaseHref");let pt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+Qe(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+Qe(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(pe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),It=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+Qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+Qe(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(pe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ce(ze(r)),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function ye(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=se,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return new ke((0,h.LFG)(me))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}var xt=(()=>((xt=xt||{})[xt.Format=0]="Format",xt[xt.Standalone=1]="Standalone",xt))(),it=(()=>((it=it||{})[it.Narrow=0]="Narrow",it[it.Abbreviated=1]="Abbreviated",it[it.Wide=2]="Wide",it[it.Short=3]="Short",it))(),jt=(()=>((jt=jt||{})[jt.Short=0]="Short",jt[jt.Medium=1]="Medium",jt[jt.Long=2]="Long",jt[jt.Full=3]="Full",jt))(),rt=(()=>((rt=rt||{})[rt.Decimal=0]="Decimal",rt[rt.Group=1]="Group",rt[rt.List=2]="List",rt[rt.PercentSign=3]="PercentSign",rt[rt.PlusSign=4]="PlusSign",rt[rt.MinusSign=5]="MinusSign",rt[rt.Exponential=6]="Exponential",rt[rt.SuperscriptingExponent=7]="SuperscriptingExponent",rt[rt.PerMille=8]="PerMille",rt[rt.Infinity=9]="Infinity",rt[rt.NaN=10]="NaN",rt[rt.TimeSeparator=11]="TimeSeparator",rt[rt.CurrencyDecimal=12]="CurrencyDecimal",rt[rt.CurrencyGroup=13]="CurrencyGroup",rt))();function xe(n,e){return lt((0,h.cg1)(n)[h.wAp.DateFormat],e)}function ge(n,e){return lt((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function st(n,e){return lt((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function Mt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===rt.CurrencyDecimal)return t[h.wAp.NumberSymbols][rt.Decimal];if(e===rt.CurrencyGroup)return t[h.wAp.NumberSymbols][rt.Group]}return r}function Jn(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function lt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function jr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const vi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ar={},In=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.ShortGMT=1]="ShortGMT",Kt[Kt.Long=2]="Long",Kt[Kt.Extended=3]="Extended",Kt))(),et=(()=>((et=et||{})[et.FullYear=0]="FullYear",et[et.Month=1]="Month",et[et.Date=2]="Date",et[et.Hours=3]="Hours",et[et.Minutes=4]="Minutes",et[et.Seconds=5]="Seconds",et[et.FractionalSeconds=6]="FractionalSeconds",et[et.Day=7]="Day",et))(),_t=(()=>((_t=_t||{})[_t.DayPeriods=0]="DayPeriods",_t[_t.Days=1]="Days",_t[_t.Months=2]="Months",_t[_t.Eras=3]="Eras",_t))();function hn(n,e,t,r){let s=function J(n){if(Tt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[s,u=1,l=1]=n.split("-").map(m=>+m);return ts(s,u-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(vi))return function qe(n){const e=new Date(0);let t=0,r=0;const s=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),s.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,l,m,w,b),e}(r)}const e=new Date(n);if(!Tt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Xr(t,e)||e;let m,l=[];for(;e;){if(m=In.exec(e),!m){l.push(e);break}{l=l.concat(m.slice(1));const x=l.pop();if(!x)break;e=x}}let w=s.getTimezoneOffset();r&&(w=L(r,w),s=function ue(n,e,t){const r=t?-1:1,s=n.getTimezoneOffset();return function q(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(L(e,s)-s))}(s,r,!0));let b="";return l.forEach(x=>{const R=function U(n){if(Hr[n])return Hr[n];let e;switch(n){case"G":case"GG":case"GGG":e=Yt(_t.Eras,it.Abbreviated);break;case"GGGG":e=Yt(_t.Eras,it.Wide);break;case"GGGGG":e=Yt(_t.Eras,it.Narrow);break;case"y":e=cn(et.FullYear,1,0,!1,!0);break;case"yy":e=cn(et.FullYear,2,0,!0,!0);break;case"yyy":e=cn(et.FullYear,3,0,!1,!0);break;case"yyyy":e=cn(et.FullYear,4,0,!1,!0);break;case"Y":e=ei(1);break;case"YY":e=ei(2,!0);break;case"YYY":e=ei(3);break;case"YYYY":e=ei(4);break;case"M":case"L":e=cn(et.Month,1,1);break;case"MM":case"LL":e=cn(et.Month,2,1);break;case"MMM":e=Yt(_t.Months,it.Abbreviated);break;case"MMMM":e=Yt(_t.Months,it.Wide);break;case"MMMMM":e=Yt(_t.Months,it.Narrow);break;case"LLL":e=Yt(_t.Months,it.Abbreviated,xt.Standalone);break;case"LLLL":e=Yt(_t.Months,it.Wide,xt.Standalone);break;case"LLLLL":e=Yt(_t.Months,it.Narrow,xt.Standalone);break;case"w":e=Ln(1);break;case"ww":e=Ln(2);break;case"W":e=Ln(1,!0);break;case"d":e=cn(et.Date,1);break;case"dd":e=cn(et.Date,2);break;case"c":case"cc":e=cn(et.Day,1);break;case"ccc":e=Yt(_t.Days,it.Abbreviated,xt.Standalone);break;case"cccc":e=Yt(_t.Days,it.Wide,xt.Standalone);break;case"ccccc":e=Yt(_t.Days,it.Narrow,xt.Standalone);break;case"cccccc":e=Yt(_t.Days,it.Short,xt.Standalone);break;case"E":case"EE":case"EEE":e=Yt(_t.Days,it.Abbreviated);break;case"EEEE":e=Yt(_t.Days,it.Wide);break;case"EEEEE":e=Yt(_t.Days,it.Narrow);break;case"EEEEEE":e=Yt(_t.Days,it.Short);break;case"a":case"aa":case"aaa":e=Yt(_t.DayPeriods,it.Abbreviated);break;case"aaaa":e=Yt(_t.DayPeriods,it.Wide);break;case"aaaaa":e=Yt(_t.DayPeriods,it.Narrow);break;case"b":case"bb":case"bbb":e=Yt(_t.DayPeriods,it.Abbreviated,xt.Standalone,!0);break;case"bbbb":e=Yt(_t.DayPeriods,it.Wide,xt.Standalone,!0);break;case"bbbbb":e=Yt(_t.DayPeriods,it.Narrow,xt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Yt(_t.DayPeriods,it.Abbreviated,xt.Format,!0);break;case"BBBB":e=Yt(_t.DayPeriods,it.Wide,xt.Format,!0);break;case"BBBBB":e=Yt(_t.DayPeriods,it.Narrow,xt.Format,!0);break;case"h":e=cn(et.Hours,1,-12);break;case"hh":e=cn(et.Hours,2,-12);break;case"H":e=cn(et.Hours,1);break;case"HH":e=cn(et.Hours,2);break;case"m":e=cn(et.Minutes,1);break;case"mm":e=cn(et.Minutes,2);break;case"s":e=cn(et.Seconds,1);break;case"ss":e=cn(et.Seconds,2);break;case"S":e=cn(et.FractionalSeconds,1);break;case"SS":e=cn(et.FractionalSeconds,2);break;case"SSS":e=cn(et.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Er(Kt.Short);break;case"ZZZZZ":e=Er(Kt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Er(Kt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Er(Kt.Long);break;default:return null}return Hr[n]=e,e}(x);b+=R?R(s,t,w):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function ts(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Xr(n,e){const t=function Qr(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(ar[t]=ar[t]||{},ar[t][e])return ar[t][e];let r="";switch(e){case"shortDate":r=xe(n,jt.Short);break;case"mediumDate":r=xe(n,jt.Medium);break;case"longDate":r=xe(n,jt.Long);break;case"fullDate":r=xe(n,jt.Full);break;case"shortTime":r=ge(n,jt.Short);break;case"mediumTime":r=ge(n,jt.Medium);break;case"longTime":r=ge(n,jt.Long);break;case"fullTime":r=ge(n,jt.Full);break;case"short":const s=Xr(n,"shortTime"),u=Xr(n,"shortDate");r=Xn(st(n,jt.Short),[s,u]);break;case"medium":const l=Xr(n,"mediumTime"),m=Xr(n,"mediumDate");r=Xn(st(n,jt.Medium),[l,m]);break;case"long":const w=Xr(n,"longTime"),b=Xr(n,"longDate");r=Xn(st(n,jt.Long),[w,b]);break;case"full":const x=Xr(n,"fullTime"),R=Xr(n,"fullDate");r=Xn(st(n,jt.Full),[x,R])}return r&&(ar[t][e]=r),r}function Xn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function bt(n,e,t="-",r,s){let u="";(n<0||s&&n<=0)&&(s?n=1-n:(n=-n,u=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),u+l}function cn(n,e,t=0,r=!1,s=!1){return function(u,l){let m=function ko(n,e){switch(n){case et.FullYear:return e.getFullYear();case et.Month:return e.getMonth();case et.Date:return e.getDate();case et.Hours:return e.getHours();case et.Minutes:return e.getMinutes();case et.Seconds:return e.getSeconds();case et.FractionalSeconds:return e.getMilliseconds();case et.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===et.Hours)0===m&&-12===t&&(m=12);else if(n===et.FractionalSeconds)return function wr(n,e){return bt(n,3).substring(0,e)}(m,e);const w=Mt(l,rt.MinusSign);return bt(m,e,w,r,s)}}function Yt(n,e,t=xt.Format,r=!1){return function(s,u){return function ur(n,e,t,r,s,u){switch(t){case _t.Months:return function ne(n,e,t){const r=(0,h.cg1)(n),u=lt([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return lt(u,t)}(e,s,r)[n.getMonth()];case _t.Days:return function es(n,e,t){const r=(0,h.cg1)(n),u=lt([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return lt(u,t)}(e,s,r)[n.getDay()];case _t.DayPeriods:const l=n.getHours(),m=n.getMinutes();if(u){const b=function zn(n){const e=(0,h.cg1)(n);return Jn(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?jr(r):[jr(r[0]),jr(r[1])])}(e),x=function Jr(n,e,t){const r=(0,h.cg1)(n);Jn(r);const u=lt([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return lt(u,t)||[]}(e,s,r),R=b.findIndex($=>{if(Array.isArray($)){const[Z,Ie]=$,Be=l>=Z.hours&&m>=Z.minutes,Le=l<Ie.hours||l===Ie.hours&&m<Ie.minutes;if(Z.hours<Ie.hours){if(Be&&Le)return!0}else if(Be||Le)return!0}else if($.hours===l&&$.minutes===m)return!0;return!1});if(-1!==R)return x[R]}return function io(n,e,t){const r=(0,h.cg1)(n),u=lt([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return lt(u,t)}(e,s,r)[l<12?0:1];case _t.Eras:return function X(n,e){return lt((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(s,u,n,e,t,r)}}function Er(n){return function(e,t,r){const s=-1*r,u=Mt(t,rt.MinusSign),l=s>0?Math.floor(s/60):Math.ceil(s/60);switch(n){case Kt.Short:return(s>=0?"+":"")+bt(l,2,u)+bt(Math.abs(s%60),2,u);case Kt.ShortGMT:return"GMT"+(s>=0?"+":"")+bt(l,1,u);case Kt.Long:return"GMT"+(s>=0?"+":"")+bt(l,2,u)+":"+bt(Math.abs(s%60),2,u);case Kt.Extended:return 0===r?"Z":(s>=0?"+":"")+bt(l,2,u)+":"+bt(Math.abs(s%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function ns(n){return ts(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Ln(n,e=!1){return function(t,r){let s;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();s=1+Math.floor((l+u)/7)}else{const u=ns(t),l=function Ir(n){const e=ts(n,0,1).getDay();return ts(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-l.getTime();s=1+Math.round(m/6048e5)}return bt(s,n,Mt(r,rt.MinusSign))}}function ei(n,e=!1){return function(t,r){return bt(ns(t).getFullYear(),n,Mt(r,rt.MinusSign),e)}}const Hr={};function L(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Tt(n){return n instanceof Date&&!isNaN(n.valueOf())}class Nc{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nn=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Nc(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Gs(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Gs(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Gs(n,e){n.context.$implicit=e.item}let cr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new cd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class cd{constructor(){this.$implicit=null,this.ngIf=null}}function lr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function wn(n,e){return new h.vHH(2100,!1)}class hd{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class kc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const fd=new kc,sf=new hd;let Oc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return fd;if((0,h.F4k)(t))return sf;throw wn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const Fg=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ma=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",s,u){if(null==t||""===t||t!=t)return null;try{return hn(t,r,u||this.locale,s??this.defaultTimezone??void 0)}catch(l){throw wn()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Fg,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const yu="browser";function vd(n){return n===yu}function vu(n){return"server"===n}let vs=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new wu((0,h.LFG)(de),window)}),n})();class wu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qc extends class mf extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){K||(K=n)}(new Qc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Mu(){return xu=xu||document.querySelector("base"),xu?xu.getAttribute("href"):null}();return null==t?null:function yf(n){Ru=Ru||document.createElement("a"),Ru.setAttribute("href",n);const e=Ru.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){xu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function du(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ru,xu=null;const Ho=new h.OlP("TRANSITION_ID"),Jc=[{provide:h.ip1,useFactory:function Rd(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Ho,de,h.zs3],multi:!0}];let vf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const is=new h.OlP("EventManagerPlugins");let Sa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(is),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Is{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let ho=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ss=(()=>{class n extends ho{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,s.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Nu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Nu))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Nu(n){P().remove(n)}const Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ii=/%COMP%/g;function go(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?go(n,s,t):(s=s.replace(Ii,n),t.push(s))}return t}function Pu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ma=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new mo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case h.ifc.ShadowDom:return new wf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=go(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sa),h.LFG(ss),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Aa[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ra(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ra(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Aa[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Aa[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pu(r)):this.eventManager.addEventListener(e,t,Pu(r))}}function Ra(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mo extends zo{constructor(e,t,r,s){super(e),this.component=r;const u=go(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function po(n){return"_ngcontent-%COMP%".replace(Ii,n)}(s+"-"+r.id),this.hostAttr=function xa(n){return"_nghost-%COMP%".replace(Ii,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class wf extends zo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=go(s.id,s.styles,[]);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ku=(()=>{class n extends Is{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const as=["alt","control","meta","shift"],jg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Cn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tl=(()=>{class n extends Is{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),as.forEach(b=>{const x=r.indexOf(b);x>-1&&(r.splice(x,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=jg[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),as.forEach(l=>{l!==s&&(0,Cn[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:yu},{provide:h.g9A,useValue:function yo(){Qc.makeCurrent()},multi:!0},{provide:de,useFactory:function qo(){return(0,h.RDi)(document),document},deps:[]}]),Pa=new h.OlP(""),ln=[{provide:h.rWj,useClass:class Ta{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],nl=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Tr(){return new h.qLn},deps:[]},{provide:is,useClass:ku,multi:!0,deps:[de,h.R0b,h.Lbi]},{provide:is,useClass:tl,multi:!0,deps:[de]},{provide:Ma,useClass:Ma,deps:[Sa,ss,h.AFp]},{provide:h.FYo,useExisting:Ma},{provide:ho,useExisting:ss},{provide:ss,useClass:ss,deps:[de]},{provide:Sa,useClass:Sa,deps:[is,h.R0b]},{provide:class Eu{},useClass:vf,deps:[]},[]];let rl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Ho,useExisting:h.AFp},Jc]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pa,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...nl,...ln],imports:[Uc,h.hGG]}),n})(),bf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Cf(){return new bf((0,h.LFG)(de))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=O(8996),ji=O(3269);function at(...n){const e=(0,ji.yG)(n);return(0,rn.D)(n,e)}var Pn=O(7579);class Wn extends Pn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Fa=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qr=O(9751);const{isArray:zu}=Array,{getPrototypeOf:La,prototype:vo,keys:Or}=Object;function qu(n){if(1===n.length){const e=n[0];if(zu(e))return{args:e,keys:null};if(function Bn(n){return n&&"object"==typeof n&&La(n)===vo}(e)){const t=Or(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zo=O(4671),yt=O(4004);const{isArray:Ld}=Array;function Va(n){return(0,yt.U)(e=>function _o(n,e){return Ld(e)?n(...e):n(e)}(n,e))}function Wu(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Zn=O(5403),Vd=O(9672);function qs(...n){const e=(0,ji.yG)(n),t=(0,ji.jO)(n),{args:r,keys:s}=qu(n);if(0===r.length)return(0,rn.D)([],e);const u=new qr.y(function al(n,e,t=Zo.y){return r=>{wo(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)wo(e,()=>{const b=(0,rn.D)(n[w],e);let x=!1;b.subscribe((0,Zn.x)(r,R=>{u[w]=R,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Wu(s,l):Zo.y));return t?u.pipe(Va(t)):u}function wo(n,e,t){n?(0,Vd.f)(t,n,e):e()}var Ko=O(8189);function $i(...n){return function xf(){return(0,Ko.J)(1)}()((0,rn.D)(n,(0,ji.yG)(n)))}var bs=O(8421);function Eo(n){return new qr.y(e=>{(0,bs.Xf)(n()).subscribe(e)})}var Ud=O(9635),Ci=O(576);function ai(n,e){const t=(0,Ci.m)(n)?n:()=>n,r=s=>s.error(t());return new qr.y(e?s=>e.schedule(r,0,s):r)}var Hi=O(515),Bd=O(727),dr=O(4482);function Zu(){return(0,dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class jd extends qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bd.w0.EMPTY)}return e}refCount(){return Zu()(this)}}function Sn(n,e){return(0,dr.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,Zn.x)(r,w=>{s?.unsubscribe();let b=0;const x=u++;(0,bs.Xf)(n(w,x)).subscribe(s=(0,Zn.x)(r,R=>r.next(e?e(w,R,x,b++):R),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function ui(n){return n<=0?()=>Hi.E:(0,dr.e)((e,t)=>{let r=0;e.subscribe((0,Zn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Yo(...n){const e=(0,ji.yG)(n);return(0,dr.e)((t,r)=>{(e?$i(n,t,e):$i(n,t)).subscribe(r)})}function jn(n,e){return(0,dr.e)((t,r)=>{let s=0;t.subscribe((0,Zn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var kn=O(5577);function Ws(n){return(0,dr.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Qo(n=Ku){return(0,dr.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Ku(){return new Fa}function Gi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jn((s,u)=>n(s,u,r)):Zo.y,ui(1),t?Ws(e):Qo(()=>new Fa))}function zi(n,e){return(0,Ci.m)(e)?(0,kn.z)(n,e,1):(0,kn.z)(n,1)}var tr=O(8505);function us(n){return(0,dr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Zn.x)(t,void 0,void 0,l=>{u=(0,bs.Xf)(n(l,us(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Mf(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,Zn.x)(l,x=>{const R=b++;w=m?n(w,x,R):(m=!0,x),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}function Zs(n,e){return(0,dr.e)(Mf(n,e,arguments.length>=2,!0))}function Rf(n){return n<=0?()=>Hi.E:(0,dr.e)((e,t)=>{let r=[];e.subscribe((0,Zn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Nf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jn((s,u)=>n(s,u,r)):Zo.y,Rf(1),t?Ws(e):Qo(()=>new Fa))}function Ks(n){return(0,yt.U)(()=>n)}function cl(n){return(0,dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ht="primary",Ua=Symbol("RouteTitle");class Jo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ts(n){return new Jo(n)}function Ys(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function cs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Yu(n[s],e[s]))return!1;return!0}function Yu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function ll(n){return Array.prototype.concat.apply([],n)}function qi(n){return n.length>0?n[n.length-1]:null}function E(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function D(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,rn.D)(Promise.resolve(n)):at(n)}const A=!1,G={exact:function He(n,e,t){if(!mr(n.segments,e.segments)||!Sr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!He(n.children[r],e.children[r],t))return!1;return!0},subset:dt},W={exact:function We(n,e){return cs(n,e)},subset:function ut(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Yu(n[t],e[t]))},ignored:()=>!0};function he(n,e,t){return G[t.paths](n.root,e.root,t.matrixParams)&&W[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dt(n,e,t){return Pt(n,e,e.segments,t)}function Pt(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!mr(s,t)||e.hasChildren()||!Sr(s,t,r))}if(n.segments.length===t.length){if(!mr(n.segments,t)||!Sr(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!dt(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(mr(n.segments,s)&&Sr(n.segments,s,r)&&n.children[Ht])&&Pt(n.children[Ht],e,u,r)}}function Sr(n,e,t){return e.every((r,s)=>W[t](n[s].parameters,r.parameters))}class mn{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ts(this.queryParams)),this._queryParamMap}toString(){return Gg.serialize(this)}}class ft{constructor(e,t){this.segments=e,this.children=t,this.parent=null,E(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pf(this)}}class Wi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ts(this.parameters)),this._parameterMap}toString(){return zg(this)}}function mr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Qu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new dl},providedIn:"root"}),n})();class dl{parse(e){const t=new fl(e);return new mn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xo(e.root,!0)}`,r=function fv(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Ba(t)}=${Ba(s)}`).join("&"):`${Ba(t)}=${Ba(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Hd(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Gg=new dl;function Pf(n){return n.segments.map(e=>zg(e)).join("/")}function Xo(n,e){if(!n.hasChildren())return Pf(n);if(e){const t=n.children[Ht]?Xo(n.children[Ht],!1):"",r=[];return E(n.children,(s,u)=>{u!==Ht&&r.push(`${u}:${Xo(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ss(n,e){let t=[];return E(n.children,(r,s)=>{s===Ht&&(t=t.concat(e(r,s)))}),E(n.children,(r,s)=>{s!==Ht&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Ht?[Xo(n.children[Ht],!1)]:[`${s}:${Xo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${Pf(n)}/${t[0]}`:`${Pf(n)}/(${t.join("//")})`}}function kf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ba(n){return kf(n).replace(/%3B/gi,";")}function Ju(n){return kf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gd(n){return decodeURIComponent(n)}function Of(n){return Gd(n.replace(/\+/g,"%20"))}function zg(n){return`${Ju(n.path)}${function hl(n){return Object.keys(n).map(e=>`;${Ju(e)}=${Ju(n[e])}`).join("")}(n.parameters)}`}const qg=/^[^\/()?;=#]+/;function Xu(n){const e=n.match(qg);return e?e[0]:""}const Wg=/^[^=?&#]+/,gw=/^[^&#]+/;class fl{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new ft(e,t)),r}parseSegment(){const e=Xu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,A);return this.capture(e),new Wi(Gd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Xu(this.remaining);s&&(r=s,this.capture(r))}e[Gd(t)]=Gd(r)}parseQueryParam(e){const t=function ea(n){const e=n.match(Wg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function ec(n){const e=n.match(gw);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Of(t),u=Of(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xu(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,A);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ht);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Ht]:new ft([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,A)}}function zd(n){return n.segments.length>0?new ft([],{[Ht]:n}):n}function tc(n){const e={};for(const r of Object.keys(n.children)){const u=tc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ff(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new ft(n.segments.concat(e.segments),e.children)}return n}(new ft(n.segments,e))}function ja(n){return n instanceof mn}function gv(n,e,t,r,s){if(0===t.length)return Ha(e.root,e.root,e.root,r,s);const u=function Wd(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vf(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return E(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Vf(t,e,r)}(t);return u.toRoot()?Ha(e.root,e.root,new ft([],{}),r,s):function l(w){const b=function Io(n,e,t,r){if(n.isAbsolute)return new Ga(e.root,!0,0);if(-1===r)return new Ga(t,t===e.root,0);return function gl(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.vHH(4005,!1);s=r.segments.length}return new Ga(r,!1,s-u)}(t,r+(nc(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),x=b.processChildren?za(b.segmentGroup,b.index,u.commands):Uf(b.segmentGroup,b.index,u.commands);return Ha(e.root,b.segmentGroup,x,r,s)}(n.snapshot?._lastPathIndex)}function nc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $a(n){return"object"==typeof n&&null!=n&&n.outlets}function Ha(n,e,t,r,s){let l,u={};r&&E(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(x=>`${x}`):`${w}`}),l=n===e?t:qd(n,e,t);const m=zd(tc(l));return new mn(m,u,s)}function qd(n,e,t){const r={};return E(n.children,(s,u)=>{r[u]=s===e?t:qd(s,e,t)}),new ft(n.segments,r)}class Vf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&nc(r[0]))throw new h.vHH(4003,!1);const s=r.find($a);if(s&&s!==qi(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ga{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Uf(n,e,t){if(n||(n=new ft([],{})),0===n.segments.length&&n.hasChildren())return za(n,e,t);const r=function Zd(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if($a(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!jf(w,b,l))return u;r+=2}else{if(!jf(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new ft(n.segments.slice(0,r.pathIndex),{});return u.children[Ht]=new ft(n.segments.slice(r.pathIndex),n.children),za(u,0,s)}return r.match&&0===s.length?new ft(n.segments,{}):r.match&&!n.hasChildren()?Bf(n,e,t):r.match?za(n,0,s):Bf(n,e,t)}function za(n,e,t){if(0===t.length)return new ft(n.segments,{});{const r=function Kg(n){return $a(n[0])?n[0].outlets:{[Ht]:n}}(t),s={};return E(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=Uf(n.children[l],e,u))}),E(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new ft(n.segments,s)}}function Bf(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if($a(u)){const w=Yg(u.outlets);return new ft(r,w)}if(0===s&&nc(t[0])){r.push(new Wi(n.segments[e].path,Kd(t[0]))),s++;continue}const l=$a(u)?u.outlets[Ht]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&nc(m)?(r.push(new Wi(l,Kd(m))),s+=2):(r.push(new Wi(l,{})),s++)}return new ft(r,{})}function Yg(n){const e={};return E(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Bf(new ft([],{}),0,t))}),e}function Kd(n){const e={};return E(n,(t,r)=>e[r]=`${t}`),e}function jf(n,e,t){return n==t.path&&cs(e,t.parameters)}class As{constructor(e,t){this.id=e,this.url=t}}class Yd extends As{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xs extends As{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ms extends As{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $f extends As{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qd extends As{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hf extends As{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gf extends As{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ml extends As{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mv extends As{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zf{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wf{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ic{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Qg(e,this._root).map(t=>t.value)}}function Xd(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xd(n,t);if(r)return r}return null}function Qg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Qg(n,t);if(r.length)return r.unshift(e),r}return[]}class Rs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Js(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Jg extends ic{constructor(e,t){super(e),this.snapshot=t,rh(this,e)}toString(){return this.snapshot.toString()}}function eh(n,e){const t=function th(n,e){const l=new yl([],{},{},"",{},Ht,e,null,n.root,-1,{});return new Yf("",new Rs(l,[]))}(n,e),r=new Wn([new Wi("",{})]),s=new Wn({}),u=new Wn({}),l=new Wn({}),m=new Wn(""),w=new Wr(r,s,l,m,u,Ht,e,t.root);return w.snapshot=t.root,new Jg(new Rs(w,[]),t)}class Wr{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,yt.U)(b=>b[Ua]))??at(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Ts(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Ts(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nh(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Xg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yl{constructor(e,t,r,s,u,l,m,w,b,x,R,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.[Ua],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=x,this._correctedLastPathIndex=$??x,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ts(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ts(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yf extends ic{constructor(e,t){super(t),this.url=e,rh(this,t)}toString(){return ci(this._root)}}function rh(n,e){e.value._routerState=n,e.children.forEach(t=>rh(n,t))}function ci(n){const e=n.children.length>0?` { ${n.children.map(ci).join(", ")} } `:"";return`${n.value}${e}`}function vl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),cs(e.params,t.params)||n.params.next(t.params),function $d(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),cs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _l(n,e){const t=cs(n.params,e.params)&&function Qs(n,e){return mr(n,e)&&n.every((t,r)=>cs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_l(n.parent,e.parent))}function hr(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Do(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return hr(n,r,s);return hr(n,r)})}(n,e,t);return new Rs(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>hr(n,m)),l}}const r=function em(n){return new Wr(new Wn(n.url),new Wn(n.params),new Wn(n.queryParams),new Wn(n.fragment),new Wn(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>hr(n,u));return new Rs(r,s)}}const Qf="ngNavigationCancelingError";function vv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Jf(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Jf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Qf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _v(n){return wv(n)&&ja(n.url)}function wv(n){return n&&n[Qf]}class tm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wl,this.attachRef=null}}let wl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tm,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y=!1;let f=(()=>{class n{constructor(t,r,s,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=s||Ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,y);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,y);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,y);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,y);this._activatedRoute=t;const s=this.location,l=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new p(t,m,s.injector);if(r&&function _(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wl),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class p{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wr?this.route:e===wl?this.childContexts:this.parent.get(e,t)}}let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[f],encapsulation:2}),n})();function M(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function El(n){const e=n.children&&n.children.map(El),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=T),t}function ls(n){return n.outlet||Ht}function Il(n,e){const t=n.filter(r=>ls(r)===e);return t.push(...n.filter(r=>ls(r)!==e)),t}function sc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Xf{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Js(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),E(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Js(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Js(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Js(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new rc(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Zf(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(vl(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),vl(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=sc(s.snapshot),w=m?.get(h._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ep{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oc{constructor(e,t){this.component=e,this.route=t}}function ac(n,e,t){const r=n._root;return qa(r,e?e._root:null,t,[r.value])}function ta(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function qa(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Js(e);return n.children.forEach(l=>{(function fr(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function RC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mr(n.url,e.url)||!cs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_l(n,e)||!cs(n.queryParams,e.queryParams);default:return!_l(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new ep(r)):(u.data=l.data,u._resolvedData=l._resolvedData),qa(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new oc(m.outlet.component,l))}else l&&tp(e,m,s),s.canActivateChecks.push(new ep(r)),qa(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),E(u,(l,m)=>tp(l,t.getContext(m),s)),s}function tp(n,e,t){const r=Js(n),s=n.value;E(r,(u,l)=>{tp(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new oc(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Dl(n){return"function"==typeof n}function Cl(n){return n instanceof Fa||"EmptyError"===n?.name}const ih=Symbol("INITIAL_VALUE");function bl(){return Sn(n=>qs(n.map(e=>e.pipe(ui(1),Yo(ih)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===ih)return ih;if(!1===t||t instanceof mn)return t}return!0}),jn(e=>e!==ih),ui(1)))}function Dv(n){return(0,Ud.z)((0,tr.b)(e=>{if(ja(e))throw vv(0,e)}),(0,yt.U)(e=>!0===e))}const Wa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Dw(n,e,t,r,s){const u=np(n,e,t);return u.matched?function Iw(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?at(s.map(l=>{const m=ta(l,n);return D(function FC(n){return n&&Dl(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(bl(),Dv()):at(!0)}(r=M(e,r),e,t).pipe((0,yt.U)(l=>!0===l?u:{...Wa})):at(u)}function np(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Wa}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Ys)(t,n,e);if(!s)return{...Wa};const u={};E(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function Tl(n,e,t,r,s="corrected"){if(t.length>0&&function im(n,e,t){return t.some(r=>rp(n,e,r)&&ls(r)!==Ht)}(n,t,r)){const l=new ft(e,function Cv(n,e,t,r){const s={};s[Ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ls(u)!==Ht){const l=new ft([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[ls(u)]=l}return s}(n,e,r,new ft(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Sl(n,e,t){return t.some(r=>rp(n,e,r))}(n,t,r)){const l=new ft(n.segments,function UC(n,e,t,r,s,u){const l={};for(const m of r)if(rp(n,t,m)&&!s[ls(m)]){const w=new ft([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[ls(m)]=w}return{...s,...l}}(n,e,t,r,n.children,s));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new ft(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function rp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sm(n,e,t,r){return!!(ls(n)===r||r!==Ht&&rp(e,t,n))&&("**"===n.path||np(e,n,t).matched)}function Cw(n,e,t){return 0===e.length&&!n.children[t]}const om=!1;class ip{constructor(e){this.segmentGroup=e||null}}class Al{constructor(e){this.urlTree=e}}function sp(n){return ai(new ip(n))}function bw(n){return ai(new Al(n))}class $C{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=Tl(this.urlTree.root,[],[],this.config).segmentGroup,t=new ft(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ht).pipe((0,yt.U)(u=>this.createUrlTree(tc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(us(u=>{if(u instanceof Al)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ip?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ht).pipe((0,yt.U)(s=>this.createUrlTree(tc(s),e.queryParams,e.fragment))).pipe(us(s=>{throw s instanceof ip?this.noMatchError(s):s}))}noMatchError(e){return new h.vHH(4002,om)}createUrlTree(e,t,r){const s=zd(e);return new mn(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(u=>new ft([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,rn.D)(s).pipe(zi(u=>{const l=r.children[u],m=Il(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,yt.U)(w=>({segment:w,outlet:u})))}),Zs((u,l)=>(u[l.outlet]=l.segment,u),{}),Nf())}expandSegment(e,t,r,s,u,l){return(0,rn.D)(r).pipe(zi(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(us(b=>{if(b instanceof ip)return at(null);throw b}))),Gi(m=>!!m),us((m,w)=>{if(Cl(m))return Cw(t,s,u)?at(new ft([],{})):sp(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return sm(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):sp(t):sp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bw(u):this.lineralizeSegments(r,u).pipe((0,kn.z)(l=>{const m=new ft(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:x}=np(t,s,u);if(!m)return sp(t);const R=this.applyRedirectCommands(w,s.redirectTo,x);return s.redirectTo.startsWith("/")?bw(R):this.lineralizeSegments(s,R).pipe((0,kn.z)($=>this.expandSegment(e,t,r,$.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=M(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,yt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new ft(s,{})))):at(new ft(s,{}))):Dw(t,r,s,e).pipe(Sn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,kn.z)(x=>{const R=x.injector??e,$=x.routes,{segmentGroup:Z,slicedSegments:Ie}=Tl(t,m,w,$),Be=new ft(Z.segments,Z.children);if(0===Ie.length&&Be.hasChildren())return this.expandChildren(R,$,Be).pipe((0,yt.U)(Nt=>new ft(m,Nt)));if(0===$.length&&0===Ie.length)return at(new ft(m,{}));const Le=ls(r)===u;return this.expandSegment(R,Be,$,Ie,Le?Ht:u,!0).pipe((0,yt.U)(kt=>new ft(m.concat(kt.segments),kt.children)))})):sp(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function Iv(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?at(!0):at(s.map(l=>{const m=ta(l,n);return D(function NC(n){return n&&Dl(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(bl(),Dv())}(e,t,r).pipe((0,kn.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,tr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function jC(n){return ai(Jf(om,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return at(r);if(s.numberOfChildren>1||!s.children[Ht])return ai(new h.vHH(4e3,om));s=s.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new mn(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return E(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return E(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new ft(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,om);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Sw{}class op{constructor(e,t,r,s,u,l,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Tl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ht).pipe((0,yt.U)(t=>{if(null===t)return null;const r=new yl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Rs(r,t),u=new Yf(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=nh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(zi(s=>{const u=r.children[s],l=Il(t,s);return this.processSegmentGroup(e,l,u,s)}),Zs((s,u)=>s&&u?(s.push(...u),s):null),function ul(n,e=!1){return(0,dr.e)((t,r)=>{let s=0;t.subscribe((0,Zn.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Ws(null),Nf(),(0,yt.U)(s=>{if(null===s)return null;const u=Aw(s);return function GC(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,rn.D)(t).pipe(zi(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Gi(l=>!!l),us(l=>{if(Cl(l))return Cw(r,s,u)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!sm(t,r,s,u))return at(null);let l;if("**"===t.path){const m=s.length>0?qi(s).parameters:{},w=xw(r)+s.length;l=at({snapshot:new yl(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rw(t),ls(t),t.component??t._loadedComponent??null,t,Tv(r),w,Sv(t),w),consumedSegments:[],remainingSegments:[]})}else l=Dw(r,t,s,e).pipe((0,yt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:x})=>{if(!m)return null;const R=xw(r)+w.length;return{snapshot:new yl(w,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Rw(t),ls(t),t.component??t._loadedComponent??null,t,Tv(r),R,Sv(t),R),consumedSegments:w,remainingSegments:b}}));return l.pipe(Sn(m=>{if(null===m)return at(null);const{snapshot:w,consumedSegments:b,remainingSegments:x}=m;e=t._injector??e;const R=t._loadedInjector??e,$=function sh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:Ie}=Tl(r,b,x,$.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution);if(0===Ie.length&&Z.hasChildren())return this.processChildren(R,$,Z).pipe((0,yt.U)(Le=>null===Le?null:[new Rs(w,Le)]));if(0===$.length&&0===Ie.length)return at([new Rs(w,[])]);const Be=ls(t)===u;return this.processSegment(R,$,Z,Ie,Be?Ht:u).pipe((0,yt.U)(Le=>null===Le?null:[new Rs(w,Le)]))}))}}function ap(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Aw(n){const e=[],t=new Set;for(const r of n){if(!ap(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Aw(r.children);e.push(new Rs(r.value,s))}return e.filter(r=>!t.has(r))}function Tv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Rw(n){return n.data||{}}function Sv(n){return n.resolve||{}}function Pw(n){return"string"==typeof n.title||null===n.title}function Rv(n){return Sn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,yt.U)(()=>e)):at(e)})}let kw=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Ht);return r}getResolvedTitleForRoute(t){return t.data[Ua]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ow)},providedIn:"root"}),n})(),Ow=(()=>{class n extends kw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qC{}class oh extends class WC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const um=new h.OlP("",{providedIn:"root",factory:()=>({})}),Lw=new h.OlP("ROUTES");let Vw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=D(t.loadComponent()).pipe((0,tr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),cl(()=>{this.componentLoaders.delete(t)})),s=new jd(r,()=>new Pn.x).pipe(Zu());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,x=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=ll(w.get(Lw,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(El),injector:w}}),cl(()=>{this.childrenLoaders.delete(r)})),l=new jd(u,()=>new Pn.x).pipe(Zu());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return D(t()).pipe((0,kn.z)(r=>r instanceof h.YKP||Array.isArray(r)?at(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Uw{}class hx{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fx(n){throw n}function Bw(n,e,t){return e.parse("/")}const ZC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function $w(){const n=(0,h.f3M)(Qu),e=(0,h.f3M)(wl),t=(0,h.f3M)(ke),r=(0,h.f3M)(h.zs3),s=(0,h.f3M)(h.Sil),u=(0,h.f3M)(Lw,{optional:!0})??[],l=(0,h.f3M)(um,{optional:!0})??{},m=(0,h.f3M)(Ow),w=(0,h.f3M)(kw,{optional:!0}),b=(0,h.f3M)(Uw,{optional:!0}),x=(0,h.f3M)(qC,{optional:!0}),R=new yn(null,n,e,t,r,s,ll(u));return b&&(R.urlHandlingStrategy=b),x&&(R.routeReuseStrategy=x),R.titleStrategy=w??m,function KC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,R),R}let yn=(()=>{class n{constructor(t,r,s,u,l,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Pn.x,this.errorHandler=fx,this.malformedUriErrorHandler=Bw,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new hx,this.routeReuseStrategy=new oh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Vw),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new qf($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new zf($)),this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const R=l.get(h.R0b);this.isNgZoneEnabled=R instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function k(){return new mn(new ft([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=eh(this.currentUrlTree,this.rootComponentType),this.transitions=new Wn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(jn(s=>0!==s.id),(0,yt.U)(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Sn(s=>{let u=!1,l=!1;return at(s).pipe((0,tr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Sn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Nv(m.source)&&(this.browserUrlTree=m.extractedUrl),at(m).pipe(Sn(R=>{const $=this.transitions.getValue();return r.next(new Yd(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),$!==this.transitions.getValue()?Hi.E:Promise.resolve(R)}),function Tw(n,e,t,r){return Sn(s=>function bv(n,e,t,r,s){return new $C(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,yt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tr.b)(R=>{this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects},s.urlAfterRedirects=R.urlAfterRedirects}),function Nw(n,e,t,r,s,u){return(0,kn.z)(l=>function HC(n,e,t,r,s,u,l="emptyOnly",m="legacy"){return new op(n,e,t,r,s,l,m,u).recognize().pipe(Sn(w=>null===w?function cx(n){return new qr.y(e=>e.error(n))}(new Sw):at(w)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,s,u).pipe((0,yt.U)(m=>({...l,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tr.b)(R=>{if(s.targetSnapshot=R.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(Z,R)}this.browserUrlTree=R.urlAfterRedirects}const $=new Qd(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next($)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Z,source:Ie,restoredState:Be,extras:Le}=m,Dt=new Yd($,this.serializeUrl(Z),Ie,Be);r.next(Dt);const kt=eh(Z,this.rootComponentType).snapshot;return at(s={...m,targetSnapshot:kt,urlAfterRedirects:Z,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Hi.E}),(0,tr.b)(m=>{const w=new Hf(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,yt.U)(m=>s={...m,guards:ac(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function vw(n,e){return(0,kn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?at({...t,guardsResult:!0}):function _w(n,e,t,r){return(0,rn.D)(n).pipe((0,kn.z)(s=>function VC(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(m=>{const w=sc(e)??s,b=ta(m,w);return D(function OC(n){return n&&Dl(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Gi())})).pipe(bl()):at(!0)}(s.component,s.route,t,e,r)),Gi(s=>!0!==s,!0))}(l,r,s,n).pipe((0,kn.z)(m=>m&&function yw(n){return"boolean"==typeof n}(m)?function LC(n,e,t,r){return(0,rn.D)(e).pipe(zi(s=>$i(function Ew(n,e){return null!==n&&e&&e(new Wf(n)),at(!0)}(s.route.parent,r),function ww(n,e){return null!==n&&e&&e(new Kf(n)),at(!0)}(s.route,r),function ux(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function rm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Eo(()=>at(l.guards.map(w=>{const b=sc(l.node)??t,x=ta(w,b);return D(function kC(n){return n&&Dl(n.canActivateChild)}(x)?x.canActivateChild(r,n):b.runInContext(()=>x(r,n))).pipe(Gi())})).pipe(bl())));return at(u).pipe(bl())}(n,s.path,t),function Ev(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const s=r.map(u=>Eo(()=>{const l=sc(e)??t,m=ta(u,l);return D(function PC(n){return n&&Dl(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Gi())}));return at(s).pipe(bl())}(n,s.route,t))),Gi(s=>!0!==s,!0))}(r,u,n,e):at(m)),(0,yt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,tr.b)(m=>{if(s.guardsResult=m.guardsResult,ja(m.guardsResult))throw vv(0,m.guardsResult);const w=new Gf(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),jn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Rv(m=>{if(m.guards.canActivateChecks.length)return at(m).pipe((0,tr.b)(w=>{const b=new ml(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Sn(w=>{let b=!1;return at(w).pipe(function Av(n,e){return(0,kn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return at(t);let u=0;return(0,rn.D)(s).pipe(zi(l=>function xv(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!Pw(s)&&(u[Ua]=s.title),function zC(n,e,t,r){const s=function Mv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return at({});const u={};return(0,rn.D)(s).pipe((0,kn.z)(l=>function up(n,e,t,r){const s=sc(e)??r,u=ta(n,s);return D(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Gi(),(0,tr.b)(m=>{u[l]=m}))),Rf(1),Ks(u),us(l=>Cl(l)?Hi.E:ai(l)))}(u,n,e,r).pipe((0,yt.U)(l=>(n._resolvedData=l,n.data=nh(n,t).resolve,s&&Pw(s)&&(n.data[Ua]=s.title),null)))}(l.route,r,n,e)),(0,tr.b)(()=>u++),Rf(1),(0,kn.z)(l=>u===s.length?at(t):Hi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,tr.b)(w=>{const b=new mv(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),Rv(m=>{const w=b=>{const x=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,tr.b)(R=>{b.component=R}),(0,yt.U)(()=>{})));for(const R of b.children)x.push(...w(R));return x};return qs(w(m.targetSnapshot.root)).pipe(Ws(),ui(1))}),Rv(()=>this.afterPreactivation()),(0,yt.U)(m=>{const w=function yv(n,e,t){const r=hr(n,e._root,t?t._root:void 0);return new Jg(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return s={...m,targetRouterState:w}}),(0,tr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new Xf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,tr.b)({next(){u=!0},complete(){u=!0}}),cl(()=>{u||l||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),us(m=>{if(l=!0,wv(m)){_v(m)||(this.navigated=!0,this.restoreHistory(s,!0));const w=new Ms(s.id,this.serializeUrl(s.extractedUrl),m.message,m.cancellationCode);if(r.next(w),_v(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nv(s.source)};this.scheduleNavigation(b,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new $f(s.id,this.serializeUrl(s.extractedUrl),m,s.targetSnapshot??void 0);r.next(w);try{s.resolve(this.errorHandler(m))}catch(b){s.reject(b)}}return Hi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const s={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(El),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=s||this.routerState.root,x=w?this.currentUrlTree.fragment:l;let R=null;switch(m){case"merge":R={...this.currentUrlTree.queryParams,...u};break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),gv(b,this.currentUrlTree,t,R,x??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ja(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function YC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...ZC}:!1===r?{...jw}:r,ja(t))return he(this.currentUrlTree,t,s);const u=this.parseUrl(t);return he(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b;l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise(($,Z)=>{m=$,w=Z});const x=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),R=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):R=0,this.setTransition({id:x,targetPageId:R,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch($=>Promise.reject($))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===s?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,s){const u=new Ms(t.id,this.serializeUrl(t.extractedUrl),r,s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return $w()},providedIn:"root"}),n})();function Nv(n){return"imperative"!==n}let cm=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Pn.x,this.subscription=t.events.subscribe(u=>{u instanceof xs&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,l){return!!(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yn),h.Y36(Wr),h.Y36(me))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class kv{}let XC=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(jn(t=>t instanceof xs),zi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,rn.D)(s).pipe((0,Ko.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const u=s.pipe((0,kn.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,rn.D)([u,l]).pipe((0,Ko.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yn),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(kv),h.LFG(Vw))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vt=new h.OlP("");let Ov=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Jd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ah(n,e){return{\u0275kind:n,\u0275providers:e}}function lm(n){return[{provide:Lw,multi:!0,useValue:n}]}function Fv(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(yn),s=n.get(Gw);1===n.get(Lv)&&r.initialNavigation(),n.get(uc,null,h.XFs.Optional)?.setUpPreloading(),n.get(Vt,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const Gw=new h.OlP("",{factory:()=>new Pn.x}),Lv=new h.OlP("",{providedIn:"root",factory:()=>1});const uc=new h.OlP("");function tb(n){return ah(0,[{provide:uc,useExisting:XC},{provide:kv,useExisting:n}])}const nb=new h.OlP("ROUTER_FORROOT_GUARD"),_x=[ke,{provide:Qu,useClass:dl},{provide:yn,useFactory:$w},wl,{provide:Wr,useFactory:function Hw(n){return n.routerState.root},deps:[yn]},Vw];function wx(){return new h.PXZ("Router",yn)}let Zw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[_x,[],lm(t),{provide:nb,useFactory:ch,deps:[[yn,new h.FiY,new h.tp0]]},{provide:um,useValue:r||{}},r?.useHash?{provide:me,useClass:It}:{provide:me,useClass:pt},{provide:Vt,useFactory:()=>{const n=(0,h.f3M)(yn),e=(0,h.f3M)(vs),t=(0,h.f3M)(um);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ov(n,e,t)}},r?.preloadingStrategy?tb(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:wx},r?.initialNavigation?ib(r):[],[{provide:Vv,useFactory:Fv},{provide:h.tb,multi:!0,useExisting:Vv}]]}}static forChild(t){return{ngModule:n,providers:[lm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nb,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[T]}),n})();function ch(n){return"guarded"}function ib(n){return["disabled"===n.initialNavigation?ah(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(yn);return()=>{e.setUpLocationChangeListener()}}},{provide:Lv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ah(2,[{provide:Lv,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(yn),m=e.get(Gw);(function s(u){e.get(yn).events.pipe(jn(m=>m instanceof xs||m instanceof Ms||m instanceof $f),(0,yt.U)(m=>m instanceof xs||m instanceof Ms&&(0===m.code||1===m.code)&&null),jn(m=>null!==m),ui(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||m.closed?at(void 0):m),l.initialNavigation()}))}}]).\u0275providers:[]]}const Vv=new h.OlP("");let Qw=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),xl=(()=>{class n extends Qw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const na=new h.OlP("NgValueAccessor"),Xw={provide:na,useExisting:(0,h.Gpc)(()=>Ml),multi:!0},eE=new h.OlP("CompositionEventMode");let Ml=(()=>{class n extends Qw{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ob(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(eE,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([Xw]),h.qOj]}),n})();const bi=new h.OlP("NgValidators"),Nl=new h.OlP("NgAsyncValidators");function gm(n){return null!=n}function ub(n){return(0,h.QGY)(n)?(0,rn.D)(n):n}function $v(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function cb(n,e){return e.map(t=>t(n))}function fp(n){return n.map(e=>function mm(n){return!n.validate}(e)?e:t=>e.validate(t))}function pp(n){return null!=n?function ym(n){if(!n)return null;const e=n.filter(gm);return 0==e.length?null:function(t){return $v(cb(t,e))}}(fp(n)):null}function nE(n){return null!=n?function vm(n){if(!n)return null;const e=n.filter(gm);return 0==e.length?null:function(t){return function Yw(...n){const e=(0,ji.jO)(n),{args:t,keys:r}=qu(n),s=new qr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let x=0;x<l;x++){let R=!1;(0,bs.Xf)(t[x]).subscribe((0,Zn.x)(u,$=>{R||(R=!0,b--),m[x]=$},()=>w--,void 0,()=>{(!w||!R)&&(b||u.next(r?Wu(r,m):m),u.complete())}))}});return e?s.pipe(Va(e)):s}(cb(t,e).map(ub)).pipe((0,yt.U)($v))}}(fp(n)):null}function rE(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iE(n){return n._rawValidators}function sE(n){return n._rawAsyncValidators}function Hv(n){return n?Array.isArray(n)?n:[n]:[]}function gp(n,e){return Array.isArray(n)?n.includes(e):n===e}function lb(n,e){const t=Hv(e);return Hv(n).forEach(s=>{gp(t,s)||t.push(s)}),t}function oE(n,e){return Hv(e).filter(t=>!gp(n,t))}class db{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ti extends db{get formDirective(){return null}get path(){return null}}class Ka extends db{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class aE{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Gv=(()=>{class n extends aE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ka,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),zv=(()=>{class n extends aE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const mp="VALID",yp="INVALID",dh="PENDING",vp="DISABLED";function hh(n){return(fh(n)?n.validators:n)||null}function kl(n){return Array.isArray(n)?pp(n):n||null}function _p(n,e){return(fh(e)?e.asyncValidators:n)||null}function Ol(n){return Array.isArray(n)?nE(n):n||null}function fh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function wp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function Zv(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.vHH(1002,"")})}class Ep{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=kl(this._rawValidators),this._composedAsyncValidatorFn=Ol(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===mp}get invalid(){return this.status===yp}get pending(){return this.status==dh}get disabled(){return this.status===vp}get enabled(){return this.status!==vp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=kl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ol(e)}addValidators(e){this.setValidators(lb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oE(e,this._rawAsyncValidators))}hasValidator(e){return gp(this._rawValidators,e)}hasAsyncValidator(e){return gp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mp,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mp||this.status===dh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vp:mp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dh,this._hasOwnPendingAsyncValidator=!0;const t=ub(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?vp:this.errors?yp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dh)?dh:this._anyControlsHaveStatus(yp)?yp:mp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Fl extends Ep{constructor(e,t,r){super(hh(t),_p(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Zv(this,0,e),Object.keys(e).forEach(r=>{wp(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class wm extends Fl{}function Ip(n,e){Im(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Ns(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&vE(n,e)})}(n,e),function Sx(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function yE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&vE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Dp(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Dm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Em(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Im(n,e){const t=iE(n);null!==e.validator?n.setValidators(rE(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=sE(n);null!==e.asyncValidator?n.setAsyncValidators(rE(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Em(e._rawValidators,s),Em(e._rawAsyncValidators,s)}function Dm(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=iE(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=sE(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Em(e._rawValidators,r),Em(e._rawAsyncValidators,r),t}function vE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function bm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function IE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const bp=class extends Ep{constructor(e=null,t,r){super(hh(t),_p(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=IE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){IE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ph=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Nx={provide:na,useExisting:(0,h.Gpc)(()=>Tm),multi:!0};let Tm=(()=>{class n extends xl{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([Nx]),h.qOj]}),n})(),e_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ll=new h.OlP("NgModelWithFormControlWarning"),SE={provide:Ti,useExisting:(0,h.Gpc)(()=>gh)};let gh=(()=>{class n extends Ti{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Dm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ip(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Dp(t.control||null,t,!1),function vb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Qv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(Dp(r||null,t),(n=>n instanceof bp)(s)&&(Ip(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function _E(n,e){Im(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Yv(n,e){return Dm(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Im(this.form,this),this._oldForm&&Dm(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bi,10),h.Y36(Nl,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([SE]),h.qOj,h.TTD]}),n})();const Px={provide:Ka,useExisting:(0,h.Gpc)(()=>xp)};let xp=(()=>{class n extends Ka{constructor(t,r,s,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Jv(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Ml?t=u:function yb(n){return Object.getPrototypeOf(n.constructor)===xl}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Cm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Kv(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Ti,13),h.Y36(bi,10),h.Y36(Nl,10),h.Y36(na,10),h.Y36(Ll,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Px]),h.qOj,h.TTD]}),n})(),_h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[e_]}),n})(),dc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ll,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[_h]}),n})();class o_ extends Ep{constructor(e,t,r){super(hh(t),_p(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Zv(this,0,e),e.forEach((r,s)=>{wp(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function a_(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let OE=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return a_(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Fl(s,u)}record(t,r=null){const s=this._reduceControls(t);return new wm(s,r)}control(t,r,s){let u={};return this.useNonNullable?(a_(r)?u=r:(u.validators=r,u.asyncValidators=s),new bp(t,{...u,nonNullable:!0})):new bp(t,r,s)}array(t,r,s){const u=t.map(l=>this._createControl(l));return new o_(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof bp||t instanceof Ep?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:dc}),n})(),Mm=(()=>{class n extends OE{group(t,r=null){return super.group(t,r)}control(t,r,s){return super.control(t,r,s)}array(t,r,s){return super.array(t,r,s)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:dc}),n})();var Rm=O(4986),li=O(4976);function u_(){return(0,dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function Fb(n,e){return n===e}var Ke,Co=O(2011),c_=(O(2644),O(3942)),Ee=O(5861),sa=O(6881),jl=O(4859),oa=O(1877),dn=O(2090),l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Os={},Nm=Nm||{},Lt=l_||self;function Fp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Pm="closure_uid_"+(1e9*Math.random()>>>0),Lb=0;function VE(n,e,t){return n.call.apply(n.bind,arguments)}function UE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function di(n,e,t){return(di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?VE:UE).apply(null,arguments)}function Lp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function hc(){this.s=this.s,this.o=this.o}hc.prototype.s=!1,hc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function d_(n){Object.prototype.hasOwnProperty.call(n,Pm)&&n[Pm]||(n[Pm]=++Lb)}(this)},hc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const h_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Vp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function f_(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Fp(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hi.prototype.h=function(){this.defaultPrevented=!0};var BE=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",()=>{},e),Lt.removeEventListener("test",()=>{},e)}catch{}return n}();function Eh(n){return/^[\s\xa0]*$/.test(n)}function Up(){var n=Lt.navigator;return n&&(n=n.userAgent)?n:""}function bo(n){return-1!=Up().indexOf(n)}function km(n){return km[" "](n),n}km[" "]=function(){};var g_,n,Fx=bo("Opera"),Ih=bo("Trident")||bo("MSIE"),$E=bo("Edge"),Om=$E||Ih,HE=bo("Gecko")&&!(-1!=Up().toLowerCase().indexOf("webkit")&&!bo("Edge"))&&!(bo("Trident")||bo("MSIE"))&&!bo("Edge"),Fr=-1!=Up().toLowerCase().indexOf("webkit")&&!bo("Edge");function p_(){var n=Lt.document;return n?n.documentMode:void 0}e:{var m_="",Fm=(n=Up(),HE?/rv:([^\);]+)(\)|;)/.exec(n):$E?/Edge\/([\d\.]+)/.exec(n):Ih?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Fr?/WebKit\/(\S+)/.exec(n):Fx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Fm&&(m_=Fm?Fm[1]:""),Ih){var y_=p_();if(null!=y_&&y_>parseFloat(m_)){g_=String(y_);break e}}g_=m_}var Dh=Lt.document&&Ih&&(p_()||parseInt(g_,10))||void 0;function Bp(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(HE){e:{try{km(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ub[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bp.$.h.call(this)}}Zr(Bp,hi);var Ub={2:"touch",3:"pen",4:"mouse"};Bp.prototype.h=function(){Bp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ch="closure_listenable_"+(1e6*Math.random()|0),Bb=0;function GE(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Bb,this.fa=this.ia=!1}function __(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Vm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function To(n){const e={};for(const t in n)e[t]=n[t];return e}const zE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qE(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<zE.length;u++)t=zE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Fs(n){this.src=n,this.g={},this.h=0}function Ls(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=h_(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(__(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vs(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Fs.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Vs(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new GE(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Um="closure_lm_"+(1e6*Math.random()|0),Bm={};function WE(n,e,t,r,s){if(r&&r.once)return KE(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)WE(n,e[u],t,r,s);return null}return t=Hm(t),n&&n[Ch]?n.O(e,t,wh(r)?!!r.capture:!!r,s):ZE(n,e,t,!1,r,s)}function ZE(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=wh(s)?!!s.capture:!!s,m=E_(n);if(m||(n[Um]=m=new Fs(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function jb(){const e=QE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BE||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(YE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function KE(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)KE(n,e[u],t,r,s);return null}return t=Hm(t),n&&n[Ch]?n.P(e,t,wh(r)?!!r.capture:!!r,s):ZE(n,e,t,!0,r,s)}function jm(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)jm(n,e[u],t,r,s);else r=wh(r)?!!r.capture:!!r,t=Hm(t),n&&n[Ch]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vs(u=n.g[e],t,r,s))&&(__(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=E_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vs(e,t,r,s)),(t=-1<n?e[n]:null)&&$l(t))}function $l(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ch])Ls(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=E_(e))?(Ls(t,n),0==t.h&&(t.src=null,e[Um]=null)):__(n)}}}function YE(n){return n in Bm?Bm[n]:Bm[n]="on"+n}function QE(n,e){if(n.fa)n=!0;else{e=new Bp(e,this);var t=n.listener,r=n.la||n.src;n.ia&&$l(n),n=t.call(r,e)}return n}function E_(n){return(n=n[Um])instanceof Fs?n:null}var $m="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hm(n){return"function"==typeof n?n:(n[$m]||(n[$m]=function(e){return n.handleEvent(e)}),n[$m])}function vr(){hc.call(this),this.i=new Fs(this),this.S=this,this.J=null}function fi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var s=e;qE(e=new hi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=jp(l,r,!0,e)&&s}if(s=jp(l=e.g=n,r,!0,e)&&s,s=jp(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=jp(l=e.g=t[u],r,!1,e)&&s}function jp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&Ls(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Zr(vr,hc),vr.prototype[Ch]=!0,vr.prototype.removeEventListener=function(n,e,t,r){jm(this,n,e,t,r)},vr.prototype.N=function(){if(vr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)__(t[r]);delete n.g[e],n.h--}}this.J=null},vr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gm=Lt.JSON.stringify;function zm(){var n=qm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var D_=new class I_{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new XE,n=>n.reset());class XE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function eI(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function tI(n){Lt.setTimeout(()=>{throw n},0)}let bh,Th=!1,qm=new class JE{constructor(){this.h=this.g=null}add(e,t){const r=D_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},nI=()=>{const n=Lt.Promise.resolve(void 0);bh=()=>{n.then($b)}};var $b=()=>{for(var n;n=zm();){try{n.h.call(n.g)}catch(t){tI(t)}var e=D_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Th=!1};function Wm(n,e){vr.call(this),this.h=n||1,this.g=e||Lt,this.j=di(this.qb,this),this.l=Date.now()}function C_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function b_(n,e,t){if("function"==typeof n)t&&(n=di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=di(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function rI(n){n.g=b_(()=>{n.g=null,n.i&&(n.i=!1,rI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zr(Wm,vr),(Ke=Wm.prototype).ga=!1,Ke.T=null,Ke.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fi(this,"tick"),this.ga&&(C_(this),this.start()))}},Ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.N=function(){Wm.$.N.call(this),C_(this),delete this.g};class Hb extends hc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rI(this)}N(){super.N(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $p(n){hc.call(this),this.h=n,this.g={}}Zr($p,hc);var iI=[];function sI(n,e,t,r){Array.isArray(t)||(t&&(iI[0]=t.toString()),t=iI);for(var s=0;s<t.length;s++){var u=WE(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function oI(n){Vm(n.g,function(e,t){this.g.hasOwnProperty(t)&&$l(e)},n),n.g={}}function Zm(){this.g=!0}function Sh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Gm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$p.prototype.N=function(){$p.$.N.call(this),oI(this)},$p.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zm.prototype.Ea=function(){this.g=!1},Zm.prototype.info=function(){};var Hl={},T_=null;function Hp(){return T_=T_||new vr}function S_(n){hi.call(this,Hl.Ta,n)}function Ah(n){const e=Hp();fi(e,new S_(e))}function A_(n,e){hi.call(this,Hl.STAT_EVENT,n),this.stat=e}function Ai(n){const e=Hp();fi(e,new A_(e,n))}function x_(n,e){hi.call(this,Hl.Ua,n),this.size=e}function xh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}Hl.Ta="serverreachability",Zr(S_,hi),Hl.STAT_EVENT="statevent",Zr(A_,hi),Hl.Ua="timingevent",Zr(x_,hi);var Gp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},M_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Km(){}function aI(){}Km.prototype.h=null;var qp,zp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pc(){hi.call(this,"d")}function uI(){hi.call(this,"c")}function R_(){}function Mh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new $p(this),this.P=Lx,this.V=new Wm(n=Om?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new N_}function N_(){this.i=null,this.g="",this.h=!1}Zr(pc,hi),Zr(uI,hi),Zr(R_,Km),R_.prototype.g=function(){return new XMLHttpRequest},R_.prototype.i=function(){return{}},qp=new R_;var Lx=45e3,Rt={},Ym={};function P_(n,e,t){n.L=1,n.v=ql(Ya(e)),n.s=t,n.S=!0,cI(n,null)}function cI(n,e){n.G=Date.now(),gc(n),n.A=Ya(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),mI(t.i,"t",r),n.C=0,t=n.l.J,n.h=new N_,n.g=cy(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Hb(di(n.Pa,n,n.g),n.O)),sI(n.U,n.g,"readystatechange",n.nb),e=n.I?To(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ah(),function Gb(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var x=b[0];b=b[1];var R=x.split("_");l=2<=R.length&&"type"==R[1]?l+(x+"=")+b+"&":l+(x+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Gl(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function lI(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=Qm(n,t),s==Ym){4==e&&(n.o=4,Ai(14),r=!1),Sh(n.j,n.m,null,"[Incomplete Response]");break}if(s==Rt){n.o=4,Ai(15),Sh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Sh(n.j,n.m,s,null),O_(n,s)}Gl(n)&&s!=Ym&&s!=Rt&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),q_(e),e.M=!0,Ai(11))):(Sh(n.j,n.m,t,"[Invalid Chunked Response]"),mc(n),Rh(n))}function Qm(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ym:(t=Number(e.substring(t,r)),isNaN(t)?Rt:(r+=1)+t>e.length?Ym:(e=e.slice(r,r+t),n.C=r+t,e))}function gc(n){n.Y=Date.now()+n.P,nr(n,n.P)}function nr(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=xh(di(n.lb,n),e)}function k_(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Rh(n){0==n.l.H||n.J||MI(n.l,n)}function mc(n){k_(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,C_(n.V),oI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function O_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Xm(t.i,n)))if(!n.K&&Xm(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;ay(t),sy(t)}z_(t),Ai(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=xh(di(t.ib,t),6e3));if(1>=tT(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Xa(t,11)}else if((n.K||t.g==n)&&ay(t),!Eh(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const x=b[3];null!=x&&(t.ra=x,t.l.info("VER="+t.ra));const R=b[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const Ie=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ie){var u=r.i;u.g||-1==Ie.indexOf("spdy")&&-1==Ie.indexOf("quic")&&-1==Ie.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(kh(u,u.h),u.h=null))}if(r.F){const Be=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.Da=Be,$n(r.I,r.F,Be))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Z_(r,r.J?r.pa:null,r.Y),l.K){yI(r.i,l);var m=l,w=r.L;w&&m.setTimeout(w),m.B&&(k_(m),gc(m)),r.g=l}else G_(r);0<t.j.length&&oy(t)}else"stop"!=b[0]&&"close"!=b[0]||Xa(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Xa(t,7):$_(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Ah()}catch{}}function F_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Fp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function hI(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Fp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function dI(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Fp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(Ke=Mh.prototype).setTimeout=function(n){this.P=n},Ke.nb=function(n){n=n.target;const e=this.M;e&&3==aa(n)?e.l():this.Pa(n)},Ke.Pa=function(n){try{if(n==this.g)e:{const x=aa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>x)&&(3!=x||Om||this.g&&(this.h.h||this.g.ja()||TI(this.g)))){this.J||4!=x||7==e||Ah(),k_(this);var t=this.g.da();this.ca=t;t:if(Gl(this)){var r=TI(this.g);n="";var s=r.length,u=4==aa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){mc(this),Rh(this);var l="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function zb(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,x,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Eh(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ai(12),mc(this),Rh(this);break e}Sh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,O_(this,t)}this.S?(lI(this,x,l),Om&&this.i&&3==x&&(sI(this.U,this.V,"tick",this.mb),this.V.start())):(Sh(this.j,this.m,l,null),O_(this,l)),4==x&&mc(this),this.i&&!this.J&&(4==x?MI(this.l,this):(this.i=!1,gc(this)))}else(function oT(n){const e={};n=(n.g&&2<=aa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Eh(n[r]))continue;var t=eI(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function w_(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),mc(this),Rh(this)}}}catch{}},Ke.mb=function(){if(this.g){var n=aa(this.g),e=this.g.ja();this.C<e.length&&(k_(this),lI(this,n,e),this.i&&4!=n&&gc(this))}},Ke.cancel=function(){this.J=!0,mc(this)},Ke.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ah(),Ai(17)),mc(this),this.o=2,Rh(this)):nr(this,this.Y-n)};var L_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zl){this.h=n.h,yc(this,n.j),this.s=n.s,this.g=n.g,Jm(this,n.m),this.l=n.l;var e=n.i,t=new Kp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fI(this,t),this.o=n.o}else n&&(e=String(n).match(L_))?(this.h=!1,yc(this,e[1]||"",!0),this.s=Nh(e[2]||""),this.g=Nh(e[3]||"",!0),Jm(this,e[4]),this.l=Nh(e[5]||"",!0),fI(this,e[6]||"",!0),this.o=Nh(e[7]||"")):(this.h=!1,this.i=new Kp(null,this.h))}function Ya(n){return new zl(n)}function yc(n,e,t){n.j=t?Nh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fI(n,e,t){e instanceof Kp?(n.i=e,function Qb(n,e){e&&!n.j&&(Qa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(V_(this,r),mI(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ph(e,Kb)),n.i=new Kp(e,n.h))}function $n(n,e,t){n.i.set(e,t)}function ql(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ph(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ph(e,gI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ph(e,gI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ph(t,"/"==t.charAt(0)?Zp:Wp,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ph(t,Yb)),n.join("")};var gI=/[#\/\?@]/g,Wp=/[#\?:]/g,Zp=/[#\?]/g,Kb=/[#\?@]/g,Yb=/#/g;function Kp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qa(n){n.g||(n.g=new Map,n.h=0,n.i&&function Zb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function V_(n,e){Qa(n),e=Wl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function U_(n,e){return Qa(n),e=Wl(n,e),n.g.has(e)}function mI(n,e,t){V_(n,e),0<t.length&&(n.i=null,n.g.set(Wl(n,e),Vp(t)),n.h+=t.length)}function Wl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xb(n){this.l=n||Vx,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ka&&Lt.g.Ka()&&Lt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=Kp.prototype).add=function(n,e){Qa(this),this.i=null,n=Wl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){Qa(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},Ke.ta=function(){Qa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},Ke.Z=function(n){Qa(this);let e=[];if("string"==typeof n)U_(this,n)&&(e=e.concat(this.g.get(Wl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ke.set=function(n,e){return Qa(this),this.i=null,U_(this,n=Wl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var Vx=10;function eT(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tT(n){return n.h?1:n.g?n.g.size:0}function Xm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kh(n,e){n.g?n.g.add(e):n.h=e}function yI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Vp(n.i)}function Yp(){this.g=new class{stringify(n){return Lt.JSON.stringify(n,void 0)}parse(n){return Lt.JSON.parse(n,void 0)}}}function nT(n,e,t){const r=t||"";try{F_(n,function(s,u){let l=s;wh(s)&&(l=Gm(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function ey(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Qp(n){this.l=n.fc||null,this.j=n.ob||!1}function ty(n,e){vr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ny,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xb.prototype.cancel=function(){if(this.i=vI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Zr(Qp,Km),Qp.prototype.g=function(){return new ty(this.l,this.j)},Qp.prototype.i=function(n){return function(){return n}}({}),Zr(ty,vr);var ny=0;function wI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Jp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ja(n)}function Ja(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=ty.prototype).open=function(n,e){if(this.readyState!=ny)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ja(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Lt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jp(this)),this.readyState=ny},Ke.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ke.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jp(this):Ja(this),3==this.readyState&&wI(this)}},Ke.Za=function(n){this.g&&(this.response=this.responseText=n,Jp(this))},Ke.Ya=function(n){this.g&&(this.response=n,Jp(this))},Ke.ka=function(){this.g&&Jp(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ty.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iT=Lt.JSON.parse;function rr(n){vr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=EI,this.L=this.M=!1}Zr(rr,vr);var EI="",II=/^https?$/i,sT=["POST","PUT"];function CI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ry(n),Xp(n)}function ry(n){n.F||(n.F=!0,fi(n,"complete"),fi(n,"error"))}function bI(n){if(n.h&&typeof Nm<"u"&&(!n.C[1]||4!=aa(n)||2!=n.da()))if(n.v&&4==aa(n))b_(n.La,0,n);else if(fi(n,"readystatechange"),4==aa(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(L_)[1]||null;!s&&Lt.self&&Lt.self.location&&(s=Lt.self.location.protocol.slice(0,-1)),r=!II.test(s?s.toLowerCase():"")}t=r}if(t)fi(n,"complete"),fi(n,"success");else{n.m=6;try{var u=2<aa(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",ry(n)}}finally{Xp(n)}}}function Xp(n,e){if(n.g){B_(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||fi(n,"ready");try{t.onreadystatechange=r}catch{}}}function B_(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function aa(n){return n.g?n.g.readyState:0}function TI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case EI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function iy(n){let e="";return Vm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function j_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=iy(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function Oh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SI(n){this.Ga=0,this.j=[],this.l=new Zm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oh("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oh("baseRetryDelayMs",5e3,n),this.hb=Oh("retryDelaySeedMs",1e4,n),this.eb=Oh("forwardChannelMaxRetries",2,n),this.xa=Oh("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Xb(n&&n.concurrentRequestLimit),this.Ja=new Yp,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function $_(n){if(AI(n),3==n.H){var e=n.W++,t=Ya(n.I);if($n(t,"SID",n.K),$n(t,"RID",e),$n(t,"TYPE","terminate"),eg(n,t),(e=new Mh(n,n.l,e)).L=2,e.v=ql(Ya(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon)try{t=Lt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cy(e.l,null),e.g.ha(e.v)),e.G=Date.now(),gc(e)}uy(n)}function sy(n){n.g&&(q_(n),n.g.cancel(),n.g=null)}function AI(n){sy(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),ay(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function oy(n){if(!eT(n.i)&&!n.m){n.m=!0;var e=n.Na;bh||nI(),Th||(bh(),Th=!0),qm.add(e,n),n.C=0}}function xI(n,e){var t;t=e?e.m:n.W++;const r=Ya(n.I);$n(r,"SID",n.K),$n(r,"RID",t),$n(r,"AID",n.V),eg(n,r),n.o&&n.s&&j_(r,n.o,n.s),t=new Mh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=H_(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),kh(n.i,t),P_(t,r,e)}function eg(n,e){n.na&&Vm(n.na,function(t,r){$n(e,r,t)}),n.h&&F_({},function(t,r){$n(e,r,t)})}function H_(n,e,t){t=Math.min(n.j.length,t);var r=n.h?di(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].g;const x=s[w].map;if(b-=u,0>b)u=Math.max(0,s[w].g-100),m=!1;else try{nT(x,l,"req"+b+"_")}catch{r&&r(x)}}if(m){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function G_(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;bh||nI(),Th||(bh(),Th=!0),qm.add(e,n),n.A=0}}function z_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=xh(di(n.Ma,n),RI(n,n.A)),n.A++,0))}function q_(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function W_(n){n.g=new Mh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ya(n.wa);$n(e,"RID","rpc"),$n(e,"SID",n.K),$n(e,"AID",n.V),$n(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&$n(e,"TO",n.qa),$n(e,"TYPE","xmlhttp"),eg(n,e),n.o&&n.s&&j_(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=ql(Ya(e)),t.s=null,t.S=!0,cI(t,n)}function ay(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function MI(n,e){var t=null;if(n.g==e){ay(n),q_(n),n.g=null;var r=2}else{if(!Xm(n.i,e))return;t=e.F,yI(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;fi(r=Hp(),new x_(r,t)),oy(n)}else G_(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function aT(n,e){return!(tT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=xh(di(n.Na,n,e),RI(n,n.C)),n.C++,0)))}(n,e)||2==r&&z_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Xa(n,5);break;case 4:Xa(n,10);break;case 3:Xa(n,6);break;default:Xa(n,2)}}function RI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Xa(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=di(n.pb,n);t||(t=new zl("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||yc(t,"https"),ql(t)),function rT(n,e){const t=new Zm;if(Lt.Image){const r=new Image;r.onload=Lp(ey,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lp(ey,t,r,"TestLoadImage: error",!1,e),r.onabort=Lp(ey,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lp(ey,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.H=0,n.h&&n.h.za(e),uy(n),AI(n)}function uy(n){if(n.H=0,n.ma=[],n.h){const e=vI(n.i);(0!=e.length||0!=n.j.length)&&(f_(n.ma,e),f_(n.ma,n.j),n.i.i.length=0,Vp(n.j),n.j.length=0),n.h.ya()}}function Z_(n,e,t){var r=t instanceof zl?Ya(t):new zl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Jm(r,r.m);else{var s=Lt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new zl(null);r&&yc(u,r),e&&(u.g=e),s&&Jm(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&$n(r,t,e),$n(r,"VER",n.ra),eg(n,r),r}function cy(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ha&&!n.va?new Qp({ob:!0}):n.va)).Oa(n.J),e}function NI(){}function ly(){if(Ih&&!(10<=Number(Dh)))throw Error("Environmental error: no available transport.")}function Ki(n,e){vr.call(this),this.g=new SI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Eh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Eh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new So(this)}function PI(n){pc.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function K_(){uI.call(this),this.status=1}function So(n){this.g=n}function Ao(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function OI(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function vn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(Ke=rr.prototype).Oa=function(n){this.M=n},Ke.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qp.g(),this.C=function fc(n){return n.h||(n.h=n.i())}(this.u?this.u:qp),this.g.onreadystatechange=di(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void CI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Lt.FormData&&n instanceof Lt.FormData,!(0<=h_(sT,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{B_(this),0<this.B&&((this.L=function DI(n){return Ih&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=di(this.ua,this)):this.A=b_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){CI(this,u)}},Ke.ua=function(){typeof Nm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fi(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fi(this,"complete"),fi(this,"abort"),Xp(this))},Ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xp(this,!0)),rr.$.N.call(this)},Ke.La=function(){this.s||(this.G||this.v||this.l?bI(this):this.kb())},Ke.kb=function(){bI(this)},Ke.isActive=function(){return!!this.g},Ke.da=function(){try{return 2<aa(this)?this.g.status:-1}catch{return-1}},Ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iT(e)}},Ke.Ia=function(){return this.m},Ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=SI.prototype).ra=8,Ke.H=1,Ke.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Mh(this,this.l,n);let u=this.s;if(this.U&&(u?(u=To(u),qE(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=H_(this,s,e),$n(t=Ya(this.I),"RID",n),$n(t,"CVER",22),this.F&&$n(t,"X-HTTP-Session-Id",this.F),eg(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(iy(u)))+"&"+e:this.o&&j_(t,this.o,u)),kh(this.i,s),this.bb&&$n(t,"TYPE","init"),this.P?($n(t,"$req",e),$n(t,"SID","null"),s.aa=!0,P_(s,t,null)):P_(s,t,e),this.H=2}}else 3==this.H&&(n?xI(this,n):0==this.j.length||eT(this.i)||xI(this))},Ke.Ma=function(){if(this.u=null,W_(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=xh(di(this.jb,this),n)}},Ke.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ai(10),sy(this),W_(this))},Ke.ib=function(){null!=this.v&&(this.v=null,sy(this),z_(this),Ai(19))},Ke.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ai(2)):(this.l.info("Failed to ping google.com"),Ai(1))},Ke.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ke=NI.prototype).Ba=function(){},Ke.Aa=function(){},Ke.za=function(){},Ke.ya=function(){},Ke.isActive=function(){return!0},Ke.Va=function(){},ly.prototype.g=function(n,e){return new Ki(n,e)},Zr(Ki,vr),Ki.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ai(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Z_(n,null,n.Y),oy(n)},Ki.prototype.close=function(){$_(this.g)},Ki.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Gm(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&oy(e)},Ki.prototype.N=function(){this.g.h=null,delete this.j,$_(this.g),delete this.g,Ki.$.N.call(this)},Zr(PI,pc),Zr(K_,uI),Zr(So,NI),So.prototype.Ba=function(){fi(this.g,"a")},So.prototype.Aa=function(n){fi(this.g,new PI(n))},So.prototype.za=function(n){fi(this.g,new K_)},So.prototype.ya=function(){fi(this.g,"b")},Zr(Ao,function kI(){this.blockSize=-1}),Ao.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ao.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)OI(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){OI(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){OI(this,r),s=0;break}}this.h=s,this.i+=e},Ao.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Y_={};function Q_(n){return-128<=n&&128>n?function jE(n,e){var t=Y_;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new vn([0|e],0>e?-1:0)}):new vn([0|n],0>n?-1:0)}function no(n){if(isNaN(n)||!isFinite(n))return vc;if(0>n)return pi(no(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=dy;return new vn(e,0)}var dy=4294967296,vc=Q_(0),hy=Q_(1),J_=Q_(16777216);function ua(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Us(n){return-1==n.h}function pi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new vn(t,~n.h).add(hy)}function fy(n,e){return n.add(pi(e))}function py(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function tg(n,e){this.g=n,this.h=e}function ng(n,e){if(ua(e))throw Error("division by zero");if(ua(n))return new tg(vc,vc);if(Us(n))return e=ng(pi(n),e),new tg(pi(e.g),pi(e.h));if(Us(e))return e=ng(n,pi(e)),new tg(pi(e.g),e.h);if(30<n.g.length){if(Us(n)||Us(e))throw Error("slowDivide_ only works with positive integers.");for(var t=hy,r=e;0>=r.X(n);)t=uT(t),r=uT(r);var s=Zl(t,1),u=Zl(r,1);for(r=Zl(r,2),t=Zl(t,2);!ua(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Zl(r,1),t=Zl(t,1)}return e=fy(n,s.R(e)),new tg(s,e)}for(s=vc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=no(t)).R(e);Us(l)||0<l.X(n);)l=(u=no(t-=r)).R(e);ua(u)&&(u=hy),s=s.add(u),n=fy(n,l)}return new tg(s,n)}function uT(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new vn(t,n.h)}function Zl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new vn(s,n.h)}(Ke=vn.prototype).ea=function(){if(Us(this))return-pi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:dy+r)*e,e*=dy}return n},Ke.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ua(this))return"0";if(Us(this))return"-"+pi(this).toString(n);for(var e=no(Math.pow(n,6)),t=this,r="";;){var s=ng(t,e).g,u=((0<(t=fy(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ua(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Ke.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ke.X=function(n){return Us(n=fy(this,n))?-1:ua(n)?0:1},Ke.abs=function(){return Us(this)?pi(this):this},Ke.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new vn(t,-2147483648&t[t.length-1]?-1:0)},Ke.R=function(n){if(ua(this)||ua(n))return vc;if(Us(this))return Us(n)?pi(this).R(pi(n)):pi(pi(this).R(n));if(Us(n))return pi(this.R(pi(n)));if(0>this.X(J_)&&0>n.X(J_))return no(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,py(t,2*r+2*s),t[2*r+2*s+1]+=u*w,py(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,py(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,py(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new vn(t,0)},Ke.gb=function(n){return ng(this,n).h},Ke.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new vn(t,this.h&n.h)},Ke.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new vn(t,this.h|n.h)},Ke.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new vn(t,this.h^n.h)},ly.prototype.createWebChannel=ly.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,Gp.NO_ERROR=0,Gp.TIMEOUT=8,Gp.HTTP_ERROR=6,M_.COMPLETE="complete",aI.EventType=zp,zp.OPEN="a",zp.CLOSE="b",zp.ERROR="c",zp.MESSAGE="d",vr.prototype.listen=vr.prototype.O,rr.prototype.listenOnce=rr.prototype.P,rr.prototype.getLastError=rr.prototype.Sa,rr.prototype.getLastErrorCode=rr.prototype.Ia,rr.prototype.getStatus=rr.prototype.da,rr.prototype.getResponseJson=rr.prototype.Wa,rr.prototype.getResponseText=rr.prototype.ja,rr.prototype.send=rr.prototype.ha,rr.prototype.setWithCredentials=rr.prototype.Oa,Ao.prototype.digest=Ao.prototype.l,Ao.prototype.reset=Ao.prototype.reset,Ao.prototype.update=Ao.prototype.j,vn.prototype.add=vn.prototype.add,vn.prototype.multiply=vn.prototype.R,vn.prototype.modulo=vn.prototype.gb,vn.prototype.compare=vn.prototype.X,vn.prototype.toNumber=vn.prototype.ea,vn.prototype.toString=vn.prototype.toString,vn.prototype.getBits=vn.prototype.D,vn.fromNumber=no,vn.fromString=function FI(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return pi(FI(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=no(Math.pow(e,8)),r=vc,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=no(Math.pow(e,u)),r=r.R(u).add(no(l))):r=(r=r.R(t)).add(no(l))}return r};var cT=Os.createWebChannelTransport=function(){return new ly},lT=Os.getStatEventTarget=function(){return Hp()},LI=Os.ErrorCode=Gp,Ux=Os.EventType=M_,dT=Os.Event=Hl,VI=Os.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},hT=Os.FetchXmlHttpFactory=Qp,gy=Os.WebChannel=aI,fT=Os.XhrIo=rr,pT=Os.Md5=Ao,Fh=Os.Integer=vn;const UI="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let Lh="9.23.0";const _c=new oa.Yd("@firebase/firestore");function X_(){return _c.logLevel}function Fe(n,...e){if(_c.logLevel<=oa.in.DEBUG){const t=e.map(my);_c.debug(`Firestore (${Lh}): ${n}`,...t)}}function pr(n,...e){if(_c.logLevel<=oa.in.ERROR){const t=e.map(my);_c.error(`Firestore (${Lh}): ${n}`,...t)}}function Bs(n,...e){if(_c.logLevel<=oa.in.WARN){const t=e.map(my);_c.warn(`Firestore (${Lh}): ${n}`,...t)}}function my(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Lh}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function gt(n,e){n||tt()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends dn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class ig{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yT{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt("string"==typeof r.accessToken),new BI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Kr(e)}}class e0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ca{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new e0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t0{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt("string"==typeof t.token),this.T=t.token,new jI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $I{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vT(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function eu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function sg(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Kn(0,0))}static max(){return new wt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vh{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Vh{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const n0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Vh{construct(e,t,r){return new ir(e,t,r)}static isValidIdentifier(e){return n0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(t)}static emptyPath(){return new ir([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Jt.fromString(e))}static fromName(e){return new Ze(Jt.fromString(e).popFirst(5))}static empty(){return new Ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Jt(e.slice()))}}class vy{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function HI(n){return n.fields.find(e=>2===e.kind)}function tu(n){return n.fields.filter(e=>2!==e.kind)}vy.UNKNOWN_ID=-1;class og{constructor(e,t){this.fieldPath=e,this.kind=t}}class Kl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Kl(0,js.min())}}function GI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=wt.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new js(s,Ze.empty(),e)}function zI(n){return new js(n.readTime,n.key,-1)}class js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new js(wt.min(),Ze.empty(),-1)}static max(){return new js(wt.max(),Ze.empty(),-1)}}function o0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const a0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _y{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nu(n){return u0.apply(this,arguments)}function u0(){return u0=(0,Ee.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==a0)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),u0.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(x=>{l[b]=x,++m,m===u&&r(l)},x=>s(x))}})}static doWhile(e,t){return new ie((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class ag{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Lr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Uh(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=Ec(r.target.error);this.v.reject(new Uh(e,s))}}static open(e,t,r,s){try{return new ag(t,e.transaction(s,r))}catch(u){throw new Uh(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WI(t)}}class xo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===xo.S((0,dn.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Yl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,dn.hl)())return!1;if(xo.C())return!0;const e=(0,dn.z$)(),t=xo.S(e),r=0<t&&t<10,s=xo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Uh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Uh(e,m))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=ag.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(x=>(w.P(),x)).catch(x=>(w.abort(x),ie.reject(x))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,x="FirebaseError"!==b.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",x),u.close(),!x)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qI{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Yl(this.L.delete())}}class Uh extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wc(n){return"IndexedDbTransactionError"===n.name}class WI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yl(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Yl(this.store.add(e))}get(e){return Yl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Yl(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Yl(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ie((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ie((r,s)=>{t.onerror=u=>{const l=Ec(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ie((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new qI(m),b=t(m.primaryKey,m.value,w);if(b instanceof ie){const x=b.catch(R=>(w.done(),ie.reject(R)));r.push(x)}w.isDone?s():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yl(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Ec(r.target.error);t(s)}})}let xi=!1;function Ec(n){const e=xo.S((0,dn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xi||(xi=!0,setTimeout(()=>{throw r},0)),r}}return n}class _T{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){wc(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nu(r)}yield t.et(6e4)}))}}class wT{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ie.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(Fe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=zI(u);o0(l,r)>0&&(r=l)}),new js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function wy(n){return null==n}function Bh(n){return 0===n&&1/n==-1/0}function c0(n){return"number"==typeof n&&Number.isInteger(n)&&!Bh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ar(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ey(e)),e=ET(n.get(t),e);return Ey(e)}function ET(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Ey(n){return n+"\x01\x01"}function la(n){const e=n.length;if(gt(e>=2),2===e)return gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&tt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:tt()}u=l+2}return new Jt(r)}const l0=["userId","batchId"];function Iy(n,e){return[n,Ar(e)]}function ZI(n,e,t){return[n,Ar(e),t]}const IT={},d0=["prefixPath","collectionGroup","readTime","documentId"],KI=["prefixPath","collectionGroup","documentId"],YI=["collectionGroup","readTime","prefixPath","documentId"],Dy=["canonicalId","targetId"],h0=["targetId","path"],Bx=["path","targetId"],QI=["collectionId","parent"],DT=["indexId","uid"],JI=["uid","sequenceNumber"],jh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CT=["indexId","uid","orderedDocumentKey"],XI=["userId","collectionPath","documentId"],f0=["userId","collectionPath","largestBatchId"],jx=["userId","collectionGroup","largestBatchId"],eD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$x=[...eD,"documentOverlays"],tD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nD=tD,bT=[...nD,"indexConfiguration","indexState","indexEntries"];class Cy extends _y{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Vr(n,e){const t=Ye(n);return xo.M(t.ht,e)}function rD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function p0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class On{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new On(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new On(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new by(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new by(this.root,e,this.comparator,!1)}getReverseIterator(){return new by(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new by(this.root,e,this.comparator,!0)}}class by{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=s??Yr.EMPTY,this.right=u??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Yr(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Yr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new On(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g0(this.data.getIterator())}getIteratorFrom(e){return new g0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class g0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ql(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new Hn(ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class m0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new m0("Invalid base64 string: "+s):s}}(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const Hx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(n){if(gt(!!n),"string"==typeof n){let e=0;const t=Hx.exec(n);if(gt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function y0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function v0(n){const e=n.mapValue.fields.__previous_value__;return y0(e)?v0(e):e}function Ty(n){const e=iu(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class Gx{constructor(e,t,r,s,u,l,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class Jl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}const Xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ed={nullValue:"NULL_VALUE"};function td(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?y0(n)?4:sD(n)?9007199254740991:10:tt()}function Mo(n,e){if(n===e)return!0;const t=td(n);if(t!==td(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ty(n).isEqual(Ty(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=iu(r.timestampValue),l=iu(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ic(n.bytesValue).isEqual(Ic(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return _r(r.geoPointValue.latitude)===_r(s.geoPointValue.latitude)&&_r(r.geoPointValue.longitude)===_r(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return _r(r.integerValue)===_r(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=_r(r.doubleValue),l=_r(s.doubleValue);return u===l?Bh(u)===Bh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return eu(n.arrayValue.values||[],e.arrayValue.values||[],Mo);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(rD(u)!==rD(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Mo(u[m],l[m])))return!1;return!0}(n,e);default:return tt()}var s}function Dc(n,e){return void 0!==(n.values||[]).find(t=>Mo(t,e))}function su(n,e){if(n===e)return 0;const t=td(n),r=td(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=_r(s.integerValue||s.doubleValue),m=_r(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return _0(n.timestampValue,e.timestampValue);case 4:return _0(Ty(n),Ty(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Ic(s),m=Ic(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Ut(l[w],m[w]);if(0!==b)return b}return Ut(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Ut(_r(s.latitude),_r(u.latitude));return 0!==l?l:Ut(_r(s.longitude),_r(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=su(l[w],m[w]);if(b)return b}return Ut(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Xl.mapValue&&u===Xl.mapValue)return 0;if(s===Xl.mapValue)return 1;if(u===Xl.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let x=0;x<m.length&&x<b.length;++x){const R=Ut(m[x],b[x]);if(0!==R)return R;const $=su(l[m[x]],w[b[x]]);if(0!==$)return $}return Ut(m.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function _0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=iu(n),r=iu(e),s=Ut(t.seconds,r.seconds);return 0!==s?s:Ut(t.nanos,r.nanos)}function ug(n){return cg(n)}function cg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=iu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=cg(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${cg(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function nd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sy(n){return!!n&&"integerValue"in n}function Ay(n){return!!n&&"arrayValue"in n}function ST(n){return!!n&&"nullValue"in n}function iD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xy(n){return!!n&&"mapValue"in n}function Cc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zx(n){return"nullValue"in n?ed:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nd(Jl.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function qx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nd(Jl.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xl:tt()}function AT(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oD(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(t)}setAll(e){let t=ir.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Cc(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());xy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];xy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ru(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new gi(Cc(this.value))}}function aD(n){const e=[];return ru(n.fields,(t,r)=>{const s=new ir([t]);if(xy(r)){const u=aD(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Yi(e)}class Yn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Yn(e,0,wt.min(),wt.min(),wt.min(),gi.empty(),0)}static newFoundDocument(e,t,r,s){return new Yn(e,1,t,wt.min(),r,s,0)}static newNoDocument(e,t){return new Yn(e,2,t,wt.min(),wt.min(),gi.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,wt.min(),wt.min(),gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bc{constructor(e,t){this.position=e,this.inclusive=t}}function w0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):su(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function E0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mo(n.position[t],e.position[t]))return!1;return!0}class dg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ro(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class uD{}class Wt extends uD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new xT(e,t,r):"array-contains"===t?new fD(e,r):"in"===t?new pD(e,r):"not-in"===t?new T0(e,r):"array-contains-any"===t?new Tc(e,r):new Wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new lD(e,r):new dD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(su(t,this.value)):null!==t&&td(this.value)===td(t)&&this.matchesComparison(su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends uD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new En(e,t)}matches(e){return mi(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function mi(n){return"and"===n.op}function I0(n){return"or"===n.op}function hg(n){return cD(n)&&mi(n)}function cD(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function D0(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+ug(n.value);if(hg(n))return n.filters.map(e=>D0(e)).join(",");{const e=n.filters.map(t=>D0(t)).join(",");return`${n.op}(${e})`}}function My(n,e){return n instanceof Wt?(t=n,(r=e)instanceof Wt&&t.op===r.op&&t.field.isEqual(r.field)&&Mo(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&My(u,r.filters[l]),!0)}(n,e):void tt();var t,r}function C0(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function b0(n){return n instanceof Wt?`${(e=n).field.canonicalString()} ${e.op} ${ug(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(b0).join(" ,")+"}"}(n):"Filter";var e}class xT extends Wt{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class lD extends Wt{constructor(e,t){super(e,"in",t),this.keys=hD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dD extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=hD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class fD extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ay(t)&&Dc(t.arrayValue,this.value)}}class pD extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dc(this.value.arrayValue,t)}}class T0 extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dc(this.value.arrayValue,t)}}class Tc extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ay(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}}class gD{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function fg(n,e=null,t=[],r=[],s=null,u=null,l=null){return new gD(n,e,t,r,s,u,l)}function Qi(n){const e=Ye(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>D0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),wy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ug(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ug(r)).join(",")),e.dt=t}return e.dt}function pg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ro(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!My(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E0(n.startAt,e.startAt)&&E0(n.endAt,e.endAt)}function S0(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ry(n,e){return n.filters.filter(t=>t instanceof Wt&&t.field.isEqual(e))}function mD(n,e,t){let r=ed,s=!0;for(const u of Ry(n,e)){let l=ed,m=!0;switch(u.op){case"<":case"<=":l=zx(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=ed}AT({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];AT({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function yD(n,e,t){let r=Xl,s=!0;for(const u of Ry(n,e)){let l=Xl,m=!0;switch(u.op){case">=":case">":l=qx(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Xl}oD({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];oD({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class ou{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function A0(n,e,t,r,s,u,l,m){return new ou(n,e,t,r,s,u,l,m)}function gg(n){return new ou(n)}function x0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function M0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function vD(n){return null!==n.collectionGroup}function au(n){const e=Ye(n);if(null===e.wt){e.wt=[];const t=mg(e),r=M0(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new dg(t)),e.wt.push(new dg(ir.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new dg(ir.keyField(),u))}}}return e.wt}function Mi(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=fg(e.path,e.collectionGroup,au(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of au(e))t.push(new dg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new bc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new bc(e.startAt.position,e.startAt.inclusive):null;e._t=fg(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function Ny(n,e){e.getFirstInequalityField(),mg(n);const t=n.filters.concat([e]);return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yg(n,e,t){return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $h(n,e){return pg(Mi(n),Mi(e))&&n.limitType===e.limitType}function R0(n){return`${Qi(Mi(n))}|lt:${n.limitType}`}function Hh(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>b0(r)).join(", ")}]`),wy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ug(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ug(r)).join(",")),`Target(${t})`}(Mi(n))}; limitType=${n.limitType})`}function Sc(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of au(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=w0(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,au(t),r)||t.endAt&&!function(s,u,l){const m=w0(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,au(t),r)));var t,r}function N0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _D(n){return(e,t)=>{let r=!1;for(const s of au(n)){const u=wD(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function wD(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?su(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}class da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return p0(this.inner)}size(){return this.innerSize}}const MT=new On(Ze.comparator);function ds(){return MT}const RT=new On(Ze.comparator);function Py(...n){let e=RT;for(const t of n)e=e.insert(t.key,t);return e}function P0(n){let e=RT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ha(){return vg()}function ED(){return vg()}function vg(){return new da(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wx=new On(Ze.comparator),Zx=new Hn(Ze.comparator);function Gt(...n){let e=Zx;for(const t of n)e=e.add(t);return e}const Kx=new Hn(Ut);function ID(){return Kx}function DD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function _g(n){return{integerValue:""+n}}function CD(n,e){return c0(e)?_g(e):DD(n,e)}class ky{constructor(){this._=void 0}}function bD(n,e,t){return n instanceof Ac?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&y0(s)&&(s=v0(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof uu?TD(n,e):n instanceof cu?Oy(n,e):function(r,s){const u=k0(r,s),l=NT(u)+NT(r.gt);return Sy(u)&&Sy(r.gt)?_g(l):DD(r.serializer,l)}(n,e)}function rd(n,e,t){return n instanceof uu?TD(n,e):n instanceof cu?Oy(n,e):t}function k0(n,e){return n instanceof lu?Sy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ac extends ky{}class uu extends ky{constructor(e){super(),this.elements=e}}function TD(n,e){const t=PT(e);for(const r of n.elements)t.some(s=>Mo(s,r))||t.push(r);return{arrayValue:{values:t}}}class cu extends ky{constructor(e){super(),this.elements=e}}function Oy(n,e){let t=PT(e);for(const r of n.elements)t=t.filter(s=>!Mo(s,r));return{arrayValue:{values:t}}}class lu extends ky{constructor(e,t){super(),this.serializer=e,this.gt=t}}function NT(n){return _r(n.integerValue||n.doubleValue)}function PT(n){return Ay(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fy{constructor(e,t){this.field=e,this.transform=t}}class SD{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ly(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vy{}function AD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xc(n.key,Qn.none()):new zh(n.key,n.data,Qn.none());{const t=n.data,r=gi.empty();let s=new Hn(ir.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new fa(n.key,r,new Yi(s.toArray()),Qn.none())}}function xD(n,e,t){n instanceof zh?function(r,s,u){const l=r.value.clone(),m=kT(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fa?function(r,s,u){if(!Ly(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=kT(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(Uy(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gh(n,e,t,r){return n instanceof zh?function(s,u,l,m){if(!Ly(s.precondition,u))return l;const w=s.value.clone(),b=O0(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof fa?function(s,u,l,m){if(!Ly(s.precondition,u))return l;const w=O0(s.fieldTransforms,m,u),b=u.data;return b.setAll(Uy(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(x=>x.field))}(n,e,t,r):(l=t,Ly(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function MD(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=k0(r.transform,s||null);null!=u&&(null===t&&(t=gi.empty()),t.set(r.field,u))}return t||null}function RD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&eu(t,r,(s,u)=>function Yx(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof uu&&r instanceof uu||t instanceof cu&&r instanceof cu?eu(t.elements,r.elements,Mo):t instanceof lu&&r instanceof lu?Mo(t.gt,r.gt):t instanceof Ac&&r instanceof Ac);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class zh extends Vy{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fa extends Vy{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Uy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kT(n,e,t){const r=new Map;gt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,rd(l,m,t[s]))}return r}function O0(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,bD(u,l,e))}return r}class xc extends Vy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F0 extends Vy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&xD(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Gh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ED();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=AD(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(t,r)=>RD(t,r))&&eu(this.baseMutations,e.baseMutations,(t,r)=>RD(t,r))}}class ND{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){gt(e.mutations.length===r.length);let s=Wx;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new ND(e,t,r,s)}}class PD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class FT{constructor(e,t){this.count=e,this.unchangedNames=t}}var xr,sn;function LT(n){switch(n){default:return tt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function VT(n){if(void 0===n)return pr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case xr.OK:return ce.OK;case xr.CANCELLED:return ce.CANCELLED;case xr.UNKNOWN:return ce.UNKNOWN;case xr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case xr.INTERNAL:return ce.INTERNAL;case xr.UNAVAILABLE:return ce.UNAVAILABLE;case xr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case xr.NOT_FOUND:return ce.NOT_FOUND;case xr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case xr.ABORTED:return ce.ABORTED;case xr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case xr.DATA_LOSS:return ce.DATA_LOSS;default:return tt()}}(sn=xr||(xr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class kD{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return V0}static getOrCreateInstance(){return null===V0&&(V0=new kD),V0}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let V0=null;function OD(){return new TextEncoder}const Qx=new Fh([4294967295,4294967295],0);function UT(n){const e=OD().encode(n),t=new pT;return t.update(e),new Uint8Array(t.digest())}function BT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fh([t,r],0),new Fh([s,u],0)]}class FD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new By(`Invalid padding: ${t}`);if(r<0)throw new By(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new By(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new By(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Fh.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Fh.fromNumber(r)));return 1===s.compare(Qx)&&(s=new Fh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=UT(e),[r,s]=BT(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new FD(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=UT(e),[r,s]=BT(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class By extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jy{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,i.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jy(wt.min(),s,new On(Ut),ds(),Gt())}}class i{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new i(r,t,Gt(),Gt(),Gt())}}class o{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class a{constructor(e,t){this.targetId=e,this.Vt=t}}class c{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class d{constructor(){this.St=0,this.Dt=I(),this.Ct=Ur.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gt(),t=Gt(),r=Gt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:tt()}}),new i(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=I()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class g{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ds(),this.zt=v(),this.Wt=new On(Ut)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(S0(l))if(0===s){const m=new Ze(l.path);this.Yt(r,m,Yn.newNoDocument(m,wt.min()))}else gt(1===s);else{const m=this.ie(r);if(m!==s){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=kD.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,x,R){var $,Z,Ie,Be,Le,Dt;const kt={localCacheCount:x,existenceFilterCount:R.count},Nt=R.unchangedNames;return Nt&&(kt.bloomFilter={applied:0===b,hashCount:null!==($=Nt?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(Be=null===(Ie=null===(Z=Nt?.bits)||void 0===Z?void 0:Z.bitmap)||void 0===Ie?void 0:Ie.length)&&void 0!==Be?Be:0,padding:null!==(Dt=null===(Le=Nt?.bits)||void 0===Le?void 0:Le.padding)&&void 0!==Dt?Dt:0}),kt}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=Ic(u).toUint8Array()}catch(x){if(x instanceof m0)return Bs("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{b=new FD(w,l,m)}catch(x){return Bs(x instanceof By?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return 0===b.It?1:s!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&S0(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,Yn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Gt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new jy(e,t,this.Wt,this.jt,r);return this.jt=ds(),this.zt=v(),this.Wt=new On(Ut),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new d,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Hn(Ut),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new d),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function v(){return new On(Ze.comparator)}function I(){return new On(Ze.comparator)}const C={asc:"ASCENDING",desc:"DESCENDING"},S={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N={and:"AND",or:"OR"};class F{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function H(n,e){return n.useProto3Json||wy(e)?e:{value:e}}function Q(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function De(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function je(n,e){return Q(n,e.toTimestamp())}function Ve(n){return gt(!!n),wt.fromTimestamp(function(e){const t=iu(e);return new Kn(t.seconds,t.nanos)}(n))}function ct(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function At(n){const e=Jt.fromString(n);return gt(tM(e)),e}function Me(n,e){return ct(n.databaseId,e.path)}function Et(n,e){const t=At(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze($y(t))}function on(n,e){return ct(n.databaseId,e)}function Gn(n){const e=At(n);return 4===e.length?Jt.emptyPath():$y(e)}function No(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $y(n){return gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Hy(n,e,t){return{name:Me(n,e),fields:t.value.mapValue.fields}}function Gy(n,e,t){const r=Et(n,e.name),s=Ve(e.updateTime),u=e.createTime?Ve(e.createTime):wt.min(),l=new gi({mapValue:{fields:e.fields}}),m=Yn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function id(n,e){let t;if(e instanceof zh)t={update:Hy(n,e.key,e.value)};else if(e instanceof xc)t={delete:Me(n,e.key)};else if(e instanceof fa)t={update:Hy(n,e.key,e.data),updateMask:aN(e.fieldMask)};else{if(!(e instanceof F0))return tt();t={verify:Me(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Ac)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof uu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof cu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lu)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:je(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:tt()),t;var s}function wg(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Qn.updateTime(Ve(s.updateTime)):void 0!==s.exists?Qn.exists(s.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(gt("REQUEST_TIME"===l.setToServerValue),m=new Ac):"appendMissingElements"in l?m=new uu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new cu(l.removeAllFromArray.values||[]):"increment"in l?m=new lu(u,l.increment):tt();const w=ir.fromServerFormat(l.fieldPath);return new Fy(w,m)}(n,s)):[];var s;if(e.update){const s=Et(n,e.update.name),u=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Yi((e.updateMask.fieldPaths||[]).map(b=>ir.fromServerFormat(b)));return new fa(s,u,l,t,r)}return new zh(s,u,t,r)}if(e.delete){const s=Et(n,e.delete);return new xc(s,t)}if(e.verify){const s=Et(n,e.verify);return new F0(s,t)}return tt()}function zy(n,e){return{documents:[on(n,e.path)]}}function jT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=on(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=on(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return eM(En.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:qh((x=b).field),direction:iN(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=H(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Jx(n){let e=Gn(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){gt(1===r);const x=t.from[0];x.allDescendants?s=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=function(x){const R=Xx(x);return R instanceof En&&hg(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(x=>{return new dg(qy((R=x).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(x){let R;return R="object"==typeof x?x.value:x,wy(R)?null:R}(t.limit));let w=null;var x;t.startAt&&(w=new bc((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new bc(x.values||[],!x.before)}(t.endAt)),A0(e,s,l,u,m,"F",w,b)}function Xx(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qy(e.unaryFilter.field);return Wt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=qy(e.unaryFilter.field);return Wt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qy(e.unaryFilter.field);return Wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=qy(e.unaryFilter.field);return Wt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}(n):void 0!==n.fieldFilter?Wt.create(qy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>Xx(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tt()}}(e.compositeFilter.op))}(n):tt();var e}function iN(n){return C[n]}function sN(n){return S[n]}function oN(n){return N[n]}function qh(n){return{fieldPath:n.canonicalString()}}function qy(n){return ir.fromServerFormat(n.fieldPath)}function eM(n){return n instanceof Wt?function(e){if("=="===e.op){if(iD(e.value))return{unaryFilter:{field:qh(e.field),op:"IS_NAN"}};if(ST(e.value))return{unaryFilter:{field:qh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(iD(e.value))return{unaryFilter:{field:qh(e.field),op:"IS_NOT_NAN"}};if(ST(e.value))return{unaryFilter:{field:qh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qh(e.field),op:sN(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>eM(r));return 1===t.length?t[0]:{compositeFilter:{op:oN(e.op),filters:t}}}(n):tt()}function aN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sd{constructor(e,t,r,s,u=wt.min(),l=wt.min(),m=Ur.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new sd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nM{constructor(e){this.fe=e}}function rM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:LD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Me(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Q(s,u.version.toTimestamp()),createTime:Q(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Eg(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Eg(e.version)}}var s,u;return r}function LD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Eg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ig(n){const e=new Kn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Dg(n,e){const t=(e.baseMutations||[]).map(u=>wg(n.fe,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>wg(n.fe,u)),s=Kn.fromMillis(e.localWriteTimeMs);return new L0(e.batchId,s,t,r)}function $0(n){const e=Ig(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ig(n.lastLimboFreeSnapshotVersion):wt.min();let r;var s;return void 0!==n.query.documents?(gt(1===(s=n.query).documents.length),r=Mi(gg(Gn(s.documents[0])))):r=Mi(Jx(n.query)),new sd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function iM(n,e){const t=Eg(e.snapshotVersion),r=Eg(e.lastLimboFreeSnapshotVersion);let s;s=S0(e.target)?zy(n.fe,e.target):jT(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qi(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function $T(n){const e=Jx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yg(e,e.limit,"L"):e}function HT(n,e){return new PD(e.largestBatchId,wg(n.fe,e.overlayMutation))}function sM(n,e){const t=e.path.lastSegment();return[n,Ar(e.path.popLast()),t]}function oM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Eg(r.readTime),documentKey:Ar(r.documentKey.path),largestBatchId:r.largestBatchId}}class cN{getBundleMetadata(e,t){return aM(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ig(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return aM(e).put({bundleId:(r=t).id,createTime:Eg(Ve(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return uM(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:$T(s.bundledQuery),readTime:Ig(s.readTime)};var s})}saveNamedQuery(e,t){return uM(e).put({name:(r=t).name,readTime:Eg(Ve(r.readTime)),bundledQuery:r.bundledQuery});var r}}function aM(n){return Vr(n,"bundles")}function uM(n){return Vr(n,"namedQueries")}class VD{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new VD(e,t.uid||"")}getOverlay(e,t){return H0(e).get(sM(this.userId,t)).next(r=>r?HT(this.serializer,r):null)}getOverlays(e,t){const r=ha();return ie.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new PD(t,l);s.push(this.we(e,m))}),ie.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(Ar(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(H0(e).J("collectionPathOverlayIndex",m))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const s=ha(),u=Ar(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return H0(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=HT(this.serializer,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=ha();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return H0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,x)=>{const R=HT(this.serializer,b);u.size()<s||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):x.done()}).next(()=>u)}we(e,t){return H0(e).put(function(r,s,u){const[l,m,w]=sM(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:id(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function H0(n){return Vr(n,"documentOverlays")}class Cg{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(_r(e.integerValue));else if("doubleValue"in e){const r=_r(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Bh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ic(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?sD(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):tt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function lN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cM(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=lN(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Cg.Ve=new Cg;class dN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=cM(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=cM(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class hN{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class fN{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class G0{constructor(){this.je=new dN,this.ze=new hN(this.je),this.We=new fN(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class bg{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bg(this.indexId,this.documentKey,this.arrayValue,r)}}function Wh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lM(n.arrayValue,e.arrayValue),0!==t?t:(t=lM(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function lM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){gt(e.collectionGroup===this.collectionId);const t=HI(e);if(void 0!==t&&!this.en(t))return!1;const r=tu(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[l++],m))return!1}++u}for(;u<r.length;++u){const m=r[u];if(l>=this.Ye.length||!this.sn(this.Ye[l++],m))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function dM(n){var e,t;if(gt(n instanceof Wt||n instanceof En),n instanceof Wt){if(n instanceof pD){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Wt.create(n.field,"==",u)))||[];return En.create(s,"or")}return n}const r=n.filters.map(s=>dM(s));return En.create(r,n.op)}function gN(n){if(0===n.getFilters().length)return[];const e=qT(dM(n));return gt(hM(e)),GT(e)||zT(e)?[e]:e.getFilters()}function GT(n){return n instanceof Wt}function zT(n){return n instanceof En&&hg(n)}function hM(n){return GT(n)||zT(n)||function(e){if(e instanceof En&&I0(e)){for(const t of e.getFilters())if(!GT(t)&&!zT(t))return!1;return!0}return!1}(n)}function qT(n){if(gt(n instanceof Wt||n instanceof En),n instanceof Wt)return n;if(1===n.filters.length)return qT(n.filters[0]);const e=n.filters.map(r=>qT(r));let t=En.create(e,n.op);return t=UD(t),hM(t)?t:(gt(t instanceof En),gt(mi(t)),gt(t.filters.length>1),t.filters.reduce((r,s)=>WT(r,s)))}function WT(n,e){let t;return gt(n instanceof Wt||n instanceof En),gt(e instanceof Wt||e instanceof En),t=n instanceof Wt?e instanceof Wt?En.create([n,e],"and"):fM(n,e):e instanceof Wt?fM(e,n):function(r,s){if(gt(r.filters.length>0&&s.filters.length>0),mi(r)&&mi(s))return C0(r,s.getFilters());const u=I0(r)?r:s,l=I0(r)?s:r,m=u.filters.map(w=>WT(w,l));return En.create(m,"or")}(n,e),UD(t)}function fM(n,e){if(mi(e))return C0(e,n.getFilters());{const t=e.filters.map(r=>WT(n,r));return En.create(t,"or")}}function UD(n){if(gt(n instanceof Wt||n instanceof En),n instanceof Wt)return n;const e=n.getFilters();if(1===e.length)return UD(e[0]);if(cD(n))return n;const t=e.map(s=>UD(s)),r=[];return t.forEach(s=>{s instanceof Wt?r.push(s):s instanceof En&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:En.create(r,n.op)}class mN{constructor(){this.rn=new ZT}addToCollectionParentIndex(e,t){return this.rn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(js.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class ZT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Hn(Jt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Hn(Jt.comparator)).toArray()}}const BD=new Uint8Array(0);class yN{constructor(e,t){this.user=e,this.databaseId=t,this.on=new ZT,this.un=new da(r=>Qi(r),(r,s)=>pg(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ar(s)};return pM(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[sg(t),""],!1,!0);return pM(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(la(l.parent))}return r})}addFieldIndex(e,t){const r=jD(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=q0(e);return u.next(m=>{l.put(oM(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=jD(e),s=q0(e),u=z0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=z0(e);let s=!0;const u=new Map;return ie.forEach(this.cn(t),l=>this.an(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Gt();const m=[];return ie.forEach(u,(w,b)=>{var x;Fe("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Nt=>`${Nt.fieldPath}:${Nt.kind}`).join(",")}`} to execute ${Qi(t)}`);const R=function(Nt,Bt){const Zt=HI(Bt);if(void 0===Zt)return null;for(const an of Ry(Nt,Zt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(b,w),$=function(Nt,Bt){const Zt=new Map;for(const an of tu(Bt))for(const ps of Ry(Nt,an.fieldPath))switch(ps.op){case"==":case"in":Zt.set(an.fieldPath.canonicalString(),ps.value);break;case"not-in":case"!=":return Zt.set(an.fieldPath.canonicalString(),ps.value),Array.from(Zt.values())}return null}(b,w),Z=function(Nt,Bt){const Zt=[];let an=!0;for(const ps of tu(Bt)){const Og=0===ps.kind?mD(Nt,ps.fieldPath,Nt.startAt):yD(Nt,ps.fieldPath,Nt.startAt);Zt.push(Og.value),an&&(an=Og.inclusive)}return new bc(Zt,an)}(b,w),Ie=function(Nt,Bt){const Zt=[];let an=!0;for(const ps of tu(Bt)){const Og=0===ps.kind?yD(Nt,ps.fieldPath,Nt.endAt):mD(Nt,ps.fieldPath,Nt.endAt);Zt.push(Og.value),an&&(an=Og.inclusive)}return new bc(Zt,an)}(b,w),Be=this.hn(w,b,Z),Le=this.hn(w,b,Ie),Dt=this.ln(w,b,$),kt=this.fn(w.indexId,R,Be,Z.inclusive,Le,Ie.inclusive,Dt);return ie.forEach(kt,Nt=>r.H(Nt,t.limit).next(Bt=>{Bt.forEach(Zt=>{const an=Ze.fromSegments(Zt.documentKey);l.has(an)||(l=l.add(an),m.push(an))})}))}).next(()=>m)}return ie.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:gN(En.create(e.filters,"and")).map(r=>fg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),x=[];for(let R=0;R<w;++R){const $=t?this.dn(t[R/b]):BD,Z=this.wn(e,$,r[R%b],s),Ie=this._n(e,$,u[R%b],l),Be=m.map(Le=>this.wn(e,$,Le,!0));x.push(...this.createRange(Z,Ie,Be))}return x}wn(e,t,r,s){const u=new bg(e,Ze.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new bg(e,Ze.empty(),t,r);return s?u.Je():u}an(e,t){const r=new pN(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ie.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Hn(ir.comparator),b=!1;for(const x of m.filters)for(const R of x.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?b=!0:w=w.add(R.field));for(const x of m.orderBy)x.field.isKeyField()||(w=w.add(x.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new G0;for(const s of tu(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Cg.Ve._e(u,l)}return r.Qe()}dn(e){const t=new G0;return Cg.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new G0;return Cg.Ve._e(nd(this.databaseId,t),r.He(function(s){const u=tu(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new G0);let u=0;for(const l of tu(e)){const m=r[u++];for(const w of s)if(this.yn(t,l.fieldPath)&&Ay(m))s=this.pn(s,l,m);else{const b=w.He(l.kind);Cg.Ve._e(m,b)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new G0;w.seed(m.Qe()),Cg.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof Wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jD(e),s=q0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ie.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,x){const R=x?new Kl(x.sequenceNumber,new js(Ig(x.readTime),new Ze(la(x.documentKey)),x.largestBatchId)):Kl.empty(),$=b.fields.map(([Z,Ie])=>new og(ir.fromServerFormat(Z),Ie));return new vy(b.indexId,b.collectionGroup,$,R)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=jD(e),u=q0(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ie.forEach(m,w=>u.put(oM(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ie.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ie.forEach(m,w=>this.En(e,s,w).next(b=>{const x=this.An(u,w);return b.isEqual(x)?ie.resolve():this.vn(e,u,w,b,x)}))))})}Rn(e,t,r,s){return z0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return z0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=z0(e);let u=new Hn(Wh);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new bg(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Hn(Wh);const s=this.mn(t,e);if(null==s)return r;const u=HI(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ay(l))for(const m of l.arrayValue.values||[])r=r.add(new bg(t.indexId,e.key,this.dn(m),s))}else r=r.add(new bg(t.indexId,e.key,BD,s));return r}vn(e,t,r,s,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,x,R){const $=m.getIterator(),Z=w.getIterator();let Ie=Ql($),Be=Ql(Z);for(;Ie||Be;){let Le=!1,Dt=!1;if(Ie&&Be){const kt=b(Ie,Be);kt<0?Dt=!0:kt>0&&(Le=!0)}else null!=Ie?Dt=!0:Le=!0;Le?(x(Be),Be=Ql(Z)):Dt?(R(Ie),Ie=Ql($)):(Ie=Ql($),Be=Ql(Z))}}(s,u,Wh,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ie.waitFor(l)}Tn(e){let t=1;return q0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Wh(l,m)).filter((l,m,w)=>!m||0!==Wh(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=Wh(l,e),w=Wh(l,t);if(0===m)s[0]=e.Je();else if(m>0&&w<0)s.push(l),s.push(l.Je());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,BD,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,BD,[]]))}return u}bn(e,t){return Wh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gM)}getMinOffset(e,t){return ie.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||tt())).next(gM)}}function pM(n){return Vr(n,"collectionParents")}function z0(n){return Vr(n,"indexEntries")}function jD(n){return Vr(n,"indexConfiguration")}function q0(n){return Vr(n,"indexState")}function gM(n){gt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;o0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new js(e.readTime,e.documentKey,t)}const mM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yM(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(x,R,$)=>(m++,$.delete()));u.push(w.next(()=>{gt(1===m)}));const b=[];for(const x of t.mutations){const R=ZI(e,x.key.path,t.batchId);u.push(s.delete(R)),b.push(x.key)}return ie.waitFor(u).next(()=>b)}function $D(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(41943040,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);class HD{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){gt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new HD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Wy(e),l=Zh(e);return l.add({}).next(m=>{gt("number"==typeof m);const w=new L0(m,t,r,s),b=function($,Z,Ie){const Be=Ie.baseMutations.map(Dt=>id($.fe,Dt)),Le=Ie.mutations.map(Dt=>id($.fe,Dt));return{userId:Z,batchId:Ie.batchId,localWriteTimeMs:Ie.localWriteTime.toMillis(),baseMutations:Be,mutations:Le}}(this.serializer,this.userId,w),x=[];let R=new Hn(($,Z)=>Ut($.canonicalString(),Z.canonicalString()));for(const $ of s){const Z=ZI(this.userId,$.key.path,m);R=R.add($.key.path.popLast()),x.push(l.put(b)),x.push(u.put(Z,IT))}return R.forEach($=>{x.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ie.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Zh(e).get(t).next(r=>r?(gt(r.userId===this.userId),Dg(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ie.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Zh(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(gt(m.batchId>=r),u=Dg(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).j("userMutationsIndex",t).next(r=>r.map(s=>Dg(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Iy(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Wy(e).X({range:s},(l,m,w)=>{const[b,x,R]=l,$=la(x);if(b===this.userId&&t.path.isEqual($))return Zh(e).get(R).next(Z=>{if(!Z)throw tt();gt(Z.userId===this.userId),u.push(Dg(this.serializer,Z))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ut);const s=[];return t.forEach(u=>{const l=Iy(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Wy(e).X({range:m},(b,x,R)=>{const[$,Z,Ie]=b,Be=la(Z);$===this.userId&&u.path.isEqual(Be)?r=r.add(Ie):R.done()});s.push(w)}),ie.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Iy(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Hn(Ut);return Wy(e).X({range:l},(w,b,x)=>{const[R,$,Z]=w,Ie=la($);R===this.userId&&r.isPrefixOf(Ie)?Ie.length===s&&(m=m.add(Z)):x.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Zh(e).get(u).next(l=>{if(null===l)throw tt();gt(l.userId===this.userId),r.push(Dg(this.serializer,l))}))}),ie.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return yM(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ie.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Wy(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=la(u[1]);s.push(w)}else m.done()}).next(()=>{gt(0===s.length)})})}containsKey(e,t){return vM(e,this.userId,t)}xn(e){return _M(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vM(n,e,t){const r=Iy(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Wy(n).X({range:u,Y:!0},(m,w,b)=>{const[x,R,$]=m;x===e&&R===s&&(l=!0),b.done()}).next(()=>l)}function Zh(n){return Vr(n,"mutations")}function Wy(n){return Vr(n,"documentMutations")}function _M(n){return Vr(n,"mutationQueues")}class Tg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Tg(0)}static Mn(){return new Tg(-1)}}class vN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Tg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>wt.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zy(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Zy(e).X((l,m)=>{const w=$0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ie.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Zy(e).X((r,s)=>{const u=$0(s);t(u)})}$n(e){return wM(e).get("targetGlobalKey").next(t=>(gt(null!==t),t))}On(e,t){return wM(e).put("targetGlobalKey",t)}Fn(e,t){return Zy(e).put(iM(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Qi(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Zy(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=$0(m);pg(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Kh(e);return t.forEach(l=>{const m=Ar(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ie.waitFor(s)}removeMatchingKeys(e,t,r){const s=Kh(e);return ie.forEach(t,u=>{const l=Ar(u.path);return ie.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Kh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Kh(e);let u=Gt();return s.X({range:r,Y:!0},(l,m,w)=>{const b=la(l[1]),x=new Ze(b);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=Ar(t.path),s=IDBKeyRange.bound([r],[sg(r)],!1,!0);let u=0;return Kh(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return Zy(e).get(t).next(r=>r?$0(r):null)}}function Zy(n){return Vr(n,"targets")}function wM(n){return Vr(n,"targetGlobal")}function Kh(n){return Vr(n,"targetDocuments")}function EM([n,e],[t,r]){const s=Ut(n,t);return 0===s?Ut(e,r):s}class _N{constructor(e){this.Ln=e,this.buffer=new Hn(EM),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){wc(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nu(r)}yield t.Qn(3e5)}))}}class wN{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(ro.ct);const r=new _N(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(mM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mM):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,m,w,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),s=this.params.maximumSequenceNumbersToCollect):s=R,l=Date.now(),this.nthSequenceNumber(e,s))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(b=Date.now(),X_()<=oa.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-x}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(b-w)+`ms\nTotal Duration: ${b-x}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:R})))}}class EN{constructor(e,t){this.db=e,this.garbageCollector=function DM(n,e){return new wN(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return GD(e,r)}removeReference(e,t,r){return GD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return GD(e,t)}Xn(e,t){return function(r,s){let u=!1;return _M(r).Z(l=>vM(r,l,s).next(m=>(m&&(u=!0),ie.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,wt.min()),Kh(e).delete([0,Ar(l.path)])))});s.push(w)}}).next(()=>ie.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return GD(e,t)}Yn(e,t){const r=Kh(e);let s,u=ro.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==ro.ct&&t(new Ze(la(s)),u),u=b,s=w):u=ro.ct}).next(()=>{u!==ro.ct&&t(new Ze(la(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function GD(n,e){return Kh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ar(e.path),sequenceNumber:r}));var r}class CM{constructor(){this.changes=new da(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class IN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sg(e).put(r)}removeEntry(e,t,r){return Sg(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],LD(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Yn.newInvalidDocument(t);return Sg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(W0(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Yn.newInvalidDocument(t)};return Sg(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(W0(t))},(s,u)=>{r={document:this.ts(t,u),size:$D(u)}}).next(()=>r)}getEntries(e,t){let r=ds();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=ds(),s=new On(Ze.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),s=s.insert(u,$D(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ie.resolve();let s=new Hn(AM);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(W0(s.first()),W0(s.last())),l=s.getIterator();let m=l.getNext();return Sg(e).X({index:"documentKeyIndex",range:u},(w,b,x)=>{const R=Ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&AM(m,R)<0;)r(m,null),m=l.getNext();m&&m.isEqual(R)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?x.G(W0(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),LD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sg(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=ds();for(const x of w){const R=this.ts(Ze.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);R.isFoundDocument()&&(Sc(t,R)||s.has(R.key))&&(b=b.insert(R.key,R))}return b})}getAllFromCollectionGroup(e,t,r,s){let u=ds();const l=SM(t,r),m=SM(t,js.max());return Sg(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,x)=>{const R=this.ts(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(R.key,R),u.size===s&&x.done()}).next(()=>u)}newChangeBuffer(e){return new DN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TM(e).get("remoteDocumentGlobalKey").next(t=>(gt(!!t),t))}Zn(e,t){return TM(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function uN(n,e){let t;if(e.document)t=Gy(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),s=Ig(e.noDocument.readTime);t=Yn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ze.fromSegments(e.unknownDocument.path),s=Ig(e.unknownDocument.version);t=Yn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Kn(r[0],r[1]);return wt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return Yn.newInvalidDocument(e)}}function bM(n){return new IN(n)}class DN extends CM{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new da(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Hn((u,l)=>Ut(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=rM(this.os.serializer,l);s=s.add(u.path.popLast()),r+=$D(w)-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=rM(this.os.serializer,l.convertToNoDocument(wt.min()));t.push(this.os.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function TM(n){return Vr(n,"remoteDocumentGlobal")}function Sg(n){return Vr(n,"remoteDocumentsV14")}function W0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SM(n,e){const t=e.documentKey.path.toArray();return[n,LD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AM(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ut(t[u],r[u]),s)return s;return s=Ut(t.length,r.length),s||(s=Ut(t[t.length-2],r[r.length-2]),s||Ut(t[t.length-1],r[r.length-1]))}class CN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xM{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Gh(r.mutation,s,Yi.empty(),Kn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const s=ha();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Py();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ha();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=ds();const l=vg(),m=vg();return t.forEach((w,b)=>{const x=r.get(b.key);s.has(b.key)&&(void 0===x||x.mutation instanceof fa)?u=u.insert(b.key,b):void 0!==x?(l.set(b.key,x.mutation.getFieldMask()),Gh(x.mutation,b,x.mutation.getFieldMask(),Kn.now())):l.set(b.key,Yi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,x)=>l.set(b,x)),t.forEach((b,x)=>{var R;return m.set(b,new CN(x,null!==(R=l.get(b))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=vg();let s=new On((l,m)=>l-m),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let x=r.get(w)||Yi.empty();x=m.applyToLocalView(b,x),r.set(w,x);const R=(s.get(m.batchId)||Gt()).add(w);s=s.insert(m.batchId,R)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,x=w.value,R=ED();x.forEach($=>{if(!u.has($)){const Z=AD(t.get($),r.get($));null!==Z&&R.set($,Z),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,R))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):vD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ie.resolve(ha());let m=-1,w=u;return l.next(b=>ie.forEach(b,(x,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(x)?ie.resolve():this.remoteDocumentCache.getEntry(e,x).next($=>{w=w.insert(x,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Gt())).next(x=>({batchId:m,changes:P0(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let s=Py();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Py();return this.indexManager.getCollectionParents(e,s).next(l=>ie.forEach(l,m=>{const w=(b=t,x=m.child(s),new ou(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((x,R)=>{u=u.insert(x,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Yn.newInvalidDocument(b)))});let l=Py();return u.forEach((m,w)=>{const b=s.get(m);void 0!==b&&Gh(b.mutation,w,Yi.empty(),Kn.now()),Sc(t,w)&&(l=l.insert(m,w))}),l})}}class bN{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ie.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ve(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:$T(r.bundledQuery),readTime:Ve(r.readTime)}),ie.resolve();var r}}class TN{constructor(){this.overlays=new On(Ze.comparator),this.ls=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ha();return ie.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=ha(),u=t.length+1,l=new Ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new On((b,x)=>b-x);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=u.get(b.largestBatchId);null===x&&(x=ha(),u=u.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=ha(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,x)=>m.set(b,x)),!(m.size()>=s)););return ie.resolve(m)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new PD(t,r));let u=this.ls.get(t);void 0===u&&(u=Gt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class KT{constructor(){this.fs=new Hn(Ri.ds),this.ws=new Hn(Ri._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ri(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ri(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new Jt([])),r=new Ri(t,e),s=new Ri(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new Jt([])),r=new Ri(t,e),s=new Ri(t,e+1);let u=Gt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Ri(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ri{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Ut(e.As,t.As)}static _s(e,t){return Ut(e.As,t.As)||Ze.comparator(e.key,t.key)}}class SN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Hn(Ri.ds)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new L0(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new Ri(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ri(t,0),s=new Ri(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.Ps(l.As);u.push(m)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ut);return t.forEach(s=>{const u=new Ri(s,0),l=new Ri(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ie.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const l=new Ri(new Ze(u),0);let m=new Hn(Ut);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.As)),!0)},l),ie.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){gt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,s=>{const u=new Ri(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ri(t,0),s=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ie.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class AN{constructor(e){this.Ds=e,this.docs=new On(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=ds();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Yn.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=ds();const l=t.path,m=new Ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:x}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||o0(zI(x),r)<=0||(s.has(x.key)||Sc(t,x))&&(u=u.insert(x.key,x.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,t,r,s){tt()}Cs(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xN(this)}getSize(e){return ie.resolve(this.size)}}class xN extends CM{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class MN{constructor(e){this.persistence=e,this.xs=new da(t=>Qi(t),pg),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new KT,this.targetCount=0,this.Ms=Tg.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ie.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Tg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Fn(t),ie.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ie.waitFor(u).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ks.containsKey(t))}}class YT{constructor(e,t){this.$s={},this.overlays={},this.Os=new ro(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new MN(this),this.indexManager=new mN,this.remoteDocumentCache=new AN(r=>this.referenceDelegate.Ls(r)),this.serializer=new nM(t),this.qs=new bN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new SN(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new RN(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ie.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class RN extends _y{constructor(e){super(),this.currentSequenceNumber=e}}class zD{constructor(e){this.persistence=e,this.Qs=new KT,this.js=null}static zs(e){return new zD(e)}get Ws(){if(this.js)return this.js;throw tt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ws,r=>{const s=Ze.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,wt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ie.or([()=>ie.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class NN{constructor(e){this.serializer=e}O(e,t,r,s){const u=new ag("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",l0,{unique:!0}),m.createObjectStore("documentMutations"),MM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ie.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),MM(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",l0,{unique:!0});const x=w.store("mutations"),R=b.map($=>x.put($));return ie.waitFor(R)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:XI});w.createIndex("collectionPathOverlayIndex",f0,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",jx,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:d0});w.createIndex("documentKeyIndex",KI),w.createIndex("collectionGroupIndex",YI)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:DT}).createIndex("sequenceNumberIndex",JI,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:jh}).createIndex("documentKeyIndex",CT,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=$D(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ie.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ie.forEach(m,w=>{gt(w.userId===u.userId);const b=Dg(this.serializer,w);return yM(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new Jt(l),b=[0,Ar(w)];u.push(t.get(b).next(x=>x?ie.resolve():t.put({targetId:0,path:Ar(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:QI});const r=t.store("collectionParents"),s=new ZT,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:Ar(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new Jt(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const x=la(m);return u(x.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=$0(s),l=iM(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ze(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?Ze.fromSegments(b.noDocument.path):b.unknownDocument?Ze.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(x))}).next(()=>ie.waitFor(s))}si(e,t){const r=t.store("mutations"),s=bM(this.serializer),u=new YT(zD.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let x=null!==(b=m.get(w.userId))&&void 0!==b?b:Gt();Dg(this.serializer,w).keys().forEach(R=>x=x.add(R)),m.set(w.userId,x)}),ie.forEach(m,(w,b)=>{const x=new Kr(b),R=VD.de(this.serializer,x),$=u.getIndexManager(x),Z=HD.de(x,this.serializer,$,u.referenceDelegate);return new xM(s,Z,R,$).recalculateAndSaveOverlaysForDocumentKeys(new Cy(t,ro.ct),w).next()})})}}function MM(n){n.createObjectStore("targetDocuments",{keyPath:h0}).createIndex("documentTargetsIndex",Bx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dy,{unique:!0}),n.createObjectStore("targetGlobal")}const QT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class JT{constructor(e,t,r,s,u,l,m,w,b,x,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=x,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!JT.D())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EN(this,s),this.di=t+"main",this.serializer=new nM(w),this.wi=new xo(this.di,this.ui,new NN(this.serializer)),this.Bs=new vN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bM(this.serializer),this.qs=new cN,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===x&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,QT);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ro(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(wc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Z0(e).get("owner").next(t=>ie.resolve(this.Ri(t)))}Pi(e){return WD(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Vr(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ie.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ie.resolve(!0):Z0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,QT);return!1}}return!(!this.networkEnabled||!this.inForeground)||WD(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>{if(this.clientId!==s.clientId){const l=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||l&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Cy(t,ro.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>WD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return HD.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yN(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return VD.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?bT:14===l?nD:13===l?tD:12===l?$x:11===l?eD:void tt();var l;let m;return this.wi.runTransaction(e,s,u,w=>(m=new Cy(w,this.Os?this.Os.next():ro.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ce.FAILED_PRECONDITION,a0);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return Z0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,QT)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Z0(e).put("owner",t)}static D(){return xo.D()}Ai(e){const t=Z0(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,dn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Z0(n){return Vr(n,"owner")}function WD(n){return Vr(n,"clientMetadata")}function XT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=Gt(),s=Gt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new eS(e,t.fromCache,r,s)}}class RM{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(x0(t))return ie.resolve(null);let r=Mi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=yg(t,null,"F"),r=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Gt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,l,w.readTime)?this.Ki(e,yg(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,s){return x0(t)||s.isEqual(wt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(X_()<=oa.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hh(t)),this.Wi(e,l,t,GI(s,-1)))})}ji(e,t){let r=new Hn(_D(e));return t.forEach((s,u)=>{Sc(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return X_()<=oa.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Hh(t)),this.Ui.getDocumentsMatchingQuery(e,t,js.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class PN{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new On(Ut),this.Yi=new da(u=>Qi(u),pg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xM(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function NM(n,e,t,r){return new PN(n,e,t,r)}function PM(n,e){return tS.apply(this,arguments)}function tS(){return tS=(0,Ee.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Gt();for(const b of s){l.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}for(const b of u){m.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),tS.apply(this,arguments)}function kN(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const x=w.batch,R=x.keys();let $=ie.resolve();return R.forEach(Z=>{$=$.next(()=>b.getEntry(m,Z)).next(Ie=>{const Be=w.docVersions.get(Z);gt(null!==Be),Ie.version.compareTo(Be)<0&&(x.applyToRemoteDocument(Ie,w),Ie.isValidDocument()&&(Ie.setReadTime(w.commitVersion),b.addEntry(Ie)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Gt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function kM(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function ON(n,e){const t=Ye(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const m=[];e.targetChanges.forEach((x,R)=>{const $=s.get(R);if(!$)return;m.push(t.Bs.removeMatchingKeys(u,x.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,x.addedDocuments,R)));let Z=$.withSequenceNumber(u.currentSequenceNumber);var Ie,Be,Le;null!==e.targetMismatches.get(R)?Z=Z.withResumeToken(Ur.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):x.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(x.resumeToken,r)),s=s.insert(R,Z),Be=Z,Le=x,(0===(Ie=$).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-Ie.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,Z))});let w=ds(),b=Gt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,x))}),m.push(OM(u,l,e.documentUpdates).next(x=>{w=x.nr,b=x.sr})),!r.isEqual(wt.min())){const x=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(x)}return ie.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=s,u))}function OM(n,e,t){let r=Gt(),s=Gt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=ds();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(wt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Fe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:l,sr:s}})}function FN(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ky(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ie.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new sd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Yy(n,e,t){return nS.apply(this,arguments)}function nS(){return nS=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!wc(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),nS.apply(this,arguments)}function ZD(n,e,t){const r=Ye(n);let s=wt.min(),u=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const x=Ye(m),R=x.Yi.get(b);return void 0!==R?ie.resolve(x.Ji.get(R)):x.Bs.getTargetData(w,b)}(r,l,Mi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:wt.min(),t?u:Gt())).next(m=>(VM(r,N0(e),m),{documents:m,ir:u})))}function FM(n,e){const t=Ye(n),r=Ye(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function LM(n,e){const t=Ye(n),r=t.Xi.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,GI(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(VM(t,e,s),s))}function VM(n,e,t){let r=n.Xi.get(e)||wt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function rS(){return rS=(0,Ee.Z)(function*(n,e,t,r){const s=Ye(n);let u=Gt(),l=ds();for(const b of t){const x=e.rr(b.metadata.name);b.document&&(u=u.add(x));const R=e.ur(b);R.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(x,R)}const m=s.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Ky(s,(b=r,Mi(gg(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>OM(b,m,l).next(x=>(m.apply(b),x)).next(x=>s.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,x.nr,x.sr)).next(()=>x.nr)))}),rS.apply(this,arguments)}function VN(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,Ee.Z)(function*(n,e,t=Gt()){const r=yield Ky(n,Mi($T(e.bundledQuery))),s=Ye(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Ve(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Ur.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(m.targetId,m),s.Bs.updateTargetData(u,m).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),iS.apply(this,arguments)}function UM(n,e){return`firestore_clients_${n}_${e}`}function BM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sS(n,e){return`firestore_targets_${n}_${e}`}class KD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Re(s.error.code,s.error.message))),l?new KD(e,t,s.state,u):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class K0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new K0(e,r.state,s):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class YD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=ID();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=c0(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new YD(e,u):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oS{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oS(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aS{constructor(){this.activeTargetIds=ID()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uS{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new On(Ut),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=UM(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new aS),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(UM(e.persistenceKey,s));if(u){const l=YD.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sS(this.persistenceKey,e));if(r){const s=K0.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sS(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=ro.ct;if(null!=u)try{const m=JSON.parse(u);gt("number"==typeof m),l=m}catch(m){pr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==ro.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new KD(this.currentUser,e,t,r),u=BM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=BM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=sS(this.persistenceKey,e),u=new K0(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return YD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return KD.ar(new Kr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return K0.ar(s,t)}br(e){return oS.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=ID();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class jM{constructor(){this.Hr=new aS,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new aS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UN{Yr(e){}shutdown(){}}class $M{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let QD=null;function cS(){return null===QD?QD=268435456+Math.round(2147483648*Math.random()):QD++,"0x"+QD.toString(16)}const BN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jN{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const fs="WebChannelConnection";class $N extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=cS(),m=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,s,u),this.Ao(e,m,w,r).then(b=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Bs("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${BN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=cS();return new Promise((l,m)=>{const w=new fT;w.setWithCredentials(!0),w.listenOnce(Ux.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case LI.NO_ERROR:const x=w.getResponseJson();Fe(fs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),l(x);break;case LI.TIMEOUT:Fe(fs,`RPC '${e}' ${u} timed out`),m(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case LI.HTTP_ERROR:const R=w.getStatus();if(Fe(fs,`RPC '${e}' ${u} failed with status:`,R,"response text:",w.getResponseText()),R>0){let $=w.getResponseJson();Array.isArray($)&&($=$[0]);const Z=$?.error;if(Z&&Z.status&&Z.message){const Ie=function(Be){const Le=Be.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Le)>=0?Le:ce.UNKNOWN}(Z.status);m(new Re(Ie,Z.message))}else m(new Re(ce.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Fe(fs,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(s);Fe(fs,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const s=cS(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cT(),m=lT(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new hT({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const x=u.join("");Fe(fs,`Creating RPC '${e}' stream ${s}: ${x}`,w);const R=l.createWebChannel(x,w);let $=!1,Z=!1;const Ie=new jN({ro:Le=>{Z?Fe(fs,`Not sending because RPC '${e}' stream ${s} is closed:`,Le):($||(Fe(fs,`Opening RPC '${e}' stream ${s} transport.`),R.open(),$=!0),Fe(fs,`RPC '${e}' stream ${s} sending:`,Le),R.send(Le))},oo:()=>R.close()}),Be=(Le,Dt,kt)=>{Le.listen(Dt,Nt=>{try{kt(Nt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return Be(R,gy.EventType.OPEN,()=>{Z||Fe(fs,`RPC '${e}' stream ${s} transport opened.`)}),Be(R,gy.EventType.CLOSE,()=>{Z||(Z=!0,Fe(fs,`RPC '${e}' stream ${s} transport closed`),Ie.wo())}),Be(R,gy.EventType.ERROR,Le=>{Z||(Z=!0,Bs(fs,`RPC '${e}' stream ${s} transport errored:`,Le),Ie.wo(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),Be(R,gy.EventType.MESSAGE,Le=>{var Dt;if(!Z){const kt=Le.data[0];gt(!!kt);const Nt=kt,Bt=Nt.error||(null===(Dt=Nt[0])||void 0===Dt?void 0:Dt.error);if(Bt){Fe(fs,`RPC '${e}' stream ${s} received error:`,Bt);const Zt=Bt.status;let an=function(Og){const Q1=xr[Og];if(void 0!==Q1)return VT(Q1)}(Zt),ps=Bt.message;void 0===an&&(an=ce.INTERNAL,ps="Unknown error status: "+Zt+" with message "+Bt.message),Z=!0,Ie.wo(new Re(an,ps)),R.close()}else Fe(fs,`RPC '${e}' stream ${s} received:`,kt),Ie._o(kt)}}),Be(m,dT.STAT_EVENT,Le=>{Le.stat===VI.PROXY?Fe(fs,`RPC '${e}' stream ${s} detected buffering proxy`):Le.stat===VI.NOPROXY&&Fe(fs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{Ie.fo()},0),Ie}}function HM(){return typeof window<"u"?window:null}function JD(){return typeof document<"u"?document:null}function Y0(n){return new F(n,!0)}class lS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class GM{constructor(e,t,r,s,u,l,m,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new lS(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HN extends GM{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function B0(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),s=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(gt(void 0===b||"string"==typeof b),Ur.fromBase64String(b||"")):(gt(void 0===b||b instanceof Uint8Array),Ur.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ce.UNKNOWN:VT(w.code);return new Re(b,w.message||"")}(l);t=new c(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Et(n,r.document.name),u=Ve(r.document.updateTime),l=r.document.createTime?Ve(r.document.createTime):wt.min(),m=new gi({mapValue:{fields:r.document.fields}}),w=Yn.newFoundDocument(s,u,l,m);t=new o(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=Et(n,r.document),u=r.readTime?Ve(r.readTime):wt.min(),l=Yn.newNoDocument(s,u);t=new o([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Et(n,r.document);t=new o([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return tt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new FT(s,u);t=new a(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return wt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?Ve(u.readTime):wt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=No(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=S0(m)?{documents:zy(s,m)}:{query:jT(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=De(s,u.resumeToken);const w=H(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(wt.min())>0){l.readTime=Q(s,u.snapshotVersion.toTimestamp());const w=H(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function rN(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=No(this.serializer),t.removeTarget=e,this.Wo(t)}}class GN extends GM{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function j0(n,e){return n&&n.length>0?(gt(void 0!==e),n.map(t=>function(r,s){let u=Ve(r.updateTime?r.updateTime:s);return u.isEqual(wt.min())&&(u=Ve(s)),new SD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ve(e.commitTime);return this.listener.cu(r,t)}return gt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=No(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>id(this.serializer,r))};this.Wo(t)}}class zN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ce.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ce.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class WN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(pr(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ZN{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,Ee.Z)(function*(){var w;Yh(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ee.Z)(function*(b){const x=Ye(b);x.vu.add(4),yield Qy(x),x.bu.set("Unknown"),x.vu.delete(4),yield Q0(x)}),function(b){return w.apply(this,arguments)})(l))}))}),this.bu=new WN(r,s)}}function Q0(n){return hS.apply(this,arguments)}function hS(){return hS=(0,Ee.Z)(function*(n){if(Yh(n))for(const e of n.Ru)yield e(!0)}),hS.apply(this,arguments)}function Qy(n){return fS.apply(this,arguments)}function fS(){return fS=(0,Ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),fS.apply(this,arguments)}function XD(n,e){const t=Ye(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),mS(t)?gS(t):Xy(t).Ko()&&pS(t,e))}function J0(n,e){const t=Ye(n),r=Xy(t);t.Au.delete(e),r.Ko()&&zM(t,e),0===t.Au.size&&(r.Ko()?r.jo():Yh(t)&&t.bu.set("Unknown"))}function pS(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xy(n).su(e)}function zM(n,e){n.Vu.qt(e),Xy(n).iu(e)}function gS(n){n.Vu=new g({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Xy(n).start(),n.bu.gu()}function mS(n){return Yh(n)&&!Xy(n).Uo()&&n.Au.size>0}function Yh(n){return 0===Ye(n).vu.size}function qM(n){n.Vu=void 0}function KN(n){return yS.apply(this,arguments)}function yS(){return yS=(0,Ee.Z)(function*(n){n.Au.forEach((e,t)=>{pS(n,e)})}),yS.apply(this,arguments)}function YN(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,Ee.Z)(function*(n,e){qM(n),mS(n)?(n.bu.Iu(e),gS(n)):n.bu.set("Unknown")}),vS.apply(this,arguments)}function QN(n,e,t){return _S.apply(this,arguments)}function _S(){return _S=(0,Ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof c&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Au.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Au.delete(m),s.Vu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield eC(n,r)}else if(e instanceof o?n.Vu.Ht(e):e instanceof a?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(wt.min()))try{const r=yield kM(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.Au.get(w);b&&s.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=s.Au.get(m);if(!b)return;s.Au.set(m,b.withResumeToken(Ur.EMPTY_BYTE_STRING,b.snapshotVersion)),zM(s,m);const x=new sd(b.target,m,w,b.sequenceNumber);pS(s,x)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield eC(n,r)}var r}),_S.apply(this,arguments)}function eC(n,e,t){return wS.apply(this,arguments)}function wS(){return wS=(0,Ee.Z)(function*(n,e,t){if(!wc(e))throw e;n.vu.add(1),yield Qy(n),n.bu.set("Offline"),t||(t=()=>kM(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Q0(n)}))}),wS.apply(this,arguments)}function WM(n,e){return e().catch(t=>eC(n,t,e))}function Jy(n){return ES.apply(this,arguments)}function ES(){return ES=(0,Ee.Z)(function*(n){const e=Ye(n),t=Qh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;JN(e);)try{const s=yield FN(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,XN(e,s)}catch(s){yield eC(e,s)}ZM(e)&&KM(e)}),ES.apply(this,arguments)}function JN(n){return Yh(n)&&n.Eu.length<10}function XN(n,e){n.Eu.push(e);const t=Qh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function ZM(n){return Yh(n)&&!Qh(n).Uo()&&n.Eu.length>0}function KM(n){Qh(n).start()}function eP(n){return IS.apply(this,arguments)}function IS(){return IS=(0,Ee.Z)(function*(n){Qh(n).hu()}),IS.apply(this,arguments)}function tP(n){return DS.apply(this,arguments)}function DS(){return DS=(0,Ee.Z)(function*(n){const e=Qh(n);for(const t of n.Eu)e.uu(t.mutations)}),DS.apply(this,arguments)}function nP(n,e,t){return CS.apply(this,arguments)}function CS(){return CS=(0,Ee.Z)(function*(n,e,t){const r=n.Eu.shift(),s=ND.from(r,e,t);yield WM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Jy(n)}),CS.apply(this,arguments)}function rP(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,Ee.Z)(function*(n,e){var t;e&&Qh(n).ou&&(yield(t=(0,Ee.Z)(function*(r,s){if(LT(u=s.code)&&u!==ce.ABORTED){const l=r.Eu.shift();Qh(r).Qo(),yield WM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Jy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),ZM(n)&&KM(n)}),bS.apply(this,arguments)}function YM(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,Ee.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Yh(t);t.vu.add(3),yield Qy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Q0(t)}),TS.apply(this,arguments)}function SS(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,Ee.Z)(function*(n,e){const t=Ye(n);e?(t.vu.delete(2),yield Q0(t)):e||(t.vu.add(2),yield Qy(t),t.bu.set("Unknown"))}),AS.apply(this,arguments)}function Xy(n){return n.Su||(n.Su=function(e,t,r){const s=Ye(e);return s.fu(),new HN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:KN.bind(null,n),ao:YN.bind(null,n),nu:QN.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Su.Qo(),mS(n)?gS(n):n.bu.set("Unknown")):(yield n.Su.stop(),qM(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Qh(n){return n.Du||(n.Du=function(e,t,r){const s=Ye(e);return s.fu(),new GN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:eP.bind(null,n),ao:rP.bind(null,n),au:tP.bind(null,n),cu:nP.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Du.Qo(),yield Jy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class xS{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new xS(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(n,e){if(pr("AsyncQueue",`${e}: ${n}`),wc(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class tv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Py(),this.sortedSet=new On(this.comparator)}static emptySet(e){return new tv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new tv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QM{constructor(){this.Cu=new On(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):tt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class nv{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new nv(e,t,tv.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class iP{constructor(){this.Nu=void 0,this.listeners=[]}}class sP{constructor(){this.queries=new da(e=>R0(e),$h),this.onlineState="Unknown",this.ku=new Set}}function MS(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new iP),s)try{u.Nu=yield t.onListen(r)}catch(l){const m=ev(l,`Initialization of query '${Hh(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&kS(t)}),RS.apply(this,arguments)}function NS(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),PS.apply(this,arguments)}function oP(n,e){const t=Ye(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.$u(s)&&(r=!0);l.Nu=s}}r&&kS(t)}function aP(n,e,t){const r=Ye(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function kS(n){n.ku.forEach(e=>{e.next()})}class OS{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new nv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=nv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class uP{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class JM{constructor(e){this.serializer=e}rr(e){return Et(this.serializer,e)}ur(e){return e.metadata.exists?Gy(this.serializer,e.document,!1):Yn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ve(e)}}class cP{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=XM(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Jt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new JM(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Gt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function LN(n,e,t,r){return rS.apply(this,arguments)}(e.localStore,new JM(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield VN(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function XM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eR{constructor(e){this.key=e}}class tR{constructor(e){this.key=e}}class nR{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gt(),this.mutatedKeys=Gt(),this.tc=_D(e),this.ec=new tv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new QM,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((x,R)=>{const $=s.get(x),Z=Sc(this.query,R)?R:null,Ie=!!$&&this.mutatedKeys.has($.key),Be=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Le=!1;$&&Z?$.data.isEqual(Z.data)?Ie!==Be&&(r.track({type:3,doc:Z}),Le=!0):this.rc($,Z)||(r.track({type:2,doc:Z}),Le=!0,(w&&this.tc(Z,w)>0||b&&this.tc(Z,b)<0)&&(m=!0)):!$&&Z?(r.track({type:0,doc:Z}),Le=!0):$&&!Z&&(r.track({type:1,doc:$}),Le=!0,(w||b)&&(m=!0)),Le&&(Z?(l=l.add(Z),u=Be?u.add(x):u.delete(x)):(l=l.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const x="F"===this.query.limitType?l.last():l.first();l=l.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,x)=>function(R,$){const Z=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Z(R)-Z($)}(b.type,x.type)||this.tc(b.doc,x.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new nv(this.query,e.ec,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new QM,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new tR(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new eR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Gt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return nv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class lP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dP{constructor(e){this.key=e,this.fc=!1}}class hP{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new da(m=>R0(m),$h),this._c=new Map,this.mc=new Set,this.gc=new On(Ze.comparator),this.yc=new Map,this.Ic=new KT,this.Tc={},this.Ec=new Map,this.Ac=Tg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function fP(n,e){return FS.apply(this,arguments)}function FS(){return FS=(0,Ee.Z)(function*(n,e){const t=sA(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Ky(t.localStore,Mi(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield LS(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&XD(t.remoteStore,l)}return s}),FS.apply(this,arguments)}function LS(n,e,t,r,s){return VS.apply(this,arguments)}function VS(){return VS=(0,Ee.Z)(function*(n,e,t,r,s){n.Rc=(R,$,Z)=>{return(Ie=(0,Ee.Z)(function*(Be,Le,Dt,kt){let Nt=Le.view.sc(Dt);Nt.zi&&(Nt=yield ZD(Be.localStore,Le.query,!1).then(({documents:an})=>Le.view.sc(an,Nt)));const Bt=kt&&kt.targetChanges.get(Le.targetId),Zt=Le.view.applyChanges(Nt,Be.isPrimaryClient,Bt);return ZS(Be,Le.targetId,Zt.cc),Zt.snapshot}),function(Be,Le,Dt,kt){return Ie.apply(this,arguments)})(n,R,$,Z);var Ie};const u=yield ZD(n.localStore,e,!0),l=new nR(e,u.ir),m=l.sc(u.documents),w=i.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);ZS(n,t,b.cc);const x=new lP(e,t,l);return n.wc.set(e,x),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),VS.apply(this,arguments)}function pP(n,e){return US.apply(this,arguments)}function US(){return US=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!$h(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Yy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),J0(t.remoteStore,r.targetId),rv(t,r.targetId)}).catch(nu))):(rv(t,r.targetId),yield Yy(t.localStore,r.targetId,!0))}),US.apply(this,arguments)}function BS(){return BS=(0,Ee.Z)(function*(n,e,t){const r=oA(n);try{const s=yield function(u,l){const m=Ye(u),w=Kn.now(),b=l.reduce(($,Z)=>$.add(Z.key),Gt());let x,R;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Z=ds(),Ie=Gt();return m.Zi.getEntries($,b).next(Be=>{Z=Be,Z.forEach((Le,Dt)=>{Dt.isValidDocument()||(Ie=Ie.add(Le))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Z)).next(Be=>{x=Be;const Le=[];for(const Dt of l){const kt=MD(Dt,x.get(Dt.key).overlayedDocument);null!=kt&&Le.push(new fa(Dt.key,kt,aD(kt.value.mapValue),Qn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Le,l)}).next(Be=>{R=Be;const Le=Be.applyToLocalDocumentSet(x,Ie);return m.documentOverlayCache.saveOverlays($,Be.batchId,Le)})}).then(()=>({batchId:R.batchId,changes:P0(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new On(Ut)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield od(r,s.changes),yield Jy(r.remoteStore)}catch(s){const u=ev(s,"Failed to persist write");t.reject(u)}}),BS.apply(this,arguments)}function rR(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,Ee.Z)(function*(n,e){const t=Ye(n);try{const r=yield ON(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?gt(l.fc):s.removedDocuments.size>0&&(gt(l.fc),l.fc=!1))}),yield od(t,r,e)}catch(r){yield nu(r)}}),jS.apply(this,arguments)}function iR(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ye(u);m.onlineState=l;let w=!1;m.queries.forEach((b,x)=>{for(const R of x.listeners)R.Mu(l)&&(w=!0)}),w&&kS(m)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mP(n,e,t){return $S.apply(this,arguments)}function $S(){return $S=(0,Ee.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new On(Ze.comparator);l=l.insert(u,Yn.newNoDocument(u,wt.min()));const m=Gt().add(u),w=new jy(wt.min(),new Map,new On(Ut),l,m);yield rR(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),KS(r)}else yield Yy(r.localStore,e,!1).then(()=>rv(r,e,t)).catch(nu)}),$S.apply(this,arguments)}function yP(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const s=yield kN(t.localStore,e);WS(t,r,null),qS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,s)}catch(s){yield nu(s)}}),HS.apply(this,arguments)}function vP(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,Ee.Z)(function*(n,e,t){const r=Ye(n);try{const s=yield function(u,l){const m=Ye(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(x=>(gt(null!==x),b=x.keys(),m.mutationQueue.removeMutationBatch(w,x))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);WS(r,e,t),qS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,s)}catch(s){yield nu(s)}}),GS.apply(this,arguments)}function zS(){return zS=(0,Ee.Z)(function*(n,e){const t=Ye(n);Yh(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ye(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=ev(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),zS.apply(this,arguments)}function qS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function WS(n,e,t){const r=Ye(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function rv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||sR(n,r)})}function sR(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(J0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),KS(n))}function ZS(n,e,t){for(const r of t)r instanceof eR?(n.Ic.addReference(r.key,e),wP(n,r)):r instanceof tR?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||sR(n,r.key)):tt()}function wP(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),KS(n))}function KS(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(Jt.fromString(e)),r=n.Ac.next();n.yc.set(r,new dP(t)),n.gc=n.gc.insert(t,r),XD(n.remoteStore,new sd(Mi(gg(t.path)),r,"TargetPurposeLimboResolution",ro.ct))}}function od(n,e,t){return YS.apply(this,arguments)}function YS(){return YS=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const x=eS.Li(w.targetId,b);u.push(x)}}))}),yield Promise.all(l),r.dc.nu(s),yield(m=(0,Ee.Z)(function*(w,b){const x=Ye(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ie.forEach(b,$=>ie.forEach($.Fi,Z=>x.persistence.referenceDelegate.addReference(R,$.targetId,Z)).next(()=>ie.forEach($.Bi,Z=>x.persistence.referenceDelegate.removeReference(R,$.targetId,Z)))))}catch(R){if(!wc(R))throw R;Fe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of b){const $=R.targetId;if(!R.fromCache){const Z=x.Ji.get($),Be=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);x.Ji=x.Ji.insert($,Be)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),YS.apply(this,arguments)}function EP(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,Ee.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield PM(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.er)}var s}),QS.apply(this,arguments)}function IP(n,e){const t=Ye(n),r=t.yc.get(e);if(r&&r.fc)return Gt().add(r.key);{let s=Gt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.wc.get(l);s=s.unionWith(m.view.nc)}return s}}function DP(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,Ee.Z)(function*(n,e){const t=Ye(n),r=yield ZD(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&ZS(t,e.targetId,s.cc),s}),JS.apply(this,arguments)}function CP(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,Ee.Z)(function*(n,e){const t=Ye(n);return LM(t.localStore,e).then(r=>od(t,r))}),XS.apply(this,arguments)}function bP(n,e,t,r){return eA.apply(this,arguments)}function eA(){return eA=(0,Ee.Z)(function*(n,e,t,r){const s=Ye(n),u=yield function(l,m){const w=Ye(l),b=Ye(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.Sn(x,m).next(R=>R?w.localDocuments.getDocuments(x,R):ie.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Jy(s.remoteStore):"acknowledged"===t||"rejected"===t?(WS(s,e,r||null),qS(s,e),m=e,Ye(Ye(s.localStore).mutationQueue).Cn(m)):tt(),yield od(s,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),eA.apply(this,arguments)}function tA(){return tA=(0,Ee.Z)(function*(n,e){const t=Ye(n);if(sA(t),oA(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield oR(t,r.toArray());t.vc=!0,yield SS(t.remoteStore,!0);for(const u of s)XD(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(rv(t,l),Yy(t.localStore,l,!0))),J0(t.remoteStore,l)}),yield s,yield oR(t,r),function(u){const l=Ye(u);l.yc.forEach((m,w)=>{J0(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new On(Ze.comparator)}(t),t.vc=!1,yield SS(t.remoteStore,!1)}}),tA.apply(this,arguments)}function oR(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,Ee.Z)(function*(n,e,t){const r=Ye(n),s=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield Ky(r.localStore,Mi(w[0]));for(const b of w){const x=r.wc.get(b),R=yield DP(r,x);R.snapshot&&u.push(R.snapshot)}}else{const b=yield FM(r.localStore,l);m=yield Ky(r.localStore,b),yield LS(r,aR(b),l,!1,m.resumeToken)}s.push(m)}return r.dc.nu(u),s}),nA.apply(this,arguments)}function aR(n){return A0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function SP(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).$i()}function AP(n,e,t,r){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n,e,t,r){const s=Ye(n);if(s.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield LM(s.localStore,N0(u[0])),m=jy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ur.EMPTY_BYTE_STRING);yield od(s,l,m);break}case"rejected":yield Yy(s.localStore,e,!0),rv(s,e,r);break;default:tt()}}),rA.apply(this,arguments)}function xP(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,Ee.Z)(function*(n,e,t){const r=sA(n);if(r.vc){for(const s of e){if(r._c.has(s)){Fe("SyncEngine","Adding an already active target "+s);continue}const u=yield FM(r.localStore,s),l=yield Ky(r.localStore,u);yield LS(r,aR(u),l.targetId,!1,l.resumeToken),XD(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Yy(r.localStore,s,!1).then(()=>{J0(r.remoteStore,s),rv(r,s)}).catch(nu))}}),iA.apply(this,arguments)}function sA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mP.bind(null,e),e.dc.nu=oP.bind(null,e.eventManager),e.dc.Pc=aP.bind(null,e.eventManager),e}function oA(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vP.bind(null,e),e}class X0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=Y0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return NM(this.persistence,new RM,e.initialUser,this.serializer)}createPersistence(e){return new YT(zD.zs,this.serializer)}createSharedClientState(e){return new jM}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aA extends X0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield oA(r.Vc.syncEngine),yield Jy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return NM(this.persistence,new RM,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new IM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new wT(t,this.persistence);return new _T(e.asyncQueue,r)}createPersistence(e){const t=XT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new JT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HM(),JD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jM}}class uR extends aA{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof uS&&(r.sharedClientState.syncEngine={jr:bP.bind(null,s),zr:AP.bind(null,s),Wr:xP.bind(null,s),$i:SP.bind(null,s),Qr:CP.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.Z)(function*(l){yield function TP(n,e){return tA.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=HM();if(!uS.D(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iv{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>iR(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=EP.bind(null,r.syncEngine),yield SS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sP}createDatastore(e){const t=Y0(e.databaseInfo.databaseId),r=new $N(e.databaseInfo);return new zN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>iR(this.syncEngine,m,0),l=$M.D()?new $M:new UN,new ZN(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const x=new hP(r,s,u,l,m,w);return b&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ye(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Qy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cR(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class tC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class NP{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new uP(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class PP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ee.Z)(function*(u,l){const m=Ye(u),w=No(m.serializer)+"/documents",b={documents:l.map(Z=>Me(m.serializer,Z))},x=yield m.vo("BatchGetDocuments",w,b,l.length),R=new Map;x.forEach(Z=>{const Ie=function U0(n,e){return"found"in e?function(t,r){gt(!!r.found);const s=Et(t,r.found.name),u=Ve(r.found.updateTime),l=r.found.createTime?Ve(r.found.createTime):wt.min(),m=new gi({mapValue:{fields:r.found.fields}});return Yn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){gt(!!r.missing),gt(!!r.readTime);const s=Et(t,r.missing),u=Ve(r.readTime);return Yn.newNoDocument(s,u)}(n,e):tt()}(m.serializer,Z);R.set(Ie.key.toString(),Ie)});const $=[];return l.forEach(Z=>{const Ie=R.get(Z.toString());gt(!!Ie),$.push(Ie)}),$}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ze.fromPath(s);e.mutations.push(new F0(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(s,u){const l=Ye(s),m=No(l.serializer)+"/documents",w={writes:u.map(b=>id(l.serializer,b))};yield l.Io("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class kP{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new lS(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new PP(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!wy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!LT(t)}return!1}}class OP{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Kr.UNAUTHENTICATED,this.clientId=$I.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=ev(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function nC(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield PM(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),uA.apply(this,arguments)}function cA(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield dA(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>YM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>YM(e.remoteStore,u)),n._onlineComponents=e}),lA.apply(this,arguments)}function lR(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function dA(n){return hA.apply(this,arguments)}function hA(){return hA=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield nC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!lR(t))throw t;Bs("Error using user provided cache. Falling back to memory cache: "+t),yield nC(n,new X0)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield nC(n,new X0);return n._offlineComponents}),hA.apply(this,arguments)}function rC(n){return fA.apply(this,arguments)}function fA(){return fA=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield cA(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield cA(n,new iv))),n._onlineComponents}),fA.apply(this,arguments)}function dR(n){return dA(n).then(e=>e.persistence)}function iC(n){return dA(n).then(e=>e.localStore)}function hR(n){return rC(n).then(e=>e.remoteStore)}function pA(n){return rC(n).then(e=>e.syncEngine)}function sv(n){return gA.apply(this,arguments)}function gA(){return gA=(0,Ee.Z)(function*(n){const e=yield rC(n),t=e.eventManager;return t.onListen=fP.bind(null,e.syncEngine),t.onUnlisten=pP.bind(null,e.syncEngine),t}),gA.apply(this,arguments)}function pR(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,m,w){const b=new tC({next:R=>{u.enqueueAndForget(()=>NS(s,x));const $=R.docs.has(l);!$&&R.fromCache?w.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&R.fromCache&&m&&"server"===m.source?w.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),x=new OS(gg(l.path),b,{includeMetadataChanges:!0,Ku:!0});return MS(s,x)}(yield sv(n),n.asyncQueue,e,t,r)})),r.promise}function gR(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,m,w){const b=new tC({next:R=>{u.enqueueAndForget(()=>NS(s,x)),R.fromCache&&"server"===m.source?w.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),x=new OS(l,b,{includeMetadataChanges:!0,Ku:!0});return MS(s,x)}(yield sv(n),n.asyncQueue,e,t,r)})),r.promise}function mR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const yR=new Map;function mA(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vR(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _R(n){if(!Ze.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wR(n){if(Ze.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sC(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ER(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class IR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=mR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ew{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mT;switch(t.type){case"firstParty":return new ca(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yR.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),yR.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class Ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class Mc extends Ji{constructor(e,t,r){super(e,t,gg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Ze(e))}withConverter(e){return new Mc(this.firestore,e,this._path)}}function CR(n,e,...t){if(n=(0,dn.m9)(n),mA("collection","path",e),n instanceof ew){const r=Jt.fromString(e,...t);return wR(r),new Mc(n,null,r)}{if(!(n instanceof sr||n instanceof Mc))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return wR(r),new Mc(n.firestore,null,r)}}function oC(n,e,...t){if(n=(0,dn.m9)(n),1===arguments.length&&(e=$I.A()),mA("doc","path",e),n instanceof ew){const r=Jt.fromString(e,...t);return _R(r),new sr(n,null,new Ze(r))}{if(!(n instanceof sr||n instanceof Mc))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return _R(r),new sr(n.firestore,n instanceof Mc?n.converter:null,new Ze(r))}}function bR(n,e){return n=(0,dn.m9)(n),e=(0,dn.m9)(e),(n instanceof sr||n instanceof Mc)&&(e instanceof sr||e instanceof Mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yA(n,e){return n=(0,dn.m9)(n),e=(0,dn.m9)(e),n instanceof Ji&&e instanceof Ji&&n.firestore===e.firestore&&$h(n._query,e._query)&&n.converter===e.converter}class zP{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new lS(this,"async_queue_retry"),this.Xc=()=>{const t=JD();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=JD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=JD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!wc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=xS.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&tt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function vA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class qP{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends ew{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new zP,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||TR(this),this._firestoreClient.terminate()}}function Br(n){return n._firestoreClient||TR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TR(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Gx(n._databaseId,m,n._persistenceKey,(b=s).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,mR(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new OP(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=s.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function SR(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield nC(n,t),yield cA(n,e),r.resolve()}catch(s){const u=s;if(!lR(u))throw u;Bs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function AR(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rc(Ur.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ad{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ag{constructor(e){this._methodName=e}}class aC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const rk=/^__.*__$/;class ik{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new zh(e,this.data,t,this.fieldTransforms)}}class xR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class uC{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new uC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return dC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(MR(this.ca)&&rk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class sk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Y0(e)}ya(e,t,r,s=!1){return new uC({ca:e,methodName:t,ga:r,path:ir.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xg(n){const e=n._freezeSettings(),t=Y0(n._databaseId);return new sk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cC(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);IA("Data must be an object, but it was:",l,r);const m=PR(r,l);let w,b;if(u.merge)w=new Yi(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const x=[];for(const R of u.mergeFields){const $=rw(e,R,t);if(!l.contains($))throw new Re(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);OR(x,$)||x.push($)}w=new Yi(x),b=l.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,b=l.fieldTransforms;return new ik(new gi(m),w,b)}class nw extends Ag{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nw}}function RR(n,e,t){return new uC({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _A extends Ag{_toFieldTransform(e){return new Fy(e.path,new Ac)}isEqual(e){return e instanceof _A}}class ok extends Ag{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=RR(this,e,!0),r=this.pa.map(u=>Mg(u,t)),s=new uu(r);return new Fy(e.path,s)}isEqual(e){return this===e}}class ak extends Ag{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=RR(this,e,!0),r=this.pa.map(u=>Mg(u,t)),s=new cu(r);return new Fy(e.path,s)}isEqual(e){return this===e}}class uk extends Ag{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new lu(e.serializer,CD(e.serializer,this.Ia));return new Fy(e.path,t)}isEqual(e){return this===e}}function wA(n,e,t,r){const s=n.ya(1,e,t);IA("Data must be an object, but it was:",s,r);const u=[],l=gi.empty();ru(r,(w,b)=>{const x=lC(e,w,t);b=(0,dn.m9)(b);const R=s.da(x);if(b instanceof nw)u.push(x);else{const $=Mg(b,R);null!=$&&(u.push(x),l.set(x,$))}});const m=new Yi(u);return new xR(l,m,s.fieldTransforms)}function EA(n,e,t,r,s,u){const l=n.ya(1,e,t),m=[rw(e,r,t)],w=[s];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(rw(e,u[$])),w.push(u[$+1]);const b=[],x=gi.empty();for(let $=m.length-1;$>=0;--$)if(!OR(b,m[$])){const Z=m[$];let Ie=w[$];Ie=(0,dn.m9)(Ie);const Be=l.da(Z);if(Ie instanceof nw)b.push(Z);else{const Le=Mg(Ie,Be);null!=Le&&(b.push(Z),x.set(Z,Le))}}const R=new Yi(b);return new xR(x,R,l.fieldTransforms)}function NR(n,e,t,r=!1){return Mg(t,n.ya(r?4:3,e))}function Mg(n,e){if(kR(n=(0,dn.m9)(n)))return IA("Unsupported field value:",e,n),PR(n,e);if(n instanceof Ag)return function(t,r){if(!MR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=Mg(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,dn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CD(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Kn.fromDate(t);return{timestampValue:Q(r.serializer,s)}}if(t instanceof Kn){const s=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Q(r.serializer,s)}}if(t instanceof aC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rc)return{bytesValue:De(r.serializer,t._byteString)};if(t instanceof sr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ct(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${sC(t)}`)}(n,e)}function PR(n,e){const t={};return p0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(n,(r,s)=>{const u=Mg(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function kR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof aC||n instanceof Rc||n instanceof sr||n instanceof Ag)}function IA(n,e,t){if(!kR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sC(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function rw(n,e,t){if((e=(0,dn.m9)(e))instanceof ad)return e._internalPath;if("string"==typeof e)return lC(n,e);throw dC("Field path arguments must be of type string or ",n,!1,void 0,t)}const ck=new RegExp("[~\\*/\\[\\]]");function lC(n,e,t){if(e.search(ck)>=0)throw dC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw dC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dC(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Re(ce.INVALID_ARGUMENT,m+n+w)}function OR(n,e){return n.some(t=>t.isEqual(e))}class iw{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lk extends iw{data(){return super.data()}}function hC(n,e){return"string"==typeof e?lC(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}function FR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DA{}class sw extends DA{}function Jh(n,e,...t){let r=[];e instanceof DA&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof ov).length,l=s.filter(m=>m instanceof ow).length;if(u>1||u>0&&l>0)throw new Re(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class ow extends sw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ow(e,t,r)}_apply(e){const t=this._parse(e);return BR(e._query,t),new Ji(e.firestore,e.converter,Ny(e._query,t))}_parse(e){const t=xg(e.firestore);return function(s,u,l,m,w,b,x){let R;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){UR(x,b);const $=[];for(const Z of x)$.push(VR(m,s,Z));R={arrayValue:{values:$}}}else R=VR(m,s,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||UR(x,b),R=NR(l,"where",x,"in"===b||"not-in"===b);return Wt.create(w,b,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ov extends DA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ov(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)BR(u,m),u=Ny(u,m)}(e._query,t),new Ji(e.firestore,e.converter,Ny(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class CA extends sw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new CA(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new dg(s,u);return function(m,w){if(null===M0(m)){const b=mg(m);null!==b&&jR(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ou(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fC extends sw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new fC(e,t,r)}_apply(e){return new Ji(e.firestore,e.converter,yg(e._query,this._limit,this._limitType))}}class pC extends sw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pC(e,t,r)}_apply(e){const t=LR(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(s=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class gC extends sw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gC(e,t,r)}_apply(e){const t=LR(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(s=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function LR(n,e,t,r){if(t[0]=(0,dn.m9)(t[0]),t[0]instanceof iw)return function(s,u,l,m,w){if(!m)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const x of au(s))if(x.field.isKeyField())b.push(nd(u,m.key));else{const R=m.data.field(x.field);if(y0(R))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const $=x.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(R)}return new bc(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=xg(n.firestore);return function(u,l,m,w,b,x){const R=u.explicitOrderBy;if(b.length>R.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Z=0;Z<b.length;Z++){const Ie=b[Z];if(R[Z].field.isKeyField()){if("string"!=typeof Ie)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Ie}`);if(!vD(u)&&-1!==Ie.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Ie}' contains a slash.`);const Be=u.path.child(Jt.fromString(Ie));if(!Ze.isDocumentKey(Be))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const Le=new Ze(Be);$.push(nd(l,Le))}else{const Be=NR(m,w,Ie);$.push(Be)}}return new bc($,x)}(n._query,n.firestore._databaseId,s,e,t,r)}}function VR(n,e,t){if("string"==typeof(t=(0,dn.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vD(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ze.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nd(n,new Ze(r))}if(t instanceof sr)return nd(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sC(t)}.`)}function UR(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BR(n,e){if(e.isInequality()){const r=mg(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=M0(n);null!==u&&jR(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jR(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class bA{convertValue(e,t="none"){switch(td(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ru(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new aC(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=v0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ty(e));default:return null}}convertTimestamp(e){const t=iu(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);gt(tM(r));const s=new Jl(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return s.isEqual(t)||pr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function mC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _k extends bA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class Rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends iw{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new aw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class aw extends ud{data(e={}){return super.data(e)}}class Xh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Rg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new aw(this._firestore,this._userDataWriter,r.key,r,new Rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new aw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new aw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:Ek(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ek(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function HR(n,e){return n instanceof ud&&e instanceof ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xh&&e instanceof Xh&&n._firestore===e._firestore&&yA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ef extends bA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function GR(n,e,t){n=en(n,sr);const r=en(n.firestore,or),s=mC(n.converter,e,t);return av(r,[cC(xg(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Qn.none())])}function zR(n,e,t,...r){n=en(n,sr);const s=en(n.firestore,or),u=xg(s);let l;return l="string"==typeof(e=(0,dn.m9)(e))||e instanceof ad?EA(u,"updateDoc",n._key,e,t,r):wA(u,"updateDoc",n._key,e),av(s,[l.toMutation(n._key,Qn.exists(!0))])}function qR(n,...e){var t,r,s;n=(0,dn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||vA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(vA(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(s=R.complete)||void 0===s?void 0:s.bind(R)}let w,b,x;if(n instanceof sr)b=en(n.firestore,or),x=gg(n._key.path),w={next:R=>{e[l]&&e[l](TA(b,n,R))},error:e[l+1],complete:e[l+2]};else{const R=en(n,Ji);b=en(R.firestore,or),x=R._query;const $=new ef(b);w={next:Z=>{e[l]&&e[l](new Xh(b,$,R,Z))},error:e[l+1],complete:e[l+2]},FR(n._query)}return function(R,$,Z,Ie){const Be=new tC(Ie),Le=new OS($,Be,Z);return R.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return MS(yield sv(R),Le)})),()=>{Be.Dc(),R.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return NS(yield sv(R),Le)}))}}(Br(b),x,m,w)}function av(n,e){return function(t,r){const s=new Lr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function gP(n,e,t){return BS.apply(this,arguments)}(yield pA(t),r,s)})),s.promise}(Br(n),e)}function TA(n,e,t){const r=t.docs.get(e._key),s=new ef(n);return new ud(n,s,e._key,r,new Rg(t.hasPendingWrites,t.fromCache),e.converter)}const Uk={maxAttempts:5};class WR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xg(e)}set(e,t,r){this._verifyNotCommitted();const s=tf(e,this._firestore),u=mC(s.converter,t,r),l=cC(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Qn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=tf(e,this._firestore);let l;return l="string"==typeof(t=(0,dn.m9)(t))||t instanceof ad?EA(this._dataReader,"WriteBatch.update",u._key,t,r,s):wA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tf(e,this._firestore);return this._mutations=this._mutations.concat(new xc(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tf(n,e){if((n=(0,dn.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Bk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xg(e)}get(e){const t=tf(e,this._firestore),r=new _k(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return tt();const u=s[0];if(u.isFoundDocument())return new iw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new iw(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const s=tf(e,this._firestore),u=mC(s.converter,t,r),l=cC(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=tf(e,this._firestore);let l;return l="string"==typeof(t=(0,dn.m9)(t))||t instanceof ad?EA(this._dataReader,"Transaction.update",u._key,t,r,s):wA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=tf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tf(e,this._firestore),r=new ef(this._firestore);return super.get(e).then(s=>new ud(this._firestore,r,t._key,s._document,new Rg(!1,!1),t.converter))}}function SA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KR(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function YR(){if(!function TT(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Lh=sa.SDK_VERSION,(0,sa._registerComponent)(new jl.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new or(new yT(t.getProvider("auth-internal")),new t0(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,sa.registerVersion)(UI,"3.13.0",n),(0,sa.registerVersion)(UI,"3.13.0","esm2017")}();class uw{constructor(e){this._delegate=e}static fromBase64String(e){return YR(),new uw(Rc.fromBase64String(e))}static fromUint8Array(e){return KR(),new uw(Rc.fromUint8Array(e))}toBase64(){return YR(),this._delegate.toBase64()}toUint8Array(){return KR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function AA(n){return function Kk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Yk{enableIndexedDbPersistence(e,t){return function ZP(n,e){AR(n=en(n,or));const t=Br(n);if(t._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new iv;return SR(t,s,new aA(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KP(n){AR(n=en(n,or));const e=Br(n);if(e._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");Bs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new iv;return SR(e,r,new uR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function YP(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!xo.D())return Promise.resolve();const s=r+"main";yield xo.delete(s)}),function(r){return t.apply(this,arguments)})(XT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function DR(n,e,t,r={}){var s;const u=(n=en(n,ew))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=Kr.MOCK_USER;else{m=(0,dn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Kr(b)}n._authCredentials=new ig(new BI(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function JP(n){return function FP(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield dR(n),t=yield hR(n);return e.setNetworkEnabled(!0),function(r){const s=Ye(r);return s.vu.delete(0),Q0(s)}(t)}))}(Br(n=en(n,or)))}(this._delegate)}disableNetwork(){return function XP(n){return function LP(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield dR(n),t=yield hR(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(s){const u=Ye(s);u.vu.add(0),yield Qy(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Br(n=en(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,vR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function QP(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function _P(n,e){return zS.apply(this,arguments)}(yield pA(e),t)})),t.promise}(Br(n=en(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function Mk(n,e){return function BP(n,e){const t=new tC(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield sv(n),s=t,Ye(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield sv(n),s=t,void Ye(r).ku.delete(s);var r,s}))}}(Br(n=en(n,or)),vA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uv(this,CR(this._delegate,e))}catch(t){throw $s(t,"collection()","Firestore.collection()")}}doc(e){try{return new pa(this,oC(this._delegate,e))}catch(t){throw $s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hs(this,function GP(n,e){if(n=en(n,ew),mA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ji(n,null,(t=e,new ou(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw $s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function jk(n,e,t){n=en(n,or);const r=Object.assign(Object.assign({},Uk),t);return function(s){if(s.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Lr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const w=yield function fR(n){return rC(n).then(e=>e.datastore)}(s);new kP(s.asyncQueue,w,l,u,m).run()})),m.promise}(Br(n),s=>e(new Bk(n,s)),r)}(this._delegate,t=>e(new JR(this,t)))}batch(){return Br(this._delegate),new XR(new WR(this._delegate,e=>av(this._delegate,e)))}loadBundle(e){return function ek(n,e){const t=Br(n=en(n,or)),r=new qP;return function jP(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?OD().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return cR(w,b);if(w instanceof ArrayBuffer)return cR(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new NP(w,l);var w}(t,Y0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function MP(n,e,t){const r=Ye(n);var s;(s=(0,Ee.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function($,Z){const Ie=Ye($),Be=Ve(Z.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",Le=>Ie.qs.getBundleMetadata(Le,Z.id)).then(Le=>!!Le&&Le.createTime.compareTo(Be)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(XM(w));const b=new cP(w,u.localStore,l.serializer);let x=yield l.bc();for(;x;){const $=yield b.zu(x);$&&m._updateProgress($),x=yield l.bc()}const R=yield b.complete();return yield od(u,R.Ju,void 0),yield function($,Z){const Ie=Ye($);return Ie.persistence.runTransaction("Save bundle","readwrite",Be=>Ie.qs.saveBundleMetadata(Be,Z))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.Hu)}catch(w){return Bs("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield pA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function tk(n,e){return function $P(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const s=Ye(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield iC(n),e)}))}(Br(n=en(n,or)),e).then(t=>t?new Ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hs(this,t):null)}}class yC extends bA{constructor(e){super(),this.firestore=e}convertBytes(e){return new uw(new Rc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return pa.forKey(t,this.firestore,null)}}class JR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yC(e)}get(e){const t=Pg(e);return this._delegate.get(t).then(r=>new cw(this._firestore,new ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Pg(e);return r?(SA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pg(e);return this._delegate.delete(t),this}}class XR{constructor(e){this._delegate=e}set(e,t,r){const s=Pg(e);return r?(SA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ng{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new aw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ng.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Ng(e,new yC(e),t),s.set(t,u)),u}}Ng.INSTANCES=new WeakMap;class pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pa(t,new sr(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new pa(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uv(this.firestore,CR(this._delegate,e))}catch(t){throw $s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dn.m9)(e))instanceof sr&&bR(this._delegate,e)}set(e,t){t=SA("DocumentReference.set",t);try{return t?GR(this._delegate,e,t):GR(this._delegate,e)}catch(r){throw $s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zR(this._delegate,e):zR(this._delegate,e,t,...r)}catch(s){throw $s(s,"updateDoc()","DocumentReference.update()")}}delete(){return function Ak(n){return av(en(n.firestore,or),[new xc(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=e1(e),r=t1(e,s=>new cw(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return qR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Dk(n){n=en(n,sr);const e=en(n.firestore,or),t=Br(e),r=new ef(e);return function VP(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const m=yield function(w,b){const x=Ye(w);return x.persistence.runTransaction("read document","readonly",R=>x.localDocuments.getDocument(R,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=ev(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield iC(n),e,t);var r})),t.promise}(t,n._key).then(s=>new ud(e,r,n._key,s,new Rg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Ck(n){n=en(n,sr);const e=en(n.firestore,or);return pR(Br(e),n._key,{source:"server"}).then(t=>TA(e,n,t))}(this._delegate):function Ik(n){n=en(n,sr);const e=en(n.firestore,or);return pR(Br(e),n._key).then(t=>TA(e,n,t))}(this._delegate),t.then(r=>new cw(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?Ng.getInstance(this.firestore,e):null))}}function $s(n,e,t){return n.message=n.message.replace(e,t),n}function e1(n){for(const e of n)if("object"==typeof e&&!AA(e))return e;return{}}function t1(n,e){var t,r;let s;return s=AA(n[0])?n[0]:AA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class cw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HR(this._delegate,e._delegate)}}class lw extends cw{data(e){const t=this._delegate.data(e);return function gT(n,e){n||tt()}(void 0!==t),t}}class Hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yC(e)}where(e,t,r){try{return new Hs(this.firestore,Jh(this._delegate,function dk(n,e,t){const r=e,s=hC("where",n);return ow._create(s,r,t)}(e,t,r)))}catch(s){throw $s(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hs(this.firestore,Jh(this._delegate,function hk(n,e="asc"){const t=e,r=hC("orderBy",n);return CA._create(r,t)}(e,t)))}catch(r){throw $s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hs(this.firestore,Jh(this._delegate,function fk(n){return ER("limit",n),fC._create("limit",n,"F")}(e)))}catch(t){throw $s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hs(this.firestore,Jh(this._delegate,function pk(n){return ER("limitToLast",n),fC._create("limitToLast",n,"L")}(e)))}catch(t){throw $s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hs(this.firestore,Jh(this._delegate,function gk(...n){return pC._create("startAt",n,!0)}(...e)))}catch(t){throw $s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hs(this.firestore,Jh(this._delegate,function mk(...n){return pC._create("startAfter",n,!1)}(...e)))}catch(t){throw $s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hs(this.firestore,Jh(this._delegate,function yk(...n){return gC._create("endBefore",n,!1)}(...e)))}catch(t){throw $s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hs(this.firestore,Jh(this._delegate,function vk(...n){return gC._create("endAt",n,!0)}(...e)))}catch(t){throw $s(t,"endAt()","Query.endAt()")}}isEqual(e){return yA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Tk(n){n=en(n,Ji);const e=en(n.firestore,or),t=Br(e),r=new ef(e);return function UP(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const m=yield ZD(s,u,!0),w=new nR(u,m.ir),b=w.sc(m.documents),x=w.applyChanges(b,!1);l.resolve(x.snapshot)}catch(m){const w=ev(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield iC(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Xh(e,r,n,s))}(this._delegate):"server"===e?.source?function Sk(n){n=en(n,Ji);const e=en(n.firestore,or),t=Br(e),r=new ef(e);return gR(t,n._query,{source:"server"}).then(s=>new Xh(e,r,n,s))}(this._delegate):function bk(n){n=en(n,Ji);const e=en(n.firestore,or),t=Br(e),r=new ef(e);return FR(n._query),gR(t,n._query).then(s=>new Xh(e,r,n,s))}(this._delegate),t.then(r=>new xA(this.firestore,new Xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=e1(e),r=t1(e,s=>new xA(this.firestore,new Xh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return qR(this._delegate,t,r)}withConverter(e){return new Hs(this.firestore,this._delegate.withConverter(e?Ng.getInstance(this.firestore,e):null))}}class Jk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Jk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lw(this._firestore,r))})}isEqual(e){return HR(this._delegate,e._delegate)}}class uv extends Hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pa(this.firestore,e):null}doc(e){try{return new pa(this.firestore,void 0===e?oC(this._delegate):oC(this._delegate,e))}catch(t){throw $s(t,"doc()","CollectionReference.doc()")}}add(e){return function xk(n,e){const t=en(n.firestore,or),r=oC(n),s=mC(n.converter,e);return av(t,[cC(xg(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new pa(this.firestore,t))}isEqual(e){return bR(this._delegate,e._delegate)}withConverter(e){return new uv(this.firestore,this._delegate.withConverter(e?Ng.getInstance(this.firestore,e):null))}}function Pg(n){return en(n,sr)}class MA{constructor(...e){this._delegate=new ad(...e)}static documentId(){return new MA(ir.keyField().canonicalString())}isEqual(e){return(e=(0,dn.m9)(e))instanceof ad&&this._delegate._internalPath.isEqual(e._internalPath)}}class kg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Hk(){return new _A("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kg(e)}static delete(){const e=function $k(){return new nw("deleteField")}();return e._methodName="FieldValue.delete",new kg(e)}static arrayUnion(...e){const t=function Gk(...n){return new ok("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kg(t)}static arrayRemove(...e){const t=function zk(...n){return new ak("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kg(t)}static increment(e){const t=function qk(n){return new uk("increment",n)}(e);return t._methodName="FieldValue.increment",new kg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Xk={Firestore:QR,GeoPoint:aC,Timestamp:Kn,Blob:uw,Transaction:JR,WriteBatch:XR,DocumentReference:pa,DocumentSnapshot:cw,Query:Hs,QueryDocumentSnapshot:lw,QuerySnapshot:xA,CollectionReference:uv,FieldPath:MA,FieldValue:kg,setLogLevel:function Qk(n){!function rg(n){_c.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function tO(n){(function eO(n,e){n.INTERNAL.registerComponent(new jl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},Xk)))})(n,(e,t)=>new QR(e,t,new Yk)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(c_.Z);var RA=O(6451),vC=O(5363),nO=O(6063);class rO extends Pn.x{constructor(e=1/0,t=1/0,r=nO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var iO=O(3099);function n1(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,iO.B)({connector:()=>new rO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function r1(n,e){return(0,Ci.m)(e)?Sn(()=>n,e):Sn(()=>n)}var NA=O(9468);O(259);const kA=new Map,s1={activated:!1,tokenObservers:[]},cO={initialized:!1,enabled:!1};function Mr(n){return kA.get(n)||Object.assign({},s1)}function wC(){return cO}class gO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new dn.BH,yield function mO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new dn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xi=new dn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FA(n){if(!Mr(n).activated)throw Xi.create("use-before-activation",{appName:n.name})}function DC(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const R=yield s.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(R){throw Xi.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw Xi.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(R){throw Xi.create("fetch-parse-error",{originalErrorMessage:R?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+b,issuedAtTimeMillis:x}}),VA.apply(this,arguments)}function a1(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const dw="firebase-app-check-store";let CC=null;function c1(){return CC||(CC=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Xi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(dw,{keyPath:"compositeKey"})}}catch(t){e(Xi.create("storage-open",{originalErrorMessage:t?.message}))}}),CC)}function UA(){return UA=(0,Ee.Z)(function*(n,e){const r=(yield c1()).transaction(dw,"readwrite"),u=r.objectStore(dw).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(Xi.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),UA.apply(this,arguments)}const hw=new oa.Yd("@firebase/app-check");function $A(n,e){return(0,dn.hl)()?function DO(n,e){return function l1(n,e){return UA.apply(this,arguments)}(function h1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GA(){return wC().enabled}function zA(){return qA.apply(this,arguments)}function qA(){return qA=(0,Ee.Z)(function*(){const n=wC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),qA.apply(this,arguments)}const xO={error:"UNKNOWN_ERROR"};function MO(n){return dn.US.encodeString(JSON.stringify(n),!1)}function bC(n){return WA.apply(this,arguments)}function WA(){return WA=(0,Ee.Z)(function*(n,e=!1){const t=n.app;FA(t);const r=Mr(t);let u,s=r.token;if(s&&!cv(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(cv(w)?s=w:yield $A(t,void 0))}if(!e&&s&&cv(s))return{token:s.token};let m,l=!1;if(GA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=DC(a1(t,yield zA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield $A(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Mr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?hw.warn(w.message):hw.error(w),u=w}return s?u?m=cv(s)?{token:s.token,internalError:u}:m1(u):(m={token:s.token},r.token=s,yield $A(t,s)):m=m1(u),l&&g1(t,m),m}),WA.apply(this,arguments)}function ZA(){return ZA=(0,Ee.Z)(function*(n){const e=n.app;FA(e);const{provider:t}=Mr(e);if(GA()){const r=yield zA(),{token:s}=yield DC(a1(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),ZA.apply(this,arguments)}function YA(n,e){const t=Mr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function p1(n){const{app:e}=n,t=Mr(e);let r=t.tokenRefresher;r||(r=function RO(n){const{app:e}=n;return new gO((0,Ee.Z)(function*(){let r;if(r=Mr(e).token?yield bC(n,!0):yield bC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function g1(n,e){const t=Mr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function cv(n){return n.expireTimeMillis-Date.now()>0}function m1(n){return{token:MO(xO),error:n}}class NO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mr(this.app);for(const t of e)YA(this.app,t.next);return Promise.resolve()}}const C1="app-check-internal";!function qO(){(0,sa._registerComponent)(new jl.wA("app-check",n=>function PO(n,e){return new NO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(C1).initialize()})),(0,sa._registerComponent)(new jl.wA(C1,n=>function kO(n){return{getToken:e=>bC(n,e),getLimitedUseToken:()=>function f1(n){return ZA.apply(this,arguments)}(n),addTokenListener:e=>function KA(n,e,t,r){const{app:s}=n,u=Mr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&cv(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),p1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>p1(n))}(n,"INTERNAL",e),removeTokenListener:e=>YA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,sa.registerVersion)("@firebase/app-check","0.8.0")}();class ex{constructor(){return(0,li.vb)("app-check")}}typeof window<"u"&&window;var QO=O(9260);const T1=new h.OlP("angularfire2.auth.use-emulator"),S1=new h.OlP("angularfire2.auth.settings"),A1=new h.OlP("angularfire2.auth.tenant-id"),x1=new h.OlP("angularfire2.auth.langugage-code"),M1=new h.OlP("angularfire2.auth.use-device-language"),R1=new h.OlP("angularfire.auth.persistence"),N1=(n,e,t,r,s,u,l,m)=>(0,Co.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,x]of Object.entries(l))w.settings[b]=x;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let P1=(()=>{class n{constructor(t,r,s,u,l,m,w,b,x,R,$,Z){const Ie=new Pn.x,Be=at(void 0).pipe((0,vC.Q)(l.outsideAngular),Sn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,2644)))),(0,yt.U)(()=>(0,Co.on)(t,u,r)),(0,yt.U)(Le=>N1(Le,u,m,b,x,R,w,$)),n1({bufferSize:1,refCount:!1}));if(vu(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{Be.pipe(Gi()).subscribe();const Dt=Be.pipe(Sn(Bt=>Bt.getRedirectResult().then(Zt=>Zt,()=>null)),li.iC,n1({bufferSize:1,refCount:!1})),kt=Be.pipe(Sn(Bt=>new qr.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onAuthStateChanged(an=>Zt.next(an),an=>Zt.error(an),()=>Zt.complete()))})))),Nt=Be.pipe(Sn(Bt=>new qr.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onIdTokenChanged(an=>Zt.next(an),an=>Zt.error(an),()=>Zt.complete()))}))));this.authState=Dt.pipe(r1(kt),(0,NA.R)(l.outsideAngular),(0,vC.Q)(l.insideAngular)),this.user=Dt.pipe(r1(Nt),(0,NA.R)(l.outsideAngular),(0,vC.Q)(l.insideAngular)),this.idToken=this.user.pipe(Sn(Bt=>Bt?(0,rn.D)(Bt.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Sn(Bt=>Bt?(0,rn.D)(Bt.getIdTokenResult()):at(null))),this.credential=(0,RA.T)(Dt,Ie,this.authState.pipe(jn(Bt=>!Bt))).pipe((0,yt.U)(Bt=>Bt?.user?Bt:null),(0,NA.R)(l.outsideAngular),(0,vC.Q)(l.insideAngular))}return(0,Co.pX)(this,Be,u,{spy:{apply:(Le,Dt,kt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&kt.then(Nt=>Ie.next(Nt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Co.Dh),h.LFG(Co.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(li.HU),h.LFG(T1,8),h.LFG(S1,8),h.LFG(A1,8),h.LFG(x1,8),h.LFG(M1,8),h.LFG(R1,8),h.LFG(ex,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function k1(n,e){return function XO(n,e=Rm.z){return new qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function nx(n,e){return k1(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function SC(n,e){return nx(n,e).pipe(Yo(void 0),u_(),(0,yt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(x=>x.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(x=>x.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function O1(n,e,t){return SC(n,t).pipe(Zs((r,s)=>function tF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function nF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return rx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function FE(n,e=Zo.y){return n=n??Fb,(0,dr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Zn.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,yt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function rx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function F1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class L1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=SC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Yo(void 0),u_(),jn(([r,s])=>s.length>0||!r),(0,yt.U)(([r,s])=>s),li.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=F1(e);return O1(this.query,t,this.afs.schedulers.outsideAngular).pipe(li.iC)}valueChanges(e={}){return nx(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),li.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(li.iC)}add(e){return this.ref.add(e)}doc(e){return new V1(this.ref.doc(e),this.afs)}}class V1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=j1(r,t);return new L1(s,u,this.afs)}snapshotChanges(){return function eF(n,e){return k1(n,e).pipe(Yo(void 0),u_(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(li.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(li.iC)}}class rF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SC(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),jn(t=>t.length>0),li.iC):SC(this.query,this.afs.schedulers.outsideAngular).pipe(li.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=F1(e);return O1(this.query,t,this.afs.schedulers.outsideAngular).pipe(li.iC)}valueChanges(e={}){return nx(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),li.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(li.iC)}}const U1=new h.OlP("angularfire2.enableFirestorePersistence"),B1=new h.OlP("angularfire2.firestore.persistenceSettings"),iF=new h.OlP("angularfire2.firestore.settings"),sF=new h.OlP("angularfire2.firestore.use-emulator");function j1(n,e=(t=>t)){return{query:e(n),ref:n}}let $1=(()=>{class n{constructor(t,r,s,u,l,m,w,b,x,R,$,Z,Ie,Be,Le,Dt,kt){this.schedulers=w;const Nt=(0,Co.on)(t,m,r),Bt=x;R&&N1(Nt,m,$,Ie,Be,Le,Z,Dt),[this.firestore,this.persistenceEnabled$]=(0,Co.cc)(`${Nt.name}.firestore`,"AngularFirestore",Nt.name,()=>{const Zt=m.runOutsideAngular(()=>Nt.firestore());if(u&&Zt.settings(u),Bt&&Zt.useEmulator(...Bt),s&&!vu(l)){const an=()=>{try{return(0,rn.D)(Zt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ps){return typeof console<"u"&&console.warn(ps),at(!1)}};return[Zt,m.runOutsideAngular(an)]}return[Zt,at(!1)]},[u,Bt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=j1(s,r),m=this.schedulers.ngZone.run(()=>u);return new L1(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new rF(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new V1(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Co.Dh),h.LFG(Co.xv,8),h.LFG(U1,8),h.LFG(iF,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(li.HU),h.LFG(B1,8),h.LFG(sF,8),h.LFG(P1,8),h.LFG(T1,8),h.LFG(S1,8),h.LFG(A1,8),h.LFG(x1,8),h.LFG(M1,8),h.LFG(R1,8),h.LFG(ex,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oF=(()=>{class n{constructor(){QO.Z.registerVersion("angularfire",li.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:U1,useValue:!0},{provide:B1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[$1]}),n})(),AC=(()=>{class n{constructor(){}get Folder(){return localStorage.getItem("folder")}set Folder(t){localStorage.setItem("folder",t.toString())}get Exercise(){return localStorage.getItem("exercise")}set Exercise(t){localStorage.setItem("exercise",t.toString())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ix=(()=>{class n{constructor(t,r,s){this.afs=t,this.globalService=r,this.datepipe=s}AddFolder(t){this.afs.collection("Folder",r=>r.where("foldername","==",t)).get().subscribe(r=>{r.docs.length<=0&&this.afs.collection("/Folder").add({foldername:t})})}GetFolder(){return this.afs.collection("/Folder")}AddExercise(t,r){this.afs.collection("Exercise/"+t+"/"+t+"Excercises",s=>s.where("ex","==",r)).get().subscribe(s=>{s.docs.length<=0&&this.afs.collection("/Exercise").doc(t).collection(t+"Excercises").add({ex:r}).catch(u=>{alert(u.message)})})}GetExercise(){var t=this.globalService.Folder;return this.afs.collection("/Exercise").doc(t).collection(t+"Excercises")}AddExerciseData(t){var r=this.globalService.Folder,s=this.globalService.Exercise;return this.AddFolder(r),this.AddExercise(r,s),t.id=this.afs.createId(),this.afs.collection("mySetTrackerData").doc("/"+r).collection("/"+s).doc(t.id).set(t).catch(u=>{alert(u.message)})}EditExerciseData(t){var r=this.globalService.Folder,s=this.globalService.Exercise;return this.afs.collection("mySetTrackerData").doc("/"+r).collection("/"+s).doc(t.id).update(t).catch(u=>{alert("No Update Found")})}DeleteExerciseData(t){var r=this.globalService.Folder,s=this.globalService.Exercise;this.afs.collection("mySetTrackerData").doc("/"+r).collection("/"+s).doc(t.id).delete().catch(u=>{alert(u.message)})}GetExerciseData(){var t=this.globalService.Folder,r=this.globalService.Exercise;return this.afs.collection("/mySetTrackerData").doc(t).collection(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($1),h.LFG(AC),h.LFG(ma))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",14)(1,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addClicked())}),h._UZ(2,"img",16),h.qZA()()}}function uF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",14)(1,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addClicked())}),h._UZ(2,"img",17),h.qZA()()}}function cF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",18)(1,"li",19)(2,"div",1)(3,"div",14),h._uU(4),h.qZA(),h.TgZ(5,"div",14)(6,"a",20),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.onFolderNameClicked(u.foldername))}),h.TgZ(7,"span",21),h._UZ(8,"img",22),h.qZA()()()()()()}if(2&n){const t=e.$implicit;h.xp6(4),h.hij(" ",t.foldername," ")}}let lF=(()=>{class n{constructor(t,r,s,u){this.fb=t,this.service=r,this.globalService=s,this.router=u,this.folder=[],this.addNotClicked=!0,this.folderNameForm=this.fb.group({foldername:[""]})}ngOnInit(){this.service.GetFolder().valueChanges().subscribe(t=>{t.length>0&&(this.folder=t)})}onSubmit(){this.folder.push(this.folderNameForm.value)}addClicked(){this.addNotClicked=!this.addNotClicked}onFolderNameClicked(t){this.globalService.Folder=t,this.router.navigate(["/exercises"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mm),h.Y36(ix),h.Y36(AC),h.Y36(yn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:24,vars:4,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-8"],["class","col",4,"ngIf"],[3,"formGroup","ngSubmit"],["id","collapseExample",1,"collapse","divwidth"],[1,"card","card-body"],[1,"mb-3"],["for","recipient-name",1,"col-form-label",2,"font-size","small"],["type","text","id","folder-name","formControlName","foldername","placeholder","Ex. Chest, Back, Shoulder etc.",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","buttonbg",2,"color","white"],[1,"card","divwidth"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"col"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"add",3,"click"],["src","../../assets/plus.png",1,"addCloseImage"],["src","../../../assets/remove.png",1,"addCloseImage"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"click"],[1,"span"],["src","../../../assets/arrow-right-solid.svg","alt","goto",1,"listIcon"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"H5"),h._uU(4,"Folders"),h.qZA()(),h.YNc(5,aF,3,0,"div",3),h.YNc(6,uF,3,0,"div",3),h.qZA(),h.TgZ(7,"form",4),h.NdJ("ngSubmit",function(){return r.onSubmit()}),h.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",1)(12,"label",8),h._uU(13,"Name"),h.qZA()(),h.TgZ(14,"div",1)(15,"div",2),h._UZ(16,"input",9),h.qZA(),h.TgZ(17,"div",10)(18,"button",11),h._uU(19,"Add"),h.qZA()()()()()()(),h.TgZ(20,"div"),h._uU(21," \xa0\n"),h.qZA(),h.TgZ(22,"div",12),h.YNc(23,cF,9,1,"ul",13),h.qZA()()),2&t&&(h.xp6(5),h.Q6J("ngIf",r.addNotClicked),h.xp6(1),h.Q6J("ngIf",!r.addNotClicked),h.xp6(1),h.Q6J("formGroup",r.folderNameForm),h.xp6(16),h.Q6J("ngForOf",r.folder))},dependencies:[nn,cr,ph,Ml,Gv,zv,gh,xp]}),n})();function dF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",14)(1,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addClicked())}),h._UZ(2,"img",16),h.qZA()()}}function hF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",14)(1,"a",15),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addClicked())}),h._UZ(2,"img",17),h.qZA()()}}function fF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",18)(1,"li",19)(2,"div",1)(3,"div",14),h._uU(4),h.qZA(),h.TgZ(5,"div",14)(6,"a",20),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.onExerciseNameClicked(u.ex))}),h.TgZ(7,"span",21),h._UZ(8,"img",22),h.qZA()()()()()()}if(2&n){const t=e.$implicit;h.xp6(4),h.hij(" ",t.ex," ")}}let pF=(()=>{class n{constructor(t,r,s,u){this.fb=t,this.service=r,this.globalService=s,this.router=u,this.excerise=[],this.addNotClicked=!0,this.exerciseForm=this.fb.group({ex:[""]})}onEditClick(t){throw new Error("Method not implemented.")}onDeleteClick(t){throw new Error("Method not implemented.")}ngOnInit(){this.service.GetExercise().valueChanges().subscribe(t=>{t.length>0&&(this.excerise=t)})}addClicked(){this.addNotClicked=!this.addNotClicked}onSubmit(){this.excerise.push(this.exerciseForm.value)}onExerciseNameClicked(t){this.globalService.Exercise=t,this.router.navigate(["/analysis"])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mm),h.Y36(ix),h.Y36(AC),h.Y36(yn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-excersises"]],decls:28,vars:6,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-8"],["class","col",4,"ngIf"],["id","collapseExample",1,"collapse","divwidth"],[3,"formGroup","ngSubmit"],[1,"card","card-body"],[1,"mb-3"],["for","recipient-name",1,"col-form-label",2,"font-size","small"],["type","text","id","folder-name","formControlName","ex","placeholder","Enter exercise name",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","buttonbg",2,"color","white"],[1,"card","divwidth"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"col"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"add",3,"click"],["src","../../assets/plus.png",1,"addCloseImage"],["src","../../../assets/remove.png",1,"addCloseImage"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"click"],[1,"span"],["src","../../../assets/arrow-right-solid.svg","alt","goto",1,"listIcon"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"H5"),h._uU(4),h.qZA()(),h.YNc(5,dF,3,0,"div",3),h.YNc(6,hF,3,0,"div",3),h.qZA(),h.TgZ(7,"div",4)(8,"form",5),h.NdJ("ngSubmit",function(){return r.onSubmit()}),h.TgZ(9,"div",6)(10,"div",7)(11,"div",1)(12,"label",8),h._uU(13,"Name"),h.qZA()(),h.TgZ(14,"div",1)(15,"div",2),h._UZ(16,"input",9),h.qZA(),h.TgZ(17,"div",10)(18,"button",11),h._uU(19,"Add"),h.qZA()()()()()()(),h.TgZ(20,"div"),h._uU(21," \xa0\n"),h.qZA(),h.TgZ(22,"h6"),h._uU(23),h.qZA(),h.TgZ(24,"div"),h._uU(25," \xa0\n"),h.qZA(),h.TgZ(26,"div",12),h.YNc(27,fF,9,1,"ul",13),h.qZA()()),2&t&&(h.xp6(4),h.hij("Add exercise for ",r.globalService.Folder,""),h.xp6(1),h.Q6J("ngIf",r.addNotClicked),h.xp6(1),h.Q6J("ngIf",!r.addNotClicked),h.xp6(2),h.Q6J("formGroup",r.exerciseForm),h.xp6(15),h.Oqu(r.globalService.Folder),h.xp6(4),h.Q6J("ngForOf",r.excerise))},dependencies:[nn,cr,ph,Ml,Gv,zv,gh,xp]}),n})();var H1=O(7732);function gF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",33)(1,"a",34),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addClicked())}),h._UZ(2,"img",35),h.qZA()()}}function mF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",33)(1,"a",34),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addClicked())}),h._UZ(2,"img",36),h.qZA()()}}function yF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",39)(1,"li",40)(2,"div",1)(3,"div",33),h._uU(4),h.qZA(),h.TgZ(5,"div",33)(6,"span",41),h._uU(7),h.qZA()(),h.TgZ(8,"div",33)(9,"span",42),h._uU(10),h.qZA()(),h.TgZ(11,"div",33)(12,"span")(13,"a",43),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.onEditClick(u))}),h._UZ(14,"img",44),h.qZA(),h._uU(15," |"),h.TgZ(16,"a")(17,"img",45),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.onDeleteClick(u))}),h.qZA()()()()()()()}if(2&n){const t=e.$implicit;h.xp6(4),h.hij(" ",t.time," "),h.xp6(3),h.hij("",t.Weight," KG"),h.xp6(3),h.hij("",t.Reps," rep")}}function vF(n,e){if(1&n&&(h.TgZ(0,"div",37),h.YNc(1,yF,18,3,"ul",38),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.Todaydata)}}function _F(n,e){1&n&&(h.TgZ(0,"div",46)(1,"p")(2,"strong"),h._uU(3,"No Data Found"),h.qZA()()())}function wF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",39)(1,"li",40)(2,"div",1)(3,"div",33),h._uU(4),h.qZA(),h.TgZ(5,"div",33)(6,"span",41),h._uU(7),h.qZA()(),h.TgZ(8,"div",33)(9,"span",42),h._uU(10),h.qZA()(),h.TgZ(11,"div",33)(12,"span")(13,"a",47),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.onEditClick(u))}),h._UZ(14,"img",44),h.qZA(),h._uU(15," | "),h.TgZ(16,"a",47),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw(2);return h.KtG(l.onDeleteClick(u))}),h._UZ(17,"img",48),h.qZA()()()()()()}if(2&n){const t=e.$implicit;h.xp6(4),h.hij(" ",t.date," "),h.xp6(3),h.hij("",t.Weight," KG"),h.xp6(3),h.hij("",t.Reps," rep")}}function EF(n,e){if(1&n&&(h.TgZ(0,"div",37),h.YNc(1,wF,18,3,"ul",38),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.EarlierData)}}function IF(n,e){1&n&&(h.TgZ(0,"div",46)(1,"p")(2,"strong"),h._uU(3,"No Data Found"),h.qZA()()())}const DF=[{path:"",component:lF},{path:"exercises",component:pF,data:{breadcrumb:"Home",URL:""}},{path:"analysis",component:(()=>{class n{constructor(t,r,s,u){this.fb=t,this.globalService=r,this.sTservice=s,this.datepipe=u,this.addNotClicked=!0,this.Todaydata=[],this.EarlierData=[],this.RecordForm=this.fb.group({id:[""],Weight:[""],Reps:[""],time:[Date],date:[Date]})}ngOnInit(){this.sTservice.GetExerciseData().valueChanges().subscribe(t=>{t.length>0&&(this.recordData=t,this.recordData.sort((r,s)=>Date.parse(r.time)-Date.parse(s.time)),this.Todaydata=[],this.EarlierData=[],this.structureData())},t=>{},()=>{})}structureData(){var t=this.datepipe.transform(new Date,"MM-dd-yyyy")?.toString();this.recordData.forEach(r=>{r.date==t?(this.Todaydata.push(r),this.Todaydata.sort((0,H1.h)("time","desc"))):(this.EarlierData.push(r),this.EarlierData.sort((0,H1.h)("date","desc")))})}addClicked(){this.addNotClicked=!this.addNotClicked}onSubmit(){this.datepipe.transform(new Date,"MM-dd-yyyy_h:mm:ss")?.toString(),this.RecordForm.controls.time.patchValue(this.datepipe.transform(new Date,"h:mm:ss")?.toString()),this.RecordForm.controls.date.patchValue(this.datepipe.transform(new Date,"MM-dd-yyyy")?.toString()),this.sTservice.AddExerciseData(this.RecordForm.value),this.clearForm()}onEditSubmit(){this.sTservice.EditExerciseData(this.RecordForm.value)}onCloseClick(){this.clearForm()}clearForm(){this.RecordForm.controls.id.patchValue(""),this.RecordForm.controls.time.patchValue(""),this.RecordForm.controls.date.patchValue(""),this.RecordForm.controls.Weight.patchValue(""),this.RecordForm.controls.Reps.patchValue("")}onEditClick(t){this.RecordForm.controls.id.patchValue(t.id),this.RecordForm.controls.time.patchValue(t.time),this.RecordForm.controls.date.patchValue(t.date),this.RecordForm.controls.Weight.patchValue(t.Weight),this.RecordForm.controls.Reps.patchValue(t.Reps)}onDeleteClick(t){this.sTservice.DeleteExerciseData(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mm),h.Y36(AC),h.Y36(ix),h.Y36(ma))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-analysis"]],decls:77,vars:10,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-8"],["class","col",4,"ngIf"],["id","collapseExample",1,"collapse","divwidth"],[1,"card","card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","weight",1,"col-form-label",2,"font-size","small"],["type","number","id","folder-name","formControlName","Weight","placeholder","Enter weight in KG",1,"form-control"],["type","number","id","folder-name","formControlName","Reps","placeholder","Enter number of repetions",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","buttonbg",2,"color","white"],["id","accordionPanelsStayOpenExample",1,"accordion","divwidth"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne","aria-expanded","true","aria-controls","panelsStayOpen-collapseOne",1,"accordion-button"],["id","panelsStayOpen-collapseOne",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["class","card","style","margin-left: -7px;overflow-x: overlay;\n                    height: 200px;",4,"ngIf"],["class","card","style","margin-left: -7px;",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["id","exampleModal","tabindex","-1","data-bs-backdrop","static","data-bs-keyboard","false","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["type","text","id","time","formControlName","time","hidden","true",1,"form-control"],["type","text","id","date","formControlName","date","hidden","true",1,"form-control"],["type","text","id","id","formControlName","id","hidden","true",1,"form-control"],[1,"col"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"add",3,"click"],["src","../../assets/plus.png",1,"addCloseImage"],["src","../../../assets/remove.png",1,"addCloseImage"],[1,"card",2,"margin-left","-7px","overflow-x","overlay","height","200px"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[2,"color","orange"],[2,"color","greenyellow"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click"],["src","../../../assets/pen.png",1,"listIcon"],["src","../../../assets/delete.png",1,"listIcon",3,"click"],[1,"card",2,"margin-left","-7px"],[3,"click"],["src","../../../assets/delete.png",1,"listIcon"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"H5"),h._uU(4),h.qZA()(),h.YNc(5,gF,3,0,"div",3),h.YNc(6,mF,3,0,"div",3),h.qZA(),h.TgZ(7,"div",4)(8,"div",5)(9,"form",6),h.NdJ("ngSubmit",function(){return r.onSubmit()}),h.TgZ(10,"div",7)(11,"div",1)(12,"div",2)(13,"label",8),h._uU(14,"Weight"),h.qZA(),h._UZ(15,"input",9),h.qZA()(),h.TgZ(16,"div",1)(17,"div",2)(18,"label",8),h._uU(19,"Total Reps"),h.qZA(),h._UZ(20,"input",10),h.qZA()(),h.TgZ(21,"div"),h._uU(22," \xa0 "),h.qZA(),h.TgZ(23,"div",1)(24,"div",11)(25,"button",12),h._uU(26,"Add"),h.qZA()()()()()()(),h.TgZ(27,"div"),h._uU(28," \xa0 "),h.qZA(),h.TgZ(29,"h6"),h._uU(30),h.qZA(),h.TgZ(31,"div",13)(32,"div",14)(33,"h2",15)(34,"button",16),h._uU(35," Today "),h.qZA()(),h.TgZ(36,"div",17)(37,"div",18),h.YNc(38,vF,2,1,"div",19),h.YNc(39,_F,4,0,"div",20),h.qZA()()(),h.TgZ(40,"div",14)(41,"h2",15)(42,"button",21),h._uU(43," Earlier "),h.qZA()(),h.TgZ(44,"div",22)(45,"div",18),h.YNc(46,EF,2,1,"div",19),h.YNc(47,IF,4,0,"div",20),h.qZA()()()(),h.TgZ(48,"div",23)(49,"div",24)(50,"div",25)(51,"div",26)(52,"h1",27),h._uU(53,"Edit now"),h.qZA(),h.TgZ(54,"button",28),h.NdJ("click",function(){return r.onCloseClick()}),h.qZA()(),h.TgZ(55,"div",29)(56,"form",6),h.NdJ("ngSubmit",function(){return r.onEditSubmit()}),h._UZ(57,"input",30)(58,"input",31)(59,"input",32),h.TgZ(60,"div",7)(61,"div",1)(62,"div",2)(63,"label",8),h._uU(64,"Weight"),h.qZA(),h._UZ(65,"input",9),h.qZA()(),h.TgZ(66,"div",1)(67,"div",2)(68,"label",8),h._uU(69,"Total Reps"),h.qZA(),h._UZ(70,"input",10),h.qZA()(),h.TgZ(71,"div"),h._uU(72," \xa0 "),h.qZA(),h.TgZ(73,"div",1)(74,"div",11)(75,"button",12),h._uU(76,"Update"),h.qZA()()()()()()()()()()),2&t&&(h.xp6(4),h.hij("Add Record for ",r.globalService.Exercise,""),h.xp6(1),h.Q6J("ngIf",r.addNotClicked),h.xp6(1),h.Q6J("ngIf",!r.addNotClicked),h.xp6(3),h.Q6J("formGroup",r.RecordForm),h.xp6(21),h.Oqu(r.globalService.Exercise),h.xp6(8),h.Q6J("ngIf",r.Todaydata.length>0),h.xp6(1),h.Q6J("ngIf",0==r.Todaydata.length),h.xp6(7),h.Q6J("ngIf",r.EarlierData.length>0),h.xp6(1),h.Q6J("ngIf",0==r.EarlierData.length),h.xp6(9),h.Q6J("formGroup",r.RecordForm))},dependencies:[nn,cr,ph,Ml,Tm,Gv,zv,gh,xp]}),n})(),data:{breadcrumb:"Exercise",URL:"exercises"}}];let CF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Zw.forRoot(DF),Zw]}),n})(),bF=(()=>{class n{constructor(t){this.router=t,this._breadcrumbs$=new Wn([]),this.breadcrumbs$=this._breadcrumbs$.asObservable(),this.router.events.pipe(jn(r=>r instanceof xs)).subscribe(r=>{const u=[];this.addBreadcrumb(this.router.routerState.snapshot.root,[],u),this._breadcrumbs$.next(u)})}addBreadcrumb(t,r,s){if(t){const u=r.concat(t.url.map(l=>l.path));if(t.data.breadcrumb){const l={label:this.getLabel(t.data),url:"/"+u.join("/")};s.push(l)}this.addBreadcrumb(t.firstChild,u,s)}}getLabel(t){return"function"==typeof t.breadcrumb?t.breadcrumb(t):t.breadcrumb}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"a",2),h.NdJ("click",function(){const u=h.CHM(t).$implicit,l=h.oxw();return h.KtG(l.route(u.label))}),h._UZ(2,"img",3),h._uU(3),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(3),h.hij("\xa0\xa0",t.label,"")}}let SF=(()=>{class n{constructor(t,r){this.breadcrumbService=t,this.router=r,this.breadcrumbs$=this.breadcrumbService.breadcrumbs$}route(t){"Exercise"==t&&this.router.navigate(["/exercises"]),"Home"==t&&this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bF),h.Y36(yn))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-breadcrumb"]],decls:4,vars:3,consts:[[1,"container","mt-2"],[4,"ngFor","ngForOf"],[2,"font-weight","bold",3,"click"],["src","../../../assets/back.png",1,"image"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"ul"),h.YNc(2,TF,4,1,"li",1),h.ALo(3,"async"),h.qZA()()),2&t&&(h.xp6(2),h.Q6J("ngForOf",h.lcZ(3,1,r.breadcrumbs$)))},dependencies:[nn,Oc],styles:['ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:">";margin:0 6px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before{content:"";margin:0}.image[_ngcontent-%COMP%]{margin-top:-2px;width:18px}a[_ngcontent-%COMP%]:hover{cursor:pointer}']}),n})(),AF=(()=>{class n{constructor(){this.title="SetTrackerApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"navbar","bg-body-tertiary","navbg"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../assets/logo-no-background.png","alt","set tracker logo",2,"width","156px"],["routerLink","/"],["src","../assets/house-solid.svg","alt","home",2,"width","28px"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),h._UZ(3,"img",3),h.qZA(),h.TgZ(4,"a",4),h._UZ(5,"img",5),h.qZA()()(),h._UZ(6,"app-breadcrumb")(7,"router-outlet"))},dependencies:[f,cm,SF],styles:[".navbg[_ngcontent-%COMP%]{background:#642B73;background:linear-gradient(to right,#C6426E,#642B73)}"]}),n})();const sx_firebaseConfig={apiKey:"AIzaSyCJ3jih9ShiIDWS95RKra05pHxlGpdj8mc",authDomain:"settracker-f393c.firebaseapp.com",projectId:"settracker-f393c",storageBucket:"settracker-f393c.appspot.com",messagingSenderId:"454014096624",appId:"1:454014096624:web:a862a55f29a3cd67b7de35",measurementId:"G-EZZ7XF9RW9"};var xF=O(1144);const MF=["addListener","removeListener"],RF=["addEventListener","removeEventListener"],NF=["on","off"];function xC(n,e,t,r){if((0,Ci.m)(t)&&(r=t,t=void 0),r)return xC(n,e,t).pipe(Va(r));const[s,u]=function OF(n){return(0,Ci.m)(n.addEventListener)&&(0,Ci.m)(n.removeEventListener)}(n)?RF.map(l=>m=>n[l](e,m,t)):function PF(n){return(0,Ci.m)(n.addListener)&&(0,Ci.m)(n.removeListener)}(n)?MF.map(G1(n,e)):function kF(n){return(0,Ci.m)(n.on)&&(0,Ci.m)(n.off)}(n)?NF.map(G1(n,e)):[];if(!s&&(0,xF.z)(n))return(0,kn.z)(l=>xC(l,e,t))((0,bs.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new qr.y(l=>{const m=(...w)=>l.next(1<w.length?w:w[0]);return s(m),()=>u(m)})}function G1(n,e){return t=>r=>n[t](e,r)}var z1=O(5032);const nf=new qr.y(z1.Z),LF={connector:()=>new Pn.x};function q1(n,e=LF){const{connector:t}=e;return(0,dr.e)((r,s)=>{const u=t();(0,bs.Xf)(n(function FF(n){return new qr.y(e=>n.subscribe(e))}(u))).subscribe(s),s.add(r.subscribe(u))})}function W1(n,e){return e?t=>$i(e.pipe(ui(1),function BF(){return(0,dr.e)((n,e)=>{n.subscribe((0,Zn.x)(e,z1.Z))})}()),t.pipe(W1(n))):(0,kn.z)((t,r)=>n(t,r).pipe(ui(1),Ks(t)))}var jF=O(3532);const fw="Service workers are disabled or not supported by this browser";class MC{constructor(e){if(this.serviceWorker=e,e){const r=xC(e,"controllerchange").pipe((0,yt.U)(()=>e.controller)),u=$i(Eo(()=>at(e.controller)),r);this.worker=u.pipe(jn(x=>!!x)),this.registration=this.worker.pipe(Sn(()=>e.getRegistration()));const b=xC(e,"message").pipe((0,yt.U)(x=>x.data)).pipe(jn(x=>x&&x.type)).pipe(function UF(n){return n?e=>q1(n)(e):e=>function VF(n,e){const t=(0,Ci.m)(n)?n:()=>n;return(0,Ci.m)(e)?q1(e,{connector:t}):r=>new jd(r,t)}(new Pn.x)(e)}());b.connect(),this.events=b}else this.worker=this.events=this.registration=function zF(n){return Eo(()=>ai(new Error(n)))}(fw)}postMessage(e,t){return this.worker.pipe(ui(1),(0,tr.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const s=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,s]).then(([,l])=>l)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(jn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(ui(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(jn(t=>t.nonce===e),ui(1),(0,yt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let qF=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Pn.x,!t.isEnabled)return this.messages=nf,this.notificationClicks=nf,void(this.subscription=nf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,yt.U)(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,yt.U)(s=>s.data)),this.pushManager=this.sw.registration.pipe((0,yt.U)(s=>s.pushManager));const r=this.pushManager.pipe(Sn(s=>s.getSubscription()));this.subscription=(0,RA.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(fw));const r={userVisibleOnly:!0};let s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(s.length));for(let l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return r.applicationServerKey=u,this.pushManager.pipe(Sn(l=>l.subscribe(r)),ui(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ui(1),Sn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(fw))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(MC))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),WF=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=nf,this.available=nf,this.activated=nf,void(this.unrecoverable=nf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(jn(r=>"VERSION_READY"===r.type),(0,yt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fw));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(MC))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ox{}const Z1=new h.OlP("NGSW_REGISTER_SCRIPT");function ZF(n,e,t,r){return()=>{if(!vd(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[l,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":s=at(null);break;case"registerWithDelay":s=K1(+m[0]||0);break;case"registerWhenStable":s=m[0]?(0,RA.T)(Y1(n),K1(+m[0])):Y1(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(h.R0b).runOutsideAngular(()=>s.pipe(ui(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function K1(n){return at(null).pipe(function GF(n,e=Rm.z){const t=function HF(n=0,e,t=Rm.P){let r=-1;return null!=e&&((0,jF.K)(e)?t=e:r=e),new qr.y(s=>{let u=function $F(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let l=0;return t.schedule(function(){s.closed||(s.next(l++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e);return W1(()=>t)}(n))}function Y1(n){return n.get(h.z2F).isStable.pipe(jn(t=>t))}function KF(n,e){return new MC(vd(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let YF=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:Z1,useValue:t},{provide:ox,useValue:r},{provide:MC,useFactory:KF,deps:[ox,h.Lbi]},{provide:h.ip1,useFactory:ZF,deps:[h.zs3,Z1,ox,h.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[qF,WF]}),n})(),QF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[AF]}),n.\u0275inj=h.cJS({providers:[ma],imports:[rl,CF,dc,Co.hO.initializeApp(sx_firebaseConfig),oF,YF.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),n})();(0,h.G48)(),Fu().bootstrapModule(QF).catch(n=>console.error(n))},9751:(ht,Se,O)=>{O.d(Se,{y:()=>_e});var h=O(930),K=O(727),P=O(8822),oe=O(9635),ae=O(2416),le=O(576),de=O(2806);let _e=(()=>{class z{constructor(se){se&&(this._subscribe=se)}lift(se){const Ce=new z;return Ce.source=this,Ce.operator=se,Ce}subscribe(se,Ce,Qe){const me=function V(z){return z&&z instanceof h.Lv||function j(z){return z&&(0,le.m)(z.next)&&(0,le.m)(z.error)&&(0,le.m)(z.complete)}(z)&&(0,K.Nn)(z)}(se)?se:new h.Hp(se,Ce,Qe);return(0,de.x)(()=>{const{operator:pe,source:pt}=this;me.add(pe?pe.call(me,pt):pt?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(se){try{return this._subscribe(se)}catch(Ce){se.error(Ce)}}forEach(se,Ce){return new(Ce=fe(Ce))((Qe,me)=>{const pe=new h.Hp({next:pt=>{try{se(pt)}catch(It){me(It),pe.unsubscribe()}},error:me,complete:Qe});this.subscribe(pe)})}_subscribe(se){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(se)}[P.L](){return this}pipe(...se){return(0,oe.U)(se)(this)}toPromise(se){return new(se=fe(se))((Ce,Qe)=>{let me;this.subscribe(pe=>me=pe,pe=>Qe(pe),()=>Ce(me))})}}return z.create=ve=>new z(ve),z})();function fe(z){var ve;return null!==(ve=z??ae.v.Promise)&&void 0!==ve?ve:Promise}},7579:(ht,Se,O)=>{O.d(Se,{x:()=>de});var h=O(9751),K=O(727);const oe=(0,O(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=O(8737),le=O(2806);let de=(()=>{class fe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const z=new _e(this,this);return z.operator=V,z}_throwIfClosed(){if(this.closed)throw new oe}next(V){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const z of this.currentObservers)z.next(V)}})}error(V){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:z}=this;for(;z.length;)z.shift().error(V)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:z,isStopped:ve,observers:se}=this;return z||ve?K.Lc:(this.currentObservers=null,se.push(V),new K.w0(()=>{this.currentObservers=null,(0,ae.P)(se,V)}))}_checkFinalizedStatuses(V){const{hasError:z,thrownError:ve,isStopped:se}=this;z?V.error(ve):se&&V.complete()}asObservable(){const V=new h.y;return V.source=this,V}}return fe.create=(j,V)=>new _e(j,V),fe})();class _e extends de{constructor(j,V){super(),this.destination=j,this.source=V}next(j){var V,z;null===(z=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===z||z.call(V,j)}error(j){var V,z;null===(z=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===z||z.call(V,j)}complete(){var j,V;null===(V=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===V||V.call(j)}_subscribe(j){var V,z;return null!==(z=null===(V=this.source)||void 0===V?void 0:V.subscribe(j))&&void 0!==z?z:K.Lc}}},930:(ht,Se,O)=>{O.d(Se,{Hp:()=>Qe,Lv:()=>z});var h=O(576),K=O(727),P=O(2416),oe=O(7849),ae=O(5032);const le=fe("C",void 0,void 0);function fe(ke,we,ye){return{kind:ke,value:we,error:ye}}var j=O(3410),V=O(2806);class z extends K.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,K.Nn)(we)&&we.add(this)):this.destination=It}static create(we,ye,ze){return new Qe(we,ye,ze)}next(we){this.isStopped?pt(function _e(ke){return fe("N",ke,void 0)}(we),this):this._next(we)}error(we){this.isStopped?pt(function de(ke){return fe("E",void 0,ke)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?pt(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ve=Function.prototype.bind;function se(ke,we){return ve.call(ke,we)}class Ce{constructor(we){this.partialObserver=we}next(we){const{partialObserver:ye}=this;if(ye.next)try{ye.next(we)}catch(ze){me(ze)}}error(we){const{partialObserver:ye}=this;if(ye.error)try{ye.error(we)}catch(ze){me(ze)}else me(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(ye){me(ye)}}}class Qe extends z{constructor(we,ye,ze){let $e;if(super(),(0,h.m)(we)||!we)$e={next:we??void 0,error:ye??void 0,complete:ze??void 0};else{let Xe;this&&P.v.useDeprecatedNextContext?(Xe=Object.create(we),Xe.unsubscribe=()=>this.unsubscribe(),$e={next:we.next&&se(we.next,Xe),error:we.error&&se(we.error,Xe),complete:we.complete&&se(we.complete,Xe)}):$e=we}this.destination=new Ce($e)}}function me(ke){P.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(ke):(0,oe.h)(ke)}function pt(ke,we){const{onStoppedNotification:ye}=P.v;ye&&j.z.setTimeout(()=>ye(ke,we))}const It={closed:!0,next:ae.Z,error:function pe(ke){throw ke},complete:ae.Z}},727:(ht,Se,O)=>{O.d(Se,{Lc:()=>le,w0:()=>ae,Nn:()=>de});var h=O(576);const P=(0,O(3888).d)(fe=>function(V){fe(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((z,ve)=>`${ve+1}) ${z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var oe=O(8737);class ae{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const se of V)se.remove(this);else V.remove(this);const{initialTeardown:z}=this;if((0,h.m)(z))try{z()}catch(se){j=se instanceof P?se.errors:[se]}const{_finalizers:ve}=this;if(ve){this._finalizers=null;for(const se of ve)try{_e(se)}catch(Ce){j=j??[],Ce instanceof P?j=[...j,...Ce.errors]:j.push(Ce)}}if(j)throw new P(j)}}add(j){var V;if(j&&j!==this)if(this.closed)_e(j);else{if(j instanceof ae){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(V=this._finalizers)&&void 0!==V?V:[]).push(j)}}_hasParent(j){const{_parentage:V}=this;return V===j||Array.isArray(V)&&V.includes(j)}_addParent(j){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(j),V):V?[V,j]:j}_removeParent(j){const{_parentage:V}=this;V===j?this._parentage=null:Array.isArray(V)&&(0,oe.P)(V,j)}remove(j){const{_finalizers:V}=this;V&&(0,oe.P)(V,j),j instanceof ae&&j._removeParent(this)}}ae.EMPTY=(()=>{const fe=new ae;return fe.closed=!0,fe})();const le=ae.EMPTY;function de(fe){return fe instanceof ae||fe&&"closed"in fe&&(0,h.m)(fe.remove)&&(0,h.m)(fe.add)&&(0,h.m)(fe.unsubscribe)}function _e(fe){(0,h.m)(fe)?fe():fe.unsubscribe()}},2416:(ht,Se,O)=>{O.d(Se,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Se,O)=>{O.d(Se,{E:()=>K});const K=new(O(9751).y)(ae=>ae.complete())},8996:(ht,Se,O)=>{O.d(Se,{D:()=>we});var h=O(8421),K=O(5363),P=O(9468),le=O(9751),_e=O(2202),fe=O(576),j=O(9672);function z(ye,ze){if(!ye)throw new Error("Iterable cannot be null");return new le.y($e=>{(0,j.f)($e,ze,()=>{const Xe=ye[Symbol.asyncIterator]();(0,j.f)($e,ze,()=>{Xe.next().then(te=>{te.done?$e.complete():$e.next(te.value)})},0,!0)})})}var ve=O(3670),se=O(8239),Ce=O(1144),Qe=O(6495),me=O(2206),pe=O(4532),pt=O(3260);function we(ye,ze){return ze?function ke(ye,ze){if(null!=ye){if((0,ve.c)(ye))return function oe(ye,ze){return(0,h.Xf)(ye).pipe((0,P.R)(ze),(0,K.Q)(ze))}(ye,ze);if((0,Ce.z)(ye))return function de(ye,ze){return new le.y($e=>{let Xe=0;return ze.schedule(function(){Xe===ye.length?$e.complete():($e.next(ye[Xe++]),$e.closed||this.schedule())})})}(ye,ze);if((0,se.t)(ye))return function ae(ye,ze){return(0,h.Xf)(ye).pipe((0,P.R)(ze),(0,K.Q)(ze))}(ye,ze);if((0,me.D)(ye))return z(ye,ze);if((0,Qe.T)(ye))return function V(ye,ze){return new le.y($e=>{let Xe;return(0,j.f)($e,ze,()=>{Xe=ye[_e.h](),(0,j.f)($e,ze,()=>{let te,xt;try{({value:te,done:xt}=Xe.next())}catch(it){return void $e.error(it)}xt?$e.complete():$e.next(te)},0,!0)}),()=>(0,fe.m)(Xe?.return)&&Xe.return()})}(ye,ze);if((0,pt.L)(ye))return function It(ye,ze){return z((0,pt.Q)(ye),ze)}(ye,ze)}throw(0,pe.z)(ye)}(ye,ze):(0,h.Xf)(ye)}},8421:(ht,Se,O)=>{O.d(Se,{Xf:()=>ve});var h=O(7582),K=O(1144),P=O(8239),oe=O(9751),ae=O(3670),le=O(2206),de=O(4532),_e=O(6495),fe=O(3260),j=O(576),V=O(7849),z=O(8822);function ve(ke){if(ke instanceof oe.y)return ke;if(null!=ke){if((0,ae.c)(ke))return function se(ke){return new oe.y(we=>{const ye=ke[z.L]();if((0,j.m)(ye.subscribe))return ye.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,K.z)(ke))return function Ce(ke){return new oe.y(we=>{for(let ye=0;ye<ke.length&&!we.closed;ye++)we.next(ke[ye]);we.complete()})}(ke);if((0,P.t)(ke))return function Qe(ke){return new oe.y(we=>{ke.then(ye=>{we.closed||(we.next(ye),we.complete())},ye=>we.error(ye)).then(null,V.h)})}(ke);if((0,le.D)(ke))return pe(ke);if((0,_e.T)(ke))return function me(ke){return new oe.y(we=>{for(const ye of ke)if(we.next(ye),we.closed)return;we.complete()})}(ke);if((0,fe.L)(ke))return function pt(ke){return pe((0,fe.Q)(ke))}(ke)}throw(0,de.z)(ke)}function pe(ke){return new oe.y(we=>{(function It(ke,we){var ye,ze,$e,Xe;return(0,h.mG)(this,void 0,void 0,function*(){try{for(ye=(0,h.KL)(ke);!(ze=yield ye.next()).done;)if(we.next(ze.value),we.closed)return}catch(te){$e={error:te}}finally{try{ze&&!ze.done&&(Xe=ye.return)&&(yield Xe.call(ye))}finally{if($e)throw $e.error}}we.complete()})})(ke,we).catch(ye=>we.error(ye))})}},6451:(ht,Se,O)=>{O.d(Se,{T:()=>le});var h=O(8189),K=O(8421),P=O(515),oe=O(3269),ae=O(8996);function le(...de){const _e=(0,oe.yG)(de),fe=(0,oe._6)(de,1/0),j=de;return j.length?1===j.length?(0,K.Xf)(j[0]):(0,h.J)(fe)((0,ae.D)(j,_e)):P.E}},5403:(ht,Se,O)=>{O.d(Se,{x:()=>K});var h=O(930);function K(oe,ae,le,de,_e){return new P(oe,ae,le,de,_e)}class P extends h.Lv{constructor(ae,le,de,_e,fe,j){super(ae),this.onFinalize=fe,this.shouldUnsubscribe=j,this._next=le?function(V){try{le(V)}catch(z){ae.error(z)}}:super._next,this._error=_e?function(V){try{_e(V)}catch(z){ae.error(z)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(V){ae.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(ht,Se,O)=>{O.d(Se,{U:()=>P});var h=O(4482),K=O(5403);function P(oe,ae){return(0,h.e)((le,de)=>{let _e=0;le.subscribe((0,K.x)(de,fe=>{de.next(oe.call(ae,fe,_e++))}))})}},8189:(ht,Se,O)=>{O.d(Se,{J:()=>P});var h=O(5577),K=O(4671);function P(oe=1/0){return(0,h.z)(K.y,oe)}},5577:(ht,Se,O)=>{O.d(Se,{z:()=>_e});var h=O(4004),K=O(8421),P=O(4482),oe=O(9672),ae=O(5403),de=O(576);function _e(fe,j,V=1/0){return(0,de.m)(j)?_e((z,ve)=>(0,h.U)((se,Ce)=>j(z,se,ve,Ce))((0,K.Xf)(fe(z,ve))),V):("number"==typeof j&&(V=j),(0,P.e)((z,ve)=>function le(fe,j,V,z,ve,se,Ce,Qe){const me=[];let pe=0,pt=0,It=!1;const ke=()=>{It&&!me.length&&!pe&&j.complete()},we=ze=>pe<z?ye(ze):me.push(ze),ye=ze=>{se&&j.next(ze),pe++;let $e=!1;(0,K.Xf)(V(ze,pt++)).subscribe((0,ae.x)(j,Xe=>{ve?.(Xe),se?we(Xe):j.next(Xe)},()=>{$e=!0},void 0,()=>{if($e)try{for(pe--;me.length&&pe<z;){const Xe=me.shift();Ce?(0,oe.f)(j,Ce,()=>ye(Xe)):ye(Xe)}ke()}catch(Xe){j.error(Xe)}}))};return fe.subscribe((0,ae.x)(j,we,()=>{It=!0,ke()})),()=>{Qe?.()}}(z,ve,fe,V)))}},5363:(ht,Se,O)=>{O.d(Se,{Q:()=>oe});var h=O(9672),K=O(4482),P=O(5403);function oe(ae,le=0){return(0,K.e)((de,_e)=>{de.subscribe((0,P.x)(_e,fe=>(0,h.f)(_e,ae,()=>_e.next(fe),le),()=>(0,h.f)(_e,ae,()=>_e.complete(),le),fe=>(0,h.f)(_e,ae,()=>_e.error(fe),le)))})}},3099:(ht,Se,O)=>{O.d(Se,{B:()=>ae});var h=O(8421),K=O(7579),P=O(930),oe=O(4482);function ae(de={}){const{connector:_e=(()=>new K.x),resetOnError:fe=!0,resetOnComplete:j=!0,resetOnRefCountZero:V=!0}=de;return z=>{let ve,se,Ce,Qe=0,me=!1,pe=!1;const pt=()=>{se?.unsubscribe(),se=void 0},It=()=>{pt(),ve=Ce=void 0,me=pe=!1},ke=()=>{const we=ve;It(),we?.unsubscribe()};return(0,oe.e)((we,ye)=>{Qe++,!pe&&!me&&pt();const ze=Ce=Ce??_e();ye.add(()=>{Qe--,0===Qe&&!pe&&!me&&(se=le(ke,V))}),ze.subscribe(ye),!ve&&Qe>0&&(ve=new P.Hp({next:$e=>ze.next($e),error:$e=>{pe=!0,pt(),se=le(It,fe,$e),ze.error($e)},complete:()=>{me=!0,pt(),se=le(It,j),ze.complete()}}),(0,h.Xf)(we).subscribe(ve))})(z)}}function le(de,_e,...fe){if(!0===_e)return void de();if(!1===_e)return;const j=new P.Hp({next:()=>{j.unsubscribe(),de()}});return _e(...fe).subscribe(j)}},9468:(ht,Se,O)=>{O.d(Se,{R:()=>K});var h=O(4482);function K(P,oe=0){return(0,h.e)((ae,le)=>{le.add(P.schedule(()=>ae.subscribe(le),oe))})}},8505:(ht,Se,O)=>{O.d(Se,{b:()=>ae});var h=O(576),K=O(4482),P=O(5403),oe=O(4671);function ae(le,de,_e){const fe=(0,h.m)(le)||de||_e?{next:le,error:de,complete:_e}:le;return fe?(0,K.e)((j,V)=>{var z;null===(z=fe.subscribe)||void 0===z||z.call(fe);let ve=!0;j.subscribe((0,P.x)(V,se=>{var Ce;null===(Ce=fe.next)||void 0===Ce||Ce.call(fe,se),V.next(se)},()=>{var se;ve=!1,null===(se=fe.complete)||void 0===se||se.call(fe),V.complete()},se=>{var Ce;ve=!1,null===(Ce=fe.error)||void 0===Ce||Ce.call(fe,se),V.error(se)},()=>{var se,Ce;ve&&(null===(se=fe.unsubscribe)||void 0===se||se.call(fe)),null===(Ce=fe.finalize)||void 0===Ce||Ce.call(fe)}))}):oe.y}},4408:(ht,Se,O)=>{O.d(Se,{o:()=>ae});var h=O(727);class K extends h.w0{constructor(de,_e){super()}schedule(de,_e=0){return this}}const P={setInterval(le,de,..._e){const{delegate:fe}=P;return fe?.setInterval?fe.setInterval(le,de,..._e):setInterval(le,de,..._e)},clearInterval(le){const{delegate:de}=P;return(de?.clearInterval||clearInterval)(le)},delegate:void 0};var oe=O(8737);class ae extends K{constructor(de,_e){super(de,_e),this.scheduler=de,this.work=_e,this.pending=!1}schedule(de,_e=0){var fe;if(this.closed)return this;this.state=de;const j=this.id,V=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(V,j,_e)),this.pending=!0,this.delay=_e,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(V,this.id,_e),this}requestAsyncId(de,_e,fe=0){return P.setInterval(de.flush.bind(de,this),fe)}recycleAsyncId(de,_e,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return _e;null!=_e&&P.clearInterval(_e)}execute(de,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(de,_e);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,_e){let j,fe=!1;try{this.work(de)}catch(V){fe=!0,j=V||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:de,scheduler:_e}=this,{actions:fe}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(fe,this),null!=de&&(this.id=this.recycleAsyncId(_e,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Se,O)=>{O.d(Se,{v:()=>P});var h=O(6063);class K{constructor(ae,le=K.now){this.schedulerActionCtor=ae,this.now=le}schedule(ae,le=0,de){return new this.schedulerActionCtor(this,ae).schedule(de,le)}}K.now=h.l.now;class P extends K{constructor(ae,le=K.now){super(ae,le),this.actions=[],this._active=!1}flush(ae){const{actions:le}=this;if(this._active)return void le.push(ae);let de;this._active=!0;do{if(de=ae.execute(ae.state,ae.delay))break}while(ae=le.shift());if(this._active=!1,de){for(;ae=le.shift();)ae.unsubscribe();throw de}}}},4986:(ht,Se,O)=>{O.d(Se,{P:()=>oe,z:()=>P});var h=O(4408);const P=new(O(7565).v)(h.o),oe=P},6063:(ht,Se,O)=>{O.d(Se,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(ht,Se,O)=>{O.d(Se,{z:()=>h});const h={setTimeout(K,P,...oe){const{delegate:ae}=h;return ae?.setTimeout?ae.setTimeout(K,P,...oe):setTimeout(K,P,...oe)},clearTimeout(K){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(ht,Se,O)=>{O.d(Se,{h:()=>K});const K=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Se,O)=>{O.d(Se,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ht,Se,O)=>{O.d(Se,{_6:()=>le,jO:()=>oe,yG:()=>ae});var h=O(576),K=O(3532);function P(de){return de[de.length-1]}function oe(de){return(0,h.m)(P(de))?de.pop():void 0}function ae(de){return(0,K.K)(P(de))?de.pop():void 0}function le(de,_e){return"number"==typeof P(de)?de.pop():_e}},8737:(ht,Se,O)=>{function h(K,P){if(K){const oe=K.indexOf(P);0<=oe&&K.splice(oe,1)}}O.d(Se,{P:()=>h})},3888:(ht,Se,O)=>{function h(K){const oe=K(ae=>{Error.call(ae),ae.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Se,{d:()=>h})},2806:(ht,Se,O)=>{O.d(Se,{O:()=>oe,x:()=>P});var h=O(2416);let K=null;function P(ae){if(h.v.useDeprecatedSynchronousErrorHandling){const le=!K;if(le&&(K={errorThrown:!1,error:null}),ae(),le){const{errorThrown:de,error:_e}=K;if(K=null,de)throw _e}}else ae()}function oe(ae){h.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=ae)}},9672:(ht,Se,O)=>{function h(K,P,oe,ae=0,le=!1){const de=P.schedule(function(){oe(),le?K.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(K.add(de),!le)return de}O.d(Se,{f:()=>h})},4671:(ht,Se,O)=>{function h(K){return K}O.d(Se,{y:()=>h})},1144:(ht,Se,O)=>{O.d(Se,{z:()=>h});const h=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(ht,Se,O)=>{O.d(Se,{D:()=>K});var h=O(576);function K(P){return Symbol.asyncIterator&&(0,h.m)(P?.[Symbol.asyncIterator])}},576:(ht,Se,O)=>{function h(K){return"function"==typeof K}O.d(Se,{m:()=>h})},3670:(ht,Se,O)=>{O.d(Se,{c:()=>P});var h=O(8822),K=O(576);function P(oe){return(0,K.m)(oe[h.L])}},6495:(ht,Se,O)=>{O.d(Se,{T:()=>P});var h=O(2202),K=O(576);function P(oe){return(0,K.m)(oe?.[h.h])}},8239:(ht,Se,O)=>{O.d(Se,{t:()=>K});var h=O(576);function K(P){return(0,h.m)(P?.then)}},3260:(ht,Se,O)=>{O.d(Se,{L:()=>oe,Q:()=>P});var h=O(7582),K=O(576);function P(ae){return(0,h.FC)(this,arguments,function*(){const de=ae.getReader();try{for(;;){const{value:_e,done:fe}=yield(0,h.qq)(de.read());if(fe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(_e)}}finally{de.releaseLock()}})}function oe(ae){return(0,K.m)(ae?.getReader)}},3532:(ht,Se,O)=>{O.d(Se,{K:()=>K});var h=O(576);function K(P){return P&&(0,h.m)(P.schedule)}},4482:(ht,Se,O)=>{O.d(Se,{A:()=>K,e:()=>P});var h=O(576);function K(oe){return(0,h.m)(oe?.lift)}function P(oe){return ae=>{if(K(ae))return ae.lift(function(le){try{return oe(le,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,Se,O)=>{function h(){}O.d(Se,{Z:()=>h})},9635:(ht,Se,O)=>{O.d(Se,{U:()=>P,z:()=>K});var h=O(4671);function K(...oe){return P(oe)}function P(oe){return 0===oe.length?h.y:1===oe.length?oe[0]:function(le){return oe.reduce((de,_e)=>_e(de),le)}}},7849:(ht,Se,O)=>{O.d(Se,{h:()=>P});var h=O(2416),K=O(3410);function P(oe){K.z.setTimeout(()=>{const{onUnhandledError:ae}=h.v;if(!ae)throw oe;ae(oe)})}},4532:(ht,Se,O)=>{function h(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Se,{z:()=>h})},7732:(ht,Se)=>{function h(V){return V instanceof Date&&"function"==typeof V.getMonth}function K(V){return"string"==typeof V}function P(V){return"number"==typeof V&&!Number.isNaN(V)}const oe=V=>Array.isArray(V);function ae(V){return null==V}function le(V){return"bigint"==typeof V}function de(V){return"symbol"==typeof V}function _e(V,z){return V.reduce((ve,se)=>ve[se],z)}function fe(V){return"boolean"==typeof V}function j(V,z){return(ve,se)=>{if("asc"===V){if(P(ve)&&P(se))return ve-se;if(K(ve)&&K(se))return isNaN(ve)||isNaN(se)?ve.localeCompare(se,z?.locale):parseFloat(ve)-parseFloat(se);if(h(ve)&&h(se))return+ve-+se;if(oe(ve)&&oe(se))return ve.sort(j(V,z)).toString().localeCompare(se.sort(j(V,z)).toString(),z?.locale);if(le(ve)&&le(se))return ve<se?-1:ve>se?1:0;if(de(ve)&&de(se))return ve.toString().localeCompare(se.toString(),z?.locale);if(fe(ve)&&fe(se))return ve?-1:se?1:0}if(P(ve)&&P(se))return se-ve;if(K(ve)&&K(se))return isNaN(ve)||isNaN(se)?se.localeCompare(ve,z?.locale):parseFloat(se)-parseFloat(ve);if(h(ve)&&h(se))return+se-+ve;if(oe(ve)&&oe(se))return se.sort(j(V,z)).toString().localeCompare(ve.sort(j(V,z)).toString(),z?.locale);if(le(ve)&&le(se))return ve<se?1:ve>se?-1:0;if(de(ve)&&de(se))return se.toString().localeCompare(ve.toString(),z?.locale);if(fe(ve)&&fe(se))return se?-1:ve?1:0;if(ae(ve)&&se)return 1;if(ve&&ae(se))return-1;throw new Error(`Can't sort, typeof a (${typeof ve}: ${JSON.stringify(ve)}) and typeof b (${typeof se}: ${JSON.stringify(se)}) are not handled by any sorting logic.`)}}Se.h=function(V,z,ve){const se=V.split(".");return(Ce,Qe)=>{let me=Ce[se[0]],pe=Qe[se[0]];return se.length>1&&(me=_e(se,Ce),pe=_e(se,Qe)),j(z,ve)(me,pe)}}},4650:(ht,Se,O)=>{O.d(Se,{$8M:()=>Ou,$Z:()=>ab,AFp:()=>su,ALo:()=>gt,AaK:()=>_e,CHM:()=>Du,CRH:()=>ag,CZH:()=>Dc,CqO:()=>wh,D6c:()=>xr,EJc:()=>sD,EpF:()=>Nm,F4k:()=>Fp,FYo:()=>Tv,FiY:()=>qs,G48:()=>ds,GfV:()=>Sv,Gpc:()=>V,JOm:()=>qi,KtG:()=>$c,LFG:()=>Bn,LSH:()=>Dl,Lbi:()=>nd,Lck:()=>Ao,MMx:()=>no,NdJ:()=>d_,OlP:()=>ln,Oqu:()=>I_,PXZ:()=>mD,Q6J:()=>LE,QGY:()=>Lt,QP$:()=>Tt,Qsj:()=>xw,R0b:()=>mi,RDi:()=>Jg,Rgc:()=>yy,SBq:()=>ap,Sil:()=>gi,Suo:()=>ie,TTD:()=>wi,TgZ:()=>sa,X6Q:()=>MT,XFs:()=>lt,Xpm:()=>xn,Xts:()=>ih,Y36:()=>lh,YKP:()=>kI,YNc:()=>FE,Yjl:()=>q,Yz7:()=>ge,Z0I:()=>vt,ZZ4:()=>Uy,_Bn:()=>K_,_UZ:()=>oa,_Vd:()=>op,_c5:()=>OT,_uU:()=>Gm,aQg:()=>xc,c2e:()=>iD,cJS:()=>Mt,cg1:()=>qp,dDg:()=>hD,dqk:()=>hn,eFA:()=>x0,ekj:()=>w_,eoX:()=>fD,f3M:()=>yt,g9A:()=>lg,h0i:()=>So,hGG:()=>FT,hij:()=>zm,iGM:()=>nu,ifc:()=>_t,ip1:()=>Mo,jDz:()=>dy,kL8:()=>Mh,lG2:()=>L,lcZ:()=>ce,lqb:()=>Sl,lri:()=>lD,n5z:()=>Cn,oAB:()=>ei,oxw:()=>Lp,q4F:()=>Nw,qLn:()=>up,qOj:()=>Mp,qZA:()=>jl,rWj:()=>dD,sBO:()=>ha,sIi:()=>mh,s_b:()=>sg,soG:()=>Cc,tb:()=>Sy,tp0:()=>wo,uIk:()=>s_,vHH:()=>Ce,vpe:()=>ca,wAp:()=>Rt,xp6:()=>Ov,z2F:()=>Hh,zSh:()=>np,zs3:()=>uc});var h=O(7579),K=O(727),P=O(9751),oe=O(6451),ae=O(3099);function le(i){for(let o in i)if(i[o]===le)return o;throw Error("Could not find renamed property on target object.")}function de(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function _e(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(_e).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function fe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=le({__forward_ref__:le});function V(i){return i.__forward_ref__=V,i.toString=function(){return _e(this())},i}function z(i){return ve(i)?i():i}function ve(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===V}class Ce extends Error{constructor(o,a){super(function Qe(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i,o){throw new Ce(-201,!1)}function ne(i,o){null==i&&function X(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function ge(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Mt(i){return{providers:i.providers||[],imports:i.imports||[]}}function un(i){return qt(i,Jn)||qt(i,Jr)}function vt(i){return null!==un(i)}function qt(i,o){return i.hasOwnProperty(o)?i[o]:null}function Fn(i){return i&&(i.hasOwnProperty(zn)||i.hasOwnProperty(yi))?i[zn]:null}const Jn=le({\u0275prov:le}),zn=le({\u0275inj:le}),Jr=le({ngInjectableDef:le}),yi=le({ngInjectorDef:le});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let jr;function $r(i){const o=jr;return jr=i,o}function Po(i,o,a){const c=un(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&lt.Optional?null:void 0!==o?o:void we(_e(i))}function ar(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),_t=(()=>{return(i=_t||(_t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",_t;var i})();const hn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Xn={},bt=[],wr=le({\u0275cmp:le}),cn=le({\u0275dir:le}),ko=le({\u0275pipe:le}),Yt=le({\u0275mod:le}),ur=le({\u0275fac:le}),Er=le({__NG_ELEMENT_ID__:le});let Pi=0;function xn(i){return ar(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||bt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||_t.Emulated,id:"c"+Pi++,styles:i.styles||bt,_:null,setInput:null,schemas:i.schemas||null,tView:null},g=i.dependencies,v=i.features;return d.inputs=U(i.inputs,c),d.outputs=U(i.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(ns).filter(Ln):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(qe).filter(Ln):null,d})}function ns(i){return ue(i)||J(i)}function Ln(i){return null!==i}function ei(i){return ar(()=>({type:i.type,bootstrap:i.bootstrap||bt,declarations:i.declarations||bt,imports:i.imports||bt,exports:i.exports||bt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function U(i,o){if(null==i)return Xn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,o&&(o[d]=g)}return a}const L=xn;function q(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function ue(i){return i[wr]||null}function J(i){return i[cn]||null}function qe(i){return i[ko]||null}function Tt(i){const o=ue(i)||J(i)||qe(i);return null!==o&&o.standalone}function Ot(i,o){const a=i[Yt]||null;if(!a&&!0===o)throw new Error(`Type ${_e(i)} does not have '\u0275mod' property.`);return a}function lr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Gr(i){return Array.isArray(i)&&!0===i[1]}function Fo(i){return 0!=(8&i.flags)}function fu(i){return 2==(2&i.flags)}function ms(i){return 1==(1&i.flags)}function Oi(i){return null!==i.template}function Lo(i){return 0!=(256&i[2])}function ys(i,o){return i.hasOwnProperty(ur)?i[ur]:null}class cf{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function wi(){return yd}function yd(i){return i.type.prototype.ngOnChanges&&(i.setInput=Vc),ya}function ya(){const i=lf(this),o=i?.current;if(o){const a=i.previous;if(a===Xn)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Vc(i,o,a,c){const d=lf(i)||function Uc(i,o){return i[mu]=o}(i,{previous:Xn,current:null}),g=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[a],C=v[I];g[I]=new cf(C&&C.currentValue,o,v===Xn),i[c]=o}wi.ngInherit=!0;const mu="__ngSimpleChanges__";function lf(i){return i[mu]||null}function Vn(i){for(;Array.isArray(i);)i=i[0];return i}function Ei(i,o){return Vn(o[i])}function zr(i,o){return Vn(o[i.index])}function Eu(i,o){return i.data[o]}function Un(i,o){const a=o[i];return lr(a)?a:a[0]}function oo(i){return 64==(64&i[2])}function ni(i,o){return null==o?null:i[o]}function zs(i){i[18]=0}function br(i,o){i[5]+=o;let a=i,c=i[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const St={lFrame:Wc(null),bindingsEnabled:!0};function Dd(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function $t(){return St.lFrame.tView}function Du(i){return St.lFrame.contextLView=i,i[8]}function $c(i){return St.lFrame.contextLView=null,i}function Mn(){let i=Cu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Cu(){return St.lFrame.currentTNode}function ri(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function Uo(){return St.lFrame.isParent}function _s(){return St.lFrame.bindingIndex++}function Vg(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,zc(o)}function zc(i){St.lFrame.currentDirectiveIndex=i}function bu(){return St.lFrame.currentQueryIndex}function Pr(i){St.lFrame.currentQueryIndex=i}function qc(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function wa(i,o,a){if(a&lt.SkipSelf){let d=o,g=i;for(;!(d=d.parent,null!==d||a&lt.Host||(d=qc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,i=g}const c=St.lFrame=co();return c.currentTNode=o,c.lView=i,!0}function Ea(i){const o=co(),a=i[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function co(){const i=St.lFrame,o=null===i?null:i.child;return null===o?Wc(i):o}function Wc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Ia(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const bd=Ia;function jo(){const i=Ia();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Xt(){return St.lFrame.selectedIndex}function ws(i){St.lFrame.selectedIndex=i}function Dn(){const i=St.lFrame;return Eu(i.tView,i.selectedIndex)}function lo(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:N}=g;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),S&&((i.viewHooks||(i.viewHooks=[])).push(a,S),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,S)),null!=N&&(i.destroyHooks||(i.destroyHooks=[])).push(a,N)}}function Da(i,o,a){Ca(i,o,3,a)}function $o(i,o,a,c){(3&i[2])===a&&Ca(i,o,a,c)}function xd(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Ca(i,o,a,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&i[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(i[18]+=65536),(I<g||-1==g)&&(pf(i,a,o,C),i[18]=(4294901760&i[18])+C+2),C++}function pf(i,o,a,c){const d=a[c]<0,g=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class ba{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Mu(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],v=a[c++],I=a[c++];i.setAttribute(o,v,I,g)}else{const g=d,v=a[++c];yf(g)?i.setProperty(o,g,v):i.setAttribute(o,g,v),c++}}return c}function Ru(i){return 3===i||4===i||6===i}function yf(i){return 64===i.charCodeAt(0)}function Ho(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Rd(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Rd(i,o,a,c,d){let g=0,v=i.length;if(-1===o)v=-1;else for(;g<i.length;){const I=i[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<i.length;){const I=i[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[g+1]=d));if(c===i[g+1])return void(i[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(i.splice(v,0,o),g=v+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==d&&i.splice(g++,0,d)}function Jc(i){return-1!==i}function Ta(i){return 32767&i}function is(i,o){let a=function vf(i){return i>>16}(i),c=o;for(;a>0;)c=c[15],a--;return c}let Sa=!0;function Is(i){const o=Sa;return Sa=i,o}let Aa=0;const Ii={};function Go(i,o){const a=fo(i,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(i.injectorIndex=o.length,el(c.data,i),el(o,null),el(c.blueprint,null));const d=po(i,o),g=i.injectorIndex;if(Jc(d)){const v=Ta(d),I=is(d,o),C=I[1].data;for(let S=0;S<8;S++)o[g+S]=I[v+S]|C[v+S]}return o[g+8]=d,g}function el(i,o){i.push(0,0,0,0,0,0,0,0,o)}function fo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function po(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Ef(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function xa(i,o,a){!function Xc(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Er)&&(c=a[Er]),null==c&&(c=a[Er]=Aa++);const d=255&c;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Pu(i,o,a){if(a&lt.Optional||void 0!==i)return i;we()}function _f(i,o,a,c){if(a&lt.Optional&&void 0===c&&(c=null),0==(a&(lt.Self|lt.Host))){const d=i[9],g=$r(void 0);try{return d?d.get(o,c,a&lt.Optional):Po(o,c,a&lt.Optional)}finally{$r(g)}}return Pu(c,0,a)}function Ma(i,o,a,c=lt.Default,d){if(null!==i){if(1024&o[2]){const v=function Na(i,o,a,c,d){let g=i,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=zo(g,v,a,c|lt.Self,Ii);if(I!==Ii)return I;let C=g.parent;if(!C){const S=v[21];if(S){const N=S.get(a,Ii,c);if(N!==Ii)return N}C=Ef(v),v=v[15]}g=C}return d}(i,o,a,c,Ii);if(v!==Ii)return v}const g=zo(i,o,a,c,Ii);if(g!==Ii)return g}return _f(o,a,c,d)}function zo(i,o,a,c,d){const g=function mo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Er)?i[Er]:void 0;return"number"==typeof o?o>=0?255&o:jg:o}(a);if("function"==typeof g){if(!wa(o,i,c))return c&lt.Host?Pu(d,0,c):_f(o,a,c,d);try{const v=g(c);if(null!=v||c&lt.Optional)return v;we()}finally{bd()}}else if("number"==typeof g){let v=null,I=fo(i,o),C=-1,S=c&lt.Host?o[16][6]:null;for((-1===I||c&lt.SkipSelf)&&(C=-1===I?po(i,o):o[I+8],-1!==C&&ku(c,!1)?(v=o[1],I=Ta(C),o=is(C,o)):I=-1);-1!==I;){const N=o[1];if(wf(g,I,N.data)){const F=Bg(I,o,a,v,c,S);if(F!==Ii)return F}C=o[I+8],-1!==C&&ku(c,o[1].data[I+8]===S)&&wf(g,I,o)?(v=N,I=Ta(C),o=is(C,o)):I=-1}}return d}function Bg(i,o,a,c,d,g){const v=o[1],I=v.data[i+8],N=os(I,v,a,null==c?fu(I)&&Sa:c!=v&&0!=(3&I.type),d&lt.Host&&g===I);return null!==N?Ra(o,v,N,I):Ii}function os(i,o,a,c,d){const g=i.providerIndexes,v=o.data,I=1048575&g,C=i.directiveStart,N=g>>20,H=d?I+N:i.directiveEnd;for(let Q=c?I:I+N;Q<H;Q++){const De=v[Q];if(Q<C&&a===De||Q>=C&&De.type===a)return Q}if(d){const Q=v[C];if(Q&&Oi(Q)&&Q.type===a)return C}return null}function Ra(i,o,a,c){let d=i[a];const g=o.data;if(function Au(i){return i instanceof ba}(d)){const v=d;v.resolving&&function pt(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${i}${a}`)}(function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(g[a]));const I=Is(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?$r(v.injectImpl):null;wa(i,c,lt.Default);try{d=i[a]=v.factory(void 0,g,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Kc(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=yd(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],o)}finally{null!==C&&$r(C),Is(I),v.resolving=!1,bd()}}return d}function wf(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ku(i,o){return!(i&lt.Self||i&lt.Host&&o)}class as{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Ma(this._tNode,this._lView,o,c,a)}}function jg(){return new as(Mn(),Ae())}function Cn(i){return ar(()=>{const o=i.prototype.constructor,a=o[ur]||tl(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const g=d[ur]||tl(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function tl(i){return ve(i)?()=>{const o=tl(z(i));return o&&o()}:ys(i)}function Ef(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function Ou(i){return function go(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(Ru(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(Mn(),i)}const Nn="__parameters__";function Cs(i,o,a){return ar(()=>{const c=function qo(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,S,N){const F=C.hasOwnProperty(Nn)?C[Nn]:Object.defineProperty(C,Nn,{value:[]})[Nn];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class ln{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ge({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function qn(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(o===i&&(o=i.slice(0,a)),qn(c,o)):o!==i&&o.push(c)}return o}function Bi(i,o){i.forEach(a=>Array.isArray(a)?Bi(a,o):o(a))}function il(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function sl(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function oi(i,o,a){let c=Oa(i,o);return c>=0?i[1|c]=a:(c=~c,function $g(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Bu(i,o){const a=Oa(i,o);if(a>=0)return i[1|a]}function Oa(i,o){return function Af(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const g=c+(d-c>>1),v=i[g<<a];if(o===v)return g<<a;v>o?d=g:c=g+1}return~(d<<a)}(i,o,1)}const Pn={},Wn="__NG_DI_FLAG__",kr="ngTempTokenPath",qr=/\n/gm,La="__source";let vo;function Or(i){const o=vo;return vo=i,o}function qu(i,o=lt.Default){if(void 0===vo)throw new Ce(-203,!1);return null===vo?Po(i,void 0,o):vo.get(i,o&lt.Optional?null:void 0,o)}function Bn(i,o=lt.Default){return(function Ni(){return jr}()||qu)(z(i),o)}function yt(i,o=lt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Bn(i,o)}function Ld(i){const o=[];for(let a=0;a<i.length;a++){const c=z(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Ce(900,!1);let d,g=lt.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Va(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(Bn(d,g))}else o.push(Bn(c))}return o}function _o(i,o){return i[Wn]=o,i.prototype[Wn]=o,i}function Va(i){return i[Wn]}const qs=_o(Cs("Optional"),8),wo=_o(Cs("SkipSelf"),4);var qi=(()=>((qi=qi||{})[qi.Important=1]="Important",qi[qi.DashCase=2]="DashCase",qi))();const k=new Map;let G=0;const mn="__ngContext__";function ft(i,o){lr(o)?(i[mn]=o[20],function he(i){k.set(i[20],i)}(o)):i[mn]=o}function Ju(i,o){return undefined(i,o)}function hl(i){const o=i[3];return Gr(o)?o[3]:o}function Xu(i){return ea(i[13])}function Wg(i){return ea(i[4])}function ea(i){for(;null!==i&&!Gr(i);)i=i[4];return i}function ec(i,o,a,c,d){if(null!=c){let g,v=!1;Gr(c)?g=c:lr(c)&&(v=!0,c=c[0]);const I=Vn(c);0===i&&null!==a?null==d?gl(o,a,I):Io(o,a,I,d||null,!0):1===i&&null!==a?Io(o,a,I,d||null,!0):2===i?function Hf(i,o,a){const c=Zd(i,o);c&&function Uf(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=g&&function qf(i,o,a,c,d){const g=a[7];g!==Vn(a)&&ec(o,i,c,g,d);for(let I=10;I<a.length;I++){const C=a[I];ml(C[1],C,i,o,c,g)}}(o,i,g,a,d)}}function Ff(i,o,a){return i.createElement(o,a)}function nc(i,o){const a=i[9],c=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,br(d,-1)),a.splice(c,1)}function $a(i,o){if(i.length<=10)return;const a=10+o,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&nc(d,c),o>0&&(i[a-1][4]=c[4]);const g=sl(i,10+o);!function ja(i,o){ml(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Ha(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ml(i,o,a,3,null,null),function pv(i){let o=i[13];if(!o)return qd(i[1],i);for(;o;){let a=null;if(lr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==i;)lr(o)&&qd(o[1],o),o=o[3];null===o&&(o=i),lr(o)&&qd(o[1],o),a=o&&o[4]}o=a}}(o)}}function qd(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Wd(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof ba)){const g=a[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];try{C.call(I)}finally{}}else try{g.call(d)}finally{}}}}(i,o),function Vf(i,o){const a=i.cleanup,c=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],I="function"==typeof v?v(o):Vn(o[v]),C=c[d=a[g+2]],S=a[g+3];"boolean"==typeof S?I.removeEventListener(a[g],C,S):S>=0?c[d=S]():c[d=-S].unsubscribe(),g+=2}else{const v=c[d=a[g+1]];a[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Gr(o[3])){a!==o[3]&&nc(a,o);const c=o[19];null!==c&&c.detachView(i)}!function He(i){k.delete(i[20])}(o)}}function Ga(i,o,a){return function Zg(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===_t.None||d===_t.Emulated)return null}return zr(c,a)}(i,o.parent,a)}function Io(i,o,a,c,d){i.insertBefore(o,a,c,d)}function gl(i,o,a){i.appendChild(o,a)}function Kg(i,o,a,c,d){null!==c?Io(i,o,a,c,d):gl(i,o,a)}function Zd(i,o){return i.parentNode(o)}let Js,jf=function Kd(i,o,a){return 40&i.type?zr(i,a):null};function xs(i,o,a,c){const d=Ga(i,c,o),g=o[11],I=function Yg(i,o,a){return jf(i,o,a)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Kg(g,d,a[C],I,!1);else Kg(g,d,a,I,!1)}function Ms(i,o){if(null!==o){const a=o.type;if(3&a)return zr(o,i);if(4&a)return Qd(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Ms(i,c);{const d=i[o.index];return Gr(d)?Qd(-1,d):Vn(d)}}if(32&a)return Ju(o,i)()||Vn(i[o.index]);{const c=$f(i,o);return null!==c?Array.isArray(c)?c[0]:Ms(hl(i[16]),c):Ms(i,o.next)}}return null}function $f(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Qd(i,o){const a=10+i+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Ms(c,d)}return o[7]}function Gf(i,o,a,c,d,g,v){for(;null!=a;){const I=c[a.index],C=a.type;if(v&&0===o&&(I&&ft(Vn(I),c),a.flags|=4),64!=(64&a.flags))if(8&C)Gf(i,o,a.child,c,d,g,!1),ec(o,i,d,I,g);else if(32&C){const S=Ju(a,c);let N;for(;N=S();)ec(o,i,d,N,g);ec(o,i,d,I,g)}else 16&C?zf(i,o,c,a,d,g):ec(o,i,d,I,g);a=v?a.projectionNext:a.next}}function ml(i,o,a,c,d,g){Gf(a,c,i.firstChild,o,d,g,!1)}function zf(i,o,a,c,d,g){const v=a[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)ec(o,i,d,C[S],g);else Gf(i,o,C,v[3],d,g,!0)}function Zf(i,o,a){i.setAttribute(o,"style",a)}function Kf(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Jg(i){Js=i}class Yf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function hr(i){return i instanceof Yf?i.changingThisBreaksApplicationSecurity:i}const p=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var fr=(()=>((fr=fr||{})[fr.NONE=0]="NONE",fr[fr.HTML=1]="HTML",fr[fr.STYLE=2]="STYLE",fr[fr.SCRIPT=3]="SCRIPT",fr[fr.URL=4]="URL",fr[fr.RESOURCE_URL=5]="RESOURCE_URL",fr))();function Dl(i){const o=function Cl(){const i=Ae();return i&&i[12]}();return o?o.sanitize(fr.URL,i)||"":function Do(i,o){const a=function em(i){return i instanceof Yf&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?hr(i):function _(i){return(i=String(i)).match(p)?i:"unsafe:"+i}(me(i))}const ih=new ln("ENVIRONMENT_INITIALIZER"),bl=new ln("INJECTOR",-1),vw=new ln("INJECTOR_DEF_TYPES");class _w{get(o,a=Pn){if(a===Pn){const c=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw c.name="NullInjectorError",c}return a}}function LC(...i){return{\u0275providers:ww(0,i)}}function ww(i,...o){const a=[],c=new Set;let d;return Bi(o,g=>{const v=g;Ev(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Ew(d,a),a}function Ew(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Bi(d,g=>{o.push(g)})}}function Ev(i,o,a,c){if(!(i=z(i)))return!1;let d=null,g=Fn(i);const v=!g&&ue(i);if(g||v){if(v&&!v.standalone)return!1;d=i}else{const C=i.ngModule;if(g=Fn(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of C)Ev(S,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;c.add(d);try{Bi(g.imports,N=>{Ev(N,o,a,c)&&(S||(S=[]),S.push(N))})}finally{}void 0!==S&&Ew(S,o)}if(!I){const S=ys(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:bt},{provide:vw,useValue:d,multi:!0},{provide:ih,useValue:()=>Bn(d),multi:!0})}const C=g.providers;null==C||I||Bi(C,N=>{o.push(N)})}}return d!==i&&void 0!==i.providers}const VC=le({provide:String,useValue:le});function Iv(i){return null!==i&&"object"==typeof i&&VC in i}function Wa(i){return"function"==typeof i}const np=new ln("Set Injector scope."),Tl={},UC={};let Cv;function im(){return void 0===Cv&&(Cv=new _w),Cv}class Sl{}class rp extends Sl{constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bv(o,v=>this.processProvider(v)),this.records.set(bl,Al(void 0,this)),d.has("environment")&&this.records.set(Sl,Al(void 0,this));const g=this.records.get(np);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(vw.multi,bt,lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Or(this),c=$r(void 0);try{return o()}finally{Or(a),$r(c)}}get(o,a=Pn,c=lt.Default){this.assertNotDestroyed();const d=Or(this),g=$r(void 0);try{if(!(c&lt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function BC(i){return"function"==typeof i||"object"==typeof i&&i instanceof ln}(o)&&un(o);I=C&&this.injectableDefInScope(C)?Al(sm(o),Tl):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&lt.Self?im():this.parent).get(o,a=c&lt.Optional&&a===Pn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[kr]=v[kr]||[]).unshift(_e(o)),d)throw v;return function Wu(i,o,a,c){const d=i[kr];throw o[La]&&d.unshift(o[La]),i.message=function Zn(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=_e(o);if(Array.isArray(o))d=o.map(_e).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):_e(I)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(qr,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[kr]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{$r(g),Or(d)}}resolveInjectorInitializers(){const o=Or(this),a=$r(void 0);try{const c=this.get(ih.multi,bt,lt.Self);for(const d of c)d()}finally{Or(o),$r(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(_e(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(o){let a=Wa(o=z(o))?o:z(o&&o.provide);const c=function om(i){return Iv(i)?Al(void 0,i.useValue):Al(ip(i),Tl)}(o);if(Wa(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Al(void 0,Tl,!0),d.factory=()=>Ld(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Tl&&(a.value=UC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function bw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function sm(i){const o=un(i),a=null!==o?o.factory:ys(i);if(null!==a)return a;if(i instanceof ln)throw new Ce(204,!1);if(i instanceof Function)return function Cw(i){const o=i.length;if(o>0)throw function Wo(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new Ce(204,!1);const a=function bn(i){const o=i&&(i[Jn]||i[Jr]);if(o){const a=function _n(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ce(204,!1)}function ip(i,o,a){let c;if(Wa(i)){const d=z(i);return ys(d)||sm(d)}if(Iv(i))c=()=>z(i.useValue);else if(function Iw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ld(i.deps||[]));else if(function Dv(i){return!(!i||!i.useExisting)}(i))c=()=>Bn(z(i.useExisting));else{const d=z(i&&(i.useClass||i.provide));if(!function sp(i){return!!i.deps}(i))return ys(d)||sm(d);c=()=>new d(...Ld(i.deps))}return c}function Al(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function jC(i){return!!i.\u0275providers}function bv(i,o){for(const a of i)Array.isArray(a)?bv(a,o):jC(a)?bv(a.\u0275providers,o):o(a)}class Tw{}class HC{resolveComponentFactory(o){throw function am(i){const o=Error(`No component factory found for ${_e(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let op=(()=>{class i{}return i.NULL=new HC,i})();function GC(){return sh(Mn(),Ae())}function sh(i,o){return new ap(zr(i,o))}let ap=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=GC,i})();function Aw(i){return i instanceof ap?i.nativeElement:i}class Tv{}let xw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Mw(){const i=Ae(),a=Un(Mn().index,i);return(lr(a)?a:i)[11]}(),i})(),Rw=(()=>{class i{}return i.\u0275prov=ge({token:i,providedIn:"root",factory:()=>null}),i})();class Sv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Nw=new Sv("14.3.0"),Av={};function Mv(i){return i.ngOriginalError}class up{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Mv(o);for(;a&&Mv(a);)a=Mv(a);return a||null}}function Za(i){return i instanceof Function?i():i}function cp(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||i.charCodeAt(d+g)<=32)return d}a=d+1}}const Bw="ng-template";function ZC(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==cp(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function jw(i){return 4===i.type&&i.value!==Bw}function KC(i,o,a){return o===(4!==i.type||a?i.value:Bw)}function $w(i,o,a){let c=4;const d=i.attrs||[],g=function cm(i){for(let o=0;o<i.length;o++)if(Ru(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!KC(i,C,a)||""===C&&1===o.length){if(yn(c))return!1;v=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==i.attrs){if(!ZC(i.attrs,S,a)){if(yn(c))return!1;v=!0}continue}const F=YC(8&c?"class":C,d,jw(i),a);if(-1===F){if(yn(c))return!1;v=!0;continue}if(""!==S){let H;H=F>g?"":d[F+1].toLowerCase();const Q=8&c?H:null;if(Q&&-1!==cp(Q,S,0)||2&c&&S!==H){if(yn(c))return!1;v=!0}}}}else{if(!v&&!yn(c)&&!yn(C))return!1;if(v&&yn(C))continue;v=!1,c=C|1&c}}return yn(c)||v}function yn(i){return 0==(1&i)}function YC(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function QC(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Nv(i,o,a=!1){for(let c=0;c<o.length;c++)if($w(i,o[c],a))return!0;return!1}function kv(i,o){return i?":not("+o.trim()+")":o}function px(i){let o=i[0],a=1,c=2,d="",g=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!yn(v)&&(o+=kv(g,d),d=""),c=v,g=g||!yn(c);a++}return""!==d&&(o+=kv(g,d)),o}const Vt={};function Ov(i){lp($t(),Ae(),Xt()+i,!1)}function lp(i,o,a,c){if(!c)if(3==(3&o[2])){const g=i.preOrderCheckHooks;null!==g&&Da(o,g,a)}else{const g=i.preOrderHooks;null!==g&&$o(o,g,0,a)}ws(a)}function zw(i,o=null,a=null,c){const d=qw(i,o,a,c);return d.resolveInjectorInitializers(),d}function qw(i,o=null,a=null,c,d=new Set){const g=[a||bt,LC(i)];return c=c||("object"==typeof i?void 0:_e(i)),new rp(g,o||im(),c||null,d)}let uc=(()=>{class i{static create(a,c){if(Array.isArray(a))return zw({name:""},c,a,"");{const d=a.name??"";return zw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Pn,i.NULL=new _w,i.\u0275prov=ge({token:i,providedIn:"any",factory:()=>Bn(bl)}),i.__NG_ELEMENT_ID__=-1,i})();function lh(i,o=lt.Default){const a=Ae();return null===a?Bn(i,o):Ma(Mn(),a,z(i),o)}function ab(){throw new Error("invalid")}function dp(i,o){return i<<17|o<<2}function Xs(i){return i>>17&32767}function fm(i){return 2|i}function ra(i){return(131068&i)>>2}function pm(i,o){return-131069&i|o<<2}function gm(i){return 1|i}function yp(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],g=a[c+1];if(-1!==g){const v=i.data[g];Pr(d),v.contentQueries(2,o[g],g)}}}function hh(i,o,a,c,d,g,v,I,C,S,N){const F=o.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==N||i&&1024&i[2])&&(F[2]|=1024),zs(F),F[3]=F[15]=i,F[8]=a,F[10]=v||i&&i[10],F[11]=I||i&&i[11],F[12]=C||i&&i[12]||null,F[9]=S||i&&i[9]||null,F[6]=g,F[20]=function W(){return G++}(),F[21]=N,F[16]=2==o.type?i[16]:F,F}function kl(i,o,a,c,d){let g=i.data[o];if(null===g)g=function _p(i,o,a,c,d){const g=Cu(),v=Uo(),C=i.data[o]=function Em(i,o,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(i,o,a,c,d),function Cd(){return St.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const v=function ao(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ri(g,!0),g}function Ol(i,o,a,c){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function fh(i,o,a){Ea(o);try{const c=i.viewQuery;null!==c&&ph(1,c,a);const d=i.template;null!==d&&Zv(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&yp(i,o),i.staticViewQueries&&ph(2,i.viewQuery,a);const g=i.components;null!==g&&function vp(i,o){for(let a=0;a<o.length;a++)Rx(i,o[a])}(o,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[2]&=-5,jo()}}function wp(i,o,a,c){const d=o[2];if(128!=(128&d)){Ea(o);try{zs(o),function Vi(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Zv(i,o,a,2,c);const v=3==(3&d);if(v){const S=i.preOrderCheckHooks;null!==S&&Da(o,S,null)}else{const S=i.preOrderHooks;null!==S&&$o(o,S,0,null),xd(o,0)}if(function xx(i){for(let o=Xu(i);null!==o;o=Wg(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],g=d[3];0==(512&d[2])&&br(g,1),d[2]|=512}}}(o),function CE(i){for(let o=Xu(i);null!==o;o=Wg(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];oo(c)&&wp(d,c,d.template,c[8])}}(o),null!==i.contentQueries&&yp(i,o),v){const S=i.contentCheckHooks;null!==S&&Da(o,S)}else{const S=i.contentHooks;null!==S&&$o(o,S,1),xd(o,1)}!function mp(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ws(~d);else{const g=d,v=a[++c],I=a[++c];Vg(v,g),I(2,o[g])}}}finally{ws(-1)}}(i,o);const I=i.components;null!==I&&function dh(i,o){for(let a=0;a<o.length;a++)Mx(i,o[a])}(o,I);const C=i.viewQuery;if(null!==C&&ph(2,C,c),v){const S=i.viewCheckHooks;null!==S&&Da(o,S)}else{const S=i.viewHooks;null!==S&&$o(o,S,2),xd(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,br(o[3],-1))}finally{jo()}}}function Zv(i,o,a,c,d){const g=Xt(),v=2&c;try{ws(-1),v&&o.length>22&&lp(i,o,22,!1),a(c,d)}finally{ws(g)}}function Fl(i,o,a){!Dd()||(function wE(i,o,a,c){const d=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Go(a,o),ft(c,o);const v=a.initialInputs;for(let I=d;I<g;I++){const C=i.data[I],S=Oi(C);S&&Cp(o,a,C);const N=Ra(o,i,I,a);ft(N,o),null!==v&&IE(0,I-d,N,C,0,v),S&&(Un(a.index,o)[8]=N)}}(i,o,a,zr(a,o)),128==(128&a.flags)&&function Ax(i,o,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,v=function Bo(){return St.lFrame.currentDirectiveIndex}();try{ws(g);for(let I=c;I<d;I++){const C=i.data[I],S=o[I];zc(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Cm(C,S)}}finally{ws(-1),zc(v)}}(i,o,a))}function gE(i,o,a=zr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function pb(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=wm(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function wm(i,o,a,c,d,g,v,I,C,S){const N=22+c,F=N+d,H=function Tx(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Vt);return a}(N,F),Q="function"==typeof S?S():S;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:o,data:H.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function Dp(i,o,a,c){const d=Tm(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&TE(i).push(c,d.length-1))}function mE(i,o,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function Im(i,o){const c=o.directiveEnd,d=i.data,g=o.attrs,v=[];let I=null,C=null;for(let S=o.directiveStart;S<c;S++){const N=d[S],F=N.inputs,H=null===g||jw(o)?null:bp(F,g);v.push(H),I=mE(F,S,I),C=mE(N.outputs,S,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=C}function yE(i,o){const a=Un(o,i);16&a[2]||(a[2]|=32)}function Yv(i,o,a,c){let d=!1;if(Dd()){const g=function yb(i,o,a){const c=i.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Nv(a,v.selectors,!1)&&(d||(d=[]),xa(Go(a,o),i,v.type),Oi(v)?(Qv(i,a),d.unshift(v)):d.push(v))}return d}(i,o,a),v=null===c?null:{"":-1};if(null!==g){d=!0,_b(a,i.data.length,g.length);for(let N=0;N<g.length;N++){const F=g[N];F.providersResolver&&F.providersResolver(F)}let I=!1,C=!1,S=Ol(i,o,g.length,null);for(let N=0;N<g.length;N++){const F=g[N];a.mergedAttrs=Ho(a.mergedAttrs,F.hostAttrs),EE(i,a,o,S,F),vb(S,F,v),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const H=F.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!C&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),S++}Im(i,a)}v&&function Jv(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Ce(-301,!1);c.push(o[d],g)}}}(a,c,v)}return a.mergedAttrs=Ho(a.mergedAttrs,a.attrs),d}function gb(i,o,a,c,d,g){const v=g.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const C=~o.index;(function mb(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=C&&I.push(C),I.push(c,d,v)}}function Cm(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Qv(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function vb(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Oi(o)&&(a[""]=i)}}function _b(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function EE(i,o,a,c,d){i.data[c]=d;const g=d.factory||(d.factory=ys(d.type)),v=new ba(g,Oi(d),lh);i.blueprint[c]=v,a[c]=v,gb(i,o,0,c,Ol(i,a,d.hostVars,Vt),d)}function Cp(i,o,a){const c=zr(o,i),d=pb(a),g=i[10],v=Tp(i,hh(i,d,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));i[o.index]=v}function eo(i,o,a,c,d,g){const v=zr(i,o);!function bm(i,o,a,c,d,g,v){if(null==g)i.removeAttribute(o,d,a);else{const I=null==v?me(g):v(g,c||"",d);i.setAttribute(o,d,I,a)}}(o[11],v,g,i.value,a,c,d)}function IE(i,o,a,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const S=v[C++],N=v[C++],F=v[C++];null!==I?c.setInput(a,F,S,N):a[N]=F}}}function bp(i,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function DE(i,o,a,c){return new Array(i,!0,!1,o,null,0,c,a,null,null)}function Mx(i,o){const a=Un(o,i);if(oo(a)){const c=a[1];48&a[2]?wp(c,a,c.template,a[8]):a[5]>0&&bE(a)}}function bE(i){for(let c=Xu(i);null!==c;c=Wg(c))for(let d=10;d<c.length;d++){const g=c[d];if(oo(g))if(512&g[2]){const v=g[1];wp(v,g,v.template,g[8])}else g[5]>0&&bE(g)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Un(a[c],i);oo(d)&&d[5]>0&&bE(d)}}function Rx(i,o){const a=Un(o,i),c=a[1];(function wb(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),fh(c,a,a[8])}function Tp(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Xv(i){for(;i;){i[2]|=32;const o=hl(i);if(Lo(i)&&!o)return i;i=o}return null}function Sp(i,o,a,c=!0){const d=o[10];d.begin&&d.begin();try{wp(i,o,i.template,a)}catch(v){throw c&&e_(o,v),v}finally{d.end&&d.end()}}function ph(i,o,a){Pr(0),o(i,a)}function Tm(i){return i[7]||(i[7]=[])}function TE(i){return i.cleanup||(i.cleanup=[])}function e_(i,o){const a=i[9],c=a?a.get(up,null):null;c&&c.handleError(o)}function t_(i,o,a,c,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],C=o[v],S=i.data[v];null!==S.setInput?S.setInput(C,d,c,I):C[I]=d}}function Sm(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=fe(d,I):2==g&&(c=fe(c,I+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Ap(i,o,a,c,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(Vn(g)),Gr(g))for(let I=10;I<g.length;I++){const C=g[I],S=C[1].firstChild;null!==S&&Ap(C[1],C,S,c)}const v=a.type;if(8&v)Ap(i,o,a.child,c);else if(32&v){const I=Ju(a,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=$f(o,a);if(Array.isArray(I))c.push(...I);else{const C=hl(o[16]);Ap(C[1],C,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class Ll{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Ap(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Gr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&($a(o,c),sl(a,c))}this._attachedToViewContainer=!1}Ha(this._lView[1],this._lView)}onDestroy(o){Dp(this._lView[1],this._lView,null,o)}markForCheck(){Xv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Sp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mw(i,o){ml(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=o}}class Db extends Ll{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Sp(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Am extends op{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ue(o);return new Vl(a,this.ngModule)}}function SE(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Cb{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){const d=this.injector.get(o,Av,c);return d!==Av||a===Av?d:this.parentInjector.get(o,a,c)}}class Vl extends Tw{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function gx(i){return i.map(px).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return SE(this.componentDef.inputs)}get outputs(){return SE(this.componentDef.outputs)}create(o,a,c,d){let g=(d=d||this.ngModule)instanceof Sl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new Cb(o,g):o,I=v.get(Tv,null);if(null===I)throw new Ce(407,!1);const C=v.get(Rw,null),S=I.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",F=c?function Ip(i,o,a){return i.selectRootElement(o,a===_t.ShadowDom)}(S,c,this.componentDef.encapsulation):Ff(S,N,function gh(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),H=this.componentDef.onPush?288:272,Q=wm(0,null,null,1,0,null,null,null,null,null),De=hh(null,Q,null,H,null,null,I,S,C,v,null);let je,Ve;Ea(De);try{const ct=function xp(i,o,a,c,d,g){const v=a[1];a[22]=i;const C=kl(v,22,2,"#host",null),S=C.mergedAttrs=o.hostAttrs;null!==S&&(Sm(C,S,!0),null!==i&&(Mu(d,i,S),null!==C.classes&&Kf(d,i,C.classes),null!==C.styles&&Zf(d,i,C.styles)));const N=c.createRenderer(i,o),F=hh(a,pb(o),null,o.onPush?32:16,a[22],C,c,N,g||null,null,null);return v.firstCreatePass&&(xa(Go(C,a),v,o.type),Qv(v,C),_b(C,a.length,1)),Tp(a,F),a[22]=F}(F,this.componentDef,De,I,S);if(F)if(c)Mu(S,F,["ng-version",Nw.full]);else{const{attrs:At,classes:Me}=function XC(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===d?""!==g&&o.push(g,i[++c]):8===d&&a.push(g);else{if(!yn(d))break;d=g}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);At&&Mu(S,F,At),Me&&Me.length>0&&Kf(S,F,Me.join(" "))}if(Ve=Eu(Q,22),void 0!==a){const At=Ve.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const Et=a[Me];At.push(null!=Et?Array.from(Et):null)}}je=function Tb(i,o,a,c){const d=a[1],g=function _E(i,o,a){const c=Mn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),EE(i,c,o,Ol(i,o,1,null),a),Im(i,c));const d=Ra(o,i,c.directiveStart,c);ft(d,o);const g=zr(c,o);return g&&ft(g,o),d}(d,a,o);if(i[8]=a[8]=g,null!==c)for(const I of c)I(g,o);if(o.contentQueries){const I=Mn();o.contentQueries(1,g,I.directiveStart)}const v=Mn();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ws(v.index),gb(a[1],v,0,v.directiveStart,v.directiveEnd,o),Cm(o,g)),g}(ct,this.componentDef,De,[ME]),fh(Q,De,null)}finally{jo()}return new xE(this.componentType,je,sh(Ve,De),De,Ve)}}class xE extends class $C{}{constructor(o,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Db(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;t_(g[1],g,d,o,a),yE(g,this._tNode.index)}}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ME(){const i=Mn();lo(Ae()[1],i)}function Mp(i){let o=function RE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Oi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ce(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=n_(i.inputs),v.declaredInputs=n_(i.declaredInputs),v.outputs=n_(i.outputs);const I=d.hostBindings;I&&kx(i,I);const C=d.viewQuery,S=d.contentQueries;if(C&&NE(i,C),S&&Ab(i,S),de(i.inputs,d.inputs),de(i.declaredInputs,d.declaredInputs),de(i.outputs,d.outputs),Oi(d)&&d.data.animation){const N=i.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(i),I===Mp&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Sb(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ho(d.hostAttrs,a=Ho(a,d.hostAttrs))}}(c)}function n_(i){return i===Xn?{}:i===bt?[]:i}function NE(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Ab(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,g)=>{o(c,d,g),a(c,d,g)}:o}function kx(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let Rp=null;function Ps(){if(!Rp){const i=hn.Symbol;if(i&&i.iterator)Rp=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Rp=c)}}}return Rp}function mh(i){return!!i_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ps()in i)}function i_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Si(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function s_(i,o,a,c){const d=Ae();return Si(d,_s(),o)&&($t(),eo(Dn(),d,i,o,a,c)),s_}function FE(i,o,a,c,d,g,v,I){const C=Ae(),S=$t(),N=i+22,F=S.firstCreatePass?function u_(i,o,a,c,d,g,v,I,C){const S=o.consts,N=kl(o,i,4,v||null,ni(S,I));Yv(o,a,N,ni(S,C)),lo(o,N);const F=N.tViews=wm(2,N,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,N),F.queries=o.queries.embeddedTView(N)),N}(N,S,C,o,a,c,d,g,v):S.data[N];ri(F,!1);const H=C[11].createComment("");xs(S,C,H,F),ft(H,C),Tp(C,C[N]=DE(H,C,H,F)),ms(F)&&Fl(S,C,F),null!=v&&gE(C,F,I)}function LE(i,o,a){const c=Ae();return Si(c,_s(),o)&&function Ns(i,o,a,c,d,g,v,I){const C=zr(o,a);let N,S=o.inputs;!I&&null!=S&&(N=S[c])?(t_(i,a,N,c,d),fu(o)&&yE(a,o.index)):3&o.type&&(c=function Dm(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}($t(),Dn(),c,i,o,c[11],a,!1),LE}function c_(i,o,a,c,d){const v=d?"class":"style";t_(i,a,o.inputs[v],v,c)}function sa(i,o,a,c){const d=Ae(),g=$t(),v=22+i,I=d[11],C=d[v]=Ff(I,o,function Su(){return St.lFrame.currentNamespace}()),S=g.firstCreatePass?function Ee(i,o,a,c,d,g,v){const I=o.consts,S=kl(o,i,2,d,ni(I,g));return Yv(o,a,S,ni(I,v)),null!==S.attrs&&Sm(S,S.attrs,!1),null!==S.mergedAttrs&&Sm(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,a,c):g.data[v];ri(S,!0);const N=S.mergedAttrs;null!==N&&Mu(I,C,N);const F=S.classes;null!==F&&Kf(I,C,F);const H=S.styles;return null!==H&&Zf(I,C,H),64!=(64&S.flags)&&xs(g,d,C,S),0===function va(){return St.lFrame.elementDepthCount}()&&ft(C,d),function Ed(){St.lFrame.elementDepthCount++}(),ms(S)&&(Fl(g,d,S),function Ep(i,o,a){if(Fo(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=i.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,S,d)),null!==c&&gE(d,S),sa}function jl(){let i=Mn();Uo()?function Hc(){St.lFrame.isParent=!1}():(i=i.parent,ri(i,!1));const o=i;!function Id(){St.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(lo(a,i),Fo(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Md(i){return 0!=(16&i.flags)}(o)&&c_(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function mf(i){return 0!=(32&i.flags)}(o)&&c_(a,o,Ae(),o.stylesWithoutHost,!1),jl}function oa(i,o,a,c){return sa(i,o,a,c),jl(),oa}function Nm(){return Ae()}function Lt(i){return!!i&&"function"==typeof i.then}function Fp(i){return!!i&&"function"==typeof i.subscribe}const wh=Fp;function d_(i,o,a,c){const d=Ae(),g=$t(),v=Mn();return function VE(i,o,a,c,d,g,v,I){const C=ms(c),N=i.firstCreatePass&&TE(i),F=o[8],H=Tm(o);let Q=!0;if(3&c.type||I){const Ve=zr(c,o),ct=I?I(Ve):Ve,At=H.length,Me=I?on=>I(Vn(on[c.index])):c.index;let Et=null;if(!I&&C&&(Et=function Lb(i,o,a,c){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===c){const I=o[7],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(i,o,d,c.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=g,Et.__ngLastListenerFn__=g,Q=!1;else{g=di(c,o,F,g,!1);const on=a.listen(ct,d,g);H.push(g,on),N&&N.push(d,Me,At,At+1)}}else g=di(c,o,F,g,!1);const De=c.outputs;let je;if(Q&&null!==De&&(je=De[d])){const Ve=je.length;if(Ve)for(let ct=0;ct<Ve;ct+=2){const Gn=o[je[ct]][je[ct+1]].subscribe(g),No=H.length;H.push(g,Gn),N&&N.push(d,c.index,No,-(No+1))}}}(g,d,d[11],v,i,o,0,c),d_}function UE(i,o,a,c){try{return!1!==a(c)}catch(d){return e_(i,d),!1}}function di(i,o,a,c,d){return function g(v){if(v===Function)return c;Xv(2&i.flags?Un(i.index,o):o);let C=UE(o,0,c,v),S=g.__ngNextListenerFn__;for(;S;)C=UE(o,0,S,v)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Lp(i=1){return function Tu(i){return(St.lFrame.contextLView=function Ug(i,o){for(;i>0;)o=o[15],i--;return o}(i,St.lFrame.contextLView))[8]}(i)}function Om(i,o,a,c,d){const g=i[a+1],v=null===o;let I=c?Xs(g):ra(g),C=!1;for(;0!==I&&(!1===C||v);){const N=i[I+1];HE(i[I],o)&&(C=!0,i[I+1]=c?gm(N):fm(N)),I=c?Xs(N):ra(N)}C&&(i[a+1]=c?fm(g):gm(g))}function HE(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Oa(i,o)>=0}function w_(i,o){return function Ls(i,o,a,c){const d=Ae(),g=$t(),v=function si(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);g.firstUpdatePass&&function Bm(i,o,a,c){const d=i.data;if(null===d[a+1]){const g=d[Xt()],v=function Um(i,o){return o>=i.expandoStartIndex}(i,a);(function jp(i,o){return 0!=(i.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function WE(i,o,a,c){const d=function _a(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=$l(a=jm(null,i,o,a,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=jm(d,i,o,a,c),null===g){let C=function ZE(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==ra(c))return i[Xs(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=jm(null,i,o,C[1],c),C=$l(C,o.attrs,c),function jb(i,o,a,c){i[Xs(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else g=function KE(i,o,a){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=$l(c,i[g].hostAttrs,a);return $l(c,o.attrs,a)}(i,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,c),function Ih(i,o,a,c,d,g){let v=g?o.classBindings:o.styleBindings,I=Xs(v),C=ra(v);i[c]=a;let N,S=!1;if(Array.isArray(a)){const F=a;N=F[1],(null===N||Oa(F,N)>0)&&(S=!0)}else N=a;if(d)if(0!==C){const H=Xs(i[I+1]);i[c+1]=dp(H,I),0!==H&&(i[H+1]=pm(i[H+1],c)),i[I+1]=function tE(i,o){return 131071&i|o<<17}(i[I+1],c)}else i[c+1]=dp(I,0),0!==I&&(i[I+1]=pm(i[I+1],c)),I=c;else i[c+1]=dp(C,0),0===I?I=c:i[C+1]=pm(i[C+1],c),C=c;S&&(i[c+1]=fm(i[c+1])),Om(i,N,c,!0),Om(i,N,c,!1),function $E(i,o,a,c,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof o&&Oa(g,o)>=0&&(a[c+1]=gm(a[c+1]))}(o,N,i,c,g),v=dp(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,c)}}(g,i,v,c),o!==Vt&&Si(d,v,o)&&function $m(i,o,a,c,d,g,v,I){if(!(3&o.type))return;const C=i.data,S=C[I+1];vr(function hp(i){return 1==(1&i)}(S)?Hm(C,o,a,d,ra(S),v):void 0)||(vr(g)||function jv(i){return 2==(2&i)}(S)&&(g=Hm(C,null,a,d,I,v)),function Wf(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:qi.DashCase;null==d?i.removeStyle(a,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=qi.Important),i.setStyle(a,c,d,g))}}(c,v,Ei(Xt(),a),d,g))}(g,g.data[Xt()],d,d[11],i,d[v+1]=function fi(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=_e(hr(i)))),i}(o,a),c,v)}(i,o,null,!0),w_}function jm(i,o,a,c,d){let g=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(g=o[I],c=$l(c,g.hostAttrs,d),g!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function $l(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),oi(i,v,!!a||o[++g]))}return void 0===i?null:i}function Hm(i,o,a,c,d,g){const v=null===o;let I;for(;d>0;){const C=i[d],S=Array.isArray(C),N=S?C[1]:C,F=null===N;let H=a[d+1];H===Vt&&(H=F?bt:void 0);let Q=F?Bu(H,c):N===c?H:void 0;if(S&&!vr(Q)&&(Q=Bu(C,c)),vr(Q)&&(I=Q,v))return I;const De=i[d+1];d=v?Xs(De):ra(De)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=Bu(C,c))}return I}function vr(i){return void 0!==i}function Gm(i,o=""){const a=Ae(),c=$t(),d=i+22,g=c.firstCreatePass?kl(c,d,1,o,null):c.data[d],v=a[d]=function fl(i,o){return i.createText(o)}(a[11],o);xs(c,a,v,g),ri(g,!1)}function I_(i){return zm("",i,""),I_}function zm(i,o,a){const c=Ae(),d=function vh(i,o,a,c){return Si(i,_s(),a)?o+me(a)+c:Vt}(c,i,o,a);return d!==Vt&&function ia(i,o,a){const c=Ei(o,i);!function zd(i,o,a){i.setValue(o,a)}(i[11],c,a)}(c,Xt(),d),zm}const fc=void 0;var zp=["en",[["a","p"],["AM","PM"],fc],[["AM","PM"],fc,fc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fc,"{1} 'at' {0}",fc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let pc={};function qp(i){const o=function Ym(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=N_(o);if(a)return a;const c=o.split("-")[0];if(a=N_(c),a)return a;if("en"===c)return zp;throw new Ce(701,!1)}function Mh(i){return qp(i)[Rt.PluralCase]}function N_(i){return i in pc||(pc[i]=hn.ng&&hn.ng.common&&hn.ng.common.locales&&hn.ng.common.locales[i]),pc[i]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const Gl="en-US";let Rh=Gl;function Xa(i,o,a,c,d){if(i=z(i),Array.isArray(i))for(let g=0;g<i.length;g++)Xa(i[g],o,a,c,d);else{const g=$t(),v=Ae();let I=Wa(i)?i:z(i.provide),C=ip(i);const S=Mn(),N=1048575&S.providerIndexes,F=S.directiveStart,H=S.providerIndexes>>20;if(Wa(i)||!i.multi){const Q=new ba(C,d,lh),De=cy(I,o,d?N:N+H,F);-1===De?(xa(Go(S,v),g,I),uy(g,i,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[De]=Q,v[De]=Q)}else{const Q=cy(I,o,N+H,F),De=cy(I,o,N,N+H),je=Q>=0&&a[Q],Ve=De>=0&&a[De];if(d&&!Ve||!d&&!je){xa(Go(S,v),g,I);const ct=function PI(i,o,a,c,d){const g=new ba(i,a,lh);return g.multi=[],g.index=o,g.componentProviders=0,Z_(g,d,c&&!a),g}(d?ly:NI,a.length,d,c,C);!d&&Ve&&(a[De].providerFactory=ct),uy(g,i,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(ct),v.push(ct)}else uy(g,i,Q>-1?Q:De,Z_(a[d?De:Q],C,!d&&c));!d&&c&&Ve&&a[De].componentProviders++}}}function uy(i,o,a,c){const d=Wa(o),g=function Dw(i){return!!i.useClass}(o);if(d||g){const C=(g?z(o.useClass):o).prototype.ngOnDestroy;if(C){const S=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const N=S.indexOf(a);-1===N?S.push(a,[c,C]):S[N+1].push(c,C)}else S.push(a,C)}}}function Z_(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function cy(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function NI(i,o,a,c){return Ki(this.multi,[])}function ly(i,o,a,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Ra(a,a[1],this.providerFactory.index,c);g=I.slice(0,v),Ki(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],Ki(d,g);return g}function Ki(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function K_(i,o=[]){return a=>{a.providersResolver=(c,d)=>function RI(i,o,a){const c=$t();if(c.firstCreatePass){const d=Oi(i);Xa(a,c.data,c.blueprint,d,!0),Xa(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class So{}class kI{}function Ao(i,o){return new vn(i,o??null)}class vn extends So{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Am(this);const c=Ot(o);this._bootstrapComponents=Za(c.bootstrap),this._r3Injector=qw(o,a,[{provide:So,useValue:this},{provide:op,useValue:this.componentFactoryResolver}],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Y_ extends kI{constructor(o){super(),this.moduleType=o}create(o){return new vn(this.moduleType,o)}}class Q_ extends So{constructor(o,a,c){super(),this.componentFactoryResolver=new Am(this),this.instance=null;const d=new rp([...o,{provide:So,useValue:this},{provide:op,useValue:this.componentFactoryResolver}],a||im(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function no(i,o,a=null){return new Q_(i,o,a).injector}let FI=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=ww(0,a.type),d=c.length>0?no([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=ge({token:i,providedIn:"environment",factory:()=>new i(Bn(Sl))}),i})();function dy(i){i.getStandaloneInjector=o=>o.get(FI).getOrCreateStandaloneInjector(i)}function Fe(i,o,a,c,d,g){const v=o+a;return Si(i,v,d)?function to(i,o,a){return i[o]=a}(i,v+1,g?c.call(g,d):c(d)):function rg(i,o){const a=i[o];return a===Vt?void 0:a}(i,v+1)}function gt(i,o){const a=$t();let c;const d=i+22;a.firstCreatePass?(c=function gT(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const g=c.factory||(c.factory=ys(c.type)),v=$r(lh);try{const I=Is(!1),C=g();return Is(I),function Fb(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,Ae(),d,C),C}finally{$r(v)}}function ce(i,o,a){const c=i+22,d=Ae(),g=function Vo(i,o){return i[o]}(d,c);return function ig(i,o){return i[1].data[o].pure}(d,c)?Fe(d,function Nr(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,g.transform,a,g):g.transform(a)}function e0(i){return o=>{setTimeout(i,void 0,o)}}const ca=class yT extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,g=a||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=e0(g),d&&(d=e0(d)),v&&(v=e0(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof K.w0&&o.add(I),I}};function jI(){return this._results[Ps()]()}class t0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ps(),c=t0.prototype;c[a]||(c[a]=jI)}get changes(){return this._changes||(this._changes=new ca)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=qn(o);(this._changesDetected=!function Tf(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],g=o[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let yy=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ut,i})();const vT=yy,$I=class extends vT{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=hh(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),fh(c,d,o),new Ll(d)}};function Ut(){return eu(Mn(),Ae())}function eu(i,o){return 4&i.type?new $I(o,i,sh(i,o)):null}let sg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Kn,i})();function Kn(){return ir(Mn(),Ae())}const wt=sg,Vh=class extends wt{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return sh(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){const o=po(this._hostTNode,this._hostLView);if(Jc(o)){const a=is(o,this._hostLView),c=Ta(o);return new as(a[1].data[c+8],a)}return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Jt(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,c,d,g){const v=o&&!function Di(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const F=a||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new Vl(ue(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const H=(v?S:this.parentInjector).get(Sl,null);H&&(g=H)}const N=C.create(S,d,void 0,g);return this.insert(N.hostView,I),N}insert(o,a){const c=o._lView,d=c[1];if(function jc(i){return Gr(i[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const F=c[3],H=new Vh(F,F[6],F[3]);H.detach(H.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Lf(i,o,a,c){const d=10+c,g=a.length;c>0&&(a[d-1][4]=o),c<g-10?(o[4]=a[d],il(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function gv(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(i),o[2]|=64}(d,c,v,g);const I=Qd(g,v),C=c[11],S=Zd(C,v[7]);return null!==S&&function pl(i,o,a,c,d,g){c[0]=d,c[6]=o,ml(i,c,a,1,d,g)}(d,v[6],C,c,S,I),o.attachToViewContainerRef(),il(n0(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Jt(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=$a(this._lContainer,a);c&&(sl(n0(this._lContainer),a),Ha(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=$a(this._lContainer,a);return c&&null!=sl(n0(this._lContainer),a)?new Ll(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Jt(i){return i[8]}function n0(i){return i[8]||(i[8]=[])}function ir(i,o){let a;const c=o[i.index];if(Gr(c))a=c;else{let d;if(8&i.type)d=Vn(c);else{const g=o[11];d=g.createComment("");const v=zr(i,o);Io(g,Zd(g,v),d,function Bf(i,o){return i.nextSibling(o)}(g,v),!1)}o[i.index]=a=DE(c,o,d,i),Tp(o,a)}return new Vh(a,i,o)}class tu{constructor(o){this.queryList=o,this.matches=null}clone(){return new tu(this.queryList)}setDirty(){this.queryList.setDirty()}}class r0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new r0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==WI(o,a).matches&&this.queries[a].setDirty()}}class og{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class s0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new s0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Kl{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Kl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,a,GI(a,g)),this.matchTNodeWithReadOption(o,a,os(a,o,g,!1,!1))}else c===yy?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,os(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ap||d===sg||d===yy&&4&a.type)this.addMatch(a.index,-2);else{const g=os(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function GI(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function js(i,o,a,c){return-1===a?function zI(i,o){return 11&i.type?sh(i,o):4&i.type?eu(i,o):null}(o,i):-2===a?function o0(i,o,a){return a===ap?sh(o,i):a===yy?eu(o,i):a===sg?ir(o,i):void 0}(i,o,c):Ra(i,i[1],a,o)}function a0(i,o,a,c){const d=o[19].queries[c];if(null===d.matches){const g=i.data,v=a.matches,I=[];for(let C=0;C<v.length;C+=2){const S=v[C];I.push(S<0?null:js(o,g[S],v[C+1],a.metadata.read))}d.matches=I}return d.matches}function _y(i,o,a,c){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const v=a0(i,o,d,a);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const S=g[I+1],N=o[-C];for(let F=10;F<N.length;F++){const H=N[F];H[17]===H[3]&&_y(H[1],H,S,c)}if(null!==N[9]){const F=N[9];for(let H=0;H<F.length;H++){const Q=F[H];_y(Q[1],Q,S,c)}}}}}return c}function nu(i){const o=Ae(),a=$t(),c=bu();Pr(c+1);const d=WI(a,c);if(i.dirty&&function Lg(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?_y(a,o,c,[]):a0(a,o,d,c);i.reset(g,Aw),i.notifyOnChanges()}return!0}return!1}function ie(i,o,a,c){const d=$t();if(d.firstCreatePass){const g=Mn();(function Uh(i,o,a){null===i.queries&&(i.queries=new s0),i.queries.track(new Kl(o,a))})(d,new og(o,a,c),g.index),function wc(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function qI(i,o,a){const c=new t0(4==(4&a));Dp(i,o,c,c.destroy),null===o[19]&&(o[19]=new r0),o[19].queries.push(new tu(c))}(d,Ae(),a)}function ag(){return function xo(i,o){return i[19].queries[o].queryList}(Ae(),bu())}function WI(i,o){return i.queries.getByIndex(o)}function ed(...i){}const Mo=new ln("Application Initializer");let Dc=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ed,this.reject=ed,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Lt(g))a.push(g);else if(wh(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Bn(Mo,8))},i.\u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const su=new ln("AppId",{providedIn:"root",factory:function _0(){return`${cg()}${cg()}${cg()}`}});function cg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lg=new ln("Platform Initializer"),nd=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Sy=new ln("appBootstrapListener");let iD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Cc=new ln("LocaleId",{providedIn:"root",factory:()=>yt(Cc,lt.Optional|lt.SkipSelf)||function xy(){return typeof $localize<"u"&&$localize.locale||Gl}()}),sD=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let gi=(()=>{class i{compileModuleSync(a){return new Y_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=Za(Ot(a).declarations).reduce((v,I)=>{const C=ue(I);return C&&v.push(new Vl(C)),v},[]);return new oD(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const uD=(()=>Promise.resolve(0))();function Wt(i){typeof Zone>"u"?uD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class mi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ca(!1),this.onMicrotaskEmpty=new ca(!1),this.onStable=new ca(!1),this.onError=new ca(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function En(){let i=hn.requestAnimationFrame,o=hn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function D0(i){const o=()=>{!function cD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(hn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,My(i),i.isCheckStableRunning=!0,hg(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),My(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,v,I)=>{try{return C0(i),a.invokeTask(d,g,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&o(),b0(i)}},onInvoke:(a,c,d,g,v,I,C)=>{try{return C0(i),a.invoke(d,g,v,I,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),b0(i)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,My(i),hg(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mi.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(mi.isInAngularZone())throw new Ce(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,I0,ed,ed);try{return g.runTask(v,a,c)}finally{g.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const I0={};function hg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function My(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function C0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function b0(i){i._nesting--,hg(i)}class xT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ca,this.onMicrotaskEmpty=new ca,this.onStable=new ca,this.onError=new ca}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const lD=new ln(""),dD=new ln("");let T0,hD=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,T0||(function pD(i){T0=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mi.assertNotInAngularZone(),Wt(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wt(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Bn(mi),Bn(fD),Bn(dD))},i.\u0275prov=ge({token:i,factory:i.\u0275fac}),i})(),fD=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return T0?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Tc=null;const gD=new ln("AllowMultipleToken"),fg=new ln("PlatformDestroyListeners");class mD{constructor(o,a){this.name=o,this.token=a}}function x0(i,o,a=[]){const c=`Platform: ${o}`,d=new ln(c);return(g=[])=>{let v=au();if(!v||v.injector.get(gD,!1)){const I=[...a,...g,{provide:d,useValue:!0}];i?i(I):function yD(i){if(Tc&&!Tc.get(gD,!1))throw new Ce(400,!1);Tc=i;const o=i.get(Mi);(function A0(i){const o=i.get(lg,null);o&&o.forEach(a=>a())})(i)}(function mg(i=[],o){return uc.create({name:o,providers:[{provide:np,useValue:"platform"},{provide:fg,useValue:new Set([()=>Tc=null])},...i]})}(I,c))}return function M0(i){const o=au();if(!o)throw new Ce(401,!1);return o}()}}function au(){return Tc?.get(Mi)??null}let Mi=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function yg(i,o){let a;return a="noop"===i?new xT:("zone.js"===i?void 0:i)||new mi(o),a}(c?.ngZone,function Ny(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:mi,useValue:d}];return d.run(()=>{const v=uc.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),C=I.injector.get(up,null);if(!C)throw new Ce(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:N=>{C.handleError(N)}});I.onDestroy(()=>{Sc(this._modules,I),S.unsubscribe()})}),function $h(i,o,a){try{const c=a();return Lt(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(C,d,()=>{const S=I.injector.get(Dc);return S.runInitializers(),S.donePromise.then(()=>(function mc(i){ne(i,"Expected localeId to be defined"),"string"==typeof i&&(Rh=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Cc,Gl)||Gl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=R0({},c);return function pg(i,o,a){const c=new Y_(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(Hh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ce(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(fg,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Bn(uc))},i.\u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function R0(i,o){return Array.isArray(o)?o.reduce(R0,i):{...i,...o}}let Hh=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new P.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{mi.assertNotInAngularZone(),Wt(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{mi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(g,v.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof Tw;if(!this._injector.get(Dc).done)throw!d&&Tt(a),new Ce(405,false);let v;v=d?a:this._injector.get(op).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function Ry(i){return i.isBoundToModule}(v)?void 0:this._injector.get(So),S=v.create(uc.NULL,[],c||v.selector,I),N=S.location.nativeElement,F=S.injector.get(lD,null);return F?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),Sc(this.components,S),F?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Sc(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Sy,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Sc(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ce(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Bn(mi),Bn(Sl),Bn(up))},i.\u0275prov=ge({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sc(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let wD=!0,da=!1;function MT(){return da=!0,wD}function ds(){if(da)throw new Error("Cannot enable prod mode after platform setup.");wD=!1}let ha=(()=>{class i{}return i.__NG_ELEMENT_ID__=ED,i})();function ED(i){return function vg(i,o,a){if(fu(i)&&!a){const c=Un(i.index,o);return new Ll(c,c)}return 47&i.type?new Ll(o[16],o):null}(Mn(),Ae(),16==(16&i))}class SD{constructor(){}supports(o){return mh(o)}create(o){return new Ly(o)}}const Qn=(i,o)=>o;class Ly{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Qn}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const v=!c||a&&a.currentIndex<Gh(c,d,g)?a:c,I=Gh(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,N=C-d;if(S!=N){for(let H=0;H<S;H++){const Q=H<g.length?g[H]:g[H]=0,De=Q+H;N<=De&&De<S&&(g[H]=Q+1)}g[v.previousIndex]=N-S}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!mh(o))throw new Ce(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),c=!0),a=a._next}else d=0,function kE(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Ps()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new Vy(a,c),g,d),o}_verifyReinsertion(o,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new xD),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Vy{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class xD{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new AD,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gh(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class MD{constructor(){}supports(o){return o instanceof Map||i_(o)}create(){return new RD}}class RD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||i_(o)))throw new Ce(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new zh(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class zh{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fa(){return new Uy([new SD])}let Uy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||fa()),deps:[[i,new wo,new qs]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Ce(901,!1)}}return i.\u0275prov=ge({token:i,providedIn:"root",factory:fa}),i})();function O0(){return new xc([new MD])}let xc=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||O0()),deps:[[i,new wo,new qs]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new Ce(901,!1)}}return i.\u0275prov=ge({token:i,providedIn:"root",factory:O0}),i})();const OT=x0(null,"core",[]);let FT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Bn(Hh))},i.\u0275mod=ei({type:i}),i.\u0275inj=Mt({}),i})();function xr(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ht,Se,O)=>{O.d(Se,{Z:()=>Ce});var h=O(2090),K=O(4859),P=O(6881),oe=O(1877);class ae{constructor(me,pe){this._delegate=me,this.firebase=pe,(0,P._addComponent)(me,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(me,pe=P._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const It=this._delegate.container.getProvider(me);return!It.isInitialized()&&"EXPLICIT"===(null===(pt=It.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&It.initialize(),It.getImmediate({identifier:pe})}_removeServiceInstance(me,pe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(pe)}_addComponent(me){(0,P._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,P._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function fe(){const Qe=function _e(Qe){const me={},pe={__esModule:!0,initializeApp:function ke($e,Xe={}){const te=P.initializeApp($e,Xe);if((0,h.r3)(me,te.name))return me[te.name];const xt=new Qe(te,pe);return me[te.name]=xt,xt},app:It,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ye($e){const Xe=$e.name,te=Xe.replace("-compat","");if(P._registerComponent($e)&&"PUBLIC"===$e.type){const xt=(it=It())=>{if("function"!=typeof it[te])throw de.create("invalid-app-argument",{appName:Xe});return it[te]()};void 0!==$e.serviceProps&&(0,h.ZB)(xt,$e.serviceProps),pe[te]=xt,Qe.prototype[te]=function(...it){return this._getService.bind(this,Xe).apply(this,$e.multipleInstances?it:[])}}return"PUBLIC"===$e.type?pe[te]:null},removeApp:function pt($e){delete me[$e]},useAsService:function ze($e,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:P}};function It($e){if(!(0,h.r3)(me,$e=$e||P._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:$e});return me[$e]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function we(){return Object.keys(me).map($e=>me[$e])}}),It.App=Qe,pe}(ae);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function me(pe){(0,h.ZB)(Qe,pe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Qe}(),V=new oe.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ce=j;!function se(Qe){(0,P.registerVersion)("@firebase/app-compat","0.2.13",Qe)}()},6881:(ht,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ko,_DEFAULT_ENTRY_NAME:()=>vi,_addComponent:()=>et,_addOrOverwriteComponent:()=>_t,_apps:()=>In,_clearComponents:()=>Xn,_components:()=>Kt,_getProvider:()=>ts,_registerComponent:()=>hn,_removeServiceInstance:()=>Xr,deleteApp:()=>Pi,getApp:()=>ur,getApps:()=>Er,initializeApp:()=>Yt,onLog:()=>ns,registerVersion:()=>Ir,setLogLevel:()=>Ln});var h=O(5861),K=O(4859),P=O(1877),oe=O(2090);let le,de;const j=new WeakMap,V=new WeakMap,z=new WeakMap,ve=new WeakMap,se=new WeakMap;let me={get(re,ee,Pe){if(re instanceof IDBTransaction){if("done"===ee)return V.get(re);if("objectStoreNames"===ee)return re.objectStoreNames||z.get(re);if("store"===ee)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return ke(re[ee])},set:(re,ee,Pe)=>(re[ee]=Pe,!0),has:(re,ee)=>re instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in re};function It(re){return"function"==typeof re?function pt(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...ee){return re.apply(we(this),ee),ke(j.get(this))}:function(...ee){return ke(re.apply(we(this),ee))}:function(ee,...Pe){const Oe=re.call(we(this),ee,...Pe);return z.set(Oe,ee.sort?ee.sort():[ee]),ke(Oe)}}(re):(re instanceof IDBTransaction&&function Qe(re){if(V.has(re))return;const ee=new Promise((Pe,Oe)=>{const Ct=()=>{re.removeEventListener("complete",Ft),re.removeEventListener("error",Qt),re.removeEventListener("abort",Qt)},Ft=()=>{Pe(),Ct()},Qt=()=>{Oe(re.error||new DOMException("AbortError","AbortError")),Ct()};re.addEventListener("complete",Ft),re.addEventListener("error",Qt),re.addEventListener("abort",Qt)});V.set(re,ee)}(re),((re,ee)=>ee.some(Pe=>re instanceof Pe))(re,function _e(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,me):re)}function ke(re){if(re instanceof IDBRequest)return function Ce(re){const ee=new Promise((Pe,Oe)=>{const Ct=()=>{re.removeEventListener("success",Ft),re.removeEventListener("error",Qt)},Ft=()=>{Pe(ke(re.result)),Ct()},Qt=()=>{Oe(re.error),Ct()};re.addEventListener("success",Ft),re.addEventListener("error",Qt)});return ee.then(Pe=>{Pe instanceof IDBCursor&&j.set(Pe,re)}).catch(()=>{}),se.set(ee,re),ee}(re);if(ve.has(re))return ve.get(re);const ee=It(re);return ee!==re&&(ve.set(re,ee),se.set(ee,re)),ee}const we=re=>se.get(re),$e=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],te=new Map;function xt(re,ee){if(!(re instanceof IDBDatabase)||ee in re||"string"!=typeof ee)return;if(te.get(ee))return te.get(ee);const Pe=ee.replace(/FromIndex$/,""),Oe=ee!==Pe,Ct=Xe.includes(Pe);if(!(Pe in(Oe?IDBIndex:IDBObjectStore).prototype)||!Ct&&!$e.includes(Pe))return;const Ft=function(){var Qt=(0,h.Z)(function*(Tn,...zt){const Cr=this.transaction(Tn,Ct?"readwrite":"readonly");let _i=Cr.store;return Oe&&(_i=_i.index(zt.shift())),(yield Promise.all([_i[Pe](...zt),Ct&&Cr.done]))[0]});return function(zt){return Qt.apply(this,arguments)}}();return te.set(ee,Ft),Ft}!function pe(re){me=re(me)}(re=>({...re,get:(ee,Pe,Oe)=>xt(ee,Pe)||re.get(ee,Pe,Oe),has:(ee,Pe)=>!!xt(ee,Pe)||re.has(ee,Pe)}));class it{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function jt(re){return"VERSION"===re.getComponent()?.type}(Pe)){const Oe=Pe.getImmediate();return`${Oe.library}/${Oe.version}`}return null}).filter(Pe=>Pe).join(" ")}}const rt="@firebase/app",Qr=new P.Yd("@firebase/app"),vi="[DEFAULT]",ar={[rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},In=new Map,Kt=new Map;function et(re,ee){try{re.container.addComponent(ee)}catch(Pe){Qr.debug(`Component ${ee.name} failed to register with FirebaseApp ${re.name}`,Pe)}}function _t(re,ee){re.container.addOrOverwriteComponent(ee)}function hn(re){const ee=re.name;if(Kt.has(ee))return Qr.debug(`There were multiple attempts to register component ${ee}.`),!1;Kt.set(ee,re);for(const Pe of In.values())et(Pe,re);return!0}function ts(re,ee){const Pe=re.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),re.container.getProvider(ee)}function Xr(re,ee,Pe=vi){ts(re,ee).clearInstance(Pe)}function Xn(){Kt.clear()}const wr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class cn{constructor(ee,Pe,Oe){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=Oe,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const ko="9.23.0";function Yt(re,ee={}){let Pe=re;"object"!=typeof ee&&(ee={name:ee});const Oe=Object.assign({name:vi,automaticDataCollectionEnabled:!1},ee),Ct=Oe.name;if("string"!=typeof Ct||!Ct)throw wr.create("bad-app-name",{appName:String(Ct)});if(Pe||(Pe=(0,oe.aH)()),!Pe)throw wr.create("no-options");const Ft=In.get(Ct);if(Ft){if((0,oe.vZ)(Pe,Ft.options)&&(0,oe.vZ)(Oe,Ft.config))return Ft;throw wr.create("duplicate-app",{appName:Ct})}const Qt=new K.H0(Ct);for(const zt of Kt.values())Qt.addComponent(zt);const Tn=new cn(Pe,Oe,Qt);return In.set(Ct,Tn),Tn}function ur(re=vi){const ee=In.get(re);if(!ee&&re===vi&&(0,oe.aH)())return Yt();if(!ee)throw wr.create("no-app",{appName:re});return ee}function Er(){return Array.from(In.values())}function Pi(re){return xn.apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(re){const ee=re.name;In.has(ee)&&(In.delete(ee),yield Promise.all(re.container.getProviders().map(Pe=>Pe.delete())),re.isDeleted=!0)})).apply(this,arguments)}function Ir(re,ee,Pe){var Oe;let Ct=null!==(Oe=ar[re])&&void 0!==Oe?Oe:re;Pe&&(Ct+=`-${Pe}`);const Ft=Ct.match(/\s|\//),Qt=ee.match(/\s|\//);if(Ft||Qt){const Tn=[`Unable to register library "${Ct}" with version "${ee}":`];return Ft&&Tn.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Ft&&Qt&&Tn.push("and"),Qt&&Tn.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void Qr.warn(Tn.join(" "))}hn(new K.wA(`${Ct}-version`,()=>({library:Ct,version:ee}),"VERSION"))}function ns(re,ee){if(null!==re&&"function"!=typeof re)throw wr.create("invalid-log-argument");(0,P.Am)(re,ee)}function Ln(re){(0,P.Ub)(re)}const U="firebase-heartbeat-store";let L=null;function q(){return L||(L=function ye(re,ee,{blocked:Pe,upgrade:Oe,blocking:Ct,terminated:Ft}={}){const Qt=indexedDB.open(re,ee),Tn=ke(Qt);return Oe&&Qt.addEventListener("upgradeneeded",zt=>{Oe(ke(Qt.result),zt.oldVersion,zt.newVersion,ke(Qt.transaction),zt)}),Pe&&Qt.addEventListener("blocked",zt=>Pe(zt.oldVersion,zt.newVersion,zt)),Tn.then(zt=>{Ft&&zt.addEventListener("close",()=>Ft()),Ct&&zt.addEventListener("versionchange",Cr=>Ct(Cr.oldVersion,Cr.newVersion,Cr))}).catch(()=>{}),Tn}("firebase-heartbeat-database",1,{upgrade:(re,ee)=>{0===ee&&re.createObjectStore(U)}}).catch(re=>{throw wr.create("idb-open",{originalErrorMessage:re.message})})),L}function J(){return(J=(0,h.Z)(function*(re){try{return yield(yield q()).transaction(U).objectStore(U).get(Ot(re))}catch(ee){if(ee instanceof oe.ZR)Qr.warn(ee.message);else{const Pe=wr.create("idb-get",{originalErrorMessage:ee?.message});Qr.warn(Pe.message)}}})).apply(this,arguments)}function qe(re,ee){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(re,ee){try{const Oe=(yield q()).transaction(U,"readwrite");yield Oe.objectStore(U).put(ee,Ot(re)),yield Oe.done}catch(Pe){if(Pe instanceof oe.ZR)Qr.warn(Pe.message);else{const Oe=wr.create("idb-set",{originalErrorMessage:Pe?.message});Qr.warn(Oe.message)}}})).apply(this,arguments)}function Ot(re){return`${re.name}!${re.options.appId}`}class ot{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new Dr(Pe),this._heartbeatsCachePromise=this._storage.read().then(Oe=>(this._heartbeatsCache=Oe,Oe))}triggerHeartbeat(){var ee=this;return(0,h.Z)(function*(){const Oe=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=mt();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!ee._heartbeatsCache.heartbeats.some(Ft=>Ft.date===Ct))return ee._heartbeatsCache.heartbeats.push({date:Ct,agent:Oe}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Ft=>{const Qt=new Date(Ft.date).valueOf();return Date.now()-Qt<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,h.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Pe=mt(),{heartbeatsToSend:Oe,unsentEntries:Ct}=function fn(re,ee=1024){const Pe=[];let Oe=re.slice();for(const Ct of re){const Ft=Pe.find(Qt=>Qt.agent===Ct.agent);if(Ft){if(Ft.dates.push(Ct.date),pn(Pe)>ee){Ft.dates.pop();break}}else if(Pe.push({agent:Ct.agent,dates:[Ct.date]}),pn(Pe)>ee){Pe.pop();break}Oe=Oe.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:Oe}}(ee._heartbeatsCache.heartbeats),Ft=(0,oe.L)(JSON.stringify({version:2,heartbeats:Oe}));return ee._heartbeatsCache.lastSentHeartbeatDate=Pe,Ct.length>0?(ee._heartbeatsCache.heartbeats=Ct,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Ft})()}}function mt(){return(new Date).toISOString().substring(0,10)}class Dr{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,h.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function ue(re){return J.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Pe=this;return(0,h.Z)(function*(){var Oe;if(yield Pe._canUseIndexedDBPromise){const Ft=yield Pe.read();return qe(Pe.app,{lastSentHeartbeatDate:null!==(Oe=ee.lastSentHeartbeatDate)&&void 0!==Oe?Oe:Ft.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Pe=this;return(0,h.Z)(function*(){var Oe;if(yield Pe._canUseIndexedDBPromise){const Ft=yield Pe.read();return qe(Pe.app,{lastSentHeartbeatDate:null!==(Oe=ee.lastSentHeartbeatDate)&&void 0!==Oe?Oe:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...ee.heartbeats]})}})()}}function pn(re){return(0,oe.L)(JSON.stringify({version:2,heartbeats:re})).length}!function ki(re){hn(new K.wA("platform-logger",ee=>new it(ee),"PRIVATE")),hn(new K.wA("heartbeat",ee=>new ot(ee),"PRIVATE")),Ir(rt,"0.9.13",re),Ir(rt,"0.9.13","esm2017"),Ir("fire-js","")}("")},4859:(ht,Se,O)=>{O.d(Se,{H0:()=>_e,wA:()=>P});var h=O(5861),K=O(2090);class P{constructor(j,V,z){this.name=j,this.instanceFactory=V,this.type=z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class ae{constructor(j,V){this.name=j,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const V=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(V)){const z=new K.BH;if(this.instancesDeferred.set(V,z),this.isInitialized(V)||this.shouldAutoInitialize())try{const ve=this.getOrInitializeService({instanceIdentifier:V});ve&&z.resolve(ve)}catch{}}return this.instancesDeferred.get(V).promise}getImmediate(j){var V;const z=this.normalizeInstanceIdentifier(j?.identifier),ve=null!==(V=j?.optional)&&void 0!==V&&V;if(!this.isInitialized(z)&&!this.shouldAutoInitialize()){if(ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:z})}catch(se){if(ve)return null;throw se}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function de(fe){return"EAGER"===fe.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[V,z]of this.instancesDeferred.entries()){const ve=this.normalizeInstanceIdentifier(V);try{const se=this.getOrInitializeService({instanceIdentifier:ve});z.resolve(se)}catch{}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,h.Z)(function*(){const V=Array.from(j.instances.values());yield Promise.all([...V.filter(z=>"INTERNAL"in z).map(z=>z.INTERNAL.delete()),...V.filter(z=>"_delete"in z).map(z=>z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:V={}}=j,z=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(z))throw Error(`${this.name}(${z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ve=this.getOrInitializeService({instanceIdentifier:z,options:V});for(const[se,Ce]of this.instancesDeferred.entries())z===this.normalizeInstanceIdentifier(se)&&Ce.resolve(ve);return ve}onInit(j,V){var z;const ve=this.normalizeInstanceIdentifier(V),se=null!==(z=this.onInitCallbacks.get(ve))&&void 0!==z?z:new Set;se.add(j),this.onInitCallbacks.set(ve,se);const Ce=this.instances.get(ve);return Ce&&j(Ce,ve),()=>{se.delete(j)}}invokeOnInitCallbacks(j,V){const z=this.onInitCallbacks.get(V);if(z)for(const ve of z)try{ve(j,V)}catch{}}getOrInitializeService({instanceIdentifier:j,options:V={}}){let z=this.instances.get(j);if(!z&&this.component&&(z=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=j,fe===oe?void 0:fe),options:V}),this.instances.set(j,z),this.instancesOptions.set(j,V),this.invokeOnInitCallbacks(z,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,z)}catch{}var fe;return z||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const V=this.getProvider(j.name);if(V.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);V.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const V=new ae(j,this);return this.providers.set(j,V),V}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Se,O)=>{O.d(Se,{Am:()=>fe,Ub:()=>_e,Yd:()=>de,in:()=>K});const h=[];var K=(()=>{return(j=K||(K={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",K;var j})();const P={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,ae={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},le=(j,V,...z)=>{if(V<j.logLevel)return;const ve=(new Date).toISOString(),se=ae[V];if(!se)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[se](`[${ve}]  ${j.name}:`,...z)};class de{constructor(V){this.name=V,this._logLevel=oe,this._logHandler=le,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in K))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?P[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...V),this._logHandler(this,K.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...V),this._logHandler(this,K.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,K.INFO,...V),this._logHandler(this,K.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,K.WARN,...V),this._logHandler(this,K.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...V),this._logHandler(this,K.ERROR,...V)}}function _e(j){h.forEach(V=>{V.setLogLevel(j)})}function fe(j,V){for(const z of h){let ve=null;V&&V.level&&(ve=P[V.level]),z.userLogHandler=null===j?null:(se,Ce,...Qe)=>{const me=Qe.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ce>=(ve??se.logLevel)&&j({level:K[Ce].toLowerCase(),message:me,args:Qe,type:se.name})}}}},259:(ht,Se,O)=>{O.d(Se,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=O(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(ht,Se,O)=>{O.d(Se,{Z:()=>h.Z});var h=O(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(ht,Se,O)=>{O.r(Se);var h=O(5861),K=O(3942),P=O(2090),oe=O(6881),ae=O(7582),le=O(1877),de=O(4859);const Ce=function ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qe=function se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new le.Yd("@firebase/auth");function ke(y,...f){pt.logLevel<=le.in.ERROR&&pt.error(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}function we(y,...f){throw Xe(y,...f)}function ye(y,...f){return Xe(y,...f)}function ze(y,f,p){const _=Object.assign(Object.assign({},Qe()),{[f]:p});return new P.LL("auth","Firebase",_).create(f,{appName:y.name})}function $e(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&we(y,"argument-error"),ze(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(y,...f){if("string"!=typeof y){const p=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return me.create(y,...f)}function te(y,f,...p){if(!y)throw Xe(f,...p)}function xt(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ke(f),new Error(f)}function it(y,f){y||xt(f)}function jt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function rt(){return"http:"===gs()||"https:"===gs()}function gs(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class es{constructor(f,p){this.shortDelay=f,this.longDelay=p,it(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Qr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ne(y,f){it(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class X{static initialize(f,p,_){this.fetchImpl=f,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},be=new es(3e4,6e4);function xe(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function ge(y,f,p,_){return st.apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(y,f,p,_,T={}){return Mt(y,T,(0,h.Z)(function*(){let M={},B={};_&&("GET"===f?B=_:M={body:JSON.stringify(_)});const Y=(0,P.xO)(Object.assign({key:y.config.apiKey},B)).slice(1),Ne=yield y._getAdditionalHeaders();return Ne["Content-Type"]="application/json",y.languageCode&&(Ne["X-Firebase-Locale"]=y.languageCode),X.fetch()(bn(y,y.config.apiHost,p,Y),Object.assign({method:f,headers:Ne,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Mt(y,f,p){return un.apply(this,arguments)}function un(){return(un=(0,h.Z)(function*(y,f,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Te),f);try{const T=new _n(y),M=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const B=yield M.json();if("needConfirmation"in B)throw Fn(y,"account-exists-with-different-credential",B);if(M.ok&&!("errorMessage"in B))return B;{const Y=M.ok?B.errorMessage:B.error.message,[Ne,Ge]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Fn(y,"credential-already-in-use",B);if("EMAIL_EXISTS"===Ne)throw Fn(y,"email-already-in-use",B);if("USER_DISABLED"===Ne)throw Fn(y,"user-disabled",B);const Je=_[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw ze(y,Je,Ge);we(y,Je)}}catch(T){if(T instanceof P.ZR)throw T;we(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function vt(y,f,p,_){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(y,f,p,_,T={}){const M=yield ge(y,f,p,_,T);return"mfaPendingCredential"in M&&we(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function bn(y,f,p,_){const T=`${f}${p}?${_}`;return y.config.emulator?ne(y.config,T):`${y.config.apiScheme}://${T}`}class _n{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ye(this.auth,"network-request-failed")),be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(y,f,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=ye(y,f,_);return T.customData._tokenResponse=p,T}function zn(){return(zn=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Jr(y,f){return yi.apply(this,arguments)}function yi(){return(yi=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function lt(y,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Ni(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function vi(){return(vi=(0,h.Z)(function*(y,f=!1){const p=(0,P.m9)(y),_=yield p.getIdToken(f),T=In(_);te(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,B=M?.sign_in_provider;return{claims:T,token:_,authTime:Ni(ar(T.auth_time)),issuedAtTime:Ni(ar(T.iat)),expirationTime:Ni(ar(T.exp)),signInProvider:B||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function ar(y){return 1e3*Number(y)}function In(y){const[f,p,_]=y.split(".");if(void 0===f||void 0===p||void 0===_)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(ke("Failed to decode base64 JWT payload"),null)}catch(T){return ke("Caught error parsing JWT payload as JSON",T?.toString()),null}}function et(y,f){return _t.apply(this,arguments)}function _t(){return(_t=(0,h.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(_){throw _ instanceof P.ZR&&hn(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function hn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ts{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield p.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class Xr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ni(this.lastLoginAt),this.creationTime=Ni(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(y){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(y){var f;const p=y.auth,_=yield y.getIdToken(),T=yield et(y,lt(p,{idToken:_}));te(T?.users.length,p,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const B=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?Yt(M.providerUserInfo):[],Y=ko(y.providerData,B),Je=!!y.isAnonymous&&!(y.email&&M.passwordHash||Y?.length),nt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:Y,metadata:new Xr(M.createdAt,M.lastLoginAt),isAnonymous:Je};Object.assign(y,nt)})).apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(y){const f=(0,P.m9)(y);yield Xn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ko(y,f){return[...y.filter(_=>!f.some(T=>T.providerId===_.providerId)),...f]}function Yt(y){return y.map(f=>{var{providerId:p}=f,_=(0,ae._T)(f,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Er(){return(Er=(0,h.Z)(function*(y,f){const p=yield Mt(y,{},(0,h.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,B=bn(y,T,"/v1/token",`key=${M}`),Y=yield y._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",X.fetch()(B,{method:"POST",headers:Y,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(typeof f.idToken<"u","internal-error"),te(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Kt(y){const f=In(y);return te(f,"internal-error"),te(typeof f.exp<"u","internal-error"),te(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var _=this;return(0,h.Z)(function*(){return te(!_.accessToken||_.refreshToken,f,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var _=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:B}=yield function ur(y,f){return Er.apply(this,arguments)}(f,p);_.updateTokensAndExpiration(T,M,Number(B))})()}updateTokensAndExpiration(f,p,_){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,p){const{refreshToken:_,accessToken:T,expirationTime:M}=p,B=new Pi;return _&&(te("string"==typeof _,"internal-error",{appName:f}),B.refreshToken=_),T&&(te("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),M&&(te("number"==typeof M,"internal-error",{appName:f}),B.expirationTime=M),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Pi,this.toJSON())}_performRefresh(){return xt("not implemented")}}function xn(y,f){te("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Ir{constructor(f){var{uid:p,auth:_,stsTokenManager:T}=f,M=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ts(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Xr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,h.Z)(function*(){const _=yield et(p,p.stsTokenManager.getToken(p.auth,f));return te(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(f){return function Po(y){return vi.apply(this,arguments)}(this,f)}reload(){return function wr(y){return cn.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Ir(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var _=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),T=!0),p&&(yield Xn(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const p=yield f.getIdToken();return yield et(f,function Jn(y,f){return zn.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var _,T,M,B,Y,Ne,Ge,Je;const nt=null!==(_=p.displayName)&&void 0!==_?_:void 0,An=null!==(T=p.email)&&void 0!==T?T:void 0,Zi=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,El=null!==(B=p.photoURL)&&void 0!==B?B:void 0,ls=null!==(Y=p.tenantId)&&void 0!==Y?Y:void 0,Il=null!==(Ne=p._redirectEventId)&&void 0!==Ne?Ne:void 0,sc=null!==(Ge=p.createdAt)&&void 0!==Ge?Ge:void 0,nm=null!==(Je=p.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:Xf,emailVerified:ep,isAnonymous:oc,providerData:ac,stsTokenManager:rm}=p;te(Xf&&rm,f,"internal-error");const ta=Pi.fromJSON(this.name,rm);te("string"==typeof Xf,f,"internal-error"),xn(nt,f.name),xn(An,f.name),te("boolean"==typeof ep,f,"internal-error"),te("boolean"==typeof oc,f,"internal-error"),xn(Zi,f.name),xn(El,f.name),xn(ls,f.name),xn(Il,f.name),xn(sc,f.name),xn(nm,f.name);const qa=new Ir({uid:Xf,auth:f,email:An,emailVerified:ep,displayName:nt,isAnonymous:oc,photoURL:El,phoneNumber:Zi,tenantId:ls,stsTokenManager:ta,createdAt:sc,lastLoginAt:nm});return ac&&Array.isArray(ac)&&(qa.providerData=ac.map(fr=>Object.assign({},fr))),Il&&(qa._redirectEventId=Il),qa}static _fromIdTokenResponse(f,p,_=!1){return(0,h.Z)(function*(){const T=new Pi;T.updateFromServerResponse(p);const M=new Ir({uid:p.localId,auth:f,stsTokenManager:T,isAnonymous:_});return yield Xn(M),M})()}}const ns=new Map;function Ln(y){it(y instanceof Function,"Expected a class definition");let f=ns.get(y);return f?(it(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ns.set(y,f),f)}const Hr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,h.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,h.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function U(y,f,p){return`firebase:${y}:${f}:${p}`}class L{constructor(f,p,_){this.persistence=f,this.auth=p,this.userKey=_;const{config:T,name:M}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,M),this.fullPersistenceKey=U("persistence",T.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Ir._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,h.Z)(function*(){if(p.persistence===f)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,_="authUser"){return(0,h.Z)(function*(){if(!p.length)return new L(Ln(Hr),f,_);const T=(yield Promise.all(p.map(function(){var Ge=(0,h.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let M=T[0]||Ln(Hr);const B=U(_,f.config.apiKey,f.name);let Y=null;for(const Ge of p)try{const Je=yield Ge._get(B);if(Je){const nt=Ir._fromJSON(f,Je);Ge!==M&&(Y=nt),M=Ge;break}}catch{}const Ne=T.filter(Ge=>Ge._shouldAllowMigration);return M._shouldAllowMigration&&Ne.length?(M=Ne[0],Y&&(yield M._set(B,Y.toJSON())),yield Promise.all(p.map(function(){var Ge=(0,h.Z)(function*(Je){if(Je!==M)try{yield Je._remove(B)}catch{}});return function(Je){return Ge.apply(this,arguments)}}())),new L(M,f,_)):new L(M,f,_)})()}}function q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Tt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ue(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(tn(f))return"Blackberry";if(Ue(f))return"Webos";if(J(f))return"Safari";if((f.includes("chrome/")||qe(f))&&!f.includes("edge/"))return"Chrome";if(Ot(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ue(y=(0,P.z$)()){return/firefox\//i.test(y)}function J(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function qe(y=(0,P.z$)()){return/crios\//i.test(y)}function Tt(y=(0,P.z$)()){return/iemobile/i.test(y)}function Ot(y=(0,P.z$)()){return/android/i.test(y)}function tn(y=(0,P.z$)()){return/blackberry/i.test(y)}function Ue(y=(0,P.z$)()){return/webos/i.test(y)}function ot(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function pn(y=(0,P.z$)()){return ot(y)||Ot(y)||Ue(y)||tn(y)||/windows phone/i.test(y)||Tt(y)}function re(y,f=[]){let p;switch(y){case"Browser":p=q((0,P.z$)());break;case"Worker":p=`${q((0,P.z$)())}-${y}`;break;default:p=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${_}`}function Pe(){return(Pe=(0,h.Z)(function*(y){return(yield ge(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oe(y,f){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(y,f){return ge(y,"GET","/v2/recaptchaConfig",xe(y,f))})).apply(this,arguments)}function Ft(y){return void 0!==y&&void 0!==y.getResponse}function Qt(y){return void 0!==y&&void 0!==y.enterprise}class Tn{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function Cr(y){return new Promise((f,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=T=>{const M=ye("internal-error");M.customData=T,p(M)},_.type="text/javascript",_.charset="UTF-8",function zt(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function _i(y){return`__${y}${Math.floor(1e6*Math.random())}`}class gn{constructor(f){this.type="recaptcha-enterprise",this.auth=nn(f)}verify(f="verify",p=!1){var _=this;return(0,h.Z)(function*(){function M(){return M=(0,h.Z)(function*(Y){if(!p){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Ne=(0,h.Z)(function*(Ge,Je){Oe(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nt=>{if(void 0!==nt.recaptchaKey){const An=new Tn(nt);return null==Y.tenantId?Y._agentRecaptchaConfig=An:Y._tenantRecaptchaConfigs[Y.tenantId]=An,Ge(An.siteKey)}Je(new Error("recaptcha Enterprise site key undefined"))}).catch(nt=>{Je(nt)})});return function(Ge,Je){return Ne.apply(this,arguments)}}())}),M.apply(this,arguments)}function B(Y,Ne,Ge){const Je=window.grecaptcha;Qt(Je)?Je.enterprise.ready(()=>{Je.enterprise.execute(Y,{action:f}).then(nt=>{Ne(nt)}).catch(()=>{Ne("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Ne)=>{(function T(Y){return M.apply(this,arguments)})(_.auth).then(Ge=>{if(!p&&Qt(window.grecaptcha))B(Ge,Y,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));Cr("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{B(Ge,Y,Ne)}).catch(Je=>{Ne(Je)})}}).catch(Ge=>{Ne(Ge)})})})()}}function rs(y,f,p){return hu.apply(this,arguments)}function hu(){return(hu=(0,h.Z)(function*(y,f,p,_=!1){const T=new gn(y);let M;try{M=yield T.verify(p)}catch{M=yield T.verify(p,!0)}const B=Object.assign({},f);return Object.assign(B,_?{captchaResp:M}:{captchaResponse:M}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class so{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const _=M=>new Promise((B,Y)=>{try{B(f(M))}catch(Ne){Y(Ne)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,h.Z)(function*(){if(p.auth.currentUser===f)return;const _=[];try{for(const T of p.queue)yield T(f),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const M of _)try{M()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Nc{constructor(f,p,_,T){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gs(this),this.idTokenSubscription=new Gs(this),this.beforeStateQueue=new so(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,p){var _=this;return p&&(this._popupRedirectResolver=Ln(p)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,M;if(!_._deleted&&(_.persistenceManager=yield L.create(_,f),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,h.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let M=T,B=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Y=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Ne=M?._redirectEventId,Ge=yield p.tryRedirectSignIn(f);(!Y||Y===Ne)&&Ge?.user&&(M=Ge.user,B=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(B)try{yield p.beforeStateQueue.runMiddleware(M)}catch(Y){M=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Y))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var p=this;return(0,h.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,h.Z)(function*(){try{yield Xn(f)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function io(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,h.Z)(function*(){const _=f?(0,P.m9)(f):null;return _&&te(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(f,p=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&te(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,h.Z)(function*(){yield p.assertedPersistence.setPersistence(Ln(f))}))}initializeRecaptchaConfig(){var f=this;return(0,h.Z)(function*(){const p=yield Oe(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new Tn(p);null==f.tenantId?f._agentRecaptchaConfig=_:f._tenantRecaptchaConfigs[f.tenantId]=_,_.emailPasswordEnabled&&new gn(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,p,_){return this.registerStateListener(this.authStateSubscription,f,p,_)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,_){return this.registerStateListener(this.idTokenSubscription,f,p,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var _=this;return(0,h.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,h.Z)(function*(){if(!p.redirectPersistenceManager){const _=f&&Ln(f)||p._popupRedirectResolver;te(_,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[Ln(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,h.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,h.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===f?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,h.Z)(function*(){if(f===p.currentUser)return p.queue((0,h.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,_,T){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),B=this._isInitialized?Promise.resolve():this._initializationPromise;return te(B,this,"internal-error"),B.then(()=>M(this.currentUser)),"function"==typeof p?f.addObserver(p,_,T):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,h.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=re(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var p;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const M=yield f._getAppCheckToken();return M&&(_["X-Firebase-AppCheck"]=M),_})()}_getAppCheckToken(){var f=this;return(0,h.Z)(function*(){var p;const _=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function It(y,...f){pt.logLevel<=le.in.WARN&&pt.warn(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function nn(y){return(0,P.m9)(y)}class Gs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function lr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Fo(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ms{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return xt("not implemented")}_getIdTokenResponse(f){return xt("not implemented")}_linkToIdToken(f,p){return xt("not implemented")}_getReauthenticationResolver(f){return xt("not implemented")}}function Oi(y,f){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:resetPassword",xe(y,f))})).apply(this,arguments)}function ld(y,f){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function dd(y,f){return rf.apply(this,arguments)}function rf(){return(rf=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:update",xe(y,f))})).apply(this,arguments)}function wn(y,f){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithPassword",xe(y,f))})).apply(this,arguments)}function kc(y,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:sendOobCode",xe(y,f))})).apply(this,arguments)}function sf(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,h.Z)(function*(y,f){return kc(y,f)})).apply(this,arguments)}function pu(y,f){return af.apply(this,arguments)}function af(){return(af=(0,h.Z)(function*(y,f){return kc(y,f)})).apply(this,arguments)}function pd(y,f){return gu.apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(y,f){return kc(y,f)})).apply(this,arguments)}function Fg(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(y,f){return kc(y,f)})).apply(this,arguments)}function Fc(){return(Fc=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithEmailLink",xe(y,f))})).apply(this,arguments)}function uf(){return(uf=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithEmailLink",xe(y,f))})).apply(this,arguments)}class Lc extends ms{constructor(f,p,_,T=null){super("password",_),this._email=f,this._password=p,this._tenantId=T}static _fromEmailAndPassword(f,p){return new Lc(f,p,"password")}static _fromEmailAndCode(f,p,_=null){return new Lc(f,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,h.Z)(function*(){var _;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=f._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const M=yield rs(f,T,"signInWithPassword");return wn(f,M)}return wn(f,T).catch(function(){var M=(0,h.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield rs(f,T,"signInWithPassword");return wn(f,Y)}return Promise.reject(B)});return function(B){return M.apply(this,arguments)}}());case"emailLink":return function gd(y,f){return Fc.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:we(f,"internal-error")}})()}_linkToIdToken(f,p){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return ld(f,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function md(y,f){return uf.apply(this,arguments)}(f,{idToken:p,email:_._email,oobCode:_._password});default:we(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Fi(y,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithIdp",xe(y,f))})).apply(this,arguments)}class wi extends ms{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new wi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):we("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T}=p,M=(0,ae._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const B=new wi(_,T);return B.idToken=M.idToken||void 0,B.accessToken=M.accessToken||void 0,B.secret=M.secret,B.nonce=M.nonce,B.pendingToken=M.pendingToken||null,B}_getIdTokenResponse(f){return Fi(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,Fi(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Fi(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,P.xO)(p)}return f}}function yd(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:sendVerificationCode",xe(y,f))})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithPhoneNumber",xe(y,f))})).apply(this,arguments)}function Uc(){return(Uc=(0,h.Z)(function*(y,f){const p=yield vt(y,"POST","/v1/accounts:signInWithPhoneNumber",xe(y,f));if(p.temporaryProof)throw Fn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const yu={USER_NOT_FOUND:"user-not-found"};function gr(){return(gr=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithPhoneNumber",xe(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),yu)})).apply(this,arguments)}class Rr extends ms{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Rr({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Rr({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Vc(y,f){return mu.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function lf(y,f){return Uc.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function df(y,f){return gr.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:M}=f;return _||p||T||M?new Rr({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:M}):null}}class _u{constructor(f){var p,_,T,M,B,Y;const Ne=(0,P.zd)((0,P.pd)(f)),Ge=null!==(p=Ne.apiKey)&&void 0!==p?p:null,Je=null!==(_=Ne.oobCode)&&void 0!==_?_:null,nt=function vd(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ne.mode)&&void 0!==T?T:null);te(Ge&&Je&&nt,"argument-error"),this.apiKey=Ge,this.operation=nt,this.code=Je,this.continueUrl=null!==(M=Ne.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(B=Ne.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Y=Ne.tenantId)&&void 0!==Y?Y:null}static parseLink(f){const p=function vu(y){const f=(0,P.zd)((0,P.pd)(y)).link,p=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||p||f||y}(f);try{return new _u(p)}catch{return null}}}let Vn=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Lc._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=_u.parseLink(_);return te(T,"argument-error"),Lc._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class vs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class wu extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ei extends wu{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return te("providerId"in p&&"signInMethod"in p,"argument-error"),wi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),wi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ei.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ei.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:M,nonce:B,providerId:Y}=f;if(!_&&!T&&!p&&!M||!Y)return null;try{return new Ei(Y)._credential({idToken:p,accessToken:_,nonce:B,pendingToken:M})}catch{return null}}}let zr=(()=>{class y extends wu{constructor(){super("facebook.com")}static credential(p){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Bc=(()=>{class y extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Eu=(()=>{class y extends wu{constructor(){super("github.com")}static credential(p){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Un extends ms{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return Fi(f,this.buildRequest())}_linkToIdToken(f,p){const _=this.buildRequest();return _.idToken=p,Fi(f,_)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,Fi(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:T,pendingToken:M}=p;return _&&T&&M&&_===T?new Un(_,M):null}static _create(f,p){return new Un(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oo extends vs{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return oo.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return oo.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Un.fromJSON(f);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:_}=f;if(!p||!_)return null;try{return Un._create(_,p)}catch{return null}}}let jc=(()=>{class y extends wu{constructor(){super("twitter.com")}static credential(p,_){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ni(y,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signUp",xe(y,f))})).apply(this,arguments)}class br{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,_,T=!1){return(0,h.Z)(function*(){const M=yield Ir._fromIdTokenResponse(f,_,T),B=St(_);return new br({user:M,providerId:B,_tokenResponse:_,operationType:p})})()}static _forOperation(f,p,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const T=St(_);return new br({user:f,providerId:T,_tokenResponse:_,operationType:p})})()}}function St(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function wd(){return(wd=(0,h.Z)(function*(y){var f;const p=nn(y);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new br({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield ni(p,{returnSecureToken:!0}),T=yield br._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class va extends P.ZR{constructor(f,p,_,T){var M;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,va.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,p,_,T){return new va(f,p,_,T)}}function Ed(y,f,p,_){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?va._fromErrorAndOperation(y,M,f,_):M})}function Id(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Li(){return(Li=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y);yield $t(!0,p,f);const{providerUserInfo:_}=yield Jr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),T=Id(_||[]);return p.providerData=p.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Iu(y,f){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,h.Z)(function*(y,f,p=!1){const _=yield et(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return br._forOperation(y,"link",_)})).apply(this,arguments)}function $t(y,f,p){return Du.apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(y,f,p){yield Xn(f);const T=!1===y?"provider-already-linked":"no-such-provider";te(Id(f.providerData).has(p)===y,f.auth,T)})).apply(this,arguments)}function $c(y,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(y,f,p=!1){const{auth:_}=y,T="reauthenticate";try{const M=yield et(y,Ed(_,T,f,y),p);te(M.idToken,_,"internal-error");const B=In(M.idToken);te(B,_,"internal-error");const{sub:Y}=B;return te(y.uid===Y,_,"user-mismatch"),br._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===M?.code&&we(_,"user-mismatch"),M}})).apply(this,arguments)}function Cu(y,f){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(y,f,p=!1){const _="signIn",T=yield Ed(y,_,f),M=yield br._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ri(y,f){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(y,f){return Cu(nn(y),f)})).apply(this,arguments)}function Hc(y,f){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y);return yield $t(!1,p,f.providerId),Iu(p,f)})).apply(this,arguments)}function Rn(y,f){return hf.apply(this,arguments)}function hf(){return(hf=(0,h.Z)(function*(y,f){return $c((0,P.m9)(y),f)})).apply(this,arguments)}function ff(y,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,h.Z)(function*(y,f){return vt(y,"POST","/v1/accounts:signInWithCustomToken",xe(y,f))})).apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(y,f){const p=nn(y),_=yield ff(p,{token:f,returnSecureToken:!0}),T=yield br._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class _s{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?si._fromServerResponse(f,p):"totpInfo"in p?Cd._fromServerResponse(f,p):we(f,"internal-error")}}class si extends _s{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new si(p)}}class Cd extends _s{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new Cd(p)}}function uo(y,f,p){var _;te((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),te(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function Bo(){return Bo=(0,h.Z)(function*(y,f,p){var _;const T=nn(y),M={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const B=yield rs(T,M,"getOobCode",!0);p&&uo(T,B,p),yield pu(T,B)}else p&&uo(T,M,p),yield pu(T,M).catch(function(){var B=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ne=yield rs(T,M,"getOobCode",!0);p&&uo(T,Ne,p),yield pu(T,Ne)}});return function(Y){return B.apply(this,arguments)}}())}),Bo.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(y,f,p){yield Oi((0,P.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Pr(){return(Pr=(0,h.Z)(function*(y,f){yield dd((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function qc(y,f){return wa.apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y),_=yield Oi(p,{oobCode:f}),T=_.requestType;switch(te(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(_.mfaInfo,p,"internal-error");default:te(_.email,p,"internal-error")}let M=null;return _.mfaInfo&&(M=_s._fromServerResponse(nn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(y,f){const{data:p}=yield qc((0,P.m9)(y),f);return p.email})).apply(this,arguments)}function Ia(){return Ia=(0,h.Z)(function*(y,f,p){var _;const T=nn(y),M={returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"};let B;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Ge=yield rs(T,M,"signUpPassword");B=ni(T,Ge)}else B=ni(T,M).catch(function(){var Ge=(0,h.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nt=yield rs(T,M,"signUpPassword");return ni(T,nt)}return Promise.reject(Je)});return function(Je){return Ge.apply(this,arguments)}}());const Y=yield B.catch(Ge=>Promise.reject(Ge)),Ne=yield br._fromIdTokenResponse(T,"signIn",Y);return yield T._updateCurrentUser(Ne.user),Ne}),Ia.apply(this,arguments)}function Tu(){return Tu=(0,h.Z)(function*(y,f,p){var _;const T=nn(y),M={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function B(Y,Ne){te(Ne.handleCodeInApp,T,"argument-error"),Ne&&uo(T,Y,Ne)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Y=yield rs(T,M,"getOobCode",!0);B(Y,p),yield pd(T,Y)}else B(M,p),yield pd(T,M).catch(function(){var Y=(0,h.Z)(function*(Ne){if("auth/missing-recaptcha-token"!==Ne.code)return Promise.reject(Ne);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield rs(T,M,"getOobCode",!0);B(Ge,p),yield pd(T,Ge)}});return function(Ne){return Y.apply(this,arguments)}}())}),Tu.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y),T=Vn.credentialWithLink(f,p||jt());return te(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),ri(_,T)})).apply(this,arguments)}function Dn(y,f){return Td.apply(this,arguments)}function Td(){return(Td=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:createAuthUri",xe(y,f))})).apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(y,f){const _={identifier:f,continueUri:rt()?jt():"http://localhost"},{signinMethods:T}=yield Dn((0,P.m9)(y),_);return T||[]})).apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(y,f){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&uo(p.auth,T,f);const{email:M}=yield sf(p.auth,T);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&uo(_.auth,M,p);const{email:B}=yield Fg(_.auth,M);B!==y.email&&(yield y.reload())})).apply(this,arguments)}function Da(y,f){return $o.apply(this,arguments)}function $o(){return($o=(0,h.Z)(function*(y,f){return ge(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const _=(0,P.m9)(y),M={idToken:yield _.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},B=yield et(_,Da(_.auth,M));_.displayName=B.displayName||null,_.photoURL=B.photoUrl||null;const Y=_.providerData.find(({providerId:Ne})=>"password"===Ne);Y&&(Y.displayName=_.displayName,Y.photoURL=_.photoURL),yield _._updateTokensIfNecessary(B)})).apply(this,arguments)}function ba(y,f,p){return Au.apply(this,arguments)}function Au(){return(Au=(0,h.Z)(function*(y,f,p){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),p&&(M.password=p);const B=yield et(y,ld(_,M));yield y._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class Ui{constructor(f,p,_={}){this.isNewUser=f,this.providerId=p,this.profile=_}}class Yc extends Ui{constructor(f,p,_,T){super(f,p,_),this.username=T}}class Md extends Ui{constructor(f,p){super(f,"facebook.com",p)}}class mf extends Yc{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Qc extends Ui{constructor(f,p){super(f,"google.com",p)}}class xu extends Yc{constructor(f,p,_){super(f,"twitter.com",p,_)}}function Mu(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function gf(y){var f,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const B=null===(p=null===(f=In(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(B)return new Ui(M,"anonymous"!==B&&"custom"!==B?B:null)}if(!_)return null;switch(_){case"facebook.com":return new Md(M,T);case"github.com":return new mf(M,T);case"google.com":return new Qc(M,T);case"twitter.com":return new xu(M,T,y.screenName||null);case"custom":case"anonymous":return new Ui(M,null);default:return new Ui(M,_,T)}}(p)}class ho{constructor(f,p,_){this.type=f,this.credential=p,this.auth=_}static _fromIdtoken(f,p){return new ho("enroll",f,p)}static _fromMfaPendingCredential(f){return new ho("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,_;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return ho._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return ho._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ss{constructor(f,p,_){this.session=f,this.hints=p,this.signInResolver=_}static _fromError(f,p){const _=nn(f),T=p.customData._serverResponse,M=(T.mfaInfo||[]).map(Y=>_s._fromServerResponse(_,Y));te(T.mfaPendingCredential,_,"internal-error");const B=ho._fromMfaPendingCredential(T.mfaPendingCredential);return new ss(B,M,function(){var Y=(0,h.Z)(function*(Ne){const Ge=yield Ne._process(_,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Je=Object.assign(Object.assign({},T),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(p.operationType){case"signIn":const nt=yield br._fromIdTokenResponse(_,p.operationType,Je);return yield _._updateCurrentUser(nt.user),nt;case"reauthenticate":return te(p.user,_,"internal-error"),br._forOperation(p.user,p.operationType,Je);default:we(_,"internal-error")}});return function(Ne){return Y.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,h.Z)(function*(){return p.signInResolver(f)})()}}function Aa(y,f){return ge(y,"POST","/v2/accounts/mfaEnrollment:start",xe(y,f))}class fo{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>_s._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new fo(f)}getSession(){var f=this;return(0,h.Z)(function*(){return ho._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var _=this;return(0,h.Z)(function*(){const T=f,M=yield _.getSession(),B=yield et(_.user,T._process(_.user.auth,M,p));return yield _.user._updateTokensIfNecessary(B),_.user.reload()})()}unenroll(f){var p=this;return(0,h.Z)(function*(){const _="string"==typeof f?f:f.uid,T=yield p.user.getIdToken();try{const M=yield et(p.user,function el(y,f){return ge(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xe(y,f))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:B})=>B!==_),yield p.user._updateTokensIfNecessary(M),yield p.user.reload()}catch(M){throw M}})()}}const po=new WeakMap,go="__sak";class Pu{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(go,"1"),this.storage.removeItem(go),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const os=(()=>{class y extends Pu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _f(){const y=(0,P.z$)();return J(y)||ot(y)}()&&function ki(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),M=this.localCache[_];T!==M&&p(_,M,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((Y,Ne,Ge)=>{this.notifyListeners(Y,Ge)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(T);if(p.newValue!==Y)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const M=()=>{const Y=this.storage.getItem(T);!_&&this.localCache[T]===Y||this.notifyListeners(T,Y)},B=this.storage.getItem(T);!function Dr(){return(0,P.w1)()&&10===document.documentMode}()||B===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,M=this;return(0,h.Z)(function*(){yield T().call(M,p,_),M.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,h.Z)(function*(){const M=yield _().call(T,p);return T.localCache[p]=JSON.stringify(M),M})()}_remove(p){var _=()=>super._remove,T=this;return(0,h.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),mo=(()=>{class y extends Pu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let ku=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(M=>M.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,h.Z)(function*(){const T=p,{eventId:M,eventType:B,data:Y}=T.data,Ne=_.handlersMap[B];if(!Ne?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:B});const Ge=Array.from(Ne).map(function(){var nt=(0,h.Z)(function*(An){return An(T.origin,Y)});return function(An){return nt.apply(this,arguments)}}()),Je=yield function wf(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return f.apply(this,arguments)}}()))}(Ge);T.ports[0].postMessage({status:"done",eventId:M,eventType:B,response:Je})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function as(y="",f=10){let p="";for(let _=0;_<f;_++)p+=Math.floor(10*Math.random());return y+p}class jg{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,_=50){var T=this;return(0,h.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let B,Y;return new Promise((Ne,Ge)=>{const Je=as("",20);M.port1.start();const nt=setTimeout(()=>{Ge(new Error("unsupported_event"))},_);Y={messageChannel:M,onMessage(An){const Zi=An;if(Zi.data.eventId===Je)switch(Zi.data.status){case"ack":clearTimeout(nt),B=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Ne(Zi.data.response);break;default:clearTimeout(nt),clearTimeout(B),Ge(new Error("invalid_response"))}}},T.handlers.add(Y),M.port1.addEventListener("message",Y.onMessage),T.target.postMessage({eventType:f,eventId:Je,data:p},[M.port2])}).finally(()=>{Y&&T.removeMessageHandler(Y)})})()}}function Cn(){return window}function Na(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function Ou(){return(Ou=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yo="firebaseLocalStorageDb",qo="firebaseLocalStorage",Cs="fbase_key";class Fu{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Pa(y,f){return y.transaction([qo],f?"readwrite":"readonly").objectStore(qo)}function nl(){const y=indexedDB.open(yo,1);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(qo,{keyPath:Cs})}catch(T){p(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const _=y.result;_.objectStoreNames.contains(qo)?f(_):(_.close(),yield function ln(){const y=indexedDB.deleteDatabase(yo);return new Fu(y).toPromise()}(),f(yield nl()))}))})}function rl(y,f,p){return If.apply(this,arguments)}function If(){return(If=(0,h.Z)(function*(y,f,p){const _=Pa(y,!0).put({[Cs]:f,value:p});return new Fu(_).toPromise()})).apply(this,arguments)}function Df(){return(Df=(0,h.Z)(function*(y,f){const p=Pa(y,!1).get(f),_=yield new Fu(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Cf(y,f){const p=Pa(y,!0).delete(f);return new Fu(p).toPromise()}const Lu=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,h.Z)(function*(){return p.db||(p.db=yield nl()),p.db})()}_withRetries(p){var _=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const M=yield _._openDb();return yield p(M)}catch(M){if(T++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,h.Z)(function*(){return Na()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,h.Z)(function*(){p.receiver=ku._getInstance(function Nn(){return Na()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(T,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(T,M){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,h.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function Ef(){return Ou.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new jg(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);!M||(null===(_=M[0])||void 0===_?void 0:_.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Ds(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const p=yield nl();return yield rl(p,go,"1"),yield Cf(p,go),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(M=>rl(M,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,h.Z)(function*(){const T=yield _._withRetries(M=>function Nd(y,f){return Df.apply(this,arguments)}(M,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(T=>Cf(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,h.Z)(function*(){const _=yield p._withRetries(B=>{const Y=Pa(B,!1).getAll();return new Fu(Y).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:B,value:Y}of _)M.add(B),JSON.stringify(p.localCache[B])!==JSON.stringify(Y)&&(p.notifyListeners(B,Y),T.push(B));for(const B of Object.keys(p.localCache))p.localCache[B]&&!M.has(B)&&(p.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const M of Array.from(T))M(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function er(y,f){return ge(y,"POST","/v2/accounts/mfaSignIn:start",xe(y,f))}const qn=1e12;class Bi{constructor(f){this.auth=f,this.counter=qn,this._widgets=new Map}render(f,p){const _=this.counter;return this._widgets.set(_,new il(f,this.auth.name,p||{})),this.counter++,_}reset(f){var p;const _=f||qn;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(f){var p;return(null===(p=this._widgets.get(f||qn))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,h.Z)(function*(){var _;return null===(_=p._widgets.get(f||qn))||void 0===_||_.execute(),""})()}}class il{constructor(f,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;te(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sl(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wo=_i("rcb"),kd=new es(3e4,6e4);class $g{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Cn().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return te(function Sf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Ft(Cn().grecaptcha)?Promise.resolve(Cn().grecaptcha):new Promise((_,T)=>{const M=Cn().setTimeout(()=>{T(ye(f,"network-request-failed"))},kd.get());Cn()[Wo]=()=>{Cn().clearTimeout(M),delete Cn()[Wo];const Y=Cn().grecaptcha;if(!Y||!Ft(Y))return void T(ye(f,"internal-error"));const Ne=Y.render;Y.render=(Ge,Je)=>{const nt=Ne(Ge,Je);return this.counter++,nt},this.hostLanguage=p,_(Y)},Cr(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Wo,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),T(ye(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=Cn().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dv{load(f){return(0,h.Z)(function*(){return new Bi(f)})()}clearedOneInstance(){}}const Uu="recaptcha",oi={theme:"light",type:"image"};class Bu{constructor(f,p=Object.assign({},oi),_){this.parameters=p,this.type=Uu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nn(_),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dv:new $g,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(p)||new Promise(M=>{const B=Y=>{!Y||(f.tokenChangeListeners.delete(B),M(Y))};f.tokenChangeListeners.add(B),f.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof f)f(p);else if("string"==typeof f){const _=Cn()[f];"function"==typeof _&&_(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){te(rt()&&!Na(),f.auth,"internal-error"),yield function Oa(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function ee(y){return Pe.apply(this,arguments)}(f.auth);te(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ol{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Rr._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function ju(){return(ju=(0,h.Z)(function*(y,f,p){const _=nn(y),T=yield Gu(_,f,(0,P.m9)(p));return new ol(T,M=>ri(_,M))})).apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);yield $t(!1,_,"phone");const T=yield Gu(_.auth,f,(0,P.m9)(p));return new ol(T,M=>Hc(_,M))})).apply(this,arguments)}function Hu(){return(Hu=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y),T=yield Gu(_.auth,f,(0,P.m9)(p));return new ol(T,M=>Rn(_,M))})).apply(this,arguments)}function Gu(y,f,p){return rn.apply(this,arguments)}function rn(){return(rn=(0,h.Z)(function*(y,f,p){var _;const T=yield p.verify();try{let M;if(te("string"==typeof T,y,"argument-error"),te(p.type===Uu,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const B=M.session;if("phoneNumber"in M)return te("enroll"===B.type,y,"internal-error"),(yield Aa(y,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===B.type,y,"internal-error");const Y=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return te(Y,y,"missing-multi-factor-info"),(yield er(y,{mfaPendingCredential:B.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield yd(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return B}}finally{p._reset()}})).apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(y,f){yield Iu((0,P.m9)(y),f)})).apply(this,arguments)}let Pn=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=nn(p)}verifyPhoneNumber(p,_){return Gu(this.auth,p,(0,P.m9)(_))}static credential(p,_){return Rr._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?Rr._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Wn(y,f){return f?Ln(f):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class kr extends ms{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Fi(f,this._buildIdpRequest())}_linkToIdToken(f,p){return Fi(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return Fi(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Fa(y){return Cu(y.auth,new kr(y),y.bypassAuthState)}function qr(y){const{auth:f,user:p}=y;return te(p,f,"internal-error"),$c(p,new kr(y),y.bypassAuthState)}function zu(y){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(y){const{auth:f,user:p}=y;return te(p,f,"internal-error"),Iu(p,new kr(y),y.bypassAuthState)})).apply(this,arguments)}class vo{constructor(f,p,_,T,M=!1){this.auth=f,this.resolver=_,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,h.Z)(function*(_,T){f.pendingPromise={resolve:_,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:M,tenantId:B,error:Y,type:Ne}=f;if(Y)return void p.reject(Y);const Ge={auth:p.auth,requestUri:_,sessionId:T,tenantId:B||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ne)(Ge))}catch(Je){p.reject(Je)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Fa;case"linkViaPopup":case"linkViaRedirect":return zu;case"reauthViaPopup":case"reauthViaRedirect":return qr;default:we(this.auth,"internal-error")}}resolve(f){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Or=new es(2e3,1e4);function Bn(){return(Bn=(0,h.Z)(function*(y,f,p){const _=nn(y);$e(y,f,vs);const T=Wn(_,p);return new Va(_,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function yt(){return(yt=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);$e(_.auth,f,vs);const T=Wn(_.auth,p);return new Va(_.auth,"reauthViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}function _o(){return(_o=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);$e(_.auth,f,vs);const T=Wn(_.auth,p);return new Va(_.auth,"linkViaPopup",f,T,_).executeNotNull()})).apply(this,arguments)}let Va=(()=>{class y extends vo{constructor(p,_,T,M,B){super(p,_,M,B),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,h.Z)(function*(){const _=yield p.execute();return te(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,h.Z)(function*(){it(1===p.filter.length,"Popup operations only handle one event");const _=as();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Or.get())};p()}}return y.currentPopupAction=null,y})();const Zn=new Map;class Vd extends vo{constructor(f,p,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,h.Z)(function*(){let _=Zn.get(p.auth._key());if(!_){try{const M=(yield function qs(y,f){return al.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;_=()=>Promise.resolve(M)}catch(T){_=()=>Promise.reject(T)}Zn.set(p.auth._key(),_)}return p.bypassAuthState||Zn.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(_,f);if("unknown"!==f.type){if(f.eventId){const T=yield _.auth._redirectUserForId(f.eventId);if(T)return _.user=T,p().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function al(){return(al=(0,h.Z)(function*(y,f){const p=Eo(f),_=bs(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function wo(y,f){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(y,f){return bs(y)._set(Eo(f),"true")})).apply(this,arguments)}function $i(y,f){Zn.set(y._key(),f)}function bs(y){return Ln(y._redirectPersistence)}function Eo(y){return U("pendingRedirect",y.config.apiKey,y.name)}function ai(){return(ai=(0,h.Z)(function*(y,f,p){const _=nn(y);$e(y,f,vs),yield _._initializationPromise;const T=Wn(_,p);return yield wo(T,_),T._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);$e(_.auth,f,vs),yield _.auth._initializationPromise;const T=Wn(_.auth,p);yield wo(T,_.auth);const M=yield Ws(_);return T._openRedirect(_.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(y,f,p){const _=(0,P.m9)(y);$e(_.auth,f,vs),yield _.auth._initializationPromise;const T=Wn(_.auth,p);yield $t(!1,_,f.providerId),yield wo(T,_.auth);const M=yield Ws(_);return T._openRedirect(_.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(y,f){return yield nn(y)._initializationPromise,jn(y,f,!1)})).apply(this,arguments)}function jn(y,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(y,f,p=!1){const _=nn(y),T=Wn(_,f),B=yield new Vd(_,T,p).execute();return B&&!p&&(delete B.user._redirectEventId,yield _._persistUserIfCurrent(B.user),yield _._setRedirectUser(null,f)),B})).apply(this,arguments)}function Ws(y){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(y){const f=as(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Gi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(p=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function us(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tr(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var _;if(f.error&&!tr(f)){const T=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,T))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const _=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(f))}saveEventToCache(f){this.cachedEventUids.add(zi(f)),this.lastProcessedEventTime=Date.now()}}function zi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function tr({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Mf(y){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(y,f={}){return ge(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Rf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nf=/^https?/;function Ks(){return(Ks=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Mf(y);for(const p of f)try{if(cl(p))return}catch{}we(y,"unauthorized-domain")})).apply(this,arguments)}function cl(y){const f=jt(),{protocol:p,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const B=new URL(y);return""===B.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&B.hostname===_}if(!Nf.test(p))return!1;if(Rf.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Ht=new es(3e4,6e4);function Ua(){const y=Cn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ts=null;function Ys(y){return Ts=Ts||function Jo(y){return new Promise((f,p)=>{var _,T,M;function B(){Ua(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ua(),p(ye(y,"network-request-failed"))},timeout:Ht.get()})}if(null!==(T=null===(_=Cn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(M=Cn().gapi)||void 0===M||!M.load){const Y=_i("iframefcb");return Cn()[Y]=()=>{gapi.load?B():p(ye(y,"network-request-failed"))},Cr(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Ne=>p(Ne))}B()}}).catch(f=>{throw Ts=null,f})}(y),Ts}const $d=new es(5e3,15e3),ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hv(y){const f=y.config;te(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?ne(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:f.apiKey,appName:y.name,v:oe.SDK_VERSION},T=qi.get(y.config.apiHost);T&&(_.eid=T);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${p}?${(0,P.xO)(_).slice(1)}`}function D(){return D=(0,h.Z)(function*(y){const f=yield Ys(y),p=Cn().gapi;return te(p,y,"internal-error"),f.open({where:document.body,url:hv(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ll,dontclear:!0},_=>new Promise(function(){var T=(0,h.Z)(function*(M,B){yield _.restyle({setHideOnLeave:!1});const Y=ye(y,"network-request-failed"),Ne=Cn().setTimeout(()=>{B(Y)},$d.get());function Ge(){Cn().clearTimeout(Ne),M(_)}_.ping(Ge).then(Ge,()=>{B(Y)})});return function(M,B){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class We{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Sr=encodeURIComponent("fac");function mn(y,f,p,_,T,M){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(y,f,p,_,T,M){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const B={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:oe.SDK_VERSION,eventId:T};if(f instanceof vs){f.setDefaultLanguage(y.languageCode),B.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Je,nt]of Object.entries(M||{}))B[Je]=nt}if(f instanceof wu){const Je=f.getScopes().filter(nt=>""!==nt);Je.length>0&&(B.scopes=Je.join(","))}y.tenantId&&(B.tid=y.tenantId);const Y=B;for(const Je of Object.keys(Y))void 0===Y[Je]&&delete Y[Je];const Ne=yield y._getAppCheckToken(),Ge=Ne?`#${Sr}=${encodeURIComponent(Ne)}`:"";return`${Wi(y)}?${(0,P.xO)(Y).slice(1)}${Ge}`})).apply(this,arguments)}function Wi({config:y}){return y.emulator?ne(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Qs="webStorageSupport";class dl extends class Qu{constructor(f){this.factorId=f}_process(f,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,_);case"signin":return this._finalizeSignIn(f,p.credential);default:return xt("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new dl(f)}_finalizeEnroll(f,p,_){return function Ii(y,f){return ge(y,"POST","/v2/accounts/mfaEnrollment:finalize",xe(y,f))}(f,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function Vu(y,f){return ge(y,"POST","/v2/accounts/mfaSignIn:finalize",xe(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Gg=(()=>{class y{constructor(){}static assertion(p){return dl._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Hd="@firebase/auth";class Gd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,h.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(_=>{f(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ea(){return window}function fl(){return(fl=(0,h.Z)(function*(y,f,p){var _;const{BuildInfo:T}=ea();it(f.sessionId,"AuthEvent did not contain a session ID");const M=yield pv(f.sessionId),B={};return ot()?B.ibi=T.packageName:Ot()?B.apn=T.packageName:we(y,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=M,mn(y,p,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,B)})).apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(y){const{BuildInfo:f}=ea(),p={};ot()?p.iosBundleId=f.packageName:Ot()?p.androidPackageName=f.packageName:we(y,"operation-not-supported-in-this-environment"),yield Mf(y,p)})).apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(y,f,p){const{cordova:_}=ea();let T=()=>{};try{yield new Promise((M,B)=>{let Y=null;function Ne(){var nt;M();const An=null===(nt=_.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof An&&An(),"function"==typeof p?.close&&p.close()}function Ge(){Y||(Y=window.setTimeout(()=>{B(ye(y,"redirect-cancelled-by-user"))},2e3))}function Je(){"visible"===document?.visibilityState&&Ge()}f.addPassiveListener(Ne),document.addEventListener("resume",Ge,!1),Ot()&&document.addEventListener("visibilitychange",Je,!1),T=()=>{f.removePassiveListener(Ne),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",Je,!1),Y&&window.clearTimeout(Y)}})}finally{T()}})).apply(this,arguments)}function pv(y){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,h.Z)(function*(y){const f=gv(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gv(y){if(it(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,P.Pz)("authIdTokenMaxAge"),function zg(y){(0,oe._registerComponent)(new de.wA("auth",(f,{options:p})=>{const _=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),M=f.getProvider("app-check-internal"),{apiKey:B,authDomain:Y}=_.options;te(B&&!B.includes(":"),"invalid-api-key",{appName:_.name});const Ne={apiKey:B,authDomain:Y,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:re(y)},Ge=new Nc(_,T,M,Ne);return function cr(y,f){const p=f?.persistence||[],_=(Array.isArray(p)?p:[p]).map(Ln);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,f?.popupRedirectResolver)}(Ge,p),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,_)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new de.wA("auth-internal",f=>{const p=nn(f.getProvider("auth").getImmediate());return new Gd(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Hd,"0.23.2",function Of(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Hd,"0.23.2","esm2017")}("Browser");class $a extends Gi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Vf(y){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,h.Z)(function*(y){const f=yield Io()._get(gl(y));return f&&(yield Io()._remove(gl(y))),f})).apply(this,arguments)}function Zg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function Io(){return Ln(os)}function gl(y){return U("authEvent",y.config.apiKey,y.name)}function za(y){if(!y?.includes("?"))return{};const[f,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function Kd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Ms(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Qd(y=(0,P.z$)()){return!("file:"!==Ms()&&"ionic:"!==Ms()&&"capacitor:"!==Ms()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function zf(){try{const y=self.localStorage,f=as();if(y)return y.setItem(f,"1"),y.removeItem(f),!function mv(y=(0,P.z$)()){return function Gf(){return(0,P.w1)()&&11===document?.documentMode}()||function ml(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return qf()&&(0,P.hl)()}return!1}function qf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wf(){return(function $f(){return"http:"===Ms()||"https:"===Ms()}()||(0,P.ru)()||Qd())&&!function Hf(){return(0,P.b$)()||(0,P.UG)()}()&&zf()&&!qf()}function Zf(){return Qd()&&typeof document<"u"}function rc(){return(rc=(0,h.Z)(function*(){return!!Zf()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const yr={LOCAL:"local",NONE:"none",SESSION:"session"},ic=te,Xd="persistence";function Rs(y){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(y){yield y._initializationPromise;const f=eh(),p=U(Xd,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function eh(){var y;try{return(null===(y=function Jd(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const th=te;class Wr{constructor(){this.browserResolver=Ln(class mr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=jn,this._overrideRedirectResult=$i}_openPopup(f,p,_,T){var M=this;return(0,h.Z)(function*(){var B;it(null===(B=M.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Y=yield mn(f,p,_,jt(),T);return function He(y,f,p,_=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-_)/2,0).toString();let Y="";const Ne=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:M,left:B}),Ge=(0,P.z$)().toLowerCase();p&&(Y=qe(Ge)?"_blank":p),ue(Ge)&&(f=f||"http://localhost",Ne.scrollbars="yes");const Je=Object.entries(Ne).reduce((An,[Zi,El])=>`${An}${Zi}=${El},`,"");if(function fn(y=(0,P.z$)()){var f;return ot(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ge)&&"_self"!==Y)return function ut(y,f){const p=document.createElement("a");p.href=y,p.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(f||"",Y),new We(null);const nt=window.open(f||"",Y,Je);te(nt,y,"popup-blocked");try{nt.focus()}catch{}return new We(nt)}(f,Y,as())})()}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M._originValidation(f),function tl(y){Cn().location.href=y}(yield mn(f,p,_,jt(),T)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:T,promise:M}=this.eventManagers[p];return T?Promise.resolve(T):(it(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(f);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(f){var p=this;return(0,h.Z)(function*(){const _=yield function E(y){return D.apply(this,arguments)}(f),T=new Gi(f);return _.register("authEvent",M=>(te(M?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:T},p.iframes[f._key()]=_,T})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Qs,{type:Qs},T=>{var M;const B=null===(M=T?.[0])||void 0===M?void 0:M[Qs];void 0!==B&&p(!!B),we(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ul(y){return Ks.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return pn()||J()||ot()}}),this.cordovaResolver=Ln(class Bf{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jn,this._overrideRedirectResult=$i}_initialize(f){var p=this;return(0,h.Z)(function*(){const _=f._key();let T=p.eventManagers.get(_);return T||(T=new $a(f),p.eventManagers.set(_,T),p.attachCallbackListeners(f,T)),T})()}_openPopup(f){we(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){!function mw(y){var f,p,_,T,M,B,Y,Ne,Ge,Je;const nt=ea();te("function"==typeof(null===(f=nt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof(null===(p=nt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(M=null===(T=null===(_=nt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ne=null===(Y=null===(B=nt?.cordova)||void 0===B?void 0:B.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Ne?void 0:Ne.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Je=null===(Ge=nt?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===Je?void 0:Je.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield M._initialize(f);yield B.initialized(),B.resetRedirect(),function xf(){Zn.clear()}(),yield M._originValidation(f);const Y=function Ha(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:Zg(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(f,_,T);yield function qd(y,f){return Io()._set(gl(y),f)}(f,Y);const Ne=yield function ec(y,f,p){return fl.apply(this,arguments)}(f,Y,p),Ge=yield function Ff(y){const{cordova:f}=ea();return new Promise(p=>{f.plugins.browsertab.isAvailable(_=>{let T=null;_?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function mt(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Ne);return function ja(y,f,p){return pl.apply(this,arguments)}(f,B,Ge)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function zd(y){return tc.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:M}=ea(),B=setTimeout((0,h.Z)(function*(){yield Vf(f),p.onEvent(Kd())}),500),Y=function(){var Je=(0,h.Z)(function*(nt){clearTimeout(B);const An=yield Vf(f);let Zi=null;An&&nt?.url&&(Zi=function Ga(y,f){var p,_;const T=function Uf(y){const f=za(y),p=f.link?decodeURIComponent(f.link):void 0,_=za(p).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return za(T).link||T||_||p||y}(f);if(T.includes("/__/auth/callback")){const M=za(T),B=M.firebaseError?function Kg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,Y=null===(_=null===(p=B?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Ne=Y?ye(Y):null;return Ne?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(An,nt.url)),p.onEvent(Zi||Kd())});return function(An){return Je.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Y);const Ne=T,Ge=`${M.packageName.toLowerCase()}://`;ea().handleOpenURL=function(){var Je=(0,h.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ge)&&Y({url:nt}),"function"==typeof Ne)try{Ne(nt)}catch(An){console.error(An)}});return function(nt){return Je.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=jn,this._overrideRedirectResult=$i}_initialize(f){var p=this;return(0,h.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,p,_,T)})()}_openRedirect(f,p,_,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,p,_,T)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Zf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return th(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const p=yield function Kf(){return rc.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function nh(y){return y.unwrap()}function yl(y){return rh(y)}function rh(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Pn.credentialFromResult(y);const p=f.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Bc;break;case"facebook.com":_=zr;break;case"github.com":_=Eu;break;case"twitter.com":_=jc;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:B,pendingToken:Y,nonce:Ne}=f;return M||B||T||Y?Y?p.startsWith("saml.")?Un._create(p,Y):wi._fromParams({providerId:p,signInMethod:p,pendingToken:Y,idToken:T,accessToken:M}):new Ei(p).credential({idToken:T,accessToken:M,rawNonce:Ne}):null}return y instanceof P.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ci(y,f){return f.catch(p=>{throw p instanceof P.ZR&&function Yf(y,f){var p;const _=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new yv(y,function Nu(y,f){var p;const _=(0,P.m9)(y),T=f;return te(f.customData.operationType,_,"argument-error"),te(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),ss._fromError(_,T)}(y,f));else if(_){const T=rh(f),M=f;T&&(M.credential=T,M.tenantId=_.tenantId||void 0,M.email=_.email||void 0,M.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:yl(p),additionalUserInfo:Mu(p),user:hr.getOrCreate(T)}})}function vl(y,f){return _l.apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:_=>ci(y,p.confirm(_))}})).apply(this,arguments)}class yv{constructor(f,p){this.resolver=p,this.auth=function Xg(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ci(nh(this.auth),this.resolver.resolveSignIn(f))}}class hr{constructor(f){this._delegate=f,this.multiFactor=function xa(y){const f=(0,P.m9)(y);return po.has(f)||po.set(f,fo._fromUser(f)),po.get(f)}(f)}static getOrCreate(f){return hr.USER_MAP.has(f)||hr.USER_MAP.set(f,new hr(f)),hr.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,h.Z)(function*(){return ci(p.auth,Hc(p._delegate,f))})()}linkWithPhoneNumber(f,p){var _=this;return(0,h.Z)(function*(){return vl(_.auth,function Hg(y,f,p){return $u.apply(this,arguments)}(_._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,h.Z)(function*(){return ci(p.auth,function Ld(y,f,p){return _o.apply(this,arguments)}(p._delegate,f,Wr))})()}linkWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield Rs(nn(p.auth)),function Zu(y,f,p){return function jd(y,f,p){return Sn.apply(this,arguments)}(y,f,p)}(p._delegate,f,Wr)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,h.Z)(function*(){return ci(p.auth,Rn(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return vl(this.auth,function Fd(y,f,p){return Hu.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return ci(this.auth,function Zo(y,f,p){return yt.apply(this,arguments)}(this._delegate,f,Wr))}reauthenticateWithRedirect(f){var p=this;return(0,h.Z)(function*(){return yield Rs(nn(p.auth)),function Hi(y,f,p){return function Bd(y,f,p){return dr.apply(this,arguments)}(y,f,p)}(p._delegate,f,Wr)})()}sendEmailVerification(f){return function Ad(y,f){return Su.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,h.Z)(function*(){return yield function Dd(y,f){return Li.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function pf(y,f){return ba((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Es(y,f){return ba((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ji(y,f){return at.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function xd(y,f){return Ca.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function Kc(y,f,p){return lo.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}hr.USER_MAP=new WeakMap;const Do=te;let em=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Do(T,"invalid-api-key",{appName:p.name}),Do(T,"invalid-api-key",{appName:p.name});const M=typeof window<"u"?Wr:void 0;this._delegate=_.initialize({options:{persistence:vv(T,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function cd(y,f,p){const _=nn(y);te(_._canInitEmulator,_,"emulator-config-failed"),te(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,M=lr(f),{host:B,port:Y}=function Gr(y){const f=lr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const M=T[1];return{host:M,port:Fo(_.substr(M.length+1))}}{const[M,B]=_.split(":");return{host:M,port:Fo(B)}}}(f);_.config.emulator={url:`${M}//${B}${null===Y?"":`:${Y}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:B,port:Y,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function fu(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function bu(y,f){return Pr.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return qc(this._delegate,p)}confirmPasswordReset(p,_){return function zc(y,f,p){return _a.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,h.Z)(function*(){return ci(T._delegate,function Wc(y,f,p){return Ia.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Sd(y,f){return Zc.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Ug(y,f){return"EMAIL_SIGNIN"===_u.parseLink(f)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,h.Z)(function*(){Do(Wf(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function ui(y,f){return Yo.apply(this,arguments)}(p._delegate,Wr);return _?ci(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function jf(y,f){nn(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:M,error:B,complete:Y}=Qf(p,_,T);return this._delegate.onAuthStateChanged(M,B,Y)}onIdTokenChanged(p,_,T){const{next:M,error:B,complete:Y}=Qf(p,_,T);return this._delegate.onIdTokenChanged(M,B,Y)}sendSignInLinkToEmail(p,_){return function jo(y,f,p){return Tu.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function Vg(y,f,p){return Bo.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,h.Z)(function*(){let T;switch(function Qg(y,f){ic(Object.values(yr).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?ic(f!==yr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?ic(f===yr.NONE,y,"unsupported-persistence-type"):qf()?ic(f===yr.NONE||f===yr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):ic(f===yr.NONE||zf(),y,"unsupported-persistence-type")}(_._delegate,p),p){case yr.SESSION:T=mo;break;case yr.LOCAL:T=(yield Ln(Lu)._isAvailable())?Lu:os;break;case yr.NONE:T=Hr;break;default:return we("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ci(this._delegate,function _d(y){return wd.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ci(this._delegate,ri(this._delegate,p))}signInWithCustomToken(p){return ci(this._delegate,function ii(y,f){return Vi.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return ci(this._delegate,function bd(y,f,p){return ri((0,P.m9)(y),Vn.credential(f,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return ci(this._delegate,function Xt(y,f,p){return ws.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return vl(this._delegate,function Af(y,f,p){return ju.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,h.Z)(function*(){return Do(Wf(),_._delegate,"operation-not-supported-in-this-environment"),ci(_._delegate,function qu(y,f,p){return Bn.apply(this,arguments)}(_._delegate,p,Wr))})()}signInWithRedirect(p){var _=this;return(0,h.Z)(function*(){return Do(Wf(),_._delegate,"operation-not-supported-in-this-environment"),yield Rs(_._delegate),function Ud(y,f,p){return function Ci(y,f,p){return ai.apply(this,arguments)}(y,f,p)}(_._delegate,p,Wr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Ea(y,f){return co.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=yr,y})();function Qf(y,f,p){let _=y;"function"!=typeof y&&({next:_,error:f,complete:p}=y);const T=_;return{next:B=>T(B&&hr.getOrCreate(B)),error:f,complete:p}}function vv(y,f){const p=function Jg(y,f){const p=eh();if(!p)return[];const _=U(Xd,y,f);switch(p.getItem(_)){case yr.NONE:return[Hr];case yr.LOCAL:return[Lu,mo];case yr.SESSION:return[mo];default:return[]}}(y,f);if(typeof self<"u"&&!p.includes(Lu)&&p.push(Lu),typeof window<"u")for(const _ of[os,mo])p.includes(_)||p.push(_);return p.includes(Hr)||p.push(Hr),p}class Jf{constructor(){this.providerId="phone",this._delegate=new Pn(nh(K.Z.auth()))}static credential(f,p){return Pn.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Jf.PHONE_SIGN_IN_METHOD=Pn.PHONE_SIGN_IN_METHOD,Jf.PROVIDER_ID=Pn.PROVIDER_ID;const _v=te;class wv{constructor(f,p,_=K.Z.app()){var T;_v(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Bu(f,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function wl(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new em(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vn,FacebookAuthProvider:zr,GithubAuthProvider:Eu,GoogleAuthProvider:Bc,OAuthProvider:Ei,SAMLAuthProvider:oo,PhoneAuthProvider:Jf,PhoneMultiFactorGenerator:Gg,RecaptchaVerifier:wv,TwitterAuthProvider:jc,Auth:em,AuthCredential:ms,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(K.Z)},5861:(ht,Se,O)=>{function h(P,oe,ae,le,de,_e,fe){try{var j=P[_e](fe),V=j.value}catch(z){return void ae(z)}j.done?oe(V):Promise.resolve(V).then(le,de)}function K(P){return function(){var oe=this,ae=arguments;return new Promise(function(le,de){var _e=P.apply(oe,ae);function fe(V){h(_e,le,de,fe,j,"next",V)}function j(V){h(_e,le,de,fe,j,"throw",V)}fe(void 0)})}}O.d(Se,{Z:()=>K})},7582:(ht,Se,O)=>{function oe(ne,X){var Te={};for(var be in ne)Object.prototype.hasOwnProperty.call(ne,be)&&X.indexOf(be)<0&&(Te[be]=ne[be]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(be=Object.getOwnPropertySymbols(ne);xe<be.length;xe++)X.indexOf(be[xe])<0&&Object.prototype.propertyIsEnumerable.call(ne,be[xe])&&(Te[be[xe]]=ne[be[xe]])}return Te}function z(ne,X,Te,be){return new(Te||(Te=Promise))(function(ge,st){function Mt(qt){try{vt(be.next(qt))}catch(bn){st(bn)}}function un(qt){try{vt(be.throw(qt))}catch(bn){st(bn)}}function vt(qt){qt.done?ge(qt.value):function xe(ge){return ge instanceof Te?ge:new Te(function(st){st(ge)})}(qt.value).then(Mt,un)}vt((be=be.apply(ne,X||[])).next())})}function ke(ne){return this instanceof ke?(this.v=ne,this):new ke(ne)}function we(ne,X,Te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,be=Te.apply(ne,X||[]),ge=[];return xe={},st("next"),st("throw"),st("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function st(_n){be[_n]&&(xe[_n]=function(Fn){return new Promise(function(Jn,zn){ge.push([_n,Fn,Jn,zn])>1||Mt(_n,Fn)})})}function Mt(_n,Fn){try{!function un(_n){_n.value instanceof ke?Promise.resolve(_n.value.v).then(vt,qt):bn(ge[0][2],_n)}(be[_n](Fn))}catch(Jn){bn(ge[0][3],Jn)}}function vt(_n){Mt("next",_n)}function qt(_n){Mt("throw",_n)}function bn(_n,Fn){_n(Fn),ge.shift(),ge.length&&Mt(ge[0][0],ge[0][1])}}function ze(ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,X=ne[Symbol.asyncIterator];return X?X.call(ne):(ne=function Qe(ne){var X="function"==typeof Symbol&&Symbol.iterator,Te=X&&ne[X],be=0;if(Te)return Te.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&be>=ne.length&&(ne=void 0),{value:ne&&ne[be++],done:!ne}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(ne),Te={},be("next"),be("throw"),be("return"),Te[Symbol.asyncIterator]=function(){return this},Te);function be(ge){Te[ge]=ne[ge]&&function(st){return new Promise(function(Mt,un){!function xe(ge,st,Mt,un){Promise.resolve(un).then(function(vt){ge({value:vt,done:Mt})},st)}(Mt,un,(st=ne[ge](st)).done,st.value)})}}}O.d(Se,{FC:()=>we,KL:()=>ze,_T:()=>oe,mG:()=>z,qq:()=>ke}),"function"==typeof SuppressedError&&SuppressedError}},ht=>{ht(ht.s=3741)}]);