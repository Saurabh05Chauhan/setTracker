"use strict";var HO=Object.defineProperty,GO=Object.defineProperties,zO=Object.getOwnPropertyDescriptors,VM=Object.getOwnPropertySymbols,qO=Object.prototype.hasOwnProperty,WO=Object.prototype.propertyIsEnumerable,UM=(Xe,Ce,k)=>Ce in Xe?HO(Xe,Ce,{enumerable:!0,configurable:!0,writable:!0,value:k}):Xe[Ce]=k,ZD=(Xe,Ce)=>{for(var k in Ce||(Ce={}))qO.call(Ce,k)&&UM(Xe,k,Ce[k]);if(VM)for(var k of VM(Ce))WO.call(Ce,k)&&UM(Xe,k,Ce[k]);return Xe},KD=(Xe,Ce)=>GO(Xe,zO(Ce));(self.webpackChunkSetTrackerApp=self.webpackChunkSetTrackerApp||[]).push([[179],{9841:(Xe,Ce,k)=>{var f=k(5e3);let Q=null;function O(){return Q}const de=new f.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function fe(){return(0,f.LFG)(L)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let L=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(){return new L((0,f.LFG)(de))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function X(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Se(n){const e=(0,f.LFG)(de).location;return new at((0,f.LFG)(pe),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new f.OlP("appBaseHref");let at=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return X(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+Be(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+Be(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe),f.LFG(et,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=X(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+Be(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe),f.LFG(et,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Be,n.joinWithSlash=X,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(pe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function me(){return new _e((0,f.LFG)(he),(0,f.LFG)(pe))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var Tt=(()=>((Tt=Tt||{})[Tt.Format=0]="Format",Tt[Tt.Standalone=1]="Standalone",Tt))(),mt=(()=>((mt=mt||{})[mt.Narrow=0]="Narrow",mt[mt.Abbreviated=1]="Abbreviated",mt[mt.Wide=2]="Wide",mt[mt.Short=3]="Short",mt))(),Zt=(()=>((Zt=Zt||{})[Zt.Short=0]="Short",Zt[Zt.Medium=1]="Medium",Zt[Zt.Long=2]="Long",Zt[Zt.Full=3]="Full",Zt))(),lt=(()=>((lt=lt||{})[lt.Decimal=0]="Decimal",lt[lt.Group=1]="Group",lt[lt.List=2]="List",lt[lt.PercentSign=3]="PercentSign",lt[lt.PlusSign=4]="PlusSign",lt[lt.MinusSign=5]="MinusSign",lt[lt.Exponential=6]="Exponential",lt[lt.SuperscriptingExponent=7]="SuperscriptingExponent",lt[lt.PerMille=8]="PerMille",lt[lt.Infinity=9]="Infinity",lt[lt.NaN=10]="NaN",lt[lt.TimeSeparator=11]="TimeSeparator",lt[lt.CurrencyDecimal=12]="CurrencyDecimal",lt[lt.CurrencyGroup=13]="CurrencyGroup",lt))();function ye(n,e){return Pn((0,f.cg1)(n)[f.wAp.DateFormat],e)}function ut(n,e){return Pn((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function Pt(n,e){return Pn((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function qt(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(void 0===r){if(e===lt.CurrencyDecimal)return t[f.wAp.NumberSymbols][lt.Decimal];if(e===lt.CurrencyGroup)return t[f.wAp.NumberSymbols][lt.Group]}return r}function jn(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Pn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function $n(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const hr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,fr={},Qr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var xt=(()=>((xt=xt||{})[xt.Short=0]="Short",xt[xt.ShortGMT=1]="ShortGMT",xt[xt.Long=2]="Long",xt[xt.Extended=3]="Extended",xt))(),pt=(()=>((pt=pt||{})[pt.FullYear=0]="FullYear",pt[pt.Month=1]="Month",pt[pt.Date=2]="Date",pt[pt.Hours=3]="Hours",pt[pt.Minutes=4]="Minutes",pt[pt.Seconds=5]="Seconds",pt[pt.FractionalSeconds=6]="FractionalSeconds",pt[pt.Day=7]="Day",pt))(),Dt=(()=>((Dt=Dt||{})[Dt.DayPeriods=0]="DayPeriods",Dt[Dt.Days=1]="Days",Dt[Dt.Months=2]="Months",Dt[Dt.Eras=3]="Eras",Dt))();function xs(n,e,t,r){let o=function Qe(n){if(It(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,c=1]=n.split("-").map(m=>+m);return Ms(o,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(hr))return function At(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,m=Number(n[5]||0)-r,w=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,m,w,b),e}(r)}const e=new Date(n);if(!It(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Vt(t,e)||e;let m,c=[];for(;e;){if(m=Qr.exec(e),!m){c.push(e);break}{c=c.concat(m.slice(1));const x=c.pop();if(!x)break;e=x}}let w=o.getTimezoneOffset();r&&(w=z(r,w),o=function ne(n,e,t){const r=t?-1:1,o=n.getTimezoneOffset();return function Ae(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(z(e,o)-o))}(o,r,!0));let b="";return c.forEach(x=>{const N=function V(n){if(U[n])return U[n];let e;switch(n){case"G":case"GG":case"GGG":e=Gt(Dt.Eras,mt.Abbreviated);break;case"GGGG":e=Gt(Dt.Eras,mt.Wide);break;case"GGGGG":e=Gt(Dt.Eras,mt.Narrow);break;case"y":e=Et(pt.FullYear,1,0,!1,!0);break;case"yy":e=Et(pt.FullYear,2,0,!0,!0);break;case"yyy":e=Et(pt.FullYear,3,0,!1,!0);break;case"yyyy":e=Et(pt.FullYear,4,0,!1,!0);break;case"Y":e=_r(1);break;case"YY":e=_r(2,!0);break;case"YYY":e=_r(3);break;case"YYYY":e=_r(4);break;case"M":case"L":e=Et(pt.Month,1,1);break;case"MM":case"LL":e=Et(pt.Month,2,1);break;case"MMM":e=Gt(Dt.Months,mt.Abbreviated);break;case"MMMM":e=Gt(Dt.Months,mt.Wide);break;case"MMMMM":e=Gt(Dt.Months,mt.Narrow);break;case"LLL":e=Gt(Dt.Months,mt.Abbreviated,Tt.Standalone);break;case"LLLL":e=Gt(Dt.Months,mt.Wide,Tt.Standalone);break;case"LLLLL":e=Gt(Dt.Months,mt.Narrow,Tt.Standalone);break;case"w":e=ts(1);break;case"ww":e=ts(2);break;case"W":e=ts(1,!0);break;case"d":e=Et(pt.Date,1);break;case"dd":e=Et(pt.Date,2);break;case"c":case"cc":e=Et(pt.Day,1);break;case"ccc":e=Gt(Dt.Days,mt.Abbreviated,Tt.Standalone);break;case"cccc":e=Gt(Dt.Days,mt.Wide,Tt.Standalone);break;case"ccccc":e=Gt(Dt.Days,mt.Narrow,Tt.Standalone);break;case"cccccc":e=Gt(Dt.Days,mt.Short,Tt.Standalone);break;case"E":case"EE":case"EEE":e=Gt(Dt.Days,mt.Abbreviated);break;case"EEEE":e=Gt(Dt.Days,mt.Wide);break;case"EEEEE":e=Gt(Dt.Days,mt.Narrow);break;case"EEEEEE":e=Gt(Dt.Days,mt.Short);break;case"a":case"aa":case"aaa":e=Gt(Dt.DayPeriods,mt.Abbreviated);break;case"aaaa":e=Gt(Dt.DayPeriods,mt.Wide);break;case"aaaaa":e=Gt(Dt.DayPeriods,mt.Narrow);break;case"b":case"bb":case"bbb":e=Gt(Dt.DayPeriods,mt.Abbreviated,Tt.Standalone,!0);break;case"bbbb":e=Gt(Dt.DayPeriods,mt.Wide,Tt.Standalone,!0);break;case"bbbbb":e=Gt(Dt.DayPeriods,mt.Narrow,Tt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Gt(Dt.DayPeriods,mt.Abbreviated,Tt.Format,!0);break;case"BBBB":e=Gt(Dt.DayPeriods,mt.Wide,Tt.Format,!0);break;case"BBBBB":e=Gt(Dt.DayPeriods,mt.Narrow,Tt.Format,!0);break;case"h":e=Et(pt.Hours,1,-12);break;case"hh":e=Et(pt.Hours,2,-12);break;case"H":e=Et(pt.Hours,1);break;case"HH":e=Et(pt.Hours,2);break;case"m":e=Et(pt.Minutes,1);break;case"mm":e=Et(pt.Minutes,2);break;case"s":e=Et(pt.Seconds,1);break;case"ss":e=Et(pt.Seconds,2);break;case"S":e=Et(pt.FractionalSeconds,1);break;case"SS":e=Et(pt.FractionalSeconds,2);break;case"SSS":e=Et(pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=br(xt.Short);break;case"ZZZZZ":e=br(xt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=br(xt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=br(xt.Long);break;default:return null}return U[n]=e,e}(x);b+=N?N(o,t,w):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Ms(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Vt(n,e){const t=function no(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(fr[t]=fr[t]||{},fr[t][e])return fr[t][e];let r="";switch(e){case"shortDate":r=ye(n,Zt.Short);break;case"mediumDate":r=ye(n,Zt.Medium);break;case"longDate":r=ye(n,Zt.Long);break;case"fullDate":r=ye(n,Zt.Full);break;case"shortTime":r=ut(n,Zt.Short);break;case"mediumTime":r=ut(n,Zt.Medium);break;case"longTime":r=ut(n,Zt.Long);break;case"fullTime":r=ut(n,Zt.Full);break;case"short":const o=Vt(n,"shortTime"),u=Vt(n,"shortDate");r=Br(Pt(n,Zt.Short),[o,u]);break;case"medium":const c=Vt(n,"mediumTime"),m=Vt(n,"mediumDate");r=Br(Pt(n,Zt.Medium),[c,m]);break;case"long":const w=Vt(n,"longTime"),b=Vt(n,"longDate");r=Br(Pt(n,Zt.Long),[w,b]);break;case"full":const x=Vt(n,"fullTime"),N=Vt(n,"fullDate");r=Br(Pt(n,Zt.Full),[x,N])}return r&&(fr[t][e]=r),r}function Br(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Rn(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function Et(n,e,t=0,r=!1,o=!1){return function(u,c){let m=function Rs(n,e){switch(n){case pt.FullYear:return e.getFullYear();case pt.Month:return e.getMonth();case pt.Date:return e.getDate();case pt.Hours:return e.getHours();case pt.Minutes:return e.getMinutes();case pt.Seconds:return e.getSeconds();case pt.FractionalSeconds:return e.getMilliseconds();case pt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||m>-t)&&(m+=t),n===pt.Hours)0===m&&-12===t&&(m=12);else if(n===pt.FractionalSeconds)return function gi(n,e){return Rn(n,3).substr(0,e)}(m,e);const w=qt(c,lt.MinusSign);return Rn(m,e,w,r,o)}}function Gt(n,e,t=Tt.Format,r=!1){return function(o,u){return function Ni(n,e,t,r,o,u){switch(t){case Dt.Months:return function J(n,e,t){const r=(0,f.cg1)(n),u=Pn([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return Pn(u,t)}(e,o,r)[n.getMonth()];case Dt.Days:return function te(n,e,t){const r=(0,f.cg1)(n),u=Pn([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return Pn(u,t)}(e,o,r)[n.getDay()];case Dt.DayPeriods:const c=n.getHours(),m=n.getMinutes();if(u){const b=function pi(n){const e=(0,f.cg1)(n);return jn(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?$n(r):[$n(r[0]),$n(r[1])])}(e),x=function ft(n,e,t){const r=(0,f.cg1)(n);jn(r);const u=Pn([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return Pn(u,t)||[]}(e,o,r),N=b.findIndex(H=>{if(Array.isArray(H)){const[W,De]=H,Le=c>=W.hours&&m>=W.minutes,He=c<De.hours||c===De.hours&&m<De.minutes;if(W.hours<De.hours){if(Le&&He)return!0}else if(Le||He)return!0}else if(H.hours===c&&H.minutes===m)return!0;return!1});if(-1!==N)return x[N]}return function es(n,e,t){const r=(0,f.cg1)(n),u=Pn([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return Pn(u,t)}(e,o,r)[c<12?0:1];case Dt.Eras:return function be(n,e){return Pn((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function br(n){return function(e,t,r){const o=-1*r,u=qt(t,lt.MinusSign),c=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case xt.Short:return(o>=0?"+":"")+Rn(c,2,u)+Rn(Math.abs(o%60),2,u);case xt.ShortGMT:return"GMT"+(o>=0?"+":"")+Rn(c,1,u);case xt.Long:return"GMT"+(o>=0?"+":"")+Rn(c,2,u)+":"+Rn(Math.abs(o%60),2,u);case xt.Extended:return 0===r?"Z":(o>=0?"+":"")+Rn(c,2,u)+":"+Rn(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function kn(n){return Ms(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function ts(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();o=1+Math.floor((c+u)/7)}else{const u=kn(t),c=function Ns(n){const e=Ms(n,0,1).getDay();return Ms(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),m=u.getTime()-c.getTime();o=1+Math.round(m/6048e5)}return Rn(o,n,qt(r,lt.MinusSign))}}function _r(n,e=!1){return function(t,r){return Rn(kn(t).getFullYear(),n,qt(r,lt.MinusSign),e)}}const U={};function z(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function It(n){return n instanceof Date&&!isNaN(n.valueOf())}class Ps{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ps(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,c),fn(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{fn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function fn(n,e){n.context.$implicit=e.item}let Jr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wn{constructor(){this.$implicit=null,this.ngIf=null}}function nc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}function ei(n,e){return new f.vHH(2100,"")}class Sr{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Rd{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const sc=new Rd,Nd=new Sr;let Od=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return sc;if((0,f.F4k)(t))return Nd;throw ei()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})();const ju=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let oc=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",o,u){var c;if(null==t||""===t||t!=t)return null;try{return xs(t,r,u||this.locale,null!==(c=null!=o?o:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(m){throw ei()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(ju,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0}),n})(),Ud=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Hu(n){return"server"===n}let lc=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Oi((0,f.LFG)(de),window)}),n})();class Oi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function rs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$o(this.window.history)||$o(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function $o(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gu extends class cc extends class ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){Q||(Q=n)}(new Gu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Af(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function Go(n){Ho=Ho||document.createElement("a"),Ho.setAttribute("href",n);const e=Ho.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Va(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ho,rn=null;const Kn=new f.OlP("TRANSITION_ID"),vr=[{provide:f.ip1,useFactory:function zu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Kn,de,f.zs3],multi:!0}];class Pi{static init(){(0,f.VLi)(new Pi)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const m=function(w){c=c||w,u--,0==u&&r(c)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ti=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const io=new f.OlP("EventManagerPlugins");let ki=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(io),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class dc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let is=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),zo=(()=>{class n extends is{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach($r),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function $r(n){O().remove(n)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},so=/%COMP%/g;function oo(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?oo(n,o,t):(o=o.replace(so,n),t.push(o))}return t}function Re(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ao=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Nn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Fi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Ls(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=oo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ki),f.LFG(zo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Nn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=vt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=vt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Re(r)):this.eventManager.addEventListener(e,t,Re(r))}}class Fi extends Nn{constructor(e,t,r,o){super(e),this.component=r;const u=oo(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Wu(n){return"_ngcontent-%COMP%".replace(so,n)}(o+"-"+r.id),this.hostAttr=function hc(n){return"_nghost-%COMP%".replace(so,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ls extends Nn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=oo(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const m=document.createElement("style");m.textContent=u[c],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ni=(()=>{class n extends dc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ha=["alt","control","meta","shift"],jd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Li={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ri=(()=>{class n extends dc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Ha.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),c+=w+".")}),c+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=c,m}static getEventFullKey(t){let r="",o=function $d(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Li.hasOwnProperty(e)&&(e=Li[e]))}return jd[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ha.forEach(u=>{u!=o&&xr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(de))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const qa=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Vs(){Gu.makeCurrent(),Pi.init()},multi:!0},{provide:de,useFactory:function _s(){return(0,f.RDi)(document),document},deps:[]}]),Hd=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function ys(){return new f.qLn},deps:[]},{provide:io,useClass:ni,multi:!0,deps:[de,f.R0b,f.Lbi]},{provide:io,useClass:ri,multi:!0,deps:[de]},{provide:ao,useClass:ao,deps:[ki,zo,f.AFp]},{provide:f.FYo,useExisting:ao},{provide:is,useExisting:zo},{provide:zo,useClass:zo,deps:[de]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:ki,useClass:ki,deps:[io,f.R0b]},{provide:class En{},useClass:ti,deps:[]}];let uo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Kn,useExisting:f.AFp},vr]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Hd,imports:[Ud,f.hGG]}),n})();"undefined"!=typeof window&&window;var On=k(8996),Yo=k(7669);function Mt(...n){const e=(0,Yo.yG)(n);return(0,On.D)(n,e)}var Ui=k(7579);class Hr extends Ui.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var ss=k(8306);const{isArray:Us}=Array,{getPrototypeOf:Bs,prototype:Qo,keys:ho}=Object;function el(n){if(1===n.length){const e=n[0];if(Us(e))return{args:e,keys:null};if(function Jo(n){return n&&"object"==typeof n&&Bs(n)===Qo}(e)){const t=ho(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var js=k(4671),Ft=k(4004);const{isArray:Ig}=Array;function ea(n){return(0,Ft.U)(e=>function Xo(n,e){return Ig(e)?n(...e):n(e)}(n,e))}function yc(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var nr=k(5403),ta=k(9672);function fo(n,e,t){n?(0,ta.f)(t,n,e):e()}var Ya=k(576);function ws(n,e){const t=(0,Ya.m)(n)?n:()=>n,r=o=>o.error(t());return new ss.y(e?o=>e.schedule(r,0,o):r)}const Bi=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var nl=k(8189);function na(...n){return function rl(){return(0,nl.J)(1)}()((0,On.D)(n,(0,Yo.yG)(n)))}var vc=k(8421);function cn(n){return new ss.y(e=>{(0,vc.Xf)(n()).subscribe(e)})}var ji=k(515),il=k(727),Mr=k(4482);function Qa(){return(0,Mr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,nr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $s extends ss.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Mr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new il.w0;const t=this.getSubject();e.add(this.source.subscribe((0,nr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=il.w0.EMPTY)}return e}refCount(){return Qa()(this)}}function Qt(n,e){return(0,Mr.e)((t,r)=>{let o=null,u=0,c=!1;const m=()=>c&&!o&&r.complete();t.subscribe((0,nr.x)(r,w=>{null==o||o.unsubscribe();let b=0;const x=u++;(0,vc.Xf)(n(w,x)).subscribe(o=(0,nr.x)(r,N=>r.next(e?e(w,N,x,b++):N),()=>{o=null,m()}))},()=>{c=!0,m()}))})}function ra(n){return n<=0?()=>ji.E:(0,Mr.e)((e,t)=>{let r=0;e.subscribe((0,nr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Gn(...n){const e=(0,Yo.yG)(n);return(0,Mr.e)((t,r)=>{(e?na(n,t,e):na(n,t)).subscribe(r)})}function Es(n,e,t,r,o){return(u,c)=>{let m=t,w=e,b=0;u.subscribe((0,nr.x)(c,x=>{const N=b++;w=m?n(w,x,N):(m=!0,x),r&&c.next(w)},o&&(()=>{m&&c.next(w),c.complete()})))}}function wi(n,e){return(0,Mr.e)(Es(n,e,arguments.length>=2,!0))}function Yn(n,e){return(0,Mr.e)((t,r)=>{let o=0;t.subscribe((0,nr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Ei(n){return(0,Mr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,nr.x)(t,void 0,void 0,c=>{u=(0,vc.Xf)(n(c,Ei(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var rr=k(5577);function Ii(n,e){return(0,Ya.m)(e)?(0,rr.z)(n,e,1):(0,rr.z)(n,1)}function Ja(n){return n<=0?()=>ji.E:(0,Mr.e)((e,t)=>{let r=[];e.subscribe((0,nr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function sl(n=Dn){return(0,Mr.e)((e,t)=>{let r=!1;e.subscribe((0,nr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Dn(){return new Bi}function ol(n){return(0,Mr.e)((e,t)=>{let r=!1;e.subscribe((0,nr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ia(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yn((o,u)=>n(o,u,r)):js.y,ra(1),t?ol(e):sl(()=>new Bi))}var Di=k(8505);class si{constructor(e,t){this.id=e,this.url=t}}class wc extends si{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class os extends si{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Of extends si{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends si{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ec extends si{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class as extends si{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pf extends si{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ic extends si{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ci extends si{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dc{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sa{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class al{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kf{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zt="primary";class Jd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function po(n){return new Jd(n)}const ir="ngNavigationCancelingError";function tu(n){const e=Error("NavigationCancelingError: "+n);return e[ir]=!0,e}function Dg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],m=n[u];if(c.startsWith(":"))o[c.substring(1)]=m;else if(c!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function bi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!nu(n[o],e[o]))return!1;return!0}function nu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function aa(n){return Array.prototype.concat.apply([],n)}function ul(n){return n.length>0?n[n.length-1]:null}function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function sr(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,On.D)(Promise.resolve(n)):Mt(n)}const $i={exact:function iu(n,e,t){if(!cs(n.segments,e.segments)||!ou(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!iu(n.children[r],e.children[r],t))return!1;return!0},subset:Hi},go={exact:function mo(n,e){return bi(n,e)},subset:function Cc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nu(n[t],e[t]))},ignored:()=>!0};function ru(n,e,t){return $i[t.paths](n.root,e.root,t.matrixParams)&&go[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Hi(n,e,t){return su(n,e,e.segments,t)}function su(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!cs(o,t)||e.hasChildren()||!ou(o,t,r))}if(n.segments.length===t.length){if(!cs(n.segments,t)||!ou(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Hi(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(cs(n.segments,o)&&ou(n.segments,o,r)&&n.children[zt])&&su(n.children[zt],e,u,r)}}function ou(n,e,t){return e.every((r,o)=>go[t](n[o].parameters,r.parameters))}class Gi{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=po(this.queryParams)),this._queryParamMap}toString(){return Tc.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,zn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uu(this)}}class ll{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=po(this.parameters)),this._parameterMap}toString(){return hl(this)}}function cs(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class yo{}class au{parse(e){const t=new pl(e);return new Gi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ua(e.root,!0)}`,r=function eh(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${_o(t)}=${_o(o)}`).join("&"):`${_o(t)}=${_o(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function cl(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Tc=new au;function uu(n){return n.segments.map(e=>hl(e)).join("/")}function ua(n,e){if(!n.hasChildren())return uu(n);if(e){const t=n.children[zt]?ua(n.children[zt],!1):"",r=[];return zn(n.children,(o,u)=>{u!==zt&&r.push(`${u}:${ua(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bc(n,e){let t=[];return zn(n.children,(r,o)=>{o===zt&&(t=t.concat(e(r,o)))}),zn(n.children,(r,o)=>{o!==zt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===zt?[ua(n.children[zt],!1)]:[`${o}:${ua(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${uu(n)}/${t[0]}`:`${uu(n)}/(${t.join("//")})`}}function la(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _o(n){return la(n).replace(/%3B/gi,";")}function vo(n){return la(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ca(n){return decodeURIComponent(n)}function dl(n){return ca(n.replace(/\+/g,"%20"))}function hl(n){return`${vo(n.path)}${function da(n){return Object.keys(n).map(e=>`;${vo(e)}=${vo(n[e])}`).join("")}(n.parameters)}`}const Ff=/^[^\/()?;=#]+/;function ha(n){const e=n.match(Ff);return e?e[0]:""}const fa=/^[^=?&#]+/,Ac=/^[^&#]+/;class pl{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new $t(e,t)),r}parseSegment(){const e=ha(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ll(ca(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ha(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ha(this.remaining);o&&(r=o,this.capture(r))}e[ca(t)]=ca(r)}parseQueryParam(e){const t=function fl(n){const e=n.match(fa);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Cg(n){const e=n.match(Ac);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=dl(t),u=dl(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ha(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[zt]:new $t([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lu{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=gl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=gl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pa(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return pa(e,this._root).map(t=>t.value)}}function gl(n,e){if(n===e.value)return e;for(const t of e.children){const r=gl(n,t);if(r)return r}return null}function pa(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pa(n,t);if(r.length)return r.unshift(e),r}return[]}class ai{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Hs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cu extends lu{constructor(e,t){super(e),this.snapshot=t,du(this,e)}toString(){return this.snapshot.toString()}}function ml(n,e){const t=function ui(n,e){const c=new yl([],{},{},"",{},zt,e,null,n.root,-1,{});return new wr("",new ai(c,[]))}(n,e),r=new Hr([new ll("",{})]),o=new Hr({}),u=new Hr({}),c=new Hr({}),m=new Hr(""),w=new Gs(r,o,c,m,u,zt,e,t.root);return w.snapshot=t.root,new cu(new ai(w,[]),t)}class Gs{constructor(e,t,r,o,u,c,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ft.U)(e=>po(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ft.U)(e=>po(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function th(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function nh(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yl{constructor(e,t,r,o,u,c,m,w,b,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=po(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=po(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wr extends lu{constructor(e,t){super(t),this.url=e,du(this,t)}toString(){return ds(this._root)}}function du(n,e){e.value._routerState=n,e.children.forEach(t=>du(n,t))}function ds(n){const e=n.children.length>0?` { ${n.children.map(ds).join(", ")} } `:"";return`${n.value}${e}`}function hu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),bi(e.params,t.params)||n.params.next(t.params),function oa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),bi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function or(n,e){const t=bi(n.params,e.params)&&function Qn(n,e){return cs(n,e)&&n.every((t,r)=>bi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||or(n.parent,e.parent))}function li(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function _l(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return li(n,r,o);return li(n,r)})}(n,e,t);return new ai(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(m=>li(n,m)),c}}const r=function wo(n){return new Gs(new Hr(n.url),new Hr(n.params),new Hr(n.queryParams),new Hr(n.fragment),new Hr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>li(n,u));return new ai(r,o)}}function Sc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Eo(n){return"object"==typeof n&&null!=n&&n.outlets}function xc(n,e,t,r,o){let u={};if(r&&zn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),n===e)return new Gi(t,u,o);const c=Mc(n,e,t);return new Gi(c,u,o)}function Mc(n,e,t){const r={};return zn(n.children,(o,u)=>{r[u]=o===e?t:Mc(o,e,t)}),new $t(n.segments,r)}class Vf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sc(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Eo);if(o&&o!==ul(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class D{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Z(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return le(n,e,t);const r=function qe(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],m=t[r];if(Eo(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Rt(w,b,c))return u;r+=2}else{if(!Rt(w,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new $t(n.segments.slice(r.pathIndex),n.children),le(u,0,o)}return r.match&&0===o.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?Ve(n,e,t):r.match?le(n,0,o):Ve(n,e,t)}function le(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function G(n){return Eo(n[0])?n[0].outlets:{[zt]:n}}(t),o={};return zn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=Z(n.children[c],e,u))}),zn(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new $t(n.segments,o)}}function Ve(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Eo(u)){const w=it(u.outlets);return new $t(r,w)}if(0===o&&Sc(t[0])){r.push(new ll(n.segments[e].path,Ct(t[0]))),o++;continue}const c=Eo(u)?u.outlets[zt]:`${u}`,m=o<t.length-1?t[o+1]:null;c&&m&&Sc(m)?(r.push(new ll(c,Ct(m))),o+=2):(r.push(new ll(c,{})),o++)}return new $t(r,{})}function it(n){const e={};return zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ve(new $t([],{}),0,t))}),e}function Ct(n){const e={};return zn(n,(t,r)=>e[r]=`${t}`),e}function Rt(n,e,t){return n==t.path&&bi(e,t.parameters)}class Vn{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Hs(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),zn(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Hs(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);if(r&&r.outlet){const c=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Hs(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Hs(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new kf(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Xa(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(hu(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(m.contexts),c.attachRef=m.componentRef,c.route=m.route.value,c.outlet&&c.outlet.attach(m.componentRef,m.route.value),hu(m.route.value),this.activateChildRoutes(e,null,c.children)}else{const m=function Io(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=w,c.outlet&&c.outlet.activateWith(o,w),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class fu{constructor(e,t){this.routes=e,this.module=t}}function Er(n){return"function"==typeof n}function Rr(n){return n instanceof Gi}const ma=Symbol("INITIAL_VALUE");function ya(){return Qt(n=>function _c(...n){const e=(0,Yo.yG)(n),t=(0,Yo.jO)(n),{args:r,keys:o}=el(n);if(0===r.length)return(0,On.D)([],e);const u=new ss.y(function tl(n,e,t=js.y){return r=>{fo(e,()=>{const{length:o}=n,u=new Array(o);let c=o,m=o;for(let w=0;w<o;w++)fo(e,()=>{const b=(0,On.D)(n[w],e);let x=!1;b.subscribe((0,nr.x)(r,N=>{u[w]=N,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,o?c=>yc(o,c):js.y));return t?u.pipe(ea(t)):u}(n.map(e=>e.pipe(ra(1),Gn(ma)))).pipe(wi((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==ma?o:(u===ma&&(r=!0),r||!1!==u&&c!==t.length-1&&!Rr(u)?o:u),e)},ma),Yn(e=>e!==ma),(0,Ft.U)(e=>Rr(e)?e:!0===e),ra(1)))}class Rc{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _a,this.attachRef=null}}class _a{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Rc,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ih=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Qy(t,m,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_a),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Qy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Gs?this.route:e===_a?this.childContexts:this.parent.get(e,t)}}let Bf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[ih],encapsulation:2}),n})();function jf(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];pu(r,bg(e,r))}}function pu(n,e){n.children&&jf(n.children,e)}function bg(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Nc(n){const e=n.children&&n.children.map(Nc),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=Bf),t}function hs(n){return n.outlet||zt}function sh(n,e){const t=n.filter(r=>hs(r)===e);return t.push(...n.filter(r=>hs(r)!==e)),t}const va={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},va):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Dg)(t,n,e);if(!u)return Object.assign({},va);const c={};zn(u.posParams,(w,b)=>{c[b]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Pc(n,e,t,r,o="corrected"){if(t.length>0&&function ah(n,e,t){return t.some(r=>gu(n,e,r)&&hs(r)!==zt)}(n,t,r)){const c=new $t(e,function $f(n,e,t,r){const o={};o[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&hs(u)!==zt){const c=new $t([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[hs(u)]=c}return o}(n,e,r,new $t(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function uh(n,e,t){return t.some(r=>gu(n,e,r))}(n,t,r)){const c=new $t(n.segments,function oh(n,e,t,r,o,u){const c={};for(const m of r)if(gu(n,t,m)&&!o[hs(m)]){const w=new $t([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[hs(m)]=w}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new $t(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function gu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kc(n,e,t,r){return!!(hs(n)===r||r!==zt&&gu(e,t,n))&&("**"===n.path||Oc(e,n,t).matched)}function lh(n,e,t){return 0===e.length&&!n.children[t]}class vl{constructor(e){this.segmentGroup=e||null}}class wl{constructor(e){this.urlTree=e}}function Do(n){return ws(new vl(n))}function Tg(n){return ws(new wl(n))}class Hf{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Pc(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,zt).pipe((0,Ft.U)(u=>this.createUrlTree(El(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ei(u=>{if(u instanceof wl)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof vl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,zt).pipe((0,Ft.U)(o=>this.createUrlTree(El(o),e.queryParams,e.fragment))).pipe(Ei(o=>{throw o instanceof vl?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new $t([],{[zt]:e}):e;return new Gi(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ft.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,On.D)(o).pipe(Ii(u=>{const c=r.children[u],m=sh(t,u);return this.expandSegmentGroup(e,m,c,u).pipe((0,Ft.U)(w=>({segment:w,outlet:u})))}),wi((u,c)=>(u[c.outlet]=c.segment,u),{}),function Nf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yn((o,u)=>n(o,u,r)):js.y,Ja(1),t?ol(e):sl(()=>new Bi))}())}expandSegment(e,t,r,o,u,c){return(0,On.D)(r).pipe(Ii(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,c).pipe(Ei(b=>{if(b instanceof vl)return Mt(null);throw b}))),ia(m=>!!m),Ei((m,w)=>{if(m instanceof Bi||"EmptyError"===m.name)return lh(t,o,u)?Mt(new $t([],{})):Do(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,c,m){return kc(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):Do(t):Do(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Tg(u):this.lineralizeSegments(r,u).pipe((0,rr.z)(c=>{const m=new $t(c,{});return this.expandSegment(e,m,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:x}=Oc(t,o,u);if(!m)return Do(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Tg(N):this.lineralizeSegments(o,N).pipe((0,rr.z)(H=>this.expandSegment(e,t,r,H.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ft.U)(N=>(r._loadedConfig=N,new $t(o,{})))):Mt(new $t(o,{}));const{matched:c,consumedSegments:m,remainingSegments:w}=Oc(t,r,o);return c?this.getChildConfig(e,r,o).pipe((0,rr.z)(x=>{const N=x.module,H=x.routes,{segmentGroup:W,slicedSegments:De}=Pc(t,m,w,H),Le=new $t(W.segments,W.children);if(0===De.length&&Le.hasChildren())return this.expandChildren(N,H,Le).pipe((0,Ft.U)(bt=>new $t(m,bt)));if(0===H.length&&0===De.length)return Mt(new $t(m,{}));const He=hs(r)===u;return this.expandSegment(N,Le,H,De,He?zt:u,!0).pipe((0,Ft.U)(St=>new $t(m.concat(St.segments),St.children)))})):Do(t)}getChildConfig(e,t,r){return t.children?Mt(new fu(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,rr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ft.U)(u=>(t._loadedConfig=u,u))):function Jy(n){return ws(tu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Mt(new fu([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Mt(o.map(c=>{const m=e.get(c);let w;if(function rh(n){return n&&Er(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Er(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return sr(w)})).pipe(ya(),(0,Di.b)(c=>{if(!Rr(c))return;const m=tu(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw m.url=c,m}),(0,Ft.U)(c=>!0===c)):Mt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Mt(r);if(o.numberOfChildren>1||!o.children[zt])return ws(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Gi(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return zn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return zn(t.children,(m,w)=>{c[w]=this.createSegmentGroup(e,m,r,o)}),new $t(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function El(n){const e={};for(const r of Object.keys(n.children)){const u=El(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Fc(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}class zs{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Il{constructor(e,t){this.component=e,this.route=t}}function e_(n,e,t){const r=n._root;return yu(r,e?e._root:null,t,[r.value])}function mu(n,e,t){const r=function ch(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yu(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Hs(e);return n.children.forEach(c=>{(function Sg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const w=function zf(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!cs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!cs(n.url,e.url)||!bi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!or(n,e)||!bi(n.queryParams,e.queryParams);default:return!or(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new zs(r)):(u.data=c.data,u._resolvedData=c._resolvedData),yu(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Il(m.outlet.component,c))}else c&&Dl(e,m,o),o.canActivateChecks.push(new zs(r)),yu(n,null,u.component?m?m.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),zn(u,(c,m)=>Dl(c,t.getContext(m),o)),o}function Dl(n,e,t){const r=Hs(n),o=n.value;zn(r,(u,c)=>{Dl(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Il(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class i_{}function s_(n){return new ss.y(e=>e.error(n))}class Rg{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Pc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,zt);if(null===t)return null;const r=new yl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ai(r,t),u=new wr(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=th(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],m=sh(e,u),w=this.processSegmentGroup(m,c,u);if(null===w)return null;r.push(...w)}const o=dh(r);return function Ng(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return lh(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!kc(e,t,r,o))return null;let u,c=[],m=[];if("**"===e.path){const W=r.length>0?ul(r).parameters:{};u=new yl(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pg(e),hs(e),e.component,e,Ti(t),Cl(t)+r.length,kg(e))}else{const W=Oc(t,e,r);if(!W.matched)return null;c=W.consumedSegments,m=W.remainingSegments,u=new yl(c,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pg(e),hs(e),e.component,e,Ti(t),Cl(t)+c.length,kg(e))}const w=function a_(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:x}=Pc(t,c,m,w.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===x.length&&b.hasChildren()){const W=this.processChildren(w,b);return null===W?null:[new ai(u,W)]}if(0===w.length&&0===x.length)return[new ai(u,[])];const N=hs(e)===o,H=this.processSegment(w,b,x,N?zt:o);return null===H?null:[new ai(u,H)]}}function Og(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function dh(n){const e=[],t=new Set;for(const r of n){if(!Og(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=dh(r.children);e.push(new ai(r.value,o))}return e.filter(r=>!t.has(r))}function Ti(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Cl(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Pg(n){return n.data||{}}function kg(n){return n.resolve||{}}function qf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Uc(n){return Qt(e=>{const t=n(e);return t?(0,On.D)(t).pipe((0,Ft.U)(()=>e)):Mt(e)})}class mw extends class gw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Al=new f.OlP("ROUTES");class Nr{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ft.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new fu(aa(c.injector.get(Al,void 0,f.XFs.Self|f.XFs.Optional)).map(Nc),c)}),Ei(u=>{throw t._loader$=void 0,u}));return t._loader$=new $s(o,()=>new Ui.x).pipe(Qa()),t._loader$}loadModuleFactory(e){return sr(e()).pipe((0,rr.z)(t=>t instanceof f.YKP?Mt(t):(0,On.D)(this.compiler.compileModuleAsync(t))))}}class Fg{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function yw(n){throw n}function Ws(n,e,t){return e.parse("/")}function Sl(n,e){return Mt(null)}const Lg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Or=(()=>{class n{constructor(t,r,o,u,c,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ui.x,this.errorHandler=yw,this.malformedUriErrorHandler=Ws,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Sl,afterPreactivation:Sl},this.urlHandlingStrategy=new Fg,this.routeReuseStrategy=new mw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const N=c.get(f.R0b);this.isNgZoneEnabled=N instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function ls(){return new Gi(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Nr(c,m,H=>this.triggerEvent(new oi(H)),H=>this.triggerEvent(new Dc(H))),this.routerState=ml(this.currentUrlTree,this.rootComponentType),this.transitions=new Hr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Yn(o=>0!==o.id),(0,Ft.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qt(o=>{let u=!1,c=!1;return Mt(o).pipe((0,Di.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qt(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return jc(m.source)&&(this.browserUrlTree=m.extractedUrl),Mt(m).pipe(Qt(N=>{const H=this.transitions.getValue();return r.next(new wc(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?ji.E:Promise.resolve(N)}),function Gf(n,e,t,r){return Qt(o=>function Xy(n,e,t,r,o){return new Hf(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ft.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Di.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function bl(n,e,t,r,o){return(0,rr.z)(u=>function o_(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new Rg(n,e,t,r,o,u).recognize();return null===c?s_(new i_):Mt(c)}catch(c){return s_(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ft.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Di.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(W,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new Ec(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:W,source:De,restoredState:Le,extras:He}=m,_t=new wc(H,this.serializeUrl(W),De,Le);r.next(_t);const St=ml(W,this.rootComponentType).snapshot;return Mt(Object.assign(Object.assign({},m),{targetSnapshot:St,urlAfterRedirects:W,extras:Object.assign(Object.assign({},He),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ji.E}),Uc(m=>{const{targetSnapshot:w,id:b,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:W}}=m;return this.hooks.beforePreactivation(w,{navigationId:b,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!W})}),(0,Di.b)(m=>{const w=new as(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Ft.U)(m=>Object.assign(Object.assign({},m),{guards:e_(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function xg(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function t_(n,e,t,r){return(0,On.D)(n).pipe((0,rr.z)(o=>function Vc(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Mt(u.map(m=>{const w=mu(m,e,o);let b;if(function dw(n){return n&&Er(n.canDeactivate)}(w))b=sr(w.canDeactivate(n,e,t,r));else{if(!Er(w))throw new Error("Invalid CanDeactivate guard");b=sr(w(n,e,t,r))}return b.pipe(ia())})).pipe(ya()):Mt(!0)}(o.component,o.route,t,e,r)),ia(o=>!0!==o,!0))}(c,r,o,n).pipe((0,rr.z)(m=>m&&function zi(n){return"boolean"==typeof n}(m)?function n_(n,e,t,r){return(0,On.D)(e).pipe(Ii(o=>na(function r_(n,e){return null!==n&&e&&e(new sa(n)),Mt(!0)}(o.route.parent,r),function Lc(n,e){return null!==n&&e&&e(new al(n)),Mt(!0)}(o.route,r),function wa(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function hw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>cn(()=>Mt(c.guards.map(w=>{const b=mu(w,c.node,t);let x;if(function Yy(n){return n&&Er(n.canActivateChild)}(b))x=sr(b.canActivateChild(r,n));else{if(!Er(b))throw new Error("Invalid CanActivateChild guard");x=sr(b(r,n))}return x.pipe(ia())})).pipe(ya())));return Mt(u).pipe(ya())}(n,o.path,t),function Mg(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Mt(!0);const o=r.map(u=>cn(()=>{const c=mu(u,e,t);let m;if(function Uf(n){return n&&Er(n.canActivate)}(c))m=sr(c.canActivate(e,n));else{if(!Er(c))throw new Error("Invalid CanActivate guard");m=sr(c(e,n))}return m.pipe(ia())}));return Mt(o).pipe(ya())}(n,o.route,t))),ia(o=>!0!==o,!0))}(r,u,n,e):Mt(m)),(0,Ft.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Di.b)(m=>{if(Rr(m.guardsResult)){const b=tu(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw b.url=m.guardsResult,b}const w=new Pf(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Yn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Uc(m=>{if(m.guards.canActivateChecks.length)return Mt(m).pipe((0,Di.b)(w=>{const b=new Ic(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Qt(w=>{let b=!1;return Mt(w).pipe(function hh(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Mt(t);let u=0;return(0,On.D)(o).pipe(Ii(c=>function qs(n,e,t,r){return function Tl(n,e,t,r){const o=qf(n);if(0===o.length)return Mt({});const u={};return(0,On.D)(o).pipe((0,rr.z)(c=>function Co(n,e,t,r){const o=mu(n,e,r);return sr(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,Di.b)(m=>{u[c]=m}))),Ja(1),(0,rr.z)(()=>qf(u).length===o.length?Mt(u):ji.E))}(n._resolve,n,e,r).pipe((0,Ft.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),th(n,t).resolve),null)))}(c.route,r,n,e)),(0,Di.b)(()=>u++),Ja(1),(0,rr.z)(c=>u===o.length?Mt(t):ji.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Di.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Di.b)(w=>{const b=new Ci(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),Uc(m=>{const{targetSnapshot:w,id:b,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:W}}=m;return this.hooks.afterPreactivation(w,{navigationId:b,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!W})}),(0,Ft.U)(m=>{const w=function ga(n,e,t){const r=li(n,e._root,t?t._root:void 0);return new cu(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Di.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ft.U)(r=>(new Vn(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Di.b)({next(){u=!0},complete(){u=!0}}),function Ky(n){return(0,Mr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||c||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Ei(m=>{if(c=!0,function us(n){return n&&n[ir]}(m)){const w=Rr(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const b=new Of(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(b),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jc(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Ln(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return ji.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},c=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){jf(t),this.config=t.map(Nc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,x=w?this.currentUrlTree.fragment:c;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function Lf(n,e,t,r,o){if(0===t.length)return xc(e.root,e.root,e.root,r,o);const u=function E(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vf(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return zn(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Vf(t,e,r)}(t);if(u.toRoot())return xc(e.root,e.root,new $t([],{}),r,o);const c=function S(n,e,t){if(n.isAbsolute)return new D(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new D(u,u===e.root,0)}const r=Sc(n.commands[0])?0:1;return function P(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new D(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=c.processChildren?le(c.segmentGroup,c.index,u.commands):Z(c.segmentGroup,c.index,u.commands);return xc(e.root,c.segmentGroup,m,r,o)}(b,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Rr(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function fh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Lg):!1===r?Object.assign({},Vg):r,Rr(t))return ru(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ru(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new os(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var m,w;if(this.disposed)return Promise.resolve(!1);let b,x,N;c?(b=c.resolve,x=c.reject,N=c.promise):N=new Promise((De,Le)=>{b=De,x=Le});const H=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),W=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):W=0,this.setTransition({id:H,targetPageId:W,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(De=>Promise.reject(De))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Of(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function jc(n){return"imperative"!==n}let xl=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Ui.x,this.subscription=t.events.subscribe(u=>{u instanceof os&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,c){if(0!==t||r||o||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Ml(this.skipLocationChange),replaceUrl:Ml(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ml(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Or),f.Y36(Gs),f.Y36(he))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Ml(n){return""===n||!!n}class p{}class T{preload(e,t){return Mt(null)}}let R=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Nr(o,r,w=>t.triggerEvent(new oi(w)),w=>t.triggerEvent(new Dc(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Yn(t=>t instanceof os),Ii(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,On.D)(o).pipe((0,nl.J)(),(0,Ft.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,rr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Or),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(p))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),B=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof os&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof eu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new eu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Me=new f.OlP("ROUTER_CONFIGURATION"),$e=new f.OlP("ROUTER_FORROOT_GUARD"),Je=[_e,{provide:yo,useClass:au},{provide:Or,useFactory:function Bg(n,e,t,r,o,u,c={},m,w){const b=new Or(null,n,e,t,r,o,aa(u));return m&&(b.urlHandlingStrategy=m),w&&(b.routeReuseStrategy=w),function jg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(x=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(H=console.groupEnd)||void 0===H||H.call(console)}),b},deps:[yo,_a,_e,f.zs3,f.Sil,Al,Me,[class Bc{},new f.FiY],[class pw{},new f.FiY]]},_a,{provide:Gs,useFactory:function Nl(n){return n.routerState.root},deps:[Or]},R,T,class v{preload(e,t){return t().pipe(Ei(()=>Mt(null)))}},{provide:Me,useValue:{enableTracing:!1}}];function tt(){return new f.PXZ("Router",Or)}let gn=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Je,Rl(t),{provide:$e,useFactory:Ug,deps:[[Or,new f.FiY,new f.tp0]]},{provide:Me,useValue:r||{}},{provide:he,useFactory:ph,deps:[pe,[new f.tBr(et),new f.FiY],Me]},{provide:B,useFactory:qi,deps:[Or,lc,Me]},{provide:p,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:T},{provide:f.PXZ,multi:!0,useFactory:tt},[gh,{provide:f.ip1,multi:!0,useFactory:$g,deps:[gh]},{provide:Kf,useFactory:Zf,deps:[gh]},{provide:f.tb,multi:!0,useExisting:Kf}]]}}static forChild(t){return{ngModule:n,providers:[Rl(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($e,8),f.LFG(Or,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function qi(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new B(n,e,t)}function ph(n,e,t={}){return t.useHash?new Pe(n,e):new at(n,e)}function Ug(n){return"guarded"}function Rl(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Al,multi:!0,useValue:n}]}let gh=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ui.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Or),c=this.injector.get(Me);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Me),o=this.injector.get(R),u=this.injector.get(B),c=this.injector.get(Or),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function $g(n){return n.appInitializer.bind(n)}function Zf(n){return n.bootstrapListener.bind(n)}const Kf=new f.OlP("Router Initializer");let _w=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),$c=(()=>{class n extends _w{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Ea=new f.OlP("NgValueAccessor"),UA={provide:Ea,useExisting:(0,f.Gpc)(()=>Yf),multi:!0},vw=new f.OlP("CompositionEventMode");let Yf=(()=>{class n extends _w{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function BA(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(vw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([UA]),f.qOj]}),n})();const ci=new f.OlP("NgValidators"),Ol=new f.OlP("NgAsyncValidators");function Aw(n){return null!=n}function Sw(n){const e=(0,f.QGY)(n)?(0,On.D)(n):n;return(0,f.CqO)(e),e}function xw(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Lt(n,e){return e.map(t=>t(n))}function d_(n){return n.map(e=>function Mw(n){return!n.validate}(e)?e:t=>e.validate(t))}function yh(n){return null!=n?function h_(n){if(!n)return null;const e=n.filter(Aw);return 0==e.length?null:function(t){return xw(Lt(t,e))}}(d_(n)):null}function Gg(n){return null!=n?function Ks(n){if(!n)return null;const e=n.filter(Aw);return 0==e.length?null:function(t){return function l_(...n){const e=(0,Yo.jO)(n),{args:t,keys:r}=el(n),o=new ss.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let w=c,b=c;for(let x=0;x<c;x++){let N=!1;(0,vc.Xf)(t[x]).subscribe((0,nr.x)(u,H=>{N||(N=!0,b--),m[x]=H},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?yc(r,m):m),u.complete())}))}});return e?o.pipe(ea(e)):o}(Lt(t,e).map(Sw)).pipe((0,Ft.U)(xw))}}(d_(n)):null}function Rw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zg(n){return n._rawValidators}function Ia(n){return n._rawAsyncValidators}function Jf(n){return n?Array.isArray(n)?n:[n]:[]}function Xf(n,e){return Array.isArray(n)?n.includes(e):n===e}function qg(n,e){const t=Jf(e);return Jf(n).forEach(o=>{Xf(t,o)||t.push(o)}),t}function QD(n,e){return Jf(e).filter(t=>!Xf(n,t))}class f_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Gg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Hc extends f_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gr extends f_{get formDirective(){return null}get path(){return null}}class ep{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let _h=(()=>{class n extends ep{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hc,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),p_=(()=>{class n extends ep{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gr,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function Zg(n,e){kw(n,e),e.valueAccessor.writeValue(n.value),function E_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&I_(n,e)})}(n,e),function D_(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function nC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&I_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function WA(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function v_(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),To(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function w_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kw(n,e){const t=zg(n);null!==e.validator?n.setValidators(Rw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ia(n);null!==e.asyncValidator?n.setAsyncValidators(Rw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();w_(e._rawValidators,o),w_(e._rawAsyncValidators,o)}function To(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=zg(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Ia(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return w_(e._rawValidators,r),w_(e._rawAsyncValidators,r),t}function I_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function x_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Gc="VALID",vu="INVALID",Da="PENDING",Ca="DISABLED";function Yg(n){return(rp(n)?n.validators:n)||null}function M_(n){return Array.isArray(n)?yh(n):n||null}function np(n,e){return(rp(e)?e.asyncValidators:n)||null}function Qg(n){return Array.isArray(n)?Gg(n):n||null}function rp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const vh=n=>n instanceof Xg,Jg=n=>n instanceof em,R_=n=>n instanceof Fw;function sC(n){return vh(n)?n.value:n.getRawValue()}function N_(n,e){const t=Jg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function O_(n,e){Jg(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class P_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=M_(this._rawValidators),this._composedAsyncValidatorFn=Qg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gc}get invalid(){return this.status===vu}get pending(){return this.status==Da}get disabled(){return this.status===Ca}get enabled(){return this.status!==Ca}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=M_(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Qg(e)}addValidators(e){this.setValidators(qg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QD(e,this._rawAsyncValidators))}hasValidator(e){return Xf(this._rawValidators,e)}hasAsyncValidator(e){return Xf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Da,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ca,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gc,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gc||this.status===Da)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ca:Gc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Da,this._hasOwnPendingAsyncValidator=!0;const t=Sw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function iC(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Jg(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:R_(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Ca:this.errors?vu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Da)?Da:this._anyControlsHaveStatus(vu)?vu:Gc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Xg extends P_{constructor(e=null,t,r){super(Yg(t),np(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rp(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){x_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){x_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class em extends P_{constructor(e,t,r){super(Yg(t),np(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){O_(this,e),Object.keys(e).forEach(r=>{N_(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=sC(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Fw extends P_{constructor(e,t,r){super(Yg(t),np(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){O_(this,e),e.forEach((r,o)=>{N_(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>sC(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let sp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const lC={provide:Ea,useExisting:(0,f.Gpc)(()=>tm),multi:!0};let tm=(()=>{class n extends $c{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([lC]),f.qOj]}),n})(),V_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const U_=new f.OlP("NgModelWithFormControlWarning"),jw={provide:Gr,useExisting:(0,f.Gpc)(()=>wh)};let wh=(()=>{class n extends Gr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(To(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zg(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){v_(t.control||null,t,!1),x_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function A_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(v_(r||null,t),vh(o)&&(Zg(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function C_(n,e){kw(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function b_(n,e){return To(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kw(this.form,this),this._oldForm&&To(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ci,10),f.Y36(Ol,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([jw]),f.qOj,f.TTD]}),n})();const rm={provide:Hc,useExisting:(0,f.Gpc)(()=>zc)};let zc=(()=>{class n extends Hc{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function S_(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Yf?t=u:function rC(n){return Object.getPrototypeOf(n.constructor)===$c}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function tp(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function __(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Gr,13),f.Y36(ci,10),f.Y36(Ol,10),f.Y36(Ea,10),f.Y36(U_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([rm]),f.qOj,f.TTD]}),n})(),Qw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[V_]]}),n})(),Jw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:U_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Qw]}),n})(),K_=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,c=null;return null!=r&&(function Ih(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new em(o,{asyncValidators:c,updateOn:m,validators:u})}control(t,r,o){return new Xg(t,r,o)}array(t,r,o){const u=t.map(c=>this._createControl(c));return new Fw(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return vh(t)||Jg(t)||R_(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:Jw}),n})();var vC=k(4986),di=k(4976);function Ys(){return(0,Mr.e)((n,e)=>{let t,r=!1;n.subscribe((0,nr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Xw(n,e){return n===e}var Ye,Qs=k(2011),eE=(k(2644),k(3942)),Ee=k(5861),qc=k(6881),cm=k(4859),Fl=k(1877),un=k(2090),sS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Js={},Q_=Q_||{},Bt=sS||self;function J_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var dm="closure_uid_"+(1e9*Math.random()>>>0),tE=0;function oS(n,e,t){return n.call.apply(n.bind,arguments)}function Ao(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Zi(n,e,t){return(Zi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oS:Ao).apply(null,arguments)}function X_(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,o,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[o].apply(r,c)}}function wu(){this.s=this.s,this.o=this.o}wu.prototype.s=!1,wu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function EC(n){Object.prototype.hasOwnProperty.call(n,dm)&&n[dm]||(n[dm]=++tE)}(this)},wu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function iE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function ev(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(J_(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let c=0;c<u;c++)n[o+c]=r[c]}else n.push(r)}}function zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zr.prototype.h=function(){this.defaultPrevented=!0};var IC=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",()=>{},e),Bt.removeEventListener("test",()=>{},e)}catch(t){}return n}();function Zc(n){return/^[\s\xa0]*$/.test(n)}function hm(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function Ta(n){return-1!=hm().indexOf(n)}function tv(n){return tv[" "](n),n}tv[" "]=function(){};var nv,n,CC=Ta("Opera"),Dh=Ta("Trident")||Ta("MSIE"),up=Ta("Edge"),Ll=up||Dh,sE=Ta("Gecko")&&!(-1!=hm().toLowerCase().indexOf("webkit")&&!Ta("Edge"))&&!(Ta("Trident")||Ta("MSIE"))&&!Ta("Edge"),lp=-1!=hm().toLowerCase().indexOf("webkit")&&!Ta("Edge");function oE(){var n=Bt.document;return n?n.documentMode:void 0}e:{var cp="",Xs=(n=hm(),sE?/rv:([^\);]+)(\)|;)/.exec(n):up?/Edge\/([\d\.]+)/.exec(n):Dh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lp?/WebKit\/(\S+)/.exec(n):CC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Xs&&(cp=Xs?Xs[1]:""),Dh){var Kc=oE();if(null!=Kc&&Kc>parseFloat(cp)){nv=String(Kc);break e}}nv=cp}var fm=Bt.document&&Dh&&(oE()||parseInt(nv,10))||void 0;function Ai(n,e){if(zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sE){e:{try{tv(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ai.$.h.call(this)}}Pr(Ai,zr);var rv={2:"touch",3:"pen",4:"mouse"};Ai.prototype.h=function(){Ai.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Aa="closure_listenable_"+(1e6*Math.random()|0),Ch=0;function bh(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=o,this.key=++Ch,this.fa=this.ia=!1}function Eu(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ul(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Yc(n){const e={};for(const t in n)e[t]=n[t];return e}const Qc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jc(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Qc.length;u++)t=Qc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function dp(n){this.src=n,this.g={},this.h=0}function pm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=rE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Eu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gm(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return o}return-1}dp.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=gm(n,e,r,o);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new bh(e,this.src,u,!!r,o)).ia=t,n.push(e)),e};var mm="closure_lm_"+(1e6*Math.random()|0),ym={};function iv(n,e,t,r,o){if(r&&r.once)return ov(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)iv(n,e[u],t,r,o);return null}return t=uv(t),n&&n[Aa]?n.O(e,t,Wc(r)?!!r.capture:!!r,o):sv(n,e,t,!1,r,o)}function sv(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=Wc(o)?!!o.capture:!!o,m=vm(n);if(m||(n[mm]=m=new dp(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function aE(){const e=bC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)IC||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(lE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ov(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ov(n,e[u],t,r,o);return null}return t=uv(t),n&&n[Aa]?n.P(e,t,Wc(r)?!!r.capture:!!r,o):sv(n,e,t,!0,r,o)}function uE(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)uE(n,e[u],t,r,o);else r=Wc(r)?!!r.capture:!!r,t=uv(t),n&&n[Aa]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gm(u=n.g[e],t,r,o))&&(Eu(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=vm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gm(e,t,r,o)),(t=-1<n?e[n]:null)&&_m(t))}function _m(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Aa])pm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=vm(e))?(pm(t,n),0==t.h&&(t.src=null,e[mm]=null)):Eu(n)}}}function lE(n){return n in ym?ym[n]:ym[n]="on"+n}function bC(n,e){if(n.fa)n=!0;else{e=new Ai(e,this);var t=n.listener,r=n.la||n.src;n.ia&&_m(n),n=t.call(r,e)}return n}function vm(n){return(n=n[mm])instanceof dp?n:null}var av="__closure_events_fn_"+(1e9*Math.random()>>>0);function uv(n){return"function"==typeof n?n:(n[av]||(n[av]=function(e){return n.handleEvent(e)}),n[av])}function kr(){wu.call(this),this.i=new dp(this),this.S=this,this.J=null}function hi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zr(e,n);else if(e instanceof zr)e.target=e.target||n;else{var o=e;Jc(e=new zr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=hp(c,r,!0,e)&&o}if(o=hp(c=e.g=n,r,!0,e)&&o,o=hp(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=hp(c=e.g=t[u],r,!1,e)&&o}function hp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var m=c.listener,w=c.la||c.src;c.ia&&pm(n.i,c),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Pr(kr,wu),kr.prototype[Aa]=!0,kr.prototype.removeEventListener=function(n,e,t,r){uE(this,n,e,t,r)},kr.prototype.N=function(){if(kr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Eu(t[r]);delete n.g[e],n.h--}}this.J=null},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var lv=Bt.JSON.stringify;function aS(){var n=dv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wm=new class TC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new cv,n=>n.reset());class cv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function SC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function uS(n){Bt.setTimeout(()=>{throw n},0)}let Em,Im=!1,dv=new class AC{constructor(){this.h=this.g=null}add(e,t){const r=wm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},hv=()=>{const n=Bt.Promise.resolve(void 0);Em=()=>{n.then(lS)}};var lS=()=>{for(var n;n=aS();){try{n.h.call(n.g)}catch(t){uS(t)}var e=wm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Im=!1};function Dm(n,e){kr.call(this),this.h=n||1,this.g=e||Bt,this.j=Zi(this.qb,this),this.l=Date.now()}function Bl(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function fv(n,e,t){if("function"==typeof n)t&&(n=Zi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function pv(n){n.g=fv(()=>{n.g=null,n.i&&(n.i=!1,pv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pr(Dm,kr),(Ye=Dm.prototype).ga=!1,Ye.T=null,Ye.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hi(this,"tick"),this.ga&&(Bl(this),this.start()))}},Ye.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.N=function(){Dm.$.N.call(this),Bl(this),delete this.g};class xC extends wu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pv(this)}N(){super.N(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ah(n){wu.call(this),this.h=n,this.g={}}Pr(Ah,wu);var fp=[];function cE(n,e,t,r){Array.isArray(t)||(t&&(fp[0]=t.toString()),t=fp);for(var o=0;o<t.length;o++){var u=iv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function gv(n){Ul(n.g,function(e,t){this.g.hasOwnProperty(t)&&_m(e)},n),n.g={}}function Cm(){this.g=!0}function Sh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return lv(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Ah.prototype.N=function(){Ah.$.N.call(this),gv(this)},Ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cm.prototype.Ea=function(){this.g=!1},Cm.prototype.info=function(){};var Xc={},mv=null;function pp(){return mv=mv||new kr}function bm(n){zr.call(this,Xc.Ta,n)}function Tm(n){const e=pp();hi(e,new bm(e))}function Am(n,e){zr.call(this,Xc.STAT_EVENT,n),this.stat=e}function Ki(n){const e=pp();hi(e,new Am(e,n))}function OC(n,e){zr.call(this,Xc.Ua,n),this.size=e}function Iu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}Xc.Ta="serverreachability",Pr(bm,zr),Xc.STAT_EVENT="statevent",Pr(Am,zr),Xc.Ua="timingevent",Pr(OC,zr);var gp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Sm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mp(){}function yp(){}mp.prototype.h=null;var yv,jl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _p(){zr.call(this,"d")}function fE(){zr.call(this,"c")}function xh(){}function ed(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ah(this),this.P=pE,this.V=new Dm(n=Ll?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _v}function _v(){this.i=null,this.g="",this.h=!1}Pr(_p,zr),Pr(fE,zr),Pr(xh,mp),xh.prototype.g=function(){return new XMLHttpRequest},xh.prototype.i=function(){return{}},yv=new xh;var pE=45e3,vp={},wp={};function xm(n,e,t){n.L=1,n.v=Nm(Sa(e)),n.s=t,n.S=!0,Mm(n,null)}function Mm(n,e){n.G=Date.now(),Mh(n),n.A=Sa(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),EE(t.i,"t",r),n.C=0,t=n.l.J,n.h=new _v,n.g=Bv(n.l,t?e:null,!n.s),0<n.O&&(n.M=new xC(Zi(n.Pa,n,n.g),n.O)),cE(n.U,n.g,"readystatechange",n.nb),e=n.I?Yc(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Tm(),function MC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var x=b[0];b=b[1];var N=x.split("_");c=2<=N.length&&"type"==N[1]?c+(x+"=")+b+"&":c+(x+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function vv(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function gE(n,e,t){let o,r=!0;for(;!n.J&&n.C<t.length;){if(o=mE(n,t),o==wp){4==e&&(n.o=4,Ki(14),r=!1),Sh(n.j,n.m,null,"[Incomplete Response]");break}if(o==vp){n.o=4,Ki(15),Sh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Sh(n.j,n.m,o,null),wv(n,o)}vv(n)&&o!=wp&&o!=vp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Uv(e),e.M=!0,Ki(11))):(Sh(n.j,n.m,t,"[Invalid Chunked Response]"),td(n),Ip(n))}function mE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?wp:(t=Number(e.substring(t,r)),isNaN(t)?vp:(r+=1)+t>e.length?wp:(e=e.slice(r,r+t),n.C=r+t,e))}function Mh(n){n.Y=Date.now()+n.P,Rm(n,n.P)}function Rm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Iu(Zi(n.lb,n),e)}function Ep(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Ip(n){0==n.l.H||n.J||PE(n.l,n)}function td(n){Ep(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Bl(n.V),gv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function wv(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||eo(t.i,n)))if(!n.K&&eo(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.Fa=o[1],0<t.Fa-t.V&&37500>o[2]&&t.G&&0==t.A&&!t.v&&(t.v=Iu(Zi(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;$m(t),Bm(t)}Vv(t),Ki(18)}if(1>=Om(t.i)&&t.oa){try{t.oa()}catch(b){}t.oa=void 0}}else id(t,11)}else if((n.K||t.g==n)&&$m(t),!Zc(e))for(o=t.Ja.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const x=b[3];null!=x&&(t.ra=x,t.l.info("VER="+t.ra));const N=b[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.L=r=1.5*H,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const De=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(De){var u=r.i;u.g||-1==De.indexOf("spdy")&&-1==De.indexOf("quic")&&-1==De.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Sv(u,u.h),u.h=null))}if(r.F){const Le=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(r.Da=Le,qn(r.I,r.F,Le))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=LE(r,r.J?r.pa:null,r.Y),c.K){DE(r.i,c);var m=c,w=r.L;w&&m.setTimeout(w),m.B&&(Ep(m),Mh(m)),r.g=c}else NE(r);0<t.j.length&&jm(t)}else"stop"!=b[0]&&"close"!=b[0]||id(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?id(t,7):Lv(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Tm()}catch(b){}}function Iv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(J_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ev(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(J_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function yE(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(J_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Ye=ed.prototype).setTimeout=function(n){this.P=n},Ye.nb=function(n){n=n.target;const e=this.M;e&&3==Ro(n)?e.l():this.Pa(n)},Ye.Pa=function(n){try{if(n==this.g)e:{const x=Ro(this.g);var e=this.g.Ia();if(this.g.da(),!(3>x)&&(3!=x||Ll||this.g&&(this.h.h||this.g.ja()||Pv(this.g)))){this.J||4!=x||7==e||Tm(),Ep(this);var t=this.g.da();this.ca=t;t:if(vv(this)){var r=Pv(this.g);n="";var o=r.length,u=4==Ro(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){td(this),Ip(this);var c="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function RC(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,x,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zc(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ki(12),td(this),Ip(this);break e}Sh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wv(this,t)}this.S?(gE(this,x,c),Ll&&this.i&&3==x&&(cE(this.U,this.V,"tick",this.mb),this.V.start())):(Sh(this.j,this.m,c,null),wv(this,c)),4==x&&td(this),this.i&&!this.J&&(4==x?PE(this.l,this):(this.i=!1,Mh(this)))}else(function SE(n){const e={};n=(n.g&&2<=Ro(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Zc(n[r]))continue;var t=SC(n[r]);const o=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[o]||[];e[o]=u,u.push(t)}!function Th(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),td(this),Ip(this)}}}catch(x){}},Ye.mb=function(){if(this.g){var n=Ro(this.g),e=this.g.ja();this.C<e.length&&(Ep(this),gE(this,n,e),this.i&&4!=n&&Mh(this))}},Ye.cancel=function(){this.J=!0,td(this)},Ye.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function NC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Tm(),Ki(17)),td(this),this.o=2,Ip(this)):Rm(this,this.Y-n)};var Dv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $l(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $l){this.h=n.h,Dp(this,n.j),this.s=n.s,this.g=n.g,Cp(this,n.m),this.l=n.l;var e=n.i,t=new Tp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Cv(this,t),this.o=n.o}else n&&(e=String(n).match(Dv))?(this.h=!1,Dp(this,e[1]||"",!0),this.s=bp(e[2]||""),this.g=bp(e[3]||"",!0),Cp(this,e[4]),this.l=bp(e[5]||"",!0),Cv(this,e[6]||"",!0),this.o=bp(e[7]||"")):(this.h=!1,this.i=new Tp(null,this.h))}function Sa(n){return new $l(n)}function Dp(n,e,t){n.j=t?bp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Cv(n,e,t){e instanceof Tp?(n.i=e,function IE(n,e){e&&!n.j&&(Du(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(bv(this,r),EE(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Rh(e,FC)),n.i=new Tp(e,n.h))}function qn(n,e,t){n.i.set(e,t)}function Nm(n){return qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$l.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rh(e,Ir,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rh(e,Ir,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rh(t,"/"==t.charAt(0)?kC:vE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rh(t,wE)),n.join("")};var Ir=/[#\/\?@]/g,vE=/[#\?:]/g,kC=/[#\?]/g,FC=/[#\?@]/g,wE=/#/g;function Tp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Du(n){n.g||(n.g=new Map,n.h=0,n.i&&function _E(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bv(n,e){Du(n),e=Nh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function nd(n,e){return Du(n),e=Nh(n,e),n.g.has(e)}function EE(n,e,t){bv(n,e),0<t.length&&(n.i=null,n.g.set(Nh(n,e),iE(t)),n.h+=t.length)}function Nh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Tv(n){this.l=n||cS,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ka&&Bt.g.Ka()&&Bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Tp.prototype).add=function(n,e){Du(this),this.i=null,n=Nh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Du(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Ye.ta=function(){Du(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Ye.Z=function(n){Du(this);let e=[];if("string"==typeof n)nd(this,n)&&(e=e.concat(this.g.get(Nh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ye.set=function(n,e){return Du(this),this.i=null,nd(this,n=Nh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var o=u;""!==c[r]&&(o+="="+encodeURIComponent(String(c[r]))),n.push(o)}}return this.i=n.join("&")};var cS=10;function Av(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Om(n){return n.h?1:n.g?n.g.size:0}function eo(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sv(n,e){n.g?n.g.add(e):n.h=e}function DE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function So(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return iE(n.i)}function Mo(){this.g=new class{stringify(n){return Bt.JSON.stringify(n,void 0)}parse(n){return Bt.JSON.parse(n,void 0)}}}function CE(n,e,t){const r=t||"";try{Iv(n,function(o,u){let c=o;Wc(o)&&(c=lv(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Pm(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Ap(n){this.l=n.fc||null,this.j=n.ob||!1}function km(n,e){kr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=xv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tv.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Pr(Ap,mp),Ap.prototype.g=function(){return new km(this.l,this.j)},Ap.prototype.i=function(n){return function(){return n}}({}),Pr(km,kr);var xv=0;function Fm(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Cu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sp(n)}function Sp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=km.prototype).open=function(n,e){if(this.readyState!=xv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sp(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cu(this)),this.readyState=xv},Ye.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sp(this)),this.g&&(this.readyState=3,Sp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fm(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ye.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cu(this):Sp(this),3==this.readyState&&Fm(this)}},Ye.Za=function(n){this.g&&(this.response=this.responseText=n,Cu(this))},Ye.Ya=function(n){this.g&&(this.response=n,Cu(this))},Ye.ka=function(){this.g&&Cu(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(km.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TE=Bt.JSON.parse;function ar(n){kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Mv,this.L=this.M=!1}Pr(ar,kr);var Mv="",AE=/^https?$/i,Lm=["POST","PUT"];function Rv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Nv(n),rd(n)}function Nv(n){n.F||(n.F=!0,hi(n,"complete"),hi(n,"error"))}function Vm(n){if(n.h&&void 0!==Q_&&(!n.C[1]||4!=Ro(n)||2!=n.da()))if(n.v&&4==Ro(n))fv(n.La,0,n);else if(hi(n,"readystatechange"),4==Ro(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var o=String(n.I).match(Dv)[1]||null;!o&&Bt.self&&Bt.self.location&&(o=Bt.self.location.protocol.slice(0,-1)),r=!AE.test(o?o.toLowerCase():"")}t=r}if(t)hi(n,"complete"),hi(n,"success");else{n.m=6;try{var u=2<Ro(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.da()+"]",Nv(n)}}finally{rd(n)}}}function rd(n,e){if(n.g){Ov(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||hi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Ov(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function Ro(n){return n.g?n.g.readyState:0}function Pv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Mv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function kv(n){let e="";return Ul(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Um(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qn(n,e,t))}function Oh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Fv(n){this.Ga=0,this.j=[],this.l=new Cm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Oh("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Oh("baseRetryDelayMs",5e3,n),this.hb=Oh("retryDelaySeedMs",1e4,n),this.eb=Oh("forwardChannelMaxRetries",2,n),this.xa=Oh("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Tv(n&&n.concurrentRequestLimit),this.Ja=new Mo,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Lv(n){if(xE(n),3==n.H){var e=n.W++,t=Sa(n.I);if(qn(t,"SID",n.K),qn(t,"RID",e),qn(t,"TYPE","terminate"),xp(n,t),(e=new ed(n,n.l,e)).L=2,e.v=Nm(Sa(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon)try{t=Bt.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Bv(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Mh(e)}FE(n)}function Bm(n){n.g&&(Uv(n),n.g.cancel(),n.g=null)}function xE(n){Bm(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),$m(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function jm(n){if(!Av(n.i)&&!n.m){n.m=!0;var e=n.Na;Em||hv(),Im||(Em(),Im=!0),dv.add(e,n),n.C=0}}function ME(n,e){var t;t=e?e.m:n.W++;const r=Sa(n.I);qn(r,"SID",n.K),qn(r,"RID",t),qn(r,"AID",n.V),xp(n,r),n.o&&n.s&&Um(r,n.o,n.s),t=new ed(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=RE(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Sv(n.i,t),xm(t,r,e)}function xp(n,e){n.na&&Ul(n.na,function(t,r){qn(e,r,t)}),n.h&&Iv({},function(t,r){qn(e,r,t)})}function RE(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Zi(n.h.Va,n.h,n):null;e:{var o=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].g;const x=o[w].map;if(b-=u,0>b)u=Math.max(0,o[w].g-100),m=!1;else try{CE(x,c,"req"+b+"_")}catch(N){r&&r(x)}}if(m){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function NE(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Em||hv(),Im||(Em(),Im=!0),dv.add(e,n),n.A=0}}function Vv(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Iu(Zi(n.Ma,n),kE(n,n.A)),n.A++,0))}function Uv(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function OE(n){n.g=new ed(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Sa(n.wa);qn(e,"RID","rpc"),qn(e,"SID",n.K),qn(e,"AID",n.V),qn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&qn(e,"TO",n.qa),qn(e,"TYPE","xmlhttp"),xp(n,e),n.o&&n.s&&Um(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Nm(Sa(e)),t.s=null,t.S=!0,Mm(t,n)}function $m(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function PE(n,e){var t=null;if(n.g==e){$m(n),Uv(n),n.g=null;var r=2}else{if(!eo(n.i,e))return;t=e.F,DE(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var o=n.C;hi(r=pp(),new OC(r,t)),jm(n)}else NE(n);else if(3==(o=e.o)||0==o&&0<e.ca||!(1==r&&function UC(n,e){return!(Om(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Iu(Zi(n.Na,n,e),kE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Vv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:id(n,5);break;case 4:id(n,10);break;case 3:id(n,6);break;default:id(n,2)}}function kE(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function id(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Zi(n.pb,n);t||(t=new $l("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||Dp(t,"https"),Nm(t)),function bE(n,e){const t=new Cm;if(Bt.Image){const r=new Image;r.onload=X_(Pm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=X_(Pm,t,r,"TestLoadImage: error",!1,e),r.onabort=X_(Pm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=X_(Pm,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.H=0,n.h&&n.h.za(e),FE(n),xE(n)}function FE(n){if(n.H=0,n.ma=[],n.h){const e=So(n.i);(0!=e.length||0!=n.j.length)&&(ev(n.ma,e),ev(n.ma,n.j),n.i.i.length=0,iE(n.j),n.j.length=0),n.h.ya()}}function LE(n,e,t){var r=t instanceof $l?Sa(t):new $l(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Cp(r,r.m);else{var o=Bt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new $l(null);r&&Dp(u,r),e&&(u.g=e),o&&Cp(u,o),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&qn(r,t,e),qn(r,"VER",n.ra),xp(n,r),r}function Bv(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ha&&!n.va?new Ap({ob:!0}):n.va)).Oa(n.J),e}function jv(){}function Mp(){if(Dh&&!(10<=Number(fm)))throw Error("Environmental error: no available transport.")}function fs(n,e){kr.call(this),this.g=new Fv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Zc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sd(this)}function $v(n){_p.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Hv(){fE.call(this),this.status=1}function sd(n){this.g=n}function to(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Hm(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var o=0;16>o;++o)r[o]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(o=0;16>o;++o)r[o]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((o=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=(t=(o=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(o^e&(t^o))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=o+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^o&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(o^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(o^e&(t^o))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=o+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^o&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(o^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(o^e&(t^o))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=o+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^o&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(o^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(o^e&(t^o))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=o+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^o&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(o^u&(t^o))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^o&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=o+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(o^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(o^u&(t^o))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^o&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=o+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(o^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(o^u&(t^o))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^o&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=o+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(o^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(o^u&(t^o))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^o&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=o+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(o^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^o^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^o)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=o+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(o^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^o^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^o)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=o+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(o^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^o^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^o)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=o+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(o^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^o^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^o)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=o+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(o^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(o^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~o))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=o+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(o|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(o^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~o))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=o+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(o|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(o^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~o))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=o+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(o|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(o^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~o))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((o=u+((c=o+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(o+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+o&4294967295,n.g[3]=n.g[3]+u&4294967295}function mn(n,e){this.h=e;for(var t=[],r=!0,o=n.length-1;0<=o;o--){var u=0|n[o];r&&u==e||(t[o]=u,r=!1)}this.g=t}(Ye=ar.prototype).Oa=function(n){this.M=n},Ye.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yv.g(),this.C=function hE(n){return n.h||(n.h=n.i())}(this.u?this.u:yv),this.g.onreadystatechange=Zi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Rv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Bt.FormData&&n instanceof Bt.FormData,!(0<=rE(Lm,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ov(this),0<this.B&&((this.L=function VC(n){return Dh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zi(this.ua,this)):this.A=fv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Rv(this,u)}},Ye.ua=function(){void 0!==Q_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hi(this,"complete"),hi(this,"abort"),rd(this))},Ye.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rd(this,!0)),ar.$.N.call(this)},Ye.La=function(){this.s||(this.G||this.v||this.l?Vm(this):this.kb())},Ye.kb=function(){Vm(this)},Ye.isActive=function(){return!!this.g},Ye.da=function(){try{return 2<Ro(this)?this.g.status:-1}catch(n){return-1}},Ye.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),TE(e)}},Ye.Ia=function(){return this.m},Ye.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=Fv.prototype).ra=8,Ye.H=1,Ye.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const o=new ed(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Yc(u),Jc(u,this.U)):u=this.U),null!==this.o||this.O||(o.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=RE(this,o,e),qn(t=Sa(this.I),"RID",n),qn(t,"CVER",22),this.F&&qn(t,"X-HTTP-Session-Id",this.F),xp(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(kv(u)))+"&"+e:this.o&&Um(t,this.o,u)),Sv(this.i,o),this.bb&&qn(t,"TYPE","init"),this.P?(qn(t,"$req",e),qn(t,"SID","null"),o.aa=!0,xm(o,t,null)):xm(o,t,e),this.H=2}}else 3==this.H&&(n?ME(this,n):0==this.j.length||Av(this.i)||ME(this))},Ye.Ma=function(){if(this.u=null,OE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Iu(Zi(this.jb,this),n)}},Ye.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ki(10),Bm(this),OE(this))},Ye.ib=function(){null!=this.v&&(this.v=null,Bm(this),Vv(this),Ki(19))},Ye.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ki(2)):(this.l.info("Failed to ping google.com"),Ki(1))},Ye.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ye=jv.prototype).Ba=function(){},Ye.Aa=function(){},Ye.za=function(){},Ye.ya=function(){},Ye.isActive=function(){return!0},Ye.Va=function(){},Mp.prototype.g=function(n,e){return new fs(n,e)},Pr(fs,kr),fs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ki(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=LE(n,null,n.Y),jm(n)},fs.prototype.close=function(){Lv(this.g)},fs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=lv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&jm(e)},fs.prototype.N=function(){this.g.h=null,delete this.j,Lv(this.g),delete this.g,fs.$.N.call(this)},Pr($v,_p),Pr(Hv,fE),Pr(sd,jv),sd.prototype.Ba=function(){hi(this.g,"a")},sd.prototype.Aa=function(n){hi(this.g,new $v(n))},sd.prototype.za=function(n){hi(this.g,new Hv)},sd.prototype.ya=function(){hi(this.g,"b")},Pr(to,function VE(){this.blockSize=-1}),to.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},to.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,o=this.h,u=0;u<e;){if(0==o)for(;u<=t;)Hm(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[o++]=n.charCodeAt(u++),o==this.blockSize){Hm(this,r),o=0;break}}else for(;u<e;)if(r[o++]=n[u++],o==this.blockSize){Hm(this,r),o=0;break}}this.h=o,this.i+=e},to.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var od={};function Gv(n){return-128<=n&&128>n?function DC(n,e){var t=od;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new mn([0|e],0>e?-1:0)}):new mn([0|n],0>n?-1:0)}function xa(n){if(isNaN(n)||!isFinite(n))return Hl;if(0>n)return st(xa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=UE;return new mn(e,0)}var UE=4294967296,Hl=Gv(0),BE=Gv(1),zv=Gv(16777216);function Ma(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function No(n){return-1==n.h}function st(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new mn(t,~n.h).add(BE)}function Gm(n,e){return n.add(st(e))}function zm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Rp(n,e){this.g=n,this.h=e}function ud(n,e){if(Ma(e))throw Error("division by zero");if(Ma(n))return new Rp(Hl,Hl);if(No(n))return e=ud(st(n),e),new Rp(st(e.g),st(e.h));if(No(e))return e=ud(n,st(e)),new Rp(st(e.g),e.h);if(30<n.g.length){if(No(n)||No(e))throw Error("slowDivide_ only works with positive integers.");for(var t=BE,r=e;0>=r.X(n);)t=jE(t),r=jE(r);var o=bu(t,1),u=bu(r,1);for(r=bu(r,2),t=bu(t,2);!Ma(r);){var c=u.add(r);0>=c.X(n)&&(o=o.add(t),u=c),r=bu(r,1),t=bu(t,1)}return e=Gm(n,o.R(e)),new Rp(o,e)}for(o=Hl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=xa(t)).R(e);No(c)||0<c.X(n);)c=(u=xa(t-=r)).R(e);Ma(u)&&(u=BE),o=o.add(u),n=Gm(n,c)}return new Rp(o,n)}function jE(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new mn(t,n.h)}function bu(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,o=[],u=0;u<r;u++)o[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new mn(o,n.h)}(Ye=mn.prototype).ea=function(){if(No(this))return-st(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:UE+r)*e,e*=UE}return n},Ye.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ma(this))return"0";if(No(this))return"-"+st(this).toString(n);for(var e=xa(Math.pow(n,6)),t=this,r="";;){var o=ud(t,e).g,u=((0<(t=Gm(t,o.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ma(t=o))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},Ye.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ye.X=function(n){return No(n=Gm(this,n))?-1:Ma(n)?0:1},Ye.abs=function(){return No(this)?st(this):this},Ye.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,o=0;o<=e;o++){var u=r+(65535&this.D(o))+(65535&n.D(o)),c=(u>>>16)+(this.D(o)>>>16)+(n.D(o)>>>16);r=c>>>16,t[o]=(c&=65535)<<16|(u&=65535)}return new mn(t,-2147483648&t[t.length-1]?-1:0)},Ye.R=function(n){if(Ma(this)||Ma(n))return Hl;if(No(this))return No(n)?st(this).R(st(n)):st(st(this).R(n));if(No(n))return st(this.R(st(n)));if(0>this.X(zv)&&0>n.X(zv))return xa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var o=0;o<n.g.length;o++){var u=this.D(r)>>>16,c=65535&this.D(r),m=n.D(o)>>>16,w=65535&n.D(o);t[2*r+2*o]+=c*w,zm(t,2*r+2*o),t[2*r+2*o+1]+=u*w,zm(t,2*r+2*o+1),t[2*r+2*o+1]+=c*m,zm(t,2*r+2*o+1),t[2*r+2*o+2]+=u*m,zm(t,2*r+2*o+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new mn(t,0)},Ye.gb=function(n){return ud(this,n).h},Ye.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new mn(t,this.h&n.h)},Ye.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new mn(t,this.h|n.h)},Ye.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new mn(t,this.h^n.h)},Mp.prototype.createWebChannel=Mp.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,gp.NO_ERROR=0,gp.TIMEOUT=8,gp.HTTP_ERROR=6,Sm.COMPLETE="complete",yp.EventType=jl,jl.OPEN="a",jl.CLOSE="b",jl.ERROR="c",jl.MESSAGE="d",kr.prototype.listen=kr.prototype.O,ar.prototype.listenOnce=ar.prototype.P,ar.prototype.getLastError=ar.prototype.Sa,ar.prototype.getLastErrorCode=ar.prototype.Ia,ar.prototype.getStatus=ar.prototype.da,ar.prototype.getResponseJson=ar.prototype.Wa,ar.prototype.getResponseText=ar.prototype.ja,ar.prototype.send=ar.prototype.ha,ar.prototype.setWithCredentials=ar.prototype.Oa,to.prototype.digest=to.prototype.l,to.prototype.reset=to.prototype.reset,to.prototype.update=to.prototype.j,mn.prototype.add=mn.prototype.add,mn.prototype.multiply=mn.prototype.R,mn.prototype.modulo=mn.prototype.gb,mn.prototype.compare=mn.prototype.X,mn.prototype.toNumber=mn.prototype.ea,mn.prototype.toString=mn.prototype.toString,mn.prototype.getBits=mn.prototype.D,mn.fromNumber=xa,mn.fromString=function ad(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return st(ad(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=xa(Math.pow(e,8)),r=Hl,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),c=parseInt(n.substring(o,o+u),e);8>u?(u=xa(Math.pow(e,u)),r=r.R(u).add(xa(c))):r=(r=r.R(t)).add(xa(c))}return r};var qm=Js.createWebChannelTransport=function(){return new Mp},ur=Js.getStatEventTarget=function(){return pp()},$E=Js.ErrorCode=gp,HE=Js.EventType=Sm,BC=Js.Event=Xc,GE=Js.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zE=Js.FetchXmlHttpFactory=Ap,Np=Js.WebChannel=yp,qE=Js.XhrIo=ar,WE=Js.Md5=to,Ph=Js.Integer=mn;const ZE="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let Ra="9.23.0";const Gl=new Fl.Yd("@firebase/firestore");function qv(){return Gl.logLevel}function ke(n,...e){if(Gl.logLevel<=Fl.in.DEBUG){const t=e.map(Wm);Gl.debug(`Firestore (${Ra}): ${n}`,...t)}}function lr(n,...e){if(Gl.logLevel<=Fl.in.ERROR){const t=e.map(Wm);Gl.error(`Firestore (${Ra}): ${n}`,...t)}}function Ds(n,...e){if(Gl.logLevel<=Fl.in.WARN){const t=e.map(Wm);Gl.warn(`Firestore (${Ra}): ${n}`,...t)}}function Wm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function ct(n,e){n||nt()}function Ke(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends un.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class $C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YE{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let c=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Dr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new Wv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new Wr(e)}}class HC{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class GC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new HC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new zC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Zv{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=hS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function kh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function QE(n){return n+"\0"}class Un{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Un.fromMillis(Date.now())}static fromDate(e){return Un.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Un(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new Un(0,0))}static max(){return new ht(new Un(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pp{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends Pp{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const qC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends Pp{construct(e,t,r){return new cr(e,t,r)}static isValidIdentifier(e){return qC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ne(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ne(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ne(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(c=!c,o++):"."!==m||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new Ne(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(sn.fromString(e))}static fromName(e){return new Ze(sn.fromString(e).popFirst(5))}static empty(){return new Ze(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new sn(e.slice()))}}class kp{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Kv(n){return n.fields.find(e=>2===e.kind)}function ld(n){return n.fields.filter(e=>2!==e.kind)}kp.UNKNOWN_ID=-1;class Zm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fp(0,ps.min())}}function Yv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ht.fromTimestamp(1e9===r?new Un(t+1,0):new Un(t,r));return new ps(o,Ze.empty(),e)}function XE(n){return new ps(n.readTime,n.key,-1)}class ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ps(ht.min(),Ze.empty(),-1)}static max(){return new ps(ht.max(),Ze.empty(),-1)}}function Qv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const Km="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tu(n){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ee.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Km)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),Ym.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,c=!1;e.forEach(m=>{++o,m.next(()=>{++u,c&&u===o&&t()},w=>r(w))}),c=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(x=>{c[b]=x,++m,m===u&&r(c)},x=>o(x))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Qm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Dr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Lp(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=Xv(r.target.error);this.v.reject(new Lp(e,o))}}static open(e,t,r,o){try{return new Qm(t,e.transaction(o,r))}catch(u){throw new Lp(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WC(t)}}class Oo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Oo.S((0,un.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),cd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,un.hl)())return!1;if(Oo.C())return!0;const e=(0,un.z$)(),t=Oo.S(e),r=0<t&&t<10,o=Oo.N(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new Lp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;o("VersionError"===m.name?new Ne(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ne(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Lp(e,m))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=Qm.open(u.db,e,c?"readonly":"readwrite",r),b=o(w).next(x=>(w.P(),x)).catch(x=>(w.abort(x),re.reject(x))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,x="FirebaseError"!==b.name&&m<3;if(ke("SimpleDb","Transaction failed with error:",b.message,"Retrying:",x),u.close(),!x)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Jv{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return cd(this.L.delete())}}class Lp extends Ne{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Au(n){return"IndexedDbTransactionError"===n.name}class WC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cd(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),cd(this.store.add(e))}get(e){return cd(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),cd(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),cd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.W(o,(c,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,c)=>{o.onerror=m=>{c(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}J(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(u,c,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}Z(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const c=Xv(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}W(e,t){const r=[];return new re((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const w=new Jv(m),b=t(m.primaryKey,m.value,w);if(b instanceof re){const x=b.catch(N=>(w.done(),re.reject(N)));r.push(x)}w.isDone?o():null===w.K?m.continue():m.continue(w.K)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cd(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Xv(r.target.error);t(o)}})}let tI=!1;function Xv(n){const e=Oo.S((0,un.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tI||(tI=!0,setTimeout(()=>{throw r},0)),r}}return n}class ZC{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Au(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Tu(r)}yield t.et(6e4)}))}}class KC{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ke("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,o).next(m=>{o-=m,r.add(c)});u=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(o,u)).next(m=>(ke("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,u)=>{const c=XE(u);Qv(c,r)>0&&(r=c)}),new ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Cs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Vp(n){return null==n}function Lh(n){return 0===n&&1/n==-1/0}function e0(n){return"number"==typeof n&&Number.isInteger(n)&&!Lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=t0(e)),e=YC(n.get(t),e);return t0(e)}function YC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function t0(n){return n+"\x01\x01"}function Na(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&nt(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:nt()}u=c+2}return new sn(r)}const nI=["userId","batchId"];function Jm(n,e){return[n,Si(e)]}function Xm(n,e,t){return[n,Si(e),t]}const n0={},rI=["prefixPath","collectionGroup","readTime","documentId"],r0=["prefixPath","collectionGroup","documentId"],QC=["collectionGroup","readTime","prefixPath","documentId"],JC=["canonicalId","targetId"],s0=["targetId","path"],XC=["path","targetId"],iI=["collectionId","parent"],eb=["indexId","uid"],sI=["uid","sequenceNumber"],tb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oI=["indexId","uid","orderedDocumentKey"],fS=["userId","collectionPath","documentId"],nb=["userId","collectionPath","largestBatchId"],ey=["userId","collectionGroup","largestBatchId"],aI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vh=[...aI,"documentOverlays"],Uh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uI=Uh,pS=[...uI,"indexConfiguration","indexState","indexEntries"];class ty extends eI{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Ke(n);return Oo.M(t.ht,e)}function lI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mn{constructor(e,t){this.comparator=e,this.root=t||Fr.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Up(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Up(this.root,e,this.comparator,!1)}getReverseIterator(){return new Up(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Up(this.root,e,this.comparator,!0)}}class Up{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Fr.RED,this.left=null!=o?o:Fr.EMPTY,this.right=null!=u?u:Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Fr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Fr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Fr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bh(this.data.getIterator())}getIteratorFrom(e){return new Bh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class Bh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jh(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new Cn(cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class o0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw"undefined"!=typeof DOMException&&o instanceof DOMException?new o0("Invalid base64 string: "+o):o}}(e);return new Lr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const a0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ql(n){if(ct(!!n),"string"==typeof n){let e=0;const t=a0.exec(n);if(ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mr(n.seconds),nanos:mr(n.nanos)}}function mr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Su(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function ny(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xu(n){const e=n.mapValue.fields.__previous_value__;return ny(e)?xu(e):e}function $h(n){const e=ql(n.mapValue.fields.__local_write_time__.timestampValue);return new Un(e.seconds,e.nanos)}class Hh{constructor(e,t,r,o,u,c,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class dd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dd&&e.projectId===this.projectId&&e.database===this.database}}const Mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ry={nullValue:"NULL_VALUE"};function hd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ny(n)?4:zh(n)?9007199254740991:10:nt()}function Po(n,e){if(n===e)return!0;const t=hd(n);if(t!==hd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $h(n).isEqual($h(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ql(r.timestampValue),c=ql(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Su(n.bytesValue).isEqual(Su(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return mr(r.geoPointValue.latitude)===mr(o.geoPointValue.latitude)&&mr(r.geoPointValue.longitude)===mr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return mr(r.integerValue)===mr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=mr(r.doubleValue),c=mr(o.doubleValue);return u===c?Lh(u)===Lh(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return kh(n.arrayValue.values||[],e.arrayValue.values||[],Po);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(lI(u)!==lI(c))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===c[m]||!Po(u[m],c[m])))return!1;return!0}(n,e);default:return nt()}var o}function iy(n,e){return void 0!==(n.values||[]).find(t=>Po(t,e))}function Ru(n,e){if(n===e)return 0;const t=hd(n),r=hd(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=mr(o.integerValue||o.doubleValue),m=mr(u.integerValue||u.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return sy(n.timestampValue,e.timestampValue);case 4:return sy($h(n),$h(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Su(o),m=Su(u);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),m=u.split("/");for(let w=0;w<c.length&&w<m.length;w++){const b=Nt(c[w],m[w]);if(0!==b)return b}return Nt(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Nt(mr(o.latitude),mr(u.latitude));return 0!==c?c:Nt(mr(o.longitude),mr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],m=u.values||[];for(let w=0;w<c.length&&w<m.length;++w){const b=Ru(c[w],m[w]);if(b)return b}return Nt(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Mu.mapValue&&u===Mu.mapValue)return 0;if(o===Mu.mapValue)return 1;if(u===Mu.mapValue)return-1;const c=o.fields||{},m=Object.keys(c),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let x=0;x<m.length&&x<b.length;++x){const N=Nt(m[x],b[x]);if(0!==N)return N;const H=Ru(c[m[x]],w[b[x]]);if(0!==H)return H}return Nt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function sy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=ql(n),r=ql(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function Gh(n){return u0(n)}function u0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ql(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Su(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=u0(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const m of o)c?c=!1:u+=",",u+=`${m}:${u0(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function fd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l0(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function dI(n){return!!n&&"nullValue"in n}function hI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ay(n){return!!n&&"mapValue"in n}function jp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zh(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fI(n){return"nullValue"in n?ry:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fd(dd.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function pI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fd(dd.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Mu:nt()}function c0(n,e){const t=Ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function d0(n,e){const t=Ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ay(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jp(t)}setAll(e){let t=cr.emptyPath(),r={},o=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=jp(c):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());ay(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];ay(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){zl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Kr(jp(this.value))}}function h0(n){const e=[];return zl(n.fields,(t,r)=>{const o=new cr([t]);if(ay(r)){const u=h0(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Yi(e)}class Bn{constructor(e,t,r,o,u,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Bn(e,0,ht.min(),ht.min(),ht.min(),Kr.empty(),0)}static newFoundDocument(e,t,r,o){return new Bn(e,1,t,ht.min(),r,o,0)}static newNoDocument(e,t){return new Bn(e,2,t,ht.min(),ht.min(),Kr.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,ht.min(),ht.min(),Kr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}function gI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(c.referenceValue),t.key):Ru(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function mI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Po(n.position[t],e.position[t]))return!1;return!0}class qh{constructor(e,t="asc"){this.field=e,this.dir=t}}function ib(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Wh{}class en extends Wh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new uy(e,t,r):"array-contains"===t?new vI(e,r):"in"===t?new ly(e,r):"not-in"===t?new wI(e,r):"array-contains-any"===t?new ab(e,r):new en(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new sb(e,r):new ob(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ru(t,this.value)):null!==t&&hd(this.value)===hd(t)&&this.matchesComparison(Ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dn extends Wh{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new dn(e,t)}matches(e){return Qi(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Qi(n){return"and"===n.op}function f0(n){return"or"===n.op}function $p(n){return Zh(n)&&Qi(n)}function Zh(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function p0(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+Gh(n.value);if($p(n))return n.filters.map(e=>p0(e)).join(",");{const e=n.filters.map(t=>p0(t)).join(",");return`${n.op}(${e})`}}function yI(n,e){return n instanceof en?(t=n,(r=e)instanceof en&&t.op===r.op&&t.field.isEqual(r.field)&&Po(t.value,r.value)):n instanceof dn?function(t,r){return r instanceof dn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,c)=>o&&yI(u,r.filters[c]),!0)}(n,e):void nt();var t,r}function _I(n,e){const t=n.filters.concat(e);return dn.create(t,n.op)}function Hp(n){return n instanceof en?`${(e=n).field.canonicalString()} ${e.op} ${Gh(e.value)}`:n instanceof dn?function(e){return e.op.toString()+" {"+e.getFilters().map(Hp).join(" ,")+"}"}(n):"Filter";var e}class uy extends en{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class sb extends en{constructor(e,t){super(e,"in",t),this.keys=g0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ob extends en{constructor(e,t){super(e,"not-in",t),this.keys=g0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function g0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class vI extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&iy(t.arrayValue,this.value)}}class ly extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&iy(this.value.arrayValue,t)}}class wI extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(iy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!iy(this.value.arrayValue,t)}}class ab extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>iy(this.value.arrayValue,r))}}class ub{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.dt=null}}function EI(n,e=null,t=[],r=[],o=null,u=null,c=null){return new ub(n,e,t,r,o,u,c)}function Ou(n){const e=Ke(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>p0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Vp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gh(r)).join(",")),e.dt=t}return e.dt}function pd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ib(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mI(n.startAt,e.startAt)&&mI(n.endAt,e.endAt)}function Gp(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Kh(n,e){return n.filters.filter(t=>t instanceof en&&t.field.isEqual(e))}function cy(n,e,t){let r=ry,o=!0;for(const u of Kh(n,e)){let c=ry,m=!0;switch(u.op){case"<":case"<=":c=fI(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=ry}c0({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];c0({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function II(n,e,t){let r=Mu,o=!0;for(const u of Kh(n,e)){let c=Mu,m=!0;switch(u.op){case">=":case">":c=pI(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Mu}d0({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];d0({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class Pu{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function DI(n,e,t,r,o,u,c,m){return new Pu(n,e,t,r,o,u,c,m)}function Yh(n){return new Pu(n)}function m0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function zp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function y0(n){return null!==n.collectionGroup}function Wl(n){const e=Ke(n);if(null===e.wt){e.wt=[];const t=qp(e),r=zp(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new qh(t)),e.wt.push(new qh(cr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new qh(cr.keyField(),u))}}}return e.wt}function xi(n){const e=Ke(n);if(!e._t)if("F"===e.limitType)e._t=EI(e.path,e.collectionGroup,Wl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Wl(e))t.push(new qh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Nu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Nu(e.startAt.position,e.startAt.inclusive):null;e._t=EI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function _0(n,e){e.getFirstInequalityField(),qp(n);const t=n.filters.concat([e]);return new Pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wp(n,e,t){return new Pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qh(n,e){return pd(xi(n),xi(e))&&n.limitType===e.limitType}function CI(n){return`${Ou(xi(n))}|lt:${n.limitType}`}function dy(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Hp(r)).join(", ")}]`),Vp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gh(r)).join(",")),`Target(${t})`}(xi(n))}; limitType=${n.limitType})`}function Zp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Wl(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const m=gI(o,u,c);return o.inclusive?m<=0:m<0}(t.startAt,Wl(t),r)||t.endAt&&!function(o,u,c){const m=gI(o,u,c);return o.inclusive?m>=0:m>0}(t.endAt,Wl(t),r)));var t,r}function Mi(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gd(n){return(e,t)=>{let r=!1;for(const o of Wl(n)){const u=lb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function lb(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(o,u,c){const m=u.data.field(o),w=c.data.field(o);return null!==m&&null!==w?Ru(m,w):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}class ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}const gS=new Mn(Ze.comparator);function Yr(){return gS}const bI=new Mn(Ze.comparator);function md(...n){let e=bI;for(const t of n)e=e.insert(t.key,t);return e}function TI(n){let e=bI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ko(){return Kp()}function AI(){return Kp()}function Kp(){return new ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const v0=new Mn(Ze.comparator),SI=new Cn(Ze.comparator);function Ht(...n){let e=SI;for(const t of n)e=e.add(t);return e}const hy=new Cn(Nt);function Yp(){return hy}function cb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function w0(n){return{integerValue:""+n}}function xI(n,e){return e0(e)?w0(e):cb(n,e)}class Qp{constructor(){this._=void 0}}function fy(n,e,t){return n instanceof Zl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ny(o)&&(o=xu(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Fu?db(n,e):n instanceof yd?NI(n,e):function(r,o){const u=RI(r,o),c=E0(u)+E0(r.gt);return l0(u)&&l0(r.gt)?w0(c):cb(r.serializer,c)}(n,e)}function MI(n,e,t){return n instanceof Fu?db(n,e):n instanceof yd?NI(n,e):t}function RI(n,e){return n instanceof _d?l0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Zl extends Qp{}class Fu extends Qp{constructor(e){super(),this.elements=e}}function db(n,e){const t=OI(e);for(const r of n.elements)t.some(o=>Po(o,r))||t.push(r);return{arrayValue:{values:t}}}class yd extends Qp{constructor(e){super(),this.elements=e}}function NI(n,e){let t=OI(e);for(const r of n.elements)t=t.filter(o=>!Po(o,r));return{arrayValue:{values:t}}}class _d extends Qp{constructor(e,t){super(),this.serializer=e,this.gt=t}}function E0(n){return mr(n.integerValue||n.doubleValue)}function OI(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jh{constructor(e,t){this.field=e,this.transform=t}}class hb{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class py{}function I0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Xp(n.key,Wn.none()):new ef(n.key,n.data,Wn.none());{const t=n.data,r=Kr.empty();let o=new Cn(cr.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),o=o.add(u)}return new Kl(n.key,r,new Yi(o.toArray()),Wn.none())}}function kI(n,e,t){n instanceof ef?function(r,o,u){const c=r.value.clone(),m=fb(r.fieldTransforms,o,u.transformResults);c.setAll(m),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Kl?function(r,o,u){if(!Jp(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=fb(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(D0(r)),m.setAll(c),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Xh(n,e,t,r){return n instanceof ef?function(o,u,c,m){if(!Jp(o.precondition,u))return c;const w=o.value.clone(),b=pb(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Kl?function(o,u,c,m){if(!Jp(o.precondition,u))return c;const w=pb(o.fieldTransforms,m,u),b=u.data;return b.setAll(D0(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(n,e,t,r):(c=t,Jp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function FI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=RI(r.transform,o||null);null!=u&&(null===t&&(t=Kr.empty()),t.set(r.field,u))}return t||null}function LI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kh(t,r,(o,u)=>function PI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Fu&&r instanceof Fu||t instanceof yd&&r instanceof yd?kh(t.elements,r.elements,Po):t instanceof _d&&r instanceof _d?Po(t.gt,r.gt):t instanceof Zl&&r instanceof Zl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ef extends py{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Kl extends py{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function D0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fb(n,e,t){const r=new Map;ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,MI(c,m,t[o]))}return r}function pb(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,fy(u,c,e))}return r}class Xp extends py{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VI extends py{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&kI(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=AI();return this.mutations.forEach(o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const w=I0(c,m);null!==w&&r.set(o.key,w),c.isValidDocument()||c.convertToNoDocument(ht.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&kh(this.mutations,e.mutations,(t,r)=>LI(t,r))&&kh(this.baseMutations,e.baseMutations,(t,r)=>LI(t,r))}}class BI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ct(e.mutations.length===r.length);let o=v0;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new BI(e,t,r,o)}}class jI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gy{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vr,nn;function my(n){switch(n){default:return nt();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function C0(n){if(void 0===n)return lr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Vr.OK:return ue.OK;case Vr.CANCELLED:return ue.CANCELLED;case Vr.UNKNOWN:return ue.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return ue.INTERNAL;case Vr.UNAVAILABLE:return ue.UNAVAILABLE;case Vr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Vr.NOT_FOUND:return ue.NOT_FOUND;case Vr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Vr.ABORTED:return ue.ABORTED;case Vr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Vr.DATA_LOSS:return ue.DATA_LOSS;default:return nt()}}(nn=Vr||(Vr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class yy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return b0}static getOrCreateInstance(){return null===b0&&(b0=new yy),b0}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let b0=null;function _y(){return new TextEncoder}const $I=new Ph([4294967295,4294967295],0);function HI(n){const e=_y().encode(n),t=new WE;return t.update(e),new Uint8Array(t.digest())}function T0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ph([t,r],0),new Ph([o,u],0)]}class GI{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eg(`Invalid padding: ${t}`);if(r<0)throw new eg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new eg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new eg(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ph.fromNumber(this.It)}Et(e,t,r){let o=e.add(t.multiply(Ph.fromNumber(r)));return 1===o.compare($I)&&(o=new Ph([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=HI(e),[r,o]=T0(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,o,u);if(!this.At(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new GI(u,o,t);return r.forEach(m=>c.insert(m)),c}insert(e){if(0===this.It)return;const t=HI(e),[r,o]=T0(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,o,u);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class eg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tg(ht.min(),o,new Mn(Nt),Yr(),Ht())}}class vd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vd(r,t,Ht(),Ht(),Ht())}}class vy{constructor(e,t,r,o){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=o}}class gb{constructor(e,t){this.targetId=e,this.Vt=t}}class mb{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class yb{constructor(){this.St=0,this.Dt=qI(),this.Ct=Lr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ht(),t=Ht(),r=Ht();return this.Dt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new vd(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=qI()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _b{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Yr(),this.zt=zI(),this.Wt=new Mn(Nt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,o)=>{this.te(o)&&t(o)})}ne(e){var t;const r=e.targetId,o=e.Vt.count,u=this.se(r);if(u){const c=u.target;if(Gp(c))if(0===o){const m=new Ze(c.path);this.Yt(r,m,Bn.newNoDocument(m,ht.min()))}else ct(1===o);else{const m=this.ie(r);if(m!==o){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=yy.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,x,N){var H,W,De,Le,He,_t;const St={localCacheCount:x,existenceFilterCount:N.count},bt=N.unchangedNames;return bt&&(St.bloomFilter={applied:0===b,hashCount:null!==(H=null==bt?void 0:bt.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(Le=null===(De=null===(W=null==bt?void 0:bt.bits)||void 0===W?void 0:W.bitmap)||void 0===De?void 0:De.length)&&void 0!==Le?Le:0,padding:null!==(_t=null===(He=null==bt?void 0:bt.bits)||void 0===He?void 0:He.padding)&&void 0!==_t?_t:0}),St}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:o}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:c=0},hashCount:m=0}=r;let w,b;try{w=Su(u).toUint8Array()}catch(x){if(x instanceof o0)return Ds("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{b=new GI(w,c,m)}catch(x){return Ds(x instanceof eg?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return 0===b.It?1:o!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const c=this.Gt.ue(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),o++)}),o}ce(e){const t=new Map;this.Qt.forEach((u,c)=>{const m=this.se(c);if(m){if(u.current&&Gp(m.target)){const w=new Ze(m.target.path);null!==this.jt.get(w)||this.ae(c,w)||this.Yt(c,w,Bn.newNoDocument(w,e))}u.Mt&&(t.set(c,u.Ot()),u.Ft())}});let r=Ht();this.zt.forEach((u,c)=>{let m=!0;c.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,c)=>c.setReadTime(e));const o=new tg(e,t,this.Wt,this.jt,r);return this.jt=Yr(),this.zt=zI(),this.Wt=new Mn(Nt),o}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const o=this.Zt(e);this.ae(e,t)?o.Bt(t,1):o.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new yb,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Cn(Nt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new yb),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function zI(){return new Mn(Ze.comparator)}function qI(){return new Mn(Ze.comparator)}const yS={asc:"ASCENDING",desc:"DESCENDING"},vb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A0={and:"AND",or:"OR"};class wb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bs(n,e){return n.useProto3Json||Vp(e)?e:{value:e}}function tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wy(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Eb(n,e){return tf(n,e.toTimestamp())}function yr(n){return ct(!!n),ht.fromTimestamp(function(e){const t=ql(e);return new Un(t.seconds,t.nanos)}(n))}function ng(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function S0(n){const e=sn.fromString(n);return ct(Dy(e)),e}function nf(n,e){return ng(n.databaseId,e.path)}function Oa(n,e){const t=S0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(ZI(t))}function Ey(n,e){return ng(n.databaseId,e)}function WI(n){const e=S0(n);return 4===e.length?sn.emptyPath():ZI(e)}function rg(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZI(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Iy(n,e,t){return{name:nf(n,e),fields:t.value.mapValue.fields}}function Yl(n,e,t){const r=Oa(n,e.name),o=yr(e.updateTime),u=e.createTime?yr(e.createTime):ht.min(),c=new Kr({mapValue:{fields:e.fields}}),m=Bn.newFoundDocument(r,o,u,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function ig(n,e){let t;if(e instanceof ef)t={update:Iy(n,e.key,e.value)};else if(e instanceof Xp)t={delete:nf(n,e.key)};else if(e instanceof Kl)t={update:Iy(n,e.key,e.data),updateMask:O0(e.fieldMask)};else{if(!(e instanceof VI))return nt();t={verify:nf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Zl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof yd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof _d)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Eb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function QI(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Wn.updateTime(yr(o.updateTime)):void 0!==o.exists?Wn.exists(o.exists):Wn.none():Wn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let m=null;"setToServerValue"in c?(ct("REQUEST_TIME"===c.setToServerValue),m=new Zl):"appendMissingElements"in c?m=new Fu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new yd(c.removeAllFromArray.values||[]):"increment"in c?m=new _d(u,c.increment):nt();const w=cr.fromServerFormat(c.fieldPath);return new Jh(w,m)}(n,o)):[];var o;if(e.update){const o=Oa(n,e.update.name),u=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Yi((e.updateMask.fieldPaths||[]).map(b=>cr.fromServerFormat(b)));return new Kl(o,u,c,t,r)}return new ef(o,u,t,r)}if(e.delete){const o=Oa(n,e.delete);return new Xp(o,t)}if(e.verify){const o=Oa(n,e.verify);return new VI(o,t)}return nt()}function JI(n,e){return{documents:[Ey(n,e.path)]}}function x0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Ey(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ey(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return N0(dn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Ql((x=b).field),direction:_S(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=bs(n,e.limit);var m,w;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function M0(n){let e=WI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ct(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=function(x){const N=XI(x);return N instanceof dn&&$p(N)?N.getFilters():[N]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(x=>{return new qh(rf((N=x).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,Vp(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new Nu((x=t.startAt).values||[],!!x.before));let b=null;return t.endAt&&(b=function(x){return new Nu(x.values||[],!x.before)}(t.endAt)),DI(e,o,c,u,m,"F",w,b)}function XI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rf(e.unaryFilter.field);return en.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=rf(e.unaryFilter.field);return en.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rf(e.unaryFilter.field);return en.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=rf(e.unaryFilter.field);return en.create(u,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):void 0!==n.fieldFilter?en.create(rf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return dn.create(e.compositeFilter.filters.map(t=>XI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return nt()}}(e.compositeFilter.op))}(n):nt();var e}function _S(n){return yS[n]}function R0(n){return vb[n]}function eD(n){return A0[n]}function Ql(n){return{fieldPath:n.canonicalString()}}function rf(n){return cr.fromServerFormat(n.fieldPath)}function N0(n){return n instanceof en?function(e){if("=="===e.op){if(hI(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NAN"}};if(dI(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hI(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NAN"}};if(dI(e.value))return{unaryFilter:{field:Ql(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(e.field),op:R0(e.op),value:e.value}}}(n):n instanceof dn?function(e){const t=e.getFilters().map(r=>N0(r));return 1===t.length?t[0]:{compositeFilter:{op:eD(e.op),filters:t}}}(n):nt()}function O0(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dy(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Pa{constructor(e,t,r,o,u=ht.min(),c=ht.min(),m=Lr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new Pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tD{constructor(e){this.fe=e}}function P0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Cy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:nf(o=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:tf(o,u.version.toTimestamp()),createTime:tf(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wd(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:wd(e.version)}}var o,u;return r}function Cy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sf(n){const e=new Un(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function of(n,e){const t=(e.baseMutations||[]).map(u=>QI(n.fe,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>QI(n.fe,u)),o=Un.fromMillis(e.localWriteTimeMs);return new UI(e.batchId,o,t,r)}function af(n){const e=sf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sf(n.lastLimboFreeSnapshotVersion):ht.min();let r;var o;return void 0!==n.query.documents?(ct(1===(o=n.query).documents.length),r=xi(Yh(WI(o.documents[0])))):r=xi(M0(n.query)),new Pa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function rD(n,e){const t=wd(e.snapshotVersion),r=wd(e.lastLimboFreeSnapshotVersion);let o;o=Gp(e.target)?JI(n.fe,e.target):x0(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ou(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function k0(n){const e=M0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wp(e,e.limit,"L"):e}function F0(n,e){return new jI(e.largestBatchId,QI(n.fe,e.overlayMutation))}function Cb(n,e){const t=e.path.lastSegment();return[n,Si(e.path.popLast()),t]}function bb(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:wd(r.readTime),documentKey:Si(r.documentKey.path),largestBatchId:r.largestBatchId}}class vS{getBundleMetadata(e,t){return Tb(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:sf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Tb(e).put({bundleId:(r=t).id,createTime:wd(yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ab(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:k0(o.bundledQuery),readTime:sf(o.readTime)};var o})}saveNamedQuery(e,t){return Ab(e).put({name:(r=t).name,readTime:wd(yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Tb(n){return Zr(n,"bundles")}function Ab(n){return Zr(n,"namedQueries")}class by{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new by(e,t.uid||"")}getOverlay(e,t){return Jl(e).get(Cb(this.userId,t)).next(r=>r?F0(this.serializer,r):null)}getOverlays(e,t){const r=ko();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const m=new jI(t,c);o.push(this.we(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Si(c.getCollectionPath())));const u=[];return o.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Jl(e).J("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ko(),u=Si(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Jl(e).j("collectionPathOverlayIndex",c).next(m=>{for(const w of m){const b=F0(this.serializer,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ko();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jl(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,x)=>{const N=F0(this.serializer,b);u.size()<o||N.largestBatchId===c?(u.set(N.getKey(),N),c=N.largestBatchId):x.done()}).next(()=>u)}we(e,t){return Jl(e).put(function(r,o,u){const[c,m,w]=Cb(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ig(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function Jl(n){return Zr(n,"documentOverlays")}class Ed{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(mr(e.integerValue));else if("doubleValue"in e){const r=mr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Lh(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Su(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?zh(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):nt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const o of Object.keys(r))this.Te(o,t),this.me(r[o],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const o of r)this.me(o,t)}ve(e,t){this.ye(t,37),Ze.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Sb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function L0(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Sb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ed.Ve=new Ed;class Id{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const o=t.codePointAt(0);this.De(240|o>>>18),this.De(128|63&o>>>12),this.De(128|63&o>>>6),this.De(128|63&o)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const o=t.codePointAt(0);this.Ne(240|o>>>18),this.Ne(128|63&o>>>12),this.Ne(128|63&o>>>6),this.Ne(128|63&o)}}this.ke()}Oe(e){const t=this.Fe(e),r=L0(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Le(e){const t=this.Fe(e),r=L0(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class iD{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class V0{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Dd{constructor(){this.je=new Id,this.ze=new iD(this.je),this.We=new V0(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Cd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Cd(this.indexId,this.documentKey,this.arrayValue,r)}}function ka(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ty(n.arrayValue,e.arrayValue),0!==t?t:(t=Ty(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function Ty(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ay{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=Kv(e);if(void 0!==t&&!this.en(t))return!1;const r=ld(e);let o=new Set,u=0,c=0;for(;u<r.length&&this.en(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!o.has(this.Ze.field.canonicalString())){const m=r[u];if(!this.nn(this.Ze,m)||!this.sn(this.Ye[c++],m))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.Ye.length||!this.sn(this.Ye[c++],m))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xb(n){var e,t;if(ct(n instanceof en||n instanceof dn),n instanceof en){if(n instanceof ly){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>en.create(n.field,"==",u)))||[];return dn.create(o,"or")}return n}const r=n.filters.map(o=>xb(o));return dn.create(r,n.op)}function wS(n){if(0===n.getFilters().length)return[];const e=B0(xb(n));return ct(U0(e)),sD(e)||oD(e)?[e]:e.getFilters()}function sD(n){return n instanceof en}function oD(n){return n instanceof dn&&$p(n)}function U0(n){return sD(n)||oD(n)||function(e){if(e instanceof dn&&f0(e)){for(const t of e.getFilters())if(!sD(t)&&!oD(t))return!1;return!0}return!1}(n)}function B0(n){if(ct(n instanceof en||n instanceof dn),n instanceof en)return n;if(1===n.filters.length)return B0(n.filters[0]);const e=n.filters.map(r=>B0(r));let t=dn.create(e,n.op);return t=Sy(t),U0(t)?t:(ct(t instanceof dn),ct(Qi(t)),ct(t.filters.length>1),t.filters.reduce((r,o)=>j0(r,o)))}function j0(n,e){let t;return ct(n instanceof en||n instanceof dn),ct(e instanceof en||e instanceof dn),t=n instanceof en?e instanceof en?dn.create([n,e],"and"):aD(n,e):e instanceof en?aD(e,n):function(r,o){if(ct(r.filters.length>0&&o.filters.length>0),Qi(r)&&Qi(o))return _I(r,o.getFilters());const u=f0(r)?r:o,c=f0(r)?o:r,m=u.filters.map(w=>j0(w,c));return dn.create(m,"or")}(n,e),Sy(t)}function aD(n,e){if(Qi(e))return _I(e,n.getFilters());{const t=e.filters.map(r=>j0(n,r));return dn.create(t,"or")}}function Sy(n){if(ct(n instanceof en||n instanceof dn),n instanceof en)return n;const e=n.getFilters();if(1===e.length)return Sy(e[0]);if(Zh(n))return n;const t=e.map(o=>Sy(o)),r=[];return t.forEach(o=>{o instanceof en?r.push(o):o instanceof dn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:dn.create(r,n.op)}class uD{constructor(){this.rn=new xy}addToCollectionParentIndex(e,t){return this.rn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ps.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class xy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Cn(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Cn(sn.comparator)).toArray()}}const sg=new Uint8Array(0);class Mb{constructor(e,t){this.user=e,this.databaseId=t,this.on=new xy,this.un=new ku(r=>Ou(r),(r,o)=>pd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Si(o)};return lD(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[QE(t),""],!1,!0);return lD(e).j(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Na(c.parent))}return r})}addFieldIndex(e,t){const r=lf(e),o={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete o.indexId;const u=r.add(o);if(t.indexState){const c=My(e);return u.next(m=>{c.put(bb(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=lf(e),o=My(e),u=uf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=uf(e);let o=!0;const u=new Map;return re.forEach(this.cn(t),c=>this.an(e,c).next(m=>{o&&(o=!!m),u.set(c,m)})).next(()=>{if(o){let c=Ht();const m=[];return re.forEach(u,(w,b)=>{var x;ke("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(bt=>`${bt.fieldPath}:${bt.kind}`).join(",")}`} to execute ${Ou(t)}`);const N=function(bt,jt){const Xt=Kv(jt);if(void 0===Xt)return null;for(const ln of Kh(bt,Xt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(b,w),H=function(bt,jt){const Xt=new Map;for(const ln of ld(jt))for(const ms of Kh(bt,ln.fieldPath))switch(ms.op){case"==":case"in":Xt.set(ln.fieldPath.canonicalString(),ms.value);break;case"not-in":case"!=":return Xt.set(ln.fieldPath.canonicalString(),ms.value),Array.from(Xt.values())}return null}(b,w),W=function(bt,jt){const Xt=[];let ln=!0;for(const ms of ld(jt)){const yg=0===ms.kind?cy(bt,ms.fieldPath,bt.startAt):II(bt,ms.fieldPath,bt.startAt);Xt.push(yg.value),ln&&(ln=yg.inclusive)}return new Nu(Xt,ln)}(b,w),De=function(bt,jt){const Xt=[];let ln=!0;for(const ms of ld(jt)){const yg=0===ms.kind?II(bt,ms.fieldPath,bt.endAt):cy(bt,ms.fieldPath,bt.endAt);Xt.push(yg.value),ln&&(ln=yg.inclusive)}return new Nu(Xt,ln)}(b,w),Le=this.hn(w,b,W),He=this.hn(w,b,De),_t=this.ln(w,b,H),St=this.fn(w.indexId,N,Le,W.inclusive,He,De.inclusive,_t);return re.forEach(St,bt=>r.H(bt,t.limit).next(jt=>{jt.forEach(Xt=>{const ln=Ze.fromSegments(Xt.documentKey);c.has(ln)||(c=c.add(ln),m.push(ln))})}))}).next(()=>m)}return re.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wS(dn.create(e.filters,"and")).map(r=>EI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,o,u,c,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const H=t?this.dn(t[N/b]):sg,W=this.wn(e,H,r[N%b],o),De=this._n(e,H,u[N%b],c),Le=m.map(He=>this.wn(e,H,He,!0));x.push(...this.createRange(W,De,Le))}return x}wn(e,t,r,o){const u=new Cd(e,Ze.empty(),t,r);return o?u:u.Je()}_n(e,t,r,o){const u=new Cd(e,Ze.empty(),t,r);return o?u.Je():u}an(e,t){const r=new Ay(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let c=null;for(const m of u)r.tn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;const o=this.cn(t);return re.forEach(o,u=>this.an(e,u).next(c=>{c?0!==r&&c.fields.length<function(m){let w=new Cn(cr.comparator),b=!1;for(const x of m.filters)for(const N of x.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const x of m.orderBy)x.field.isKeyField()||(w=w.add(x.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}mn(e,t){const r=new Dd;for(const o of ld(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.He(o.kind);Ed.Ve._e(u,c)}return r.Qe()}dn(e){const t=new Dd;return Ed.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Dd;return Ed.Ve._e(fd(this.databaseId,t),r.He(function(o){const u=ld(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let o=[];o.push(new Dd);let u=0;for(const c of ld(e)){const m=r[u++];for(const w of o)if(this.yn(t,c.fieldPath)&&Bp(m))o=this.pn(o,c,m);else{const b=w.He(c.kind);Ed.Ve._e(m,b)}}return this.In(o)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const w=new Dd;w.seed(m.Qe()),Ed.Ve._e(c,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof en&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lf(e),o=My(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{c.push(function(b,x){const N=x?new Fp(x.sequenceNumber,new ps(sf(x.readTime),new Ze(Na(x.documentKey)),x.largestBatchId)):Fp.empty(),H=b.fields.map(([W,De])=>new Zm(cr.fromServerFormat(W),De));return new kp(b.indexId,b.collectionGroup,H,N)}(m,w))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=lf(e),u=My(e);return this.Tn(e).next(c=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(bb(w.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,w=>this.En(e,o,w).next(b=>{const x=this.An(u,w);return b.isEqual(x)?re.resolve():this.vn(e,u,w,b,x)}))))})}Rn(e,t,r,o){return uf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,o){return uf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const o=uf(e);let u=new Cn(ka);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,m)=>{u=u.add(new Cd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Cn(ka);const o=this.mn(t,e);if(null==o)return r;const u=Kv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Bp(c))for(const m of c.arrayValue.values||[])r=r.add(new Cd(t.indexId,e.key,this.dn(m),o))}else r=r.add(new Cd(t.indexId,e.key,sg,o));return r}vn(e,t,r,o,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,w,b,x,N){const H=m.getIterator(),W=w.getIterator();let De=jh(H),Le=jh(W);for(;De||Le;){let He=!1,_t=!1;if(De&&Le){const St=b(De,Le);St<0?_t=!0:St>0&&(He=!0)}else null!=De?_t=!0:He=!0;He?(x(Le),Le=jh(W)):_t?(N(De),De=jh(H)):(De=jh(H),Le=jh(W))}}(o,u,ka,m=>{c.push(this.Rn(e,t,r,m))},m=>{c.push(this.Pn(e,t,r,m))}),re.waitFor(c)}Tn(e){let t=1;return My(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>ka(c,m)).filter((c,m,w)=>!m||0!==ka(c,w[m-1]));const o=[];o.push(e);for(const c of r){const m=ka(c,e),w=ka(c,t);if(0===m)o[0]=e.Je();else if(m>0&&w<0)o.push(c),o.push(c.Je());else if(w>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2){if(this.bn(o[c],o[c+1]))return[];u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,sg,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,sg,[]]))}return u}bn(e,t){return ka(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($0)}getMinOffset(e,t){return re.mapArray(this.cn(t),r=>this.an(e,r).next(o=>o||nt())).next($0)}}function lD(n){return Zr(n,"collectionParents")}function uf(n){return Zr(n,"indexEntries")}function lf(n){return Zr(n,"indexConfiguration")}function My(n){return Zr(n,"indexState")}function $0(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Qv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const Ry={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cD(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:c},(x,N,H)=>(m++,H.delete()));u.push(w.next(()=>{ct(1===m)}));const b=[];for(const x of t.mutations){const N=Xm(e,x.key.path,t.batchId);u.push(o.delete(N)),b.push(x.key)}return re.waitFor(u).next(()=>b)}function H0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class G0{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.Vn={}}static de(e,t,r,o){ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new G0(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xl(e).X({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=og(e),c=Xl(e);return c.add({}).next(m=>{ct("number"==typeof m);const w=new UI(m,t,r,o),b=function(H,W,De){const Le=De.baseMutations.map(_t=>ig(H.fe,_t)),He=De.mutations.map(_t=>ig(H.fe,_t));return{userId:W,batchId:De.batchId,localWriteTimeMs:De.localWriteTime.toMillis(),baseMutations:Le,mutations:He}}(this.serializer,this.userId,w),x=[];let N=new Cn((H,W)=>Nt(H.canonicalString(),W.canonicalString()));for(const H of o){const W=Xm(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),x.push(c.put(b)),x.push(u.put(W,n0))}return N.forEach(H=>{x.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),re.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Xl(e).get(t).next(r=>r?(ct(r.userId===this.userId),of(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?re.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Vn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xl(e).X({index:"userMutationsIndex",range:o},(c,m,w)=>{m.userId===this.userId&&(ct(m.batchId>=r),u=of(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xl(e).j("userMutationsIndex",t).next(r=>r.map(o=>of(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return og(e).X({range:o},(c,m,w)=>{const[b,x,N]=c,H=Na(x);if(b===this.userId&&t.path.isEqual(H))return Xl(e).get(N).next(W=>{if(!W)throw nt();ct(W.userId===this.userId),u.push(of(this.serializer,W))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(Nt);const o=[];return t.forEach(u=>{const c=Jm(this.userId,u.path),m=IDBKeyRange.lowerBound(c),w=og(e).X({range:m},(b,x,N)=>{const[H,W,De]=b,Le=Na(W);H===this.userId&&u.path.isEqual(Le)?r=r.add(De):N.done()});o.push(w)}),re.waitFor(o).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Jm(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Cn(Nt);return og(e).X({range:c},(w,b,x)=>{const[N,H,W]=w,De=Na(H);N===this.userId&&r.isPrefixOf(De)?De.length===o&&(m=m.add(W)):x.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Xl(e).get(u).next(c=>{if(null===c)throw nt();ct(c.userId===this.userId),r.push(of(this.serializer,c))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return cD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return og(e).X({range:r},(u,c,m)=>{if(u[0]===this.userId){const w=Na(u[1]);o.push(w)}else m.done()}).next(()=>{ct(0===o.length)})})}containsKey(e,t){return dD(e,this.userId,t)}xn(e){return Rb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dD(n,e,t){const r=Jm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return og(n).X({range:u,Y:!0},(m,w,b)=>{const[x,N,H]=m;x===e&&N===o&&(c=!0),b.done()}).next(()=>c)}function Xl(n){return Zr(n,"mutations")}function og(n){return Zr(n,"documentMutations")}function Rb(n){return Zr(n,"mutationQueues")}class cf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new cf(0)}static Mn(){return new cf(-1)}}class ES{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new cf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ht.fromTimestamp(new Un(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.On(e,o)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ag(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ag(e).X((c,m)=>{const w=af(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ag(e).X((r,o)=>{const u=af(o);t(u)})}$n(e){return hD(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return hD(e).put("targetGlobalKey",t)}Fn(e,t){return ag(e).put(rD(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ou(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ag(e).X({range:o,index:"queryTargetsIndex"},(c,m,w)=>{const b=af(m);pd(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=bd(e);return t.forEach(c=>{const m=Si(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=bd(e);return re.forEach(t,u=>{const c=Si(u.path);return re.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=bd(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=bd(e);let u=Ht();return o.X({range:r,Y:!0},(c,m,w)=>{const b=Na(c[1]),x=new Ze(b);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=Si(t.path),o=IDBKeyRange.bound([r],[QE(r)],!1,!0);let u=0;return bd(e).X({index:"documentTargetsIndex",Y:!0,range:o},([c,m],w,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}le(e,t){return ag(e).get(t).next(r=>r?af(r):null)}}function ag(n){return Zr(n,"targets")}function hD(n){return Zr(n,"targetGlobal")}function bd(n){return Zr(n,"targetDocuments")}function Nb([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class IS{constructor(e){this.Ln=e,this.buffer=new Cn(Nb),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Nb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ob{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Au(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Tu(r)}yield t.Qn(3e5)}))}}class i{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Cs.ct);const r=new IS(t);return this.jn.forEachTarget(e,o=>r.Kn(o.sequenceNumber)).next(()=>this.jn.Wn(e,o=>r.Kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Ry)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ry):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,o,u,c,m,w,b;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,c=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),qv()<=Fl.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-x}ms\n\tDetermined least recently used ${o} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-x}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class a{constructor(e,t){this.db=e,this.garbageCollector=function s(n,e){return new i(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,o)=>t(o))}addReference(e,t,r){return l(e,r)}removeReference(e,t,r){return l(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return l(e,t)}Xn(e,t){return function(r,o){let u=!1;return Rb(r).Z(c=>dD(r,c,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Yn(e,(c,m)=>{if(m<=t){const w=this.Xn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,ht.min()),bd(e).delete([0,Si(c.path)])))});o.push(w)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return l(e,t)}Yn(e,t){const r=bd(e);let o,u=Cs.ct;return r.X({index:"documentTargetsIndex"},([c,m],{path:w,sequenceNumber:b})=>{0===c?(u!==Cs.ct&&t(new Ze(Na(o)),u),u=b,o=w):u=Cs.ct}).next(()=>{u!==Cs.ct&&t(new Ze(Na(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function l(n,e){return bd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Si(e.path),sequenceNumber:r}));var r}class d{constructor(){this.changes=new ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class g{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return A(e).put(r)}removeEntry(e,t,r){return A(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Cy(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return A(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(M(t))},(o,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return A(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(M(t))},(o,u)=>{r={document:this.ts(t,u),size:H0(u)}}).next(()=>r)}getEntries(e,t){let r=Yr();return this.ns(e,t,(o,u)=>{const c=this.ts(o,u);r=r.insert(o,c)}).next(()=>r)}ss(e,t){let r=Yr(),o=new Mn(Ze.comparator);return this.ns(e,t,(u,c)=>{const m=this.ts(u,c);r=r.insert(u,m),o=o.insert(u,H0(c))}).next(()=>({documents:r,rs:o}))}ns(e,t,r){if(t.isEmpty())return re.resolve();let o=new Cn(j);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(M(o.first()),M(o.last())),c=o.getIterator();let m=c.getNext();return A(e).X({index:"documentKeyIndex",range:u},(w,b,x)=>{const N=Ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&j(m,N)<0;)r(m,null),m=c.getNext();m&&m.isEqual(N)&&(r(m,b),m=c.hasNext()?c.getNext():null),m?x.G(M(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),Cy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return A(e).j(IDBKeyRange.bound(c,m,!0)).next(w=>{let b=Yr();for(const x of w){const N=this.ts(Ze.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);N.isFoundDocument()&&(Zp(t,N)||o.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=Yr();const c=F(t,r),m=F(t,ps.max());return A(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(w,b,x)=>{const N=this.ts(Ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new I(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return C(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return C(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function nD(n,e){let t;if(e.document)t=Yl(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),o=sf(e.noDocument.readTime);t=Bn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Ze.fromSegments(e.unknownDocument.path),o=sf(e.unknownDocument.version);t=Bn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Un(r[0],r[1]);return ht.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ht.min()))return r}return Bn.newInvalidDocument(e)}}function _(n){return new g(n)}class I extends d{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ku(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Cn((u,c)=>Nt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),c.isValidDocument()){const w=P0(this.os.serializer,c);o=o.add(u.path.popLast()),r+=H0(w)-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=P0(this.os.serializer,c.convertToNoDocument(ht.min()));t.push(this.os.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:o})=>(o.forEach((u,c)=>{this.us.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function C(n){return Zr(n,"remoteDocumentGlobal")}function A(n){return Zr(n,"remoteDocumentsV14")}function M(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function F(n,e){const t=e.documentKey.path.toArray();return[n,Cy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function j(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Nt(t[u],r[u]),o)return o;return o=Nt(t.length,r.length),o||(o=Nt(t[t.length-2],r[r.length-2]),o||Nt(t[t.length-1],r[r.length-1]))}class K{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class we{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Xh(r.mutation,o,Yi.empty(),Un.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const o=ko();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let c=md();return u.forEach((m,w)=>{c=c.insert(m,w.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ko();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,o){let u=Yr();const c=Kp(),m=Kp();return t.forEach((w,b)=>{const x=r.get(b.key);o.has(b.key)&&(void 0===x||x.mutation instanceof Kl)?u=u.insert(b.key,b):void 0!==x?(c.set(b.key,x.mutation.getFieldMask()),Xh(x.mutation,b,x.mutation.getFieldMask(),Un.now())):c.set(b.key,Yi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,x)=>c.set(b,x)),t.forEach((b,x)=>{var N;return m.set(b,new K(x,null!==(N=c.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Kp();let o=new Mn((c,m)=>c-m),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let x=r.get(w)||Yi.empty();x=m.applyToLocalView(b,x),r.set(w,x);const N=(o.get(m.batchId)||Ht()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,x=w.value,N=AI();x.forEach(H=>{if(!u.has(H)){const W=I0(t.get(H),r.get(H));null!==W&&N.set(H,W),u=u.add(H)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,N))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):y0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(ko());let m=-1,w=u;return c.next(b=>re.forEach(b,(x,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(x)?re.resolve():this.remoteDocumentCache.getEntry(e,x).next(H=>{w=w.insert(x,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Ht())).next(x=>({batchId:m,changes:TI(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let o=md();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=md();return this.indexManager.getCollectionParents(e,o).next(c=>re.forEach(c,m=>{const w=(b=t,x=m.child(o),new Pu(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Bn.newInvalidDocument(b)))});let c=md();return u.forEach((m,w)=>{const b=o.get(m);void 0!==b&&Xh(b.mutation,w,Yi.empty(),Un.now()),Zp(t,w)&&(c=c.insert(m,w))}),c})}}class Ue{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return re.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:yr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:k0(r.bundledQuery),readTime:yr(r.readTime)}),re.resolve();var r}}class We{constructor(){this.overlays=new Mn(Ze.comparator),this.ls=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ko();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.we(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ls.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=ko(),u=t.length+1,c=new Ze(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Mn((b,x)=>b-x);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let x=u.get(b.largestBatchId);null===x&&(x=ko(),u=u.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const m=ko(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,x)=>m.set(b,x)),!(m.size()>=o)););return re.resolve(m)}we(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.ls.get(o.largestBatchId).delete(r.key);this.ls.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jI(t,r));let u=this.ls.get(t);void 0===u&&(u=Ht(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class ot{constructor(){this.fs=new Cn(ve.ds),this.ws=new Cn(ve._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ve(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ve(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ze(new sn([])),r=new ve(t,e),o=new ve(t,e+1),u=[];return this.ws.forEachInRange([r,o],c=>{this.ys(c),u.push(c.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ze(new sn([])),r=new ve(t,e),o=new ve(t,e+1);let u=Ht();return this.ws.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new ve(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ve{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ze.comparator(e.key,t.key)||Nt(e.As,t.As)}static _s(e,t){return Nt(e.As,t.As)||Ze.comparator(e.key,t.key)}}class yt{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Cn(ve.ds)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.vs;this.vs++;const c=new UI(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Rs=this.Rs.add(new ve(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.bs(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ve(t,0),o=new ve(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,o],c=>{const m=this.Ps(c.As);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(Nt);return t.forEach(o=>{const u=new ve(o,0),c=new ve(o,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,c],m=>{r=r.add(m.As)})}),re.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const c=new ve(new Ze(u),0);let m=new Cn(Nt);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w.As)),!0)},c),re.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const o=this.Ps(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return re.forEach(t.mutations,o=>{const u=new ve(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ve(t,0),o=this.Rs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Jt{constructor(e){this.Ds=e,this.docs=new Mn(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=Yr();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Bn.newInvalidDocument(o))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Yr();const c=t.path,m=new Ze(c.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:x}}=w.getNext();if(!c.isPrefixOf(b.path))break;b.path.length>c.length+1||Qv(XE(x),r)<=0||(o.has(x.key)||Zp(t,x))&&(u=u.insert(x.key,x.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,o){nt()}Cs(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yn(this)}getSize(e){return re.resolve(this.size)}}class yn extends d{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.os.addEntry(e,o)):this.os.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Ts{constructor(e){this.persistence=e,this.xs=new ku(t=>Ou(t),pd),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ot,this.targetCount=0,this.Ms=cf.kn()}forEachTarget(e,t){return this.xs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),re.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new cf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Fn(t),re.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.xs.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.ks.containsKey(t))}}class Lu{constructor(e,t){this.$s={},this.overlays={},this.Os=new Cs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Ts(this),this.indexManager=new uD,this.remoteDocumentCache=new Jt(r=>this.referenceDelegate.Ls(r)),this.serializer=new tD(t),this.qs=new Ue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new We,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new yt(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const o=new z0(this.Os.next());return this.referenceDelegate.Us(),r(o).next(u=>this.referenceDelegate.Ks(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Gs(e,t){return re.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class z0 extends eI{constructor(e){super(),this.currentSequenceNumber=e}}class df{constructor(e){this.persistence=e,this.Qs=new ot,this.js=null}static zs(e){return new df(e)}get Ws(){if(this.js)return this.js;throw nt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),re.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(o=>this.Ws.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ws,r=>{const o=Ze.fromPath(r);return this.Hs(e,o).next(u=>{u||t.removeEntry(o,ht.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return re.or([()=>re.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class q0{constructor(e){this.serializer=e}O(e,t,r,o){const u=new Qm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nI,{unique:!0}),m.createObjectStore("documentMutations"),Ny(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Ny(e)),c=c.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nI,{unique:!0});const x=w.store("mutations"),N=b.map(H=>x.put(H));return re.waitFor(N)})}(e,u))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Ys(u))),r<6&&o>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&o>=7&&(c=c.next(()=>this.Zs(u))),r<8&&o>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.ei(u))),r<11&&o>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:fS});w.createIndex("collectionPathOverlayIndex",nb,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",ey,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:rI});w.createIndex("documentKeyIndex",r0),w.createIndex("collectionGroupIndex",QC)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.si(e,u))),r<15&&o>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:eb}).createIndex("sequenceNumberIndex",sI,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:tb}).createIndex("documentKeyIndex",oI,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=H0(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>re.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(m=>re.forEach(m,w=>{ct(w.userId===u.userId);const b=of(this.serializer,w);return cD(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((c,m)=>{const w=new sn(c),b=[0,Si(w)];u.push(t.get(b).next(x=>x?re.resolve():t.put({targetId:0,path:Si(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:iI});const r=t.store("collectionParents"),o=new xy,u=c=>{if(o.add(c)){const m=c.lastSegment(),w=c.popLast();return r.put({collectionId:m,parent:Si(w)})}};return t.store("remoteDocuments").X({Y:!0},(c,m)=>{const w=new sn(c);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,m,w],b)=>{const x=Na(m);return u(x.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,o)=>{const u=af(o),c=rD(this.serializer,u);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,c)=>{const m=t.store("remoteDocumentsV14"),w=(b=c,b.document?new Ze(sn.fromString(b.document.name).popFirst(5)):b.noDocument?Ze.fromSegments(b.noDocument.path):b.unknownDocument?Ze.fromSegments(b.unknownDocument.path):nt()).path.toArray();var b;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(x))}).next(()=>re.waitFor(o))}si(e,t){const r=t.store("mutations"),o=_(this.serializer),u=new Lu(df.zs,this.serializer.fe);return r.j().next(c=>{const m=new Map;return c.forEach(w=>{var b;let x=null!==(b=m.get(w.userId))&&void 0!==b?b:Ht();of(this.serializer,w).keys().forEach(N=>x=x.add(N)),m.set(w.userId,x)}),re.forEach(m,(w,b)=>{const x=new Wr(b),N=by.de(this.serializer,x),H=u.getIndexManager(x),W=G0.de(x,this.serializer,H,u.referenceDelegate);return new we(o,W,N,H).recalculateAndSaveOverlaysForDocumentKeys(new ty(t,Cs.ct),w).next()})})}}function Ny(n){n.createObjectStore("targetDocuments",{keyPath:s0}).createIndex("documentTargetsIndex",XC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JC,{unique:!0}),n.createObjectStore("targetGlobal")}const ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lg{constructor(e,t,r,o,u,c,m,w,b,x,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=c,this.document=m,this.ri=b,this.oi=x,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!lg.D())throw new Ne(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new a(this,o),this.di=t+"main",this.serializer=new tD(w),this.wi=new Oo(this.di,this.ui,new q0(this.serializer)),this.Bs=new ES(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_(this.serializer),this.qs=new vS,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===x&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ue.FAILED_PRECONDITION,ug);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Cs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Au(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Td(e).get("owner").next(t=>re.resolve(this.Ri(t)))}Pi(e){return ff(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Zr(r,"clientMetadata");return o.j().next(u=>{const c=e.Si(u,18e5),m=u.filter(w=>-1===c.indexOf(w));return re.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?re.resolve(!0):Td(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ne(ue.FAILED_PRECONDITION,ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||ff(e).j().next(r=>void 0===this.Si(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ty(t,Cs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>ff(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return G0.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mb(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return by.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(c=this.ui)?pS:14===c?uI:13===c?Uh:12===c?Vh:11===c?aI:void nt();var c;let m;return this.wi.runTransaction(e,o,u,w=>(m=new ty(w,this.Os?this.Os.next():Cs.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ne(ue.FAILED_PRECONDITION,Km);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return Td(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ue.FAILED_PRECONDITION,ug)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Td(e).put("owner",t)}static D(){return Oo.D()}Ai(e){const t=Td(e);return t.get("owner").next(r=>this.Ri(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,un.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Td(n){return Zr(n,"owner")}function ff(n){return Zr(n,"clientMetadata")}function Pb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kb{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=o}static Li(e,t){let r=Ht(),o=Ht();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new kb(e,t.fromCache,r,o)}}class DS{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ki(e,t).next(u=>u||this.Gi(e,t,o,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(m0(t))return re.resolve(null);let r=xi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Wp(t,null,"F"),r=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Ht(...u);return this.Ui.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,c,w.readTime)?this.Ki(e,Wp(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,o){return m0(t)||o.isEqual(ht.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const c=this.ji(t,u);return this.zi(t,c,r,o)?this.Qi(e,t):(qv()<=Fl.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dy(t)),this.Wi(e,c,t,Yv(o,-1)))})}ji(e,t){let r=new Cn(gd(e));return t.forEach((o,u)=>{Zp(e,u)&&(r=r.add(u))}),r}zi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Qi(e,t){return qv()<=Fl.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",dy(t)),this.Ui.getDocumentsMatchingQuery(e,t,ps.min())}Wi(e,t,r,o){return this.Ui.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class zM{constructor(e,t,r,o){this.persistence=e,this.Hi=t,this.serializer=o,this.Ji=new Mn(Nt),this.Yi=new ku(u=>Ou(u),pd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new we(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function CS(n,e,t,r){return new zM(n,e,t,r)}function bS(n,e){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,Ee.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let w=Ht();for(const b of o){c.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}for(const b of u){m.push(b.batchId);for(const x of b.mutations)w=w.add(x.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:c,addedBatchIds:m}))})})}),Fb.apply(this,arguments)}function qM(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,m,w,b){const x=w.batch,N=x.keys();let H=re.resolve();return N.forEach(W=>{H=H.next(()=>b.getEntry(m,W)).next(De=>{const Le=w.docVersions.get(W);ct(null!==Le),De.version.compareTo(Le)<0&&(x.applyToRemoteDocument(De,w),De.isValidDocument()&&(De.setReadTime(w.commitVersion),b.addEntry(De)))})}),H.next(()=>c.mutationQueue.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=Ht();for(let w=0;w<c.mutationResults.length;++w)c.mutationResults[w].transformResults.length>0&&(m=m.add(c.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function TS(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function WM(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});o=t.Ji;const m=[];e.targetChanges.forEach((x,N)=>{const H=o.get(N);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,x.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,x.addedDocuments,N)));let W=H.withSequenceNumber(u.currentSequenceNumber);var De,Le,He;null!==e.targetMismatches.get(N)?W=W.withResumeToken(Lr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):x.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(x.resumeToken,r)),o=o.insert(N,W),Le=W,He=x,(0===(De=H).resumeToken.approximateByteSize()||Le.snapshotVersion.toMicroseconds()-De.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,W))});let w=Yr(),b=Ht();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,x))}),m.push(AS(u,c,e.documentUpdates).next(x=>{w=x.nr,b=x.sr})),!r.isEqual(ht.min())){const x=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(x)}return re.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=o,u))}function AS(n,e,t){let r=Ht(),o=Ht();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Yr();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(ht.min())?(e.removeEntry(m,w.readTime),c=c.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),c=c.insert(m,w)):ke("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:c,sr:o}})}function ZM(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oy(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Bs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Bs.allocateTargetId(r).next(c=>(o=new Pa(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ji.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Py(n,e,t){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,Ee.Z)(function*(n,e,t){const r=Ke(n),o=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Au(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(o.target)}),Lb.apply(this,arguments)}function fD(n,e,t){const r=Ke(n);let o=ht.min(),u=Ht();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,w,b){const x=Ke(m),N=x.Yi.get(b);return void 0!==N?re.resolve(x.Ji.get(N)):x.Bs.getTargetData(w,b)}(r,c,xi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?o:ht.min(),t?u:Ht())).next(m=>(MS(r,Mi(e),m),{documents:m,ir:u})))}function SS(n,e){const t=Ke(n),r=Ke(t.Bs),o=t.Ji.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(c=>c?c.target:null))}function xS(n,e){const t=Ke(n),r=t.Xi.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Zi.getAllFromCollectionGroup(o,e,Yv(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(MS(t,e,o),o))}function MS(n,e,t){let r=n.Xi.get(e)||ht.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function Vb(){return Vb=(0,Ee.Z)(function*(n,e,t,r){const o=Ke(n);let u=Ht(),c=Yr();for(const b of t){const x=e.rr(b.metadata.name);b.document&&(u=u.add(x));const N=e.ur(b);N.setReadTime(e.cr(b.metadata.readTime)),c=c.insert(x,N)}const m=o.Zi.newChangeBuffer({trackRemovals:!0}),w=yield Oy(o,(b=r,xi(Yh(sn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>AS(b,m,c).next(x=>(m.apply(b),x)).next(x=>o.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,x.nr,x.sr)).next(()=>x.nr)))}),Vb.apply(this,arguments)}function YM(n,e){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,Ee.Z)(function*(n,e,t=Ht()){const r=yield Oy(n,xi(k0(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=yr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Lr.EMPTY_BYTE_STRING,c);return o.Ji=o.Ji.insert(m.targetId,m),o.Bs.updateTargetData(u,m).next(()=>o.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>o.qs.saveNamedQuery(u,e))})}),Ub.apply(this,arguments)}function RS(n,e){return`firestore_clients_${n}_${e}`}function NS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Bb(n,e){return`firestore_targets_${n}_${e}`}class pD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static ar(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Ne(o.error.code,o.error.message))),c?new pD(e,t,o.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class W0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ne(r.error.code,r.error.message))),u?new W0(e,r.state,o):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Yp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=e0(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new gD(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jb{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jb(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $b{constructor(){this.activeTargetIds=Yp()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hb{constructor(e,t,r,o,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Mn(Nt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=RS(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new $b),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const o of t){if(o===e.wr)continue;const u=e.getItem(RS(e.persistenceKey,o));if(u){const c=gD.ar(o,u);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const o=e.br(r);o&&e.Vr(o)}for(const o of e.yr)e.mr(o);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Bb(this.persistenceKey,e));if(r){const o=W0.ar(e,r);o&&(t=o.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bb(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Cr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const o=t.Or(r.key);return t.Fr(o,null)}{const o=t.Br(r.key,r.newValue);if(o)return t.Fr(o.clientId,o)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const o=t.Lr(r.key,r.newValue);if(o)return t.qr(o)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const o=t.Ur(r.key,r.newValue);if(o)return t.Kr(o)}}else if(r.key===t.vr){if(null!==r.newValue){const o=t.br(r.newValue);if(o)return t.Vr(o)}}else if(r.key===t.Ir){const o=function(u){let c=Cs.ct;if(null!=u)try{const m=JSON.parse(u);ct("number"==typeof m),c=m}catch(m){lr("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);o!==Cs.ct&&t.sequenceNumberHandler(o)}else if(r.key===t.Rr){const o=t.Gr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const o=new pD(this.currentUser,e,t,r),u=NS(this.persistenceKey,this.currentUser,e);this.setItem(u,o.hr())}Cr(e){const t=NS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const o=Bb(this.persistenceKey,e),u=new W0(e,t,r);this.setItem(o,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return gD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),o=Number(r[1]);return pD.ar(new Wr(void 0!==r[2]?r[2]:null),o,t)}Ur(e,t){const r=this.Ar.exec(e),o=Number(r[1]);return W0.ar(o,t)}br(e){return jb.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),o=this.Sr(this.gr),u=this.Sr(r),c=[],m=[];return u.forEach(w=>{o.has(w)||c.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(c,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Yp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class OS{constructor(){this.Hr=new $b,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new $b,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QM{Yr(e){}shutdown(){}}class PS{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mD=null;function Gb(){return null===mD?mD=268435456+Math.round(2147483648*Math.random()):mD++,"0x"+mD.toString(16)}const JM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XM{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const gs="WebChannelConnection";class e1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,o,u){const c=Gb(),m=this.To(e,t);ke("RestConnection",`Sending RPC '${e}' ${c}:`,m,r);const w={};return this.Eo(w,o,u),this.Ao(e,m,w,r).then(b=>(ke("RestConnection",`Received RPC '${e}' ${c}: `,b),b),b=>{throw Ds("RestConnection",`RPC '${e}' ${c} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,o,u,c){return this.Io(e,t,r,o,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ra,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}To(e,t){return`${this.mo}/v1/${t}:${JM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,o){const u=Gb();return new Promise((c,m)=>{const w=new qE;w.setWithCredentials(!0),w.listenOnce(HE.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case $E.NO_ERROR:const x=w.getResponseJson();ke(gs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),c(x);break;case $E.TIMEOUT:ke(gs,`RPC '${e}' ${u} timed out`),m(new Ne(ue.DEADLINE_EXCEEDED,"Request time out"));break;case $E.HTTP_ERROR:const N=w.getStatus();if(ke(gs,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let H=w.getResponseJson();Array.isArray(H)&&(H=H[0]);const W=null==H?void 0:H.error;if(W&&W.status&&W.message){const De=function(Le){const He=Le.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(He)>=0?He:ue.UNKNOWN}(W.status);m(new Ne(De,W.message))}else m(new Ne(ue.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Ne(ue.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{ke(gs,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(o);ke(gs,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const o=Gb(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=qm(),m=ur(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new zE({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const x=u.join("");ke(gs,`Creating RPC '${e}' stream ${o}: ${x}`,w);const N=c.createWebChannel(x,w);let H=!1,W=!1;const De=new XM({ro:He=>{W?ke(gs,`Not sending because RPC '${e}' stream ${o} is closed:`,He):(H||(ke(gs,`Opening RPC '${e}' stream ${o} transport.`),N.open(),H=!0),ke(gs,`RPC '${e}' stream ${o} sending:`,He),N.send(He))},oo:()=>N.close()}),Le=(He,_t,St)=>{He.listen(_t,bt=>{try{St(bt)}catch(jt){setTimeout(()=>{throw jt},0)}})};return Le(N,Np.EventType.OPEN,()=>{W||ke(gs,`RPC '${e}' stream ${o} transport opened.`)}),Le(N,Np.EventType.CLOSE,()=>{W||(W=!0,ke(gs,`RPC '${e}' stream ${o} transport closed`),De.wo())}),Le(N,Np.EventType.ERROR,He=>{W||(W=!0,Ds(gs,`RPC '${e}' stream ${o} transport errored:`,He),De.wo(new Ne(ue.UNAVAILABLE,"The operation could not be completed")))}),Le(N,Np.EventType.MESSAGE,He=>{var _t;if(!W){const St=He.data[0];ct(!!St);const bt=St,jt=bt.error||(null===(_t=bt[0])||void 0===_t?void 0:_t.error);if(jt){ke(gs,`RPC '${e}' stream ${o} received error:`,jt);const Xt=jt.status;let ln=function(yg){const LM=Vr[yg];if(void 0!==LM)return C0(LM)}(Xt),ms=jt.message;void 0===ln&&(ln=ue.INTERNAL,ms="Unknown error status: "+Xt+" with message "+jt.message),W=!0,De.wo(new Ne(ln,ms)),N.close()}else ke(gs,`RPC '${e}' stream ${o} received:`,St),De._o(St)}}),Le(m,BC.STAT_EVENT,He=>{He.stat===GE.PROXY?ke(gs,`RPC '${e}' stream ${o} detected buffering proxy`):He.stat===GE.NOPROXY&&ke(gs,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{De.fo()},0),De}}function kS(){return"undefined"!=typeof window?window:null}function yD(){return"undefined"!=typeof document?document:null}function Z0(n){return new wb(n,!0)}class zb{constructor(e,t,r=1e3,o=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=o,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),o=Math.max(0,t-r);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,o,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class FS{constructor(e,t,r,o,u,c,m,w){this.ii=e,this.$o=r,this.Oo=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zb(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Fo===t&&this.Zo(r,o)},r=>{e(()=>{const o=new Ne(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(o)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(o=>{r(()=>this.tu(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t1 extends FS{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function YI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:nt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(ct(void 0===b||"string"==typeof b),Lr.fromBase64String(b||"")):(ct(void 0===b||b instanceof Uint8Array),Lr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(w){const b=void 0===w.code?ue.UNKNOWN:C0(w.code);return new Ne(b,w.message||"")}(c);t=new mb(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Oa(n,r.document.name),u=yr(r.document.updateTime),c=r.document.createTime?yr(r.document.createTime):ht.min(),m=new Kr({mapValue:{fields:r.document.fields}}),w=Bn.newFoundDocument(o,u,c,m);t=new vy(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=Oa(n,r.document),u=r.readTime?yr(r.readTime):ht.min(),c=Bn.newNoDocument(o,u);t=new vy([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=Oa(n,r.document);t=new vy([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,{count:o=0,unchangedNames:u}=r,c=new gy(o,u);t=new gb(r.targetId,c)}}var w;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ht.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?ht.min():u.readTime?yr(u.readTime):ht.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=rg(this.serializer),t.addTarget=function(o,u){let c;const m=u.target;if(c=Gp(m)?{documents:JI(o,m)}:{query:x0(o,m)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=wy(o,u.resumeToken);const w=bs(o,u.expectedCount);null!==w&&(c.expectedCount=w)}else if(u.snapshotVersion.compareTo(ht.min())>0){c.readTime=tf(o,u.snapshotVersion.toTimestamp());const w=bs(o,u.expectedCount);null!==w&&(c.expectedCount=w)}return c}(this.serializer,e);const r=function Db(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=rg(this.serializer),t.removeTarget=e,this.Wo(t)}}class n1 extends FS{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Ib(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,o){let u=yr(r.updateTime?r.updateTime:o);return u.isEqual(ht.min())&&(u=yr(o)),new hb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.cu(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=rg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ig(this.serializer,r))};this.Wo(t)}}class r1 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.lu=!1}fu(){if(this.lu)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Io(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(ue.UNKNOWN,o.toString())})}vo(e,t,r,o){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.vo(e,t,r,u,c,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ue.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class s1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(lr(t),this.mu=!1):ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class o1{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,Ee.Z)(function*(){var w;pf(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ee.Z)(function*(b){const x=Ke(b);x.vu.add(4),yield ky(x),x.bu.set("Unknown"),x.vu.delete(4),yield K0(x)}),function(b){return w.apply(this,arguments)})(c))}))}),this.bu=new s1(r,o)}}function K0(n){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,Ee.Z)(function*(n){if(pf(n))for(const e of n.Ru)yield e(!0)}),Wb.apply(this,arguments)}function ky(n){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,Ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),Zb.apply(this,arguments)}function _D(n,e){const t=Ke(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Qb(t)?Yb(t):Ly(t).Ko()&&Kb(t,e))}function Y0(n,e){const t=Ke(n),r=Ly(t);t.Au.delete(e),r.Ko()&&LS(t,e),0===t.Au.size&&(r.Ko()?r.jo():pf(t)&&t.bu.set("Unknown"))}function Kb(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ly(n).su(e)}function LS(n,e){n.Vu.qt(e),Ly(n).iu(e)}function Yb(n){n.Vu=new _b({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ly(n).start(),n.bu.gu()}function Qb(n){return pf(n)&&!Ly(n).Uo()&&n.Au.size>0}function pf(n){return 0===Ke(n).vu.size}function VS(n){n.Vu=void 0}function a1(n){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,Ee.Z)(function*(n){n.Au.forEach((e,t)=>{Kb(n,e)})}),Jb.apply(this,arguments)}function u1(n,e){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,Ee.Z)(function*(n,e){VS(n),Qb(n)?(n.bu.Iu(e),Yb(n)):n.bu.set("Unknown")}),Xb.apply(this,arguments)}function l1(n,e,t){return eT.apply(this,arguments)}function eT(){return eT=(0,Ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof mb&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(o,u){const c=u.cause;for(const m of u.targetIds)o.Au.has(m)&&(yield o.remoteSyncer.rejectListen(m,c),o.Au.delete(m),o.Vu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vD(n,r)}else if(e instanceof vy?n.Vu.Ht(e):e instanceof gb?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ht.min()))try{const r=yield TS(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.Vu.ce(u);return c.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.Au.get(w);b&&o.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),c.targetMismatches.forEach((m,w)=>{const b=o.Au.get(m);if(!b)return;o.Au.set(m,b.withResumeToken(Lr.EMPTY_BYTE_STRING,b.snapshotVersion)),LS(o,m);const x=new Pa(b.target,m,w,b.sequenceNumber);Kb(o,x)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield vD(n,r)}var r}),eT.apply(this,arguments)}function vD(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,Ee.Z)(function*(n,e,t){if(!Au(e))throw e;n.vu.add(1),yield ky(n),n.bu.set("Offline"),t||(t=()=>TS(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield K0(n)}))}),tT.apply(this,arguments)}function US(n,e){return e().catch(t=>vD(n,t,e))}function Fy(n){return nT.apply(this,arguments)}function nT(){return nT=(0,Ee.Z)(function*(n){const e=Ke(n),t=gf(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;c1(e);)try{const o=yield ZM(e.localStore,r);if(null===o){0===e.Eu.length&&t.jo();break}r=o.batchId,d1(e,o)}catch(o){yield vD(e,o)}BS(e)&&jS(e)}),nT.apply(this,arguments)}function c1(n){return pf(n)&&n.Eu.length<10}function d1(n,e){n.Eu.push(e);const t=gf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function BS(n){return pf(n)&&!gf(n).Uo()&&n.Eu.length>0}function jS(n){gf(n).start()}function h1(n){return rT.apply(this,arguments)}function rT(){return rT=(0,Ee.Z)(function*(n){gf(n).hu()}),rT.apply(this,arguments)}function f1(n){return iT.apply(this,arguments)}function iT(){return iT=(0,Ee.Z)(function*(n){const e=gf(n);for(const t of n.Eu)e.uu(t.mutations)}),iT.apply(this,arguments)}function p1(n,e,t){return sT.apply(this,arguments)}function sT(){return sT=(0,Ee.Z)(function*(n,e,t){const r=n.Eu.shift(),o=BI.from(r,e,t);yield US(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Fy(n)}),sT.apply(this,arguments)}function g1(n,e){return oT.apply(this,arguments)}function oT(){return oT=(0,Ee.Z)(function*(n,e){var t;e&&gf(n).ou&&(yield(t=(0,Ee.Z)(function*(r,o){if(my(u=o.code)&&u!==ue.ABORTED){const c=r.Eu.shift();gf(r).Qo(),yield US(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Fy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),BS(n)&&jS(n)}),oT.apply(this,arguments)}function $S(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,Ee.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=pf(t);t.vu.add(3),yield ky(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield K0(t)}),aT.apply(this,arguments)}function uT(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,Ee.Z)(function*(n,e){const t=Ke(n);e?(t.vu.delete(2),yield K0(t)):e||(t.vu.add(2),yield ky(t),t.bu.set("Unknown"))}),lT.apply(this,arguments)}function Ly(n){return n.Su||(n.Su=function(e,t,r){const o=Ke(e);return o.fu(),new t1(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:a1.bind(null,n),ao:u1.bind(null,n),nu:l1.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Su.Qo(),Qb(n)?Yb(n):n.bu.set("Unknown")):(yield n.Su.stop(),VS(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function gf(n){return n.Du||(n.Du=function(e,t,r){const o=Ke(e);return o.fu(),new n1(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{uo:h1.bind(null,n),ao:g1.bind(null,n),au:f1.bind(null,n),cu:p1.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Du.Qo(),yield Fy(n)):(yield n.Du.stop(),n.Eu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class cT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new cT(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Au(n))return new Ne(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Uy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=md(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new Uy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HS{constructor(){this.Cu=new Mn(Ze.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):nt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class By{constructor(e,t,r,o,u,c,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new By(e,t,Uy.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class m1{constructor(){this.Nu=void 0,this.listeners=[]}}class y1{constructor(){this.queries=new ku(e=>CI(e),Qh),this.onlineState="Unknown",this.ku=new Set}}function dT(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new m1),o)try{u.Nu=yield t.onListen(r)}catch(c){const m=Vy(c,`Initialization of query '${dy(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&gT(t)}),hT.apply(this,arguments)}function fT(n,e){return pT.apply(this,arguments)}function pT(){return pT=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),pT.apply(this,arguments)}function _1(n,e){const t=Ke(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const m of c.listeners)m.$u(o)&&(r=!0);c.Nu=o}}r&&gT(t)}function v1(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function gT(n){n.ku.forEach(e=>{e.next()})}class mT{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new By(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=By.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class w1{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class GS{constructor(e){this.serializer=e}rr(e){return Oa(this.serializer,e)}ur(e){return e.metadata.exists?Yl(this.serializer,e.document,!1):Bn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return yr(e)}}class E1{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zS(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=sn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new GS(this.serializer);for(const o of e)if(o.metadata.queries){const u=r.rr(o.metadata.name);for(const c of o.metadata.queries){const m=(t.get(c)||Ht()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function KM(n,e,t,r){return Vb.apply(this,arguments)}(e.localStore,new GS(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const o of e.queries)yield YM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function zS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qS{constructor(e){this.key=e}}class WS{constructor(e){this.key=e}}class ZS{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ht(),this.mutatedKeys=Ht(),this.tc=gd(e),this.ec=new Uy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new HS,o=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const H=o.get(x),W=Zp(this.query,N)?N:null,De=!!H&&this.mutatedKeys.has(H.key),Le=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let He=!1;H&&W?H.data.isEqual(W.data)?De!==Le&&(r.track({type:3,doc:W}),He=!0):this.rc(H,W)||(r.track({type:2,doc:W}),He=!0,(w&&this.tc(W,w)>0||b&&this.tc(W,b)<0)&&(m=!0)):!H&&W?(r.track({type:0,doc:W}),He=!0):H&&!W&&(r.track({type:1,doc:H}),He=!0,(w||b)&&(m=!0)),He&&(W?(c=c.add(W),u=Le?u.add(x):u.delete(x)):(c=c.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const x="F"===this.query.limitType?c.last():c.first();c=c.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{ec:c,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,x)=>function(N,H){const W=De=>{switch(De){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return W(N)-W(H)}(b.type,x.type)||this.tc(b.doc,x.doc)),this.oc(r);const c=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new By(this.query,e.ec,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new HS,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ht(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new WS(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new qS(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Ht();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return By.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class I1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class D1{constructor(e){this.key=e,this.fc=!1}}class C1{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new ku(m=>CI(m),Qh),this._c=new Map,this.mc=new Set,this.gc=new Mn(Ze.comparator),this.yc=new Map,this.Ic=new ot,this.Tc={},this.Ec=new Map,this.Ac=cf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function b1(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,Ee.Z)(function*(n,e){const t=BT(n);let r,o;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.lc();else{const c=yield Oy(t.localStore,xi(e)),m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield _T(t,e,r,"current"===m,c.resumeToken),t.isPrimaryClient&&_D(t.remoteStore,c)}return o}),yT.apply(this,arguments)}function _T(n,e,t,r,o){return vT.apply(this,arguments)}function vT(){return vT=(0,Ee.Z)(function*(n,e,t,r,o){n.Rc=(N,H,W)=>{return(De=(0,Ee.Z)(function*(Le,He,_t,St){let bt=He.view.sc(_t);bt.zi&&(bt=yield fD(Le.localStore,He.query,!1).then(({documents:ln})=>He.view.sc(ln,bt)));const jt=St&&St.targetChanges.get(He.targetId),Xt=He.view.applyChanges(bt,Le.isPrimaryClient,jt);return xT(Le,He.targetId,Xt.cc),Xt.snapshot}),function(Le,He,_t,St){return De.apply(this,arguments)})(n,N,H,W);var De};const u=yield fD(n.localStore,e,!0),c=new ZS(e,u.ir),m=c.sc(u.documents),w=vd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=c.applyChanges(m,n.isPrimaryClient,w);xT(n,t,b.cc);const x=new I1(e,t,c);return n.wc.set(e,x),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),vT.apply(this,arguments)}function T1(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=t.wc.get(e),o=t._c.get(r.targetId);if(o.length>1)return t._c.set(r.targetId,o.filter(u=>!Qh(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Py(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Y0(t.remoteStore,r.targetId),jy(t,r.targetId)}).catch(Tu))):(jy(t,r.targetId),yield Py(t.localStore,r.targetId,!0))}),wT.apply(this,arguments)}function ET(){return ET=(0,Ee.Z)(function*(n,e,t){const r=jT(n);try{const o=yield function(u,c){const m=Ke(u),w=Un.now(),b=c.reduce((H,W)=>H.add(W.key),Ht());let x,N;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let W=Yr(),De=Ht();return m.Zi.getEntries(H,b).next(Le=>{W=Le,W.forEach((He,_t)=>{_t.isValidDocument()||(De=De.add(He))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,W)).next(Le=>{x=Le;const He=[];for(const _t of c){const St=FI(_t,x.get(_t.key).overlayedDocument);null!=St&&He.push(new Kl(_t.key,St,h0(St.value.mapValue),Wn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,w,He,c)}).next(Le=>{N=Le;const He=Le.applyToLocalDocumentSet(x,De);return m.documentOverlayCache.saveOverlays(H,Le.batchId,He)})}).then(()=>({batchId:N.batchId,changes:TI(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new Mn(Nt)),w=w.insert(c,m),u.Tc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Ad(r,o.changes),yield Fy(r.remoteStore)}catch(o){const u=Vy(o,"Failed to persist write");t.reject(u)}}),ET.apply(this,arguments)}function KS(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,Ee.Z)(function*(n,e){const t=Ke(n);try{const r=yield WM(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.yc.get(u);c&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.fc=!0:o.modifiedDocuments.size>0?ct(c.fc):o.removedDocuments.size>0&&(ct(c.fc),c.fc=!1))}),yield Ad(t,r,e)}catch(r){yield Tu(r)}}),IT.apply(this,arguments)}function YS(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.wc.forEach((u,c)=>{const m=c.view.Mu(e);m.snapshot&&o.push(m.snapshot)}),function(u,c){const m=Ke(u);m.onlineState=c;let w=!1;m.queries.forEach((b,x)=>{for(const N of x.listeners)N.Mu(c)&&(w=!0)}),w&&gT(m)}(r.eventManager,e),o.length&&r.dc.nu(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function S1(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,Ee.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.yc.get(e),u=o&&o.key;if(u){let c=new Mn(Ze.comparator);c=c.insert(u,Bn.newNoDocument(u,ht.min()));const m=Ht().add(u),w=new tg(ht.min(),new Map,new Mn(Nt),c,m);yield KS(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),MT(r)}else yield Py(r.localStore,e,!1).then(()=>jy(r,e,t)).catch(Tu)}),DT.apply(this,arguments)}function x1(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield qM(t.localStore,e);ST(t,r,null),AT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ad(t,o)}catch(o){yield Tu(o)}}),CT.apply(this,arguments)}function M1(n,e,t){return bT.apply(this,arguments)}function bT(){return bT=(0,Ee.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(u,c){const m=Ke(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,c).next(x=>(ct(null!==x),b=x.keys(),m.mutationQueue.removeMutationBatch(w,x))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);ST(r,e,t),AT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ad(r,o)}catch(o){yield Tu(o)}}),bT.apply(this,arguments)}function TT(){return TT=(0,Ee.Z)(function*(n,e){const t=Ke(n);pf(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ke(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ec.get(r)||[];o.push(e),t.Ec.set(r,o)}catch(r){const o=Vy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),TT.apply(this,arguments)}function AT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function ST(n,e,t){const r=Ke(n);let o=r.Tc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Tc[r.currentUser.toKey()]=o}}function jy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||QS(n,r)})}function QS(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Y0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),MT(n))}function xT(n,e,t){for(const r of t)r instanceof qS?(n.Ic.addReference(r.key,e),N1(n,r)):r instanceof WS?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||QS(n,r.key)):nt()}function N1(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),MT(n))}function MT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ze(sn.fromString(e)),r=n.Ac.next();n.yc.set(r,new D1(t)),n.gc=n.gc.insert(t,r),_D(n.remoteStore,new Pa(xi(Yh(t.path)),r,"TargetPurposeLimboResolution",Cs.ct))}}function Ad(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,Ee.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[],c=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{c.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,(null==b?void 0:b.fromCache)?"not-current":"current"),b){o.push(b);const x=kb.Li(w.targetId,b);u.push(x)}}))}),yield Promise.all(c),r.dc.nu(o),yield(m=(0,Ee.Z)(function*(w,b){const x=Ke(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>re.forEach(b,H=>re.forEach(H.Fi,W=>x.persistence.referenceDelegate.addReference(N,H.targetId,W)).next(()=>re.forEach(H.Bi,W=>x.persistence.referenceDelegate.removeReference(N,H.targetId,W)))))}catch(N){if(!Au(N))throw N;ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const H=N.targetId;if(!N.fromCache){const W=x.Ji.get(H),Le=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);x.Ji=x.Ji.insert(H,Le)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),RT.apply(this,arguments)}function O1(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Ee.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield bS(t.localStore,e);t.currentUser=e,(o=t).Ec.forEach(c=>{c.forEach(m=>{m.reject(new Ne(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ad(t,r.er)}var o}),NT.apply(this,arguments)}function P1(n,e){const t=Ke(n),r=t.yc.get(e);if(r&&r.fc)return Ht().add(r.key);{let o=Ht();const u=t._c.get(e);if(!u)return o;for(const c of u){const m=t.wc.get(c);o=o.unionWith(m.view.nc)}return o}}function k1(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,Ee.Z)(function*(n,e){const t=Ke(n),r=yield fD(t.localStore,e.query,!0),o=e.view.hc(r);return t.isPrimaryClient&&xT(t,e.targetId,o.cc),o}),OT.apply(this,arguments)}function F1(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,Ee.Z)(function*(n,e){const t=Ke(n);return xS(t.localStore,e).then(r=>Ad(t,r))}),PT.apply(this,arguments)}function L1(n,e,t,r){return kT.apply(this,arguments)}function kT(){return kT=(0,Ee.Z)(function*(n,e,t,r){const o=Ke(n),u=yield function(c,m){const w=Ke(c),b=Ke(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.Sn(x,m).next(N=>N?w.localDocuments.getDocuments(x,N):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Fy(o.remoteStore):"acknowledged"===t||"rejected"===t?(ST(o,e,r||null),AT(o,e),m=e,Ke(Ke(o.localStore).mutationQueue).Cn(m)):nt(),yield Ad(o,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),kT.apply(this,arguments)}function FT(){return FT=(0,Ee.Z)(function*(n,e){const t=Ke(n);if(BT(t),jT(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield JS(t,r.toArray());t.vc=!0,yield uT(t.remoteStore,!0);for(const u of o)_D(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let o=Promise.resolve();t._c.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(jy(t,c),Py(t.localStore,c,!0))),Y0(t.remoteStore,c)}),yield o,yield JS(t,r),function(u){const c=Ke(u);c.yc.forEach((m,w)=>{Y0(c.remoteStore,w)}),c.Ic.Ts(),c.yc=new Map,c.gc=new Mn(Ze.comparator)}(t),t.vc=!1,yield uT(t.remoteStore,!1)}}),FT.apply(this,arguments)}function JS(n,e,t){return LT.apply(this,arguments)}function LT(){return LT=(0,Ee.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[];for(const c of e){let m;const w=r._c.get(c);if(w&&0!==w.length){m=yield Oy(r.localStore,xi(w[0]));for(const b of w){const x=r.wc.get(b),N=yield k1(r,x);N.snapshot&&u.push(N.snapshot)}}else{const b=yield SS(r.localStore,c);m=yield Oy(r.localStore,b),yield _T(r,XS(b),c,!1,m.resumeToken)}o.push(m)}return r.dc.nu(u),o}),LT.apply(this,arguments)}function XS(n){return DI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function U1(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).$i()}function B1(n,e,t,r){return VT.apply(this,arguments)}function VT(){return VT=(0,Ee.Z)(function*(n,e,t,r){const o=Ke(n);if(o.vc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=o._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield xS(o.localStore,Mi(u[0])),m=tg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Lr.EMPTY_BYTE_STRING);yield Ad(o,c,m);break}case"rejected":yield Py(o.localStore,e,!0),jy(o,e,r);break;default:nt()}}),VT.apply(this,arguments)}function j1(n,e,t){return UT.apply(this,arguments)}function UT(){return UT=(0,Ee.Z)(function*(n,e,t){const r=BT(n);if(r.vc){for(const o of e){if(r._c.has(o)){ke("SyncEngine","Adding an already active target "+o);continue}const u=yield SS(r.localStore,o),c=yield Oy(r.localStore,u);yield _T(r,XS(u),c.targetId,!1,c.resumeToken),_D(r.remoteStore,c)}for(const o of t)r._c.has(o)&&(yield Py(r.localStore,o,!1).then(()=>{Y0(r.remoteStore,o),jy(r,o)}).catch(Tu))}}),UT.apply(this,arguments)}function BT(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S1.bind(null,e),e.dc.nu=_1.bind(null,e.eventManager),e.dc.Pc=v1.bind(null,e.eventManager),e}function jT(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M1.bind(null,e),e}class Q0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=Z0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return CS(this.persistence,new DS,e.initialUser,this.serializer)}createPersistence(e){return new Lu(df.zs,this.serializer)}createSharedClientState(e){return new OS}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $T extends Q0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield jT(r.Vc.syncEngine),yield Fy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return CS(this.persistence,new DS,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Ob(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new KC(t,this.persistence);return new ZC(e.asyncQueue,r)}createPersistence(e){const t=Pb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new lg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,kS(),yD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new OS}}class ex extends $T{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const o=r.Vc.syncEngine;r.sharedClientState instanceof Hb&&(r.sharedClientState.syncEngine={jr:L1.bind(null,o),zr:B1.bind(null,o),Wr:j1.bind(null,o),$i:U1.bind(null,o),Qr:F1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.Z)(function*(c){yield function V1(n,e){return FT.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=kS();if(!Hb.D(t))throw new Ne(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $y{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>YS(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=O1.bind(null,r.syncEngine),yield uT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new y1}createDatastore(e){const t=Z0(e.databaseInfo.databaseId),r=new e1(e.databaseInfo);return new r1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>YS(this.syncEngine,m,0),c=PS.D()?new PS:new QM,new o1(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,m,w,b){const x=new C1(r,o,u,c,m,w);return b&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ke(t);ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ky(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tx(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class wD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class G1{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),o=Number(r);isNaN(o)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(o);return new w1(JSON.parse(u),t.length+o)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class z1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ee.Z)(function*(u,c){const m=Ke(u),w=rg(m.serializer)+"/documents",b={documents:c.map(W=>nf(m.serializer,W))},x=yield m.vo("BatchGetDocuments",w,b,c.length),N=new Map;x.forEach(W=>{const De=function KI(n,e){return"found"in e?function(t,r){ct(!!r.found);const o=Oa(t,r.found.name),u=yr(r.found.updateTime),c=r.found.createTime?yr(r.found.createTime):ht.min(),m=new Kr({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(o,u,c,m)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const o=Oa(t,r.missing),u=yr(r.readTime);return Bn.newNoDocument(o,u)}(n,e):nt()}(m.serializer,W);N.set(De.key.toString(),De)});const H=[];return c.forEach(W=>{const De=N.get(W.toString());ct(!!De),H.push(De)}),H}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ze.fromPath(o);e.mutations.push(new VI(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(o,u){const c=Ke(o),m=rg(c.serializer)+"/documents",w={writes:u.map(b=>ig(c.serializer,b))};yield c.Io("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=ht.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Ne(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class q1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new zb(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new z1(e.datastore),r=e.qc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Uc(u)}))}).catch(o=>{e.Uc(o)})}))}qc(e){try{const t=this.updateFunction(e);return!Vp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!my(t)}return!1}}class W1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Wr.UNAUTHENTICATED,this.clientId=Zv.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(m){ke("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Vy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function ED(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield bS(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),HT.apply(this,arguments)}function GT(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qT(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>$S(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>$S(e.remoteStore,u)),n._onlineComponents=e}),zT.apply(this,arguments)}function nx(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function qT(n){return WT.apply(this,arguments)}function WT(){return WT=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ED(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!nx(t))throw t;Ds("Error using user provided cache. Falling back to memory cache: "+t),yield ED(n,new Q0)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),yield ED(n,new Q0);return n._offlineComponents}),WT.apply(this,arguments)}function ID(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield GT(n,n._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),yield GT(n,new $y))),n._onlineComponents}),ZT.apply(this,arguments)}function rx(n){return qT(n).then(e=>e.persistence)}function DD(n){return qT(n).then(e=>e.localStore)}function ix(n){return ID(n).then(e=>e.remoteStore)}function KT(n){return ID(n).then(e=>e.syncEngine)}function Hy(n){return YT.apply(this,arguments)}function YT(){return YT=(0,Ee.Z)(function*(n){const e=yield ID(n),t=e.eventManager;return t.onListen=b1.bind(null,e.syncEngine),t.onUnlisten=T1.bind(null,e.syncEngine),t}),YT.apply(this,arguments)}function ox(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,c,m,w){const b=new wD({next:N=>{u.enqueueAndForget(()=>fT(o,x));const H=N.docs.has(c);!H&&N.fromCache?w.reject(new Ne(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Ne(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new mT(Yh(c.path),b,{includeMetadataChanges:!0,Ku:!0});return dT(o,x)}(yield Hy(n),n.asyncQueue,e,t,r)})),r.promise}function ax(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,c,m,w){const b=new wD({next:N=>{u.enqueueAndForget(()=>fT(o,x)),N.fromCache&&"server"===m.source?w.reject(new Ne(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new mT(c,b,{includeMetadataChanges:!0,Ku:!0});return dT(o,x)}(yield Hy(n),n.asyncQueue,e,t,r)})),r.promise}function ux(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const lx=new Map;function QT(n,e,t){if(!t)throw new Ne(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cx(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dx(n){if(!Ze.isDocumentKey(n))throw new Ne(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hx(n){if(Ze.isDocumentKey(n))throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=CD(n);throw new Ne(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fx(n,e){if(e<=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class px{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=ux(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new KE;switch(t.type){case"firstParty":return new GC(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lx.get(e);t&&(ke("ComponentProvider","Removing Datastore"),lx.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class Ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class ec extends Ji{constructor(e,t,r){super(e,t,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Ze(e))}withConverter(e){return new ec(this.firestore,e,this._path)}}function mx(n,e,...t){if(n=(0,un.m9)(n),QT("collection","path",e),n instanceof J0){const r=sn.fromString(e,...t);return hx(r),new ec(n,null,r)}{if(!(n instanceof Jn||n instanceof ec))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return hx(r),new ec(n.firestore,null,r)}}function bD(n,e,...t){if(n=(0,un.m9)(n),1===arguments.length&&(e=Zv.A()),QT("doc","path",e),n instanceof J0){const r=sn.fromString(e,...t);return dx(r),new Jn(n,null,new Ze(r))}{if(!(n instanceof Jn||n instanceof ec))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return dx(r),new Jn(n.firestore,n instanceof ec?n.converter:null,new Ze(r))}}function yx(n,e){return n=(0,un.m9)(n),e=(0,un.m9)(e),(n instanceof Jn||n instanceof ec)&&(e instanceof Jn||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JT(n,e){return n=(0,un.m9)(n),e=(0,un.m9)(e),n instanceof Ji&&e instanceof Ji&&n.firestore===e.firestore&&Qh(n._query,e._query)&&n.converter===e.converter}class rR{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zb(this,"async_queue_retry"),this.Xc=()=>{const t=yD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=yD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=yD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Dr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Au(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const o=cT.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(o),o}Zc(){this.Wc&&nt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function XT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class iR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends J0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new rR,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_x(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||_x(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _x(n){var e,t,r;const o=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Hh(n._databaseId,m,n._persistenceKey,(b=o).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,ux(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new W1(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=o.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=o.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function vx(n,e,t){const r=new Dr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield ED(n,t),yield GT(n,e),r.resolve()}catch(o){const u=o;if(!nx(u))throw u;Ds("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function wx(n){if(n._initialized||n._terminated)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(Lr.fromBase64String(e))}catch(t){throw new Ne(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tc(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cg{constructor(e){this._methodName=e}}class TD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const gR=/^__.*__$/;class mR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Kl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ef(e,this.data,t,this.fieldTransforms)}}class Ex{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Kl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ix(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class AD{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new AD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.fa(e),o}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.aa({path:r,la:!1});return o.ua(),o}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return MD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ix(this.ca)&&gR.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class yR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Z0(e)}ya(e,t,r,o=!1){return new AD({ca:e,methodName:t,ga:r,path:cr.emptyPath(),la:!1,ma:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dg(n){const e=n._freezeSettings(),t=Z0(n._databaseId);return new yR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SD(n,e,t,r,o,u={}){const c=n.ya(u.merge||u.mergeFields?2:0,e,t,o);rA("Data must be an object, but it was:",c,r);const m=bx(r,c);let w,b;if(u.merge)w=new Yi(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const H=tw(e,N,t);if(!c.contains(H))throw new Ne(ue.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);Ax(x,H)||x.push(H)}w=new Yi(x),b=c.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=c.fieldTransforms;return new mR(new Kr(m),w,b)}class ew extends cg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ew}}function Dx(n,e,t){return new AD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class eA extends cg{_toFieldTransform(e){return new Jh(e.path,new Zl)}isEqual(e){return e instanceof eA}}class _R extends cg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Dx(this,e,!0),r=this.pa.map(u=>hg(u,t)),o=new Fu(r);return new Jh(e.path,o)}isEqual(e){return this===e}}class vR extends cg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=Dx(this,e,!0),r=this.pa.map(u=>hg(u,t)),o=new yd(r);return new Jh(e.path,o)}isEqual(e){return this===e}}class wR extends cg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new _d(e.serializer,xI(e.serializer,this.Ia));return new Jh(e.path,t)}isEqual(e){return this===e}}function tA(n,e,t,r){const o=n.ya(1,e,t);rA("Data must be an object, but it was:",o,r);const u=[],c=Kr.empty();zl(r,(w,b)=>{const x=xD(e,w,t);b=(0,un.m9)(b);const N=o.da(x);if(b instanceof ew)u.push(x);else{const H=hg(b,N);null!=H&&(u.push(x),c.set(x,H))}});const m=new Yi(u);return new Ex(c,m,o.fieldTransforms)}function nA(n,e,t,r,o,u){const c=n.ya(1,e,t),m=[tw(e,r,t)],w=[o];if(u.length%2!=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(tw(e,u[H])),w.push(u[H+1]);const b=[],x=Kr.empty();for(let H=m.length-1;H>=0;--H)if(!Ax(b,m[H])){const W=m[H];let De=w[H];De=(0,un.m9)(De);const Le=c.da(W);if(De instanceof ew)b.push(W);else{const He=hg(De,Le);null!=He&&(b.push(W),x.set(W,He))}}const N=new Yi(b);return new Ex(x,N,c.fieldTransforms)}function Cx(n,e,t,r=!1){return hg(t,n.ya(r?4:3,e))}function hg(n,e){if(Tx(n=(0,un.m9)(n)))return rA("Unsupported field value:",e,n),bx(n,e);if(n instanceof cg)return function(t,r){if(!Ix(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let m=hg(c,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,un.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xI(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Un.fromDate(t);return{timestampValue:tf(r.serializer,o)}}if(t instanceof Un){const o=new Un(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:tf(r.serializer,o)}}if(t instanceof TD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tc)return{bytesValue:wy(r.serializer,t._byteString)};if(t instanceof Jn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ng(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${CD(t)}`)}(n,e)}function bx(n,e){const t={};return cI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zl(n,(r,o)=>{const u=hg(o,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Tx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Un||n instanceof TD||n instanceof tc||n instanceof Jn||n instanceof cg)}function rA(n,e,t){if(!Tx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function tw(n,e,t){if((e=(0,un.m9)(e))instanceof Sd)return e._internalPath;if("string"==typeof e)return xD(n,e);throw MD("Field path arguments must be of type string or ",n,!1,void 0,t)}const ER=new RegExp("[~\\*/\\[\\]]");function xD(n,e,t){if(e.search(ER)>=0)throw MD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch(r){throw MD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function MD(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||c)&&(w+=" (found",u&&(w+=` in field ${r}`),c&&(w+=` in document ${o}`),w+=")"),new Ne(ue.INVALID_ARGUMENT,m+n+w)}function Ax(n,e){return n.some(t=>t.isEqual(e))}class nw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new IR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(RD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class IR extends nw{data(){return super.data()}}function RD(n,e){return"string"==typeof e?xD(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}function Sx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iA{}class rw extends iA{}function mf(n,e,...t){let r=[];e instanceof iA&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof Gy).length,c=o.filter(m=>m instanceof iw).length;if(u>1||u>0&&c>0)throw new Ne(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class iw extends rw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new iw(e,t,r)}_apply(e){const t=this._parse(e);return Nx(e._query,t),new Ji(e.firestore,e.converter,_0(e._query,t))}_parse(e){const t=dg(e.firestore);return function(o,u,c,m,w,b,x){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Rx(x,b);const H=[];for(const W of x)H.push(Mx(m,o,W));N={arrayValue:{values:H}}}else N=Mx(m,o,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Rx(x,b),N=Cx(c,"where",x,"in"===b||"not-in"===b);return en.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gy extends iA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const c=o.getFlattenedFilters();for(const m of c)Nx(u,m),u=_0(u,m)}(e._query,t),new Ji(e.firestore,e.converter,_0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sA extends rw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sA(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new qh(o,u);return function(m,w){if(null===zp(m)){const b=qp(m);null!==b&&Ox(0,b,w.field)}}(r,c),c}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Pu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ND extends rw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new ND(e,t,r)}_apply(e){return new Ji(e.firestore,e.converter,Wp(e._query,this._limit,this._limitType))}}class OD extends rw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new OD(e,t,r)}_apply(e){const t=xx(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(o=t,new Pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class PD extends rw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new PD(e,t,r)}_apply(e){const t=xx(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(o=t,new Pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function xx(n,e,t,r){if(t[0]=(0,un.m9)(t[0]),t[0]instanceof nw)return function(o,u,c,m,w){if(!m)throw new Ne(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const x of Wl(o))if(x.field.isKeyField())b.push(fd(u,m.key));else{const N=m.data.field(x.field);if(ny(N))throw new Ne(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=x.field.canonicalString();throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(N)}return new Nu(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=dg(n.firestore);return function(u,c,m,w,b,x){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ne(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let W=0;W<b.length;W++){const De=b[W];if(N[W].field.isKeyField()){if("string"!=typeof De)throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof De}`);if(!y0(u)&&-1!==De.indexOf("/"))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${De}' contains a slash.`);const Le=u.path.child(sn.fromString(De));if(!Ze.isDocumentKey(Le))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const He=new Ze(Le);H.push(fd(c,He))}else{const Le=Cx(m,w,De);H.push(Le)}}return new Nu(H,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Mx(n,e,t){if("string"==typeof(t=(0,un.m9)(t))){if(""===t)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y0(e)&&-1!==t.indexOf("/"))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ze.isDocumentKey(r))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fd(n,new Ze(r))}if(t instanceof Jn)return fd(n,t._key);throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CD(t)}.`)}function Rx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nx(n,e){if(e.isInequality()){const r=qp(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=zp(n);null!==u&&Ox(0,o,u)}const t=function(r,o){for(const u of r)for(const c of u.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ox(n,e,t){if(!t.isEqual(e))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class oA{convertValue(e,t="none"){switch(hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zl(e,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new TD(mr(e.latitude),mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xu(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($h(e));default:return null}}convertTimestamp(e){const t=ql(e);return new Un(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);ct(Dy(r));const o=new dd(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return o.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function kD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class RR extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class fg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xd extends nw{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(RD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class sw extends xd{data(e={}){return super.data(e)}}class yf{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new fg(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new sw(this._firestore,this._userDataWriter,r.key,r,new fg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new sw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new fg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const m=new sw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new fg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==c.type&&(w=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:OR(c.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function OR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function kx(n,e){return n instanceof xd&&e instanceof xd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof yf&&e instanceof yf&&n._firestore===e._firestore&&JT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _f extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function Fx(n,e,t){n=on(n,Jn);const r=on(n.firestore,Xn),o=kD(n.converter,e,t);return zy(r,[SD(dg(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Wn.none())])}function Lx(n,e,t,...r){n=on(n,Jn);const o=on(n.firestore,Xn),u=dg(o);let c;return c="string"==typeof(e=(0,un.m9)(e))||e instanceof Sd?nA(u,"updateDoc",n._key,e,t,r):tA(u,"updateDoc",n._key,e),zy(o,[c.toMutation(n._key,Wn.exists(!0))])}function Vx(n,...e){var t,r,o;n=(0,un.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||XT(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(XT(e[c])){const N=e[c];e[c]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[c+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[c+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,x;if(n instanceof Jn)b=on(n.firestore,Xn),x=Yh(n._key.path),w={next:N=>{e[c]&&e[c](aA(b,n,N))},error:e[c+1],complete:e[c+2]};else{const N=on(n,Ji);b=on(N.firestore,Xn),x=N._query;const H=new _f(b);w={next:W=>{e[c]&&e[c](new yf(b,H,N,W))},error:e[c+1],complete:e[c+2]},Sx(n._query)}return function(N,H,W,De){const Le=new wD(De),He=new mT(H,Le,W);return N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return dT(yield Hy(N),He)})),()=>{Le.Dc(),N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return fT(yield Hy(N),He)}))}}(Ur(b),x,m,w)}function zy(n,e){return function(t,r){const o=new Dr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function A1(n,e,t){return ET.apply(this,arguments)}(yield KT(t),r,o)})),o.promise}(Ur(n),e)}function aA(n,e,t){const r=t.docs.get(e._key),o=new _f(n);return new xd(n,o,e._key,r,new fg(t.hasPendingWrites,t.fromCache),e.converter)}const QR={maxAttempts:5};class Ux{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dg(e)}set(e,t,r){this._verifyNotCommitted();const o=vf(e,this._firestore),u=kD(o.converter,t,r),c=SD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Wn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=vf(e,this._firestore);let c;return c="string"==typeof(t=(0,un.m9)(t))||t instanceof Sd?nA(this._dataReader,"WriteBatch.update",u._key,t,r,o):tA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vf(e,this._firestore);return this._mutations=this._mutations.concat(new Xp(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vf(n,e){if((n=(0,un.m9)(n)).firestore!==e)throw new Ne(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class JR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dg(e)}get(e){const t=vf(e,this._firestore),r=new RR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const u=o[0];if(u.isFoundDocument())return new nw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new nw(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=vf(e,this._firestore),u=kD(o.converter,t,r),c=SD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=vf(e,this._firestore);let c;return c="string"==typeof(t=(0,un.m9)(t))||t instanceof Sd?nA(this._dataReader,"Transaction.update",u._key,t,r,o):tA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=vf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vf(e,this._firestore),r=new _f(this._firestore);return super.get(e).then(o=>new xd(this._firestore,r,t._key,o._document,new fg(!1,!1),t.converter))}}function uA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jx(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function $x(){if(!function rb(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ra=qc.SDK_VERSION,(0,qc._registerComponent)(new cm.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),c=new Xn(new YE(t.getProvider("auth-internal")),new dS(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ne(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),(0,qc.registerVersion)(ZE,"3.13.0",n),(0,qc.registerVersion)(ZE,"3.13.0","esm2017")}();class ow{constructor(e){this._delegate=e}static fromBase64String(e){return $x(),new ow(tc.fromBase64String(e))}static fromUint8Array(e){return jx(),new ow(tc.fromUint8Array(e))}toBase64(){return $x(),this._delegate.toBase64()}toUint8Array(){return jx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lA(n){return function aN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class uN{enableIndexedDbPersistence(e,t){return function oR(n,e){wx(n=on(n,Xn));const t=Ur(n);if(t._uninitializedComponentsProvider)throw new Ne(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ds("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new $y;return vx(t,o,new $T(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aR(n){wx(n=on(n,Xn));const e=Ur(n);if(e._uninitializedComponentsProvider)throw new Ne(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ds("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new $y;return vx(e,r,new ex(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uR(n){if(n._initialized&&!n._terminated)throw new Ne(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Oo.D())return Promise.resolve();const o=r+"main";yield Oo.delete(o)}),function(r){return t.apply(this,arguments)})(Pb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof dd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function gx(n,e,t,r={}){var o;const u=(n=on(n,J0))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let m,w;if("string"==typeof r.mockUserToken)m=r.mockUserToken,w=Wr.MOCK_USER;else{m=(0,un.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Ne(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Wr(b)}n._authCredentials=new $C(new Wv(m,w))}}(this._delegate,e,t,r)}enableNetwork(){return function cR(n){return function Z1(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield rx(n),t=yield ix(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o.vu.delete(0),K0(o)}(t)}))}(Ur(n=on(n,Xn)))}(this._delegate)}disableNetwork(){return function dR(n){return function K1(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield rx(n),t=yield ix(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(o){const u=Ke(o);u.vu.add(0),yield ky(u),u.bu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ur(n=on(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lR(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function R1(n,e){return TT.apply(this,arguments)}(yield KT(e),t)})),t.promise}(Ur(n=on(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function $R(n,e){return function J1(n,e){const t=new wD(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Hy(n),o=t,Ke(r).ku.add(o),void o.next();var r,o})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Hy(n),o=t,void Ke(r).ku.delete(o);var r,o}))}}(Ur(n=on(n,Xn)),XT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qy(this,mx(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fa(this,bD(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function nR(n,e){if(n=on(n,J0),QT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ji(n,null,(t=e,new Pu(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function XR(n,e,t){n=on(n,Xn);const r=Object.assign(Object.assign({},QR),t);return function(o){if(o.maxAttempts<1)throw new Ne(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,c){const m=new Dr;return o.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const w=yield function sx(n){return ID(n).then(e=>e.datastore)}(o);new q1(o.asyncQueue,w,c,u,m).run()})),m.promise}(Ur(n),o=>e(new JR(n,o)),r)}(this._delegate,t=>e(new Gx(this,t)))}batch(){return Ur(this._delegate),new zx(new Ux(this._delegate,e=>zy(this._delegate,e)))}loadBundle(e){return function hR(n,e){const t=Ur(n=on(n,Xn)),r=new iR;return function X1(n,e,t,r){const o=function(u,c){let m;return m="string"==typeof u?_y().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return tx(w,b);if(w instanceof ArrayBuffer)return tx(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new G1(w,c);var w}(t,Z0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function $1(n,e,t){const r=Ke(n);var o;(o=(0,Ee.Z)(function*(u,c,m){try{const w=yield c.getMetadata();if(yield function(H,W){const De=Ke(H),Le=yr(W.createTime);return De.persistence.runTransaction("hasNewerBundle","readonly",He=>De.qs.getBundleMetadata(He,W.id)).then(He=>!!He&&He.createTime.compareTo(Le)>=0)}(u.localStore,w))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(zS(w));const b=new E1(w,u.localStore,c.serializer);let x=yield c.bc();for(;x;){const H=yield b.zu(x);H&&m._updateProgress(H),x=yield c.bc()}const N=yield b.complete();return yield Ad(u,N.Ju,void 0),yield function(H,W){const De=Ke(H);return De.persistence.runTransaction("Save bundle","readwrite",Le=>De.qs.saveBundleMetadata(Le,W))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return Ds("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,c,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield KT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fR(n,e){return function eR(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.qs.getNamedQuery(u,r))}(yield DD(n),e)}))}(Ur(n=on(n,Xn)),e).then(t=>t?new Ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class FD extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ow(new tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fa.forKey(t,this.firestore,null)}}class Gx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FD(e)}get(e){const t=gg(e);return this._delegate.get(t).then(r=>new aw(this._firestore,new xd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=gg(e);return r?(uA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gg(e);return this._delegate.delete(t),this}}class zx{constructor(e){this._delegate=e}set(e,t,r){const o=gg(e);return r?(uA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new sw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pg.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new pg(e,new FD(e),t),o.set(t,u)),u}}pg.INSTANCES=new WeakMap;class Fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fa(t,new Jn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new Fa(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qy(this.firestore,mx(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,un.m9)(e))instanceof Jn&&yx(this._delegate,e)}set(e,t){t=uA("DocumentReference.set",t);try{return t?Fx(this._delegate,e,t):Fx(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Lx(this._delegate,e):Lx(this._delegate,e,t,...r)}catch(o){throw As(o,"updateDoc()","DocumentReference.update()")}}delete(){return function BR(n){return zy(on(n.firestore,Xn),[new Xp(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=qx(e),r=Wx(e,o=>new aw(this.firestore,new xd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Vx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function kR(n){n=on(n,Jn);const e=on(n.firestore,Xn),t=Ur(e),r=new _f(e);return function Y1(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,c){try{const m=yield function(w,b){const x=Ke(w);return x.persistence.runTransaction("read document","readonly",N=>x.localDocuments.getDocument(N,b))}(o,u);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new Ne(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Vy(m,`Failed to get document '${u} from cache`);c.reject(w)}}),function(o,u,c){return r.apply(this,arguments)})(yield DD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new xd(e,r,n._key,o,new fg(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function FR(n){n=on(n,Jn);const e=on(n.firestore,Xn);return ox(Ur(e),n._key,{source:"server"}).then(t=>aA(e,n,t))}(this._delegate):function PR(n){n=on(n,Jn);const e=on(n.firestore,Xn);return ox(Ur(e),n._key).then(t=>aA(e,n,t))}(this._delegate),t.then(r=>new aw(this.firestore,new xd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fa(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function qx(n){for(const e of n)if("object"==typeof e&&!lA(e))return e;return{}}function Wx(n,e){var t,r;let o;return o=lA(n[0])?n[0]:lA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class aw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kx(this._delegate,e._delegate)}}class uw extends aw{data(e){const t=this._delegate.data(e);return function Op(n,e){n||nt()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FD(e)}where(e,t,r){try{return new Ss(this.firestore,mf(this._delegate,function DR(n,e,t){const r=e,o=RD("where",n);return iw._create(o,r,t)}(e,t,r)))}catch(o){throw As(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,mf(this._delegate,function CR(n,e="asc"){const t=e,r=RD("orderBy",n);return sA._create(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,mf(this._delegate,function bR(n){return fx("limit",n),ND._create("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,mf(this._delegate,function TR(n){return fx("limitToLast",n),ND._create("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,mf(this._delegate,function AR(...n){return OD._create("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,mf(this._delegate,function SR(...n){return OD._create("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,mf(this._delegate,function xR(...n){return PD._create("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,mf(this._delegate,function MR(...n){return PD._create("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return JT(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function VR(n){n=on(n,Ji);const e=on(n.firestore,Xn),t=Ur(e),r=new _f(e);return function Q1(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,c){try{const m=yield fD(o,u,!0),w=new ZS(u,m.ir),b=w.sc(m.documents),x=w.applyChanges(b,!1);c.resolve(x.snapshot)}catch(m){const w=Vy(m,`Failed to execute query '${u} against cache`);c.reject(w)}}),function(o,u,c){return r.apply(this,arguments)})(yield DD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new yf(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function UR(n){n=on(n,Ji);const e=on(n.firestore,Xn),t=Ur(e),r=new _f(e);return ax(t,n._query,{source:"server"}).then(o=>new yf(e,r,n,o))}(this._delegate):function LR(n){n=on(n,Ji);const e=on(n.firestore,Xn),t=Ur(e),r=new _f(e);return Sx(n._query),ax(t,n._query).then(o=>new yf(e,r,n,o))}(this._delegate),t.then(r=>new cA(this.firestore,new yf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qx(e),r=Wx(e,o=>new cA(this.firestore,new yf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Vx(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}class cN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new uw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new uw(this._firestore,r))})}isEqual(e){return kx(this._delegate,e._delegate)}}class qy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fa(this.firestore,e):null}doc(e){try{return new Fa(this.firestore,void 0===e?bD(this._delegate):bD(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function jR(n,e){const t=on(n.firestore,Xn),r=bD(n),o=kD(n.converter,e);return zy(t,[SD(dg(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fa(this.firestore,t))}isEqual(e){return yx(this._delegate,e._delegate)}withConverter(e){return new qy(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function gg(n){return on(n,Jn)}class dA{constructor(...e){this._delegate=new Sd(...e)}static documentId(){return new dA(cr.keyField().canonicalString())}isEqual(e){return(e=(0,un.m9)(e))instanceof Sd&&this._delegate._internalPath.isEqual(e._internalPath)}}class mg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function tN(){return new eA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new mg(e)}static delete(){const e=function eN(){return new ew("deleteField")}();return e._methodName="FieldValue.delete",new mg(e)}static arrayUnion(...e){const t=function nN(...n){return new _R("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mg(t)}static arrayRemove(...e){const t=function rN(...n){return new vR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mg(t)}static increment(e){const t=function iN(n){return new wR("increment",n)}(e);return t._methodName="FieldValue.increment",new mg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dN={Firestore:Hx,GeoPoint:TD,Timestamp:Un,Blob:ow,Transaction:Gx,WriteBatch:zx,DocumentReference:Fa,DocumentSnapshot:aw,Query:Ss,QueryDocumentSnapshot:uw,QuerySnapshot:cA,CollectionReference:qy,FieldPath:dA,FieldValue:mg,setLogLevel:function lN(n){!function jC(n){Gl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function fN(n){(function hN(n,e){n.INTERNAL.registerComponent(new cm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},dN)))})(n,(e,t)=>new Hx(e,t,new uN)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(eE.Z);var pN=k(6451),LD=k(5363),gN=k(6063);class mN extends Ui.x{constructor(e=1/0,t=1/0,r=gN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!o&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const c=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=c;w+=2)m=w;m&&r.splice(0,m+1)}}}var yN=k(3099);function Zx(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,yN.B)({connector:()=>new mN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Kx(n,e){return(0,Ya.m)(e)?Qt(()=>n,e):Qt(()=>n)}var hA=k(9468);k(259);const pA=new Map,Qx={activated:!1,tokenObservers:[]},IN={initialized:!1,enabled:!1};function Cr(n){return pA.get(n)||Object.assign({},Qx)}function UD(){return IN}class SN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new un.BH,yield function xN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new un.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xi=new un.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mA(n){if(!Cr(n).activated)throw Xi.create("use-before-activation",{appName:n.name})}function $D(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,m;try{c=yield fetch(n,u)}catch(N){throw Xi.create("fetch-network-error",{originalErrorMessage:null==N?void 0:N.message})}if(200!==c.status)throw Xi.create("fetch-status-error",{httpStatus:c.status});try{m=yield c.json()}catch(N){throw Xi.create("fetch-parse-error",{originalErrorMessage:null==N?void 0:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+b,issuedAtTimeMillis:x}}),_A.apply(this,arguments)}function Xx(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const lw="firebase-app-check-store";let HD=null;function tM(){return HD||(HD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Xi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(lw,{keyPath:"compositeKey"})}}catch(t){e(Xi.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),HD)}function vA(){return vA=(0,Ee.Z)(function*(n,e){const r=(yield tM()).transaction(lw,"readwrite"),u=r.objectStore(lw).put({compositeKey:n,value:e});return new Promise((c,m)=>{u.onsuccess=w=>{c()},r.onerror=w=>{var b;m(Xi.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),vA.apply(this,arguments)}const cw=new Fl.Yd("@firebase/app-check");function IA(n,e){return(0,un.hl)()?function FN(n,e){return function nM(n,e){return vA.apply(this,arguments)}(function iM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{cw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function CA(){return UD().enabled}function bA(){return TA.apply(this,arguments)}function TA(){return TA=(0,Ee.Z)(function*(){const n=UD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TA.apply(this,arguments)}const $N={error:"UNKNOWN_ERROR"};function HN(n){return un.US.encodeString(JSON.stringify(n),!1)}function GD(n){return AA.apply(this,arguments)}function AA(){return AA=(0,Ee.Z)(function*(n,e=!1){const t=n.app;mA(t);const r=Cr(t);let u,o=r.token;if(o&&!Wy(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(Wy(w)?o=w:yield IA(t,void 0))}if(!e&&o&&Wy(o))return{token:o.token};let m,c=!1;if(CA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$D(Xx(t,yield bA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const w=yield r.exchangeTokenPromise;return yield IA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),o=yield Cr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?cw.warn(w.message):cw.error(w),u=w}return o?u?m=Wy(o)?{token:o.token,internalError:u}:uM(u):(m={token:o.token},r.token=o,yield IA(t,o)):m=uM(u),c&&aM(t,m),m}),AA.apply(this,arguments)}function SA(){return SA=(0,Ee.Z)(function*(n){const e=n.app;mA(e);const{provider:t}=Cr(e);if(CA()){const r=yield bA(),{token:o}=yield $D(Xx(e,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield t.getToken();return{token:r}}}),SA.apply(this,arguments)}function MA(n,e){const t=Cr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function oM(n){const{app:e}=n,t=Cr(e);let r=t.tokenRefresher;r||(r=function GN(n){const{app:e}=n;return new SN((0,Ee.Z)(function*(){let r;if(r=Cr(e).token?yield GD(n,!0):yield GD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function aM(n,e){const t=Cr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Wy(n){return n.expireTimeMillis-Date.now()>0}function uM(n){return{token:HN($N),error:n}}class zN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Cr(this.app);for(const t of e)MA(this.app,t.next);return Promise.resolve()}}const mM="app-check-internal";!function sO(){(0,qc._registerComponent)(new cm.wA("app-check",n=>function qN(n,e){return new zN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mM).initialize()})),(0,qc._registerComponent)(new cm.wA(mM,n=>function WN(n){return{getToken:e=>GD(n,e),getLimitedUseToken:()=>function sM(n){return SA.apply(this,arguments)}(n),addTokenListener:e=>function xA(n,e,t,r){const{app:o}=n,u=Cr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Wy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),oM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>oM(n))}(n,"INTERNAL",e),removeTokenListener:e=>MA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qc.registerVersion)("@firebase/app-check","0.8.0")}();class PA{constructor(){return(0,di.vb)("app-check")}}"undefined"!=typeof window&&window;var cO=k(9260);const _M=new f.OlP("angularfire2.auth.use-emulator"),vM=new f.OlP("angularfire2.auth.settings"),wM=new f.OlP("angularfire2.auth.tenant-id"),EM=new f.OlP("angularfire2.auth.langugage-code"),IM=new f.OlP("angularfire2.auth.use-device-language"),DM=new f.OlP("angularfire.auth.persistence"),CM=(n,e,t,r,o,u,c,m)=>(0,Qs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),c)for(const[b,x]of Object.entries(c))w.settings[b]=x;return m&&w.setPersistence(m),w},[t,r,o,u,c,m]);let bM=(()=>{class n{constructor(t,r,o,u,c,m,w,b,x,N,H,W){const De=new Ui.x,Le=Mt(void 0).pipe((0,LD.Q)(c.outsideAngular),Qt(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,Ft.U)(()=>(0,Qs.on)(t,u,r)),(0,Ft.U)(He=>CM(He,u,m,b,x,N,w,H)),Zx({bufferSize:1,refCount:!1}));if(Hu(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Mt(null);else{Le.pipe(ia()).subscribe();const _t=Le.pipe(Qt(jt=>jt.getRedirectResult().then(Xt=>Xt,()=>null)),di.iC,Zx({bufferSize:1,refCount:!1})),St=Le.pipe(Qt(jt=>new ss.y(Xt=>({unsubscribe:u.runOutsideAngular(()=>jt.onAuthStateChanged(ln=>Xt.next(ln),ln=>Xt.error(ln),()=>Xt.complete()))})))),bt=Le.pipe(Qt(jt=>new ss.y(Xt=>({unsubscribe:u.runOutsideAngular(()=>jt.onIdTokenChanged(ln=>Xt.next(ln),ln=>Xt.error(ln),()=>Xt.complete()))}))));this.authState=_t.pipe(Kx(St),(0,hA.R)(c.outsideAngular),(0,LD.Q)(c.insideAngular)),this.user=_t.pipe(Kx(bt),(0,hA.R)(c.outsideAngular),(0,LD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Qt(jt=>jt?(0,On.D)(jt.getIdToken()):Mt(null))),this.idTokenResult=this.user.pipe(Qt(jt=>jt?(0,On.D)(jt.getIdTokenResult()):Mt(null))),this.credential=(0,pN.T)(_t,De,this.authState.pipe(Yn(jt=>!jt))).pipe((0,Ft.U)(jt=>(null==jt?void 0:jt.user)?jt:null),(0,hA.R)(c.outsideAngular),(0,LD.Q)(c.insideAngular))}return(0,Qs.pX)(this,Le,u,{spy:{apply:(He,_t,St)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&St.then(bt=>De.next(bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qs.Dh),f.LFG(Qs.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(di.HU),f.LFG(_M,8),f.LFG(vM,8),f.LFG(wM,8),f.LFG(EM,8),f.LFG(IM,8),f.LFG(DM,8),f.LFG(PA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function TM(n,e){return function hO(n,e=vC.z){return new ss.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function FA(n,e){return TM(n,e).pipe((0,Ft.U)(t=>({payload:t,type:"query"})))}function qD(n,e){return FA(n,e).pipe(Gn(void 0),Ys(),(0,Ft.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const w=o.find(x=>x.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(c.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(c.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),u}))}function AM(n,e,t){return qD(n,t).pipe(wi((r,o)=>function pO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return LA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return LA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return LA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Y_(n,e=js.y){return n=null!=n?n:Xw,(0,Mr.e)((t,r)=>{let o,u=!0;t.subscribe((0,nr.x)(r,c=>{const m=e(c);(u||!n(o,m))&&(u=!1,o=m,r.next(c))}))})}(),(0,Ft.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function LA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function SM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class xM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ft.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Gn(void 0),Ys(),Yn(([r,o])=>o.length>0||!r),(0,Ft.U)(([r,o])=>o),di.iC)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SM(e);return AM(this.query,t,this.afs.schedulers.outsideAngular).pipe(di.iC)}valueChanges(e={}){return FA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),di.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(di.iC)}add(e){return this.ref.add(e)}doc(e){return new MM(this.ref.doc(e),this.afs)}}class MM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=OM(r,t);return new xM(o,u,this.afs)}snapshotChanges(){return function fO(n,e){return TM(n,e).pipe(Gn(void 0),Ys(),(0,Ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(di.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(di.iC)}}class mO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Yn(t=>t.length>0),di.iC):qD(this.query,this.afs.schedulers.outsideAngular).pipe(di.iC)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SM(e);return AM(this.query,t,this.afs.schedulers.outsideAngular).pipe(di.iC)}valueChanges(e={}){return FA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ft.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),di.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(di.iC)}}const RM=new f.OlP("angularfire2.enableFirestorePersistence"),NM=new f.OlP("angularfire2.firestore.persistenceSettings"),yO=new f.OlP("angularfire2.firestore.settings"),_O=new f.OlP("angularfire2.firestore.use-emulator");function OM(n,e=(t=>t)){return{query:e(n),ref:n}}let PM=(()=>{class n{constructor(t,r,o,u,c,m,w,b,x,N,H,W,De,Le,He,_t,St){this.schedulers=w;const bt=(0,Qs.on)(t,m,r),jt=x;N&&CM(bt,m,H,De,Le,He,W,_t),[this.firestore,this.persistenceEnabled$]=(0,Qs.cc)(`${bt.name}.firestore`,"AngularFirestore",bt.name,()=>{const Xt=m.runOutsideAngular(()=>bt.firestore());if(u&&Xt.settings(u),jt&&Xt.useEmulator(...jt),o&&!Hu(c)){const ln=()=>{try{return(0,On.D)(Xt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ms){return"undefined"!=typeof console&&console.warn(ms),Mt(!1)}};return[Xt,m.runOutsideAngular(ln)]}return[Xt,Mt(!1)]},[u,jt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=OM(o,r),m=this.schedulers.ngZone.run(()=>u);return new xM(m,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new mO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new MM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qs.Dh),f.LFG(Qs.xv,8),f.LFG(RM,8),f.LFG(yO,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(di.HU),f.LFG(NM,8),f.LFG(_O,8),f.LFG(bM,8),f.LFG(_M,8),f.LFG(vM,8),f.LFG(wM,8),f.LFG(EM,8),f.LFG(IM,8),f.LFG(DM,8),f.LFG(PA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vO=(()=>{class n{constructor(){cO.Z.registerVersion("angularfire",di.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:RM,useValue:!0},{provide:NM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[PM]}),n})(),WD=(()=>{class n{constructor(){}get Folder(){return localStorage.getItem("folder")}set Folder(t){localStorage.setItem("folder",t.toString())}get Exercise(){return localStorage.getItem("exercise")}set Exercise(t){localStorage.setItem("exercise",t.toString())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VA=(()=>{class n{constructor(t,r,o){this.afs=t,this.globalService=r,this.datepipe=o}AddFolder(t){this.afs.collection("Folder",r=>r.where("foldername","==",t)).get().subscribe(r=>{r.docs.length<=0&&this.afs.collection("/Folder").add({foldername:t})})}GetFolder(){return this.afs.collection("/Folder")}AddExercise(t){this.afs.collection("Exercise",r=>r.where("ex","==",t)).get().subscribe(r=>{r.docs.length<=0&&this.afs.collection("/Exercise").add({ex:t})})}GetExercise(){return this.afs.collection("/Exercise")}AddExerciseData(t){var r=this.globalService.Folder;this.AddFolder(r);var o=this.globalService.Exercise;return this.AddExercise(o),t.id=this.afs.createId(),this.afs.collection("mySetTrackerData").doc("/"+r).collection("/"+o).doc(t.id).set(t).catch(u=>{alert(u.message)})}EditExerciseData(t){var r=this.globalService.Folder,o=this.globalService.Exercise;return this.afs.collection("mySetTrackerData").doc("/"+r).collection("/"+o).doc(t.id).update(t).catch(u=>{alert("No Update Found")})}DeleteExerciseData(t){var r=this.globalService.Folder,o=this.globalService.Exercise;this.afs.collection("mySetTrackerData").doc("/"+r).collection("/"+o).doc(t.id).delete().catch(u=>{alert(u.message)})}GetExerciseData(){var t=this.globalService.Folder,r=this.globalService.Exercise;return this.afs.collection("/mySetTrackerData").doc(t).collection(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(PM),f.LFG(WD),f.LFG(oc))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14)(1,"a",15),f.NdJ("click",function(){return f.CHM(t),f.oxw().addClicked()}),f._UZ(2,"img",16),f.qZA()()}}function EO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14)(1,"a",15),f.NdJ("click",function(){return f.CHM(t),f.oxw().addClicked()}),f._UZ(2,"img",17),f.qZA()()}}function IO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",18)(1,"li",19)(2,"div",1)(3,"div",14),f._uU(4),f.qZA(),f.TgZ(5,"div",14)(6,"a",20),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().onFolderNameClicked(u.foldername)}),f.TgZ(7,"span",21),f._UZ(8,"img",22),f.qZA()()()()()()}if(2&n){const t=e.$implicit;f.xp6(4),f.hij(" ",t.foldername," ")}}let DO=(()=>{class n{constructor(t,r,o,u){this.fb=t,this.service=r,this.globalService=o,this.router=u,this.addNotClicked=!0,this.folderNameForm=this.fb.group({foldername:[""]})}ngOnInit(){this.service.GetFolder().valueChanges().subscribe(t=>{t.length>0&&(this.folder=t)})}onSubmit(){this.folder.push(this.folderNameForm.value),console.log(this.folderNameForm.value)}addClicked(){this.addNotClicked=!this.addNotClicked}onFolderNameClicked(t){this.globalService.Folder=t,this.router.navigate(["/exercises"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(K_),f.Y36(VA),f.Y36(WD),f.Y36(Or))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:24,vars:4,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-8"],["class","col",4,"ngIf"],[3,"formGroup","ngSubmit"],["id","collapseExample",1,"collapse","divwidth"],[1,"card","card-body"],[1,"mb-3"],["for","recipient-name",1,"col-form-label",2,"font-size","small"],["type","text","id","folder-name","formControlName","foldername","placeholder","Ex. Chest, Back, Shoulder etc.",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","buttonbg",2,"color","white"],[1,"card","divwidth"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"col"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"add",3,"click"],["src","../../assets/plus.png",1,"addCloseImage"],["src","../../../assets/remove.png",1,"addCloseImage"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"click"],[1,"span"],["src","../../../assets/arrow-right-solid.svg","alt","goto",1,"listIcon"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"H5"),f._uU(4,"Folders"),f.qZA()(),f.YNc(5,wO,3,0,"div",3),f.YNc(6,EO,3,0,"div",3),f.qZA(),f.TgZ(7,"form",4),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",1)(12,"label",8),f._uU(13,"Name"),f.qZA()(),f.TgZ(14,"div",1)(15,"div",2),f._UZ(16,"input",9),f.qZA(),f.TgZ(17,"div",10)(18,"button",11),f._uU(19,"Add"),f.qZA()()()()()()(),f.TgZ(20,"div"),f._uU(21," \xa0\n"),f.qZA(),f.TgZ(22,"div",12),f.YNc(23,IO,9,1,"ul",13),f.qZA()()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.addNotClicked),f.xp6(1),f.Q6J("ngIf",!r.addNotClicked),f.xp6(1),f.Q6J("formGroup",r.folderNameForm),f.xp6(16),f.Q6J("ngForOf",r.folder))},directives:[Jr,sp,p_,wh,Yf,_h,zc,Zn],styles:[""]}),n})();function CO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14)(1,"a",15),f.NdJ("click",function(){return f.CHM(t),f.oxw().addClicked()}),f._UZ(2,"img",16),f.qZA()()}}function bO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",14)(1,"a",15),f.NdJ("click",function(){return f.CHM(t),f.oxw().addClicked()}),f._UZ(2,"img",17),f.qZA()()}}function TO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",18)(1,"li",19)(2,"div",1)(3,"div",14),f._uU(4),f.qZA(),f.TgZ(5,"div",14)(6,"a",20),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().onExerciseNameClicked(u.ex)}),f.TgZ(7,"span",21),f._UZ(8,"img",22),f.qZA()()()()()()}if(2&n){const t=e.$implicit;f.xp6(4),f.hij(" ",t.ex," ")}}let AO=(()=>{class n{constructor(t,r,o,u){this.fb=t,this.service=r,this.globalService=o,this.router=u,this.addNotClicked=!0,this.exerciseForm=this.fb.group({ex:[""]})}ngOnInit(){this.service.GetExercise().valueChanges().subscribe(t=>{t.length>0&&(this.excerise=t)})}addClicked(){this.addNotClicked=!this.addNotClicked}onSubmit(){this.excerise.push(this.exerciseForm.value),console.log(this.exerciseForm.value)}onExerciseNameClicked(t){this.globalService.Exercise=t,this.router.navigate(["/analysis"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(K_),f.Y36(VA),f.Y36(WD),f.Y36(Or))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-excersises"]],decls:28,vars:6,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-8"],["class","col",4,"ngIf"],["id","collapseExample",1,"collapse","divwidth"],[3,"formGroup","ngSubmit"],[1,"card","card-body"],[1,"mb-3"],["for","recipient-name",1,"col-form-label",2,"font-size","small"],["type","text","id","folder-name","formControlName","ex","placeholder","Enter exercise name",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","buttonbg",2,"color","white"],[1,"card","divwidth"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"col"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"add",3,"click"],["src","../../assets/plus.png",1,"addCloseImage"],["src","../../../assets/remove.png",1,"addCloseImage"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"click"],[1,"span"],["src","../../../assets/arrow-right-solid.svg","alt","goto",1,"listIcon"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"H5"),f._uU(4),f.qZA()(),f.YNc(5,CO,3,0,"div",3),f.YNc(6,bO,3,0,"div",3),f.qZA(),f.TgZ(7,"div",4)(8,"form",5),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(9,"div",6)(10,"div",7)(11,"div",1)(12,"label",8),f._uU(13,"Name"),f.qZA()(),f.TgZ(14,"div",1)(15,"div",2),f._UZ(16,"input",9),f.qZA(),f.TgZ(17,"div",10)(18,"button",11),f._uU(19,"Add"),f.qZA()()()()()()(),f.TgZ(20,"div"),f._uU(21," \xa0\n"),f.qZA(),f.TgZ(22,"h6"),f._uU(23),f.qZA(),f.TgZ(24,"div"),f._uU(25," \xa0\n"),f.qZA(),f.TgZ(26,"div",12),f.YNc(27,TO,9,1,"ul",13),f.qZA()()),2&t&&(f.xp6(4),f.hij("Add exercise for ",r.globalService.Folder,""),f.xp6(1),f.Q6J("ngIf",r.addNotClicked),f.xp6(1),f.Q6J("ngIf",!r.addNotClicked),f.xp6(2),f.Q6J("formGroup",r.exerciseForm),f.xp6(15),f.Oqu(r.globalService.Folder),f.xp6(4),f.Q6J("ngForOf",r.excerise))},directives:[Jr,sp,p_,wh,Yf,_h,zc,Zn],styles:[""]}),n})();var kM=k(7732);function SO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",33)(1,"a",34),f.NdJ("click",function(){return f.CHM(t),f.oxw().addClicked()}),f._UZ(2,"img",35),f.qZA()()}}function xO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",33)(1,"a",34),f.NdJ("click",function(){return f.CHM(t),f.oxw().addClicked()}),f._UZ(2,"img",36),f.qZA()()}}function MO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",39)(1,"li",40)(2,"div",1)(3,"div",33),f._uU(4),f.qZA(),f.TgZ(5,"div",33)(6,"span",41),f._uU(7),f.qZA()(),f.TgZ(8,"div",33)(9,"span",42),f._uU(10),f.qZA()(),f.TgZ(11,"div",33)(12,"span")(13,"a",43),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw(2).onEditClick(u)}),f._UZ(14,"img",44),f.qZA(),f._uU(15," |"),f.TgZ(16,"a")(17,"img",45),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw(2).onDeleteClick(u)}),f.qZA()()()()()()()}if(2&n){const t=e.$implicit;f.xp6(4),f.hij(" ",t.time," "),f.xp6(3),f.hij("",t.Weight," KG"),f.xp6(3),f.hij("",t.Reps," rep")}}function RO(n,e){if(1&n&&(f.TgZ(0,"div",37),f.YNc(1,MO,18,3,"ul",38),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngForOf",t.Todaydata)}}function NO(n,e){1&n&&(f.TgZ(0,"div",46)(1,"p")(2,"strong"),f._uU(3,"No Data Found"),f.qZA()()())}function OO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"ul",39)(1,"li",40)(2,"div",1)(3,"div",33),f._uU(4),f.qZA(),f.TgZ(5,"div",33)(6,"span",41),f._uU(7),f.qZA()(),f.TgZ(8,"div",33)(9,"span",42),f._uU(10),f.qZA()(),f.TgZ(11,"div",33)(12,"span")(13,"a",47),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw(2).onEditClick(u)}),f._UZ(14,"img",44),f.qZA(),f._uU(15," | "),f.TgZ(16,"a",47),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw(2).onDeleteClick(u)}),f._UZ(17,"img",48),f.qZA()()()()()()}if(2&n){const t=e.$implicit;f.xp6(4),f.hij(" ",t.date," "),f.xp6(3),f.hij("",t.Weight," KG"),f.xp6(3),f.hij("",t.Reps," rep")}}function PO(n,e){if(1&n&&(f.TgZ(0,"div",37),f.YNc(1,OO,18,3,"ul",38),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Q6J("ngForOf",t.EarlierData)}}function kO(n,e){1&n&&(f.TgZ(0,"div",46)(1,"p")(2,"strong"),f._uU(3,"No Data Found"),f.qZA()()())}const FO=[{path:"",component:DO},{path:"exercises",component:AO,data:{breadcrumb:"Home",URL:""}},{path:"analysis",component:(()=>{class n{constructor(t,r,o,u){this.fb=t,this.globalService=r,this.sTservice=o,this.datepipe=u,this.addNotClicked=!0,this.Todaydata=[],this.EarlierData=[],this.RecordForm=this.fb.group({id:[""],Weight:[""],Reps:[""],time:[Date],date:[Date]})}ngOnInit(){this.sTservice.GetExerciseData().valueChanges().subscribe(t=>{t.length>0&&(this.recordData=t,this.recordData.sort((r,o)=>Date.parse(r.time)-Date.parse(o.time)),this.Todaydata=[],this.EarlierData=[],this.structureData())},t=>{},()=>{})}structureData(){var t,r=null===(t=this.datepipe.transform(new Date,"MM-dd-yyyy"))||void 0===t?void 0:t.toString();this.recordData.forEach(o=>{o.date==r?(this.Todaydata.push(o),this.Todaydata.sort((0,kM.h)("time","desc"))):(this.EarlierData.push(o),this.EarlierData.sort((0,kM.h)("date","desc"))),console.log(this.Todaydata),console.log(this.EarlierData)})}addClicked(){this.addNotClicked=!this.addNotClicked}onSubmit(){var t,r,o;null===(t=this.datepipe.transform(new Date,"MM-dd-yyyy_h:mm:ss"))||void 0===t||t.toString(),this.RecordForm.controls.time.patchValue(null===(r=this.datepipe.transform(new Date,"h:mm:ss"))||void 0===r?void 0:r.toString()),this.RecordForm.controls.date.patchValue(null===(o=this.datepipe.transform(new Date,"MM-dd-yyyy"))||void 0===o?void 0:o.toString()),this.sTservice.AddExerciseData(this.RecordForm.value),this.clearForm()}onEditSubmit(){this.sTservice.EditExerciseData(this.RecordForm.value)}onCloseClick(){this.clearForm()}clearForm(){this.RecordForm.controls.id.patchValue(""),this.RecordForm.controls.time.patchValue(""),this.RecordForm.controls.date.patchValue(""),this.RecordForm.controls.Weight.patchValue(""),this.RecordForm.controls.Reps.patchValue("")}onEditClick(t){this.RecordForm.controls.id.patchValue(t.id),this.RecordForm.controls.time.patchValue(t.time),this.RecordForm.controls.date.patchValue(t.date),this.RecordForm.controls.Weight.patchValue(t.Weight),this.RecordForm.controls.Reps.patchValue(t.Reps)}onDeleteClick(t){this.sTservice.DeleteExerciseData(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(K_),f.Y36(WD),f.Y36(VA),f.Y36(oc))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-analysis"]],decls:77,vars:10,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-8"],["class","col",4,"ngIf"],["id","collapseExample",1,"collapse","divwidth"],[1,"card","card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","weight",1,"col-form-label",2,"font-size","small"],["type","number","id","folder-name","formControlName","Weight","placeholder","Enter weight in KG",1,"form-control"],["type","number","id","folder-name","formControlName","Reps","placeholder","Enter number of repetions",1,"form-control"],[1,"col-4"],["type","submit",1,"btn","buttonbg",2,"color","white"],["id","accordionPanelsStayOpenExample",1,"accordion","divwidth"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne","aria-expanded","true","aria-controls","panelsStayOpen-collapseOne",1,"accordion-button"],["id","panelsStayOpen-collapseOne",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["class","card","style","margin-left: -7px;overflow-x: overlay;\n                    height: 200px;",4,"ngIf"],["class","card","style","margin-left: -7px;",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["id","exampleModal","tabindex","-1","data-bs-backdrop","static","data-bs-keyboard","false","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["type","text","id","time","formControlName","time","hidden","true",1,"form-control"],["type","text","id","date","formControlName","date","hidden","true",1,"form-control"],["type","text","id","id","formControlName","id","hidden","true",1,"form-control"],[1,"col"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"add",3,"click"],["src","../../assets/plus.png",1,"addCloseImage"],["src","../../../assets/remove.png",1,"addCloseImage"],[1,"card",2,"margin-left","-7px","overflow-x","overlay","height","200px"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[2,"color","orange"],[2,"color","greenyellow"],["data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click"],["src","../../../assets/pen.png",1,"listIcon"],["src","../../../assets/delete.png",1,"listIcon",3,"click"],[1,"card",2,"margin-left","-7px"],[3,"click"],["src","../../../assets/delete.png",1,"listIcon"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"H5"),f._uU(4),f.qZA()(),f.YNc(5,SO,3,0,"div",3),f.YNc(6,xO,3,0,"div",3),f.qZA(),f.TgZ(7,"div",4)(8,"div",5)(9,"form",6),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(10,"div",7)(11,"div",1)(12,"div",2)(13,"label",8),f._uU(14,"Weight"),f.qZA(),f._UZ(15,"input",9),f.qZA()(),f.TgZ(16,"div",1)(17,"div",2)(18,"label",8),f._uU(19,"Total Reps"),f.qZA(),f._UZ(20,"input",10),f.qZA()(),f.TgZ(21,"div"),f._uU(22," \xa0 "),f.qZA(),f.TgZ(23,"div",1)(24,"div",11)(25,"button",12),f._uU(26,"Add"),f.qZA()()()()()()(),f.TgZ(27,"div"),f._uU(28," \xa0 "),f.qZA(),f.TgZ(29,"h6"),f._uU(30),f.qZA(),f.TgZ(31,"div",13)(32,"div",14)(33,"h2",15)(34,"button",16),f._uU(35," Today "),f.qZA()(),f.TgZ(36,"div",17)(37,"div",18),f.YNc(38,RO,2,1,"div",19),f.YNc(39,NO,4,0,"div",20),f.qZA()()(),f.TgZ(40,"div",14)(41,"h2",15)(42,"button",21),f._uU(43," Earlier "),f.qZA()(),f.TgZ(44,"div",22)(45,"div",18),f.YNc(46,PO,2,1,"div",19),f.YNc(47,kO,4,0,"div",20),f.qZA()()()(),f.TgZ(48,"div",23)(49,"div",24)(50,"div",25)(51,"div",26)(52,"h1",27),f._uU(53,"Edit now"),f.qZA(),f.TgZ(54,"button",28),f.NdJ("click",function(){return r.onCloseClick()}),f.qZA()(),f.TgZ(55,"div",29)(56,"form",6),f.NdJ("ngSubmit",function(){return r.onEditSubmit()}),f._UZ(57,"input",30)(58,"input",31)(59,"input",32),f.TgZ(60,"div",7)(61,"div",1)(62,"div",2)(63,"label",8),f._uU(64,"Weight"),f.qZA(),f._UZ(65,"input",9),f.qZA()(),f.TgZ(66,"div",1)(67,"div",2)(68,"label",8),f._uU(69,"Total Reps"),f.qZA(),f._UZ(70,"input",10),f.qZA()(),f.TgZ(71,"div"),f._uU(72," \xa0 "),f.qZA(),f.TgZ(73,"div",1)(74,"div",11)(75,"button",12),f._uU(76,"Update"),f.qZA()()()()()()()()()()),2&t&&(f.xp6(4),f.hij("Add Record for ",r.globalService.Exercise,""),f.xp6(1),f.Q6J("ngIf",r.addNotClicked),f.xp6(1),f.Q6J("ngIf",!r.addNotClicked),f.xp6(3),f.Q6J("formGroup",r.RecordForm),f.xp6(21),f.Oqu(r.globalService.Exercise),f.xp6(8),f.Q6J("ngIf",r.Todaydata.length>0),f.xp6(1),f.Q6J("ngIf",0==r.Todaydata.length),f.xp6(7),f.Q6J("ngIf",r.EarlierData.length>0),f.xp6(1),f.Q6J("ngIf",0==r.EarlierData.length),f.xp6(9),f.Q6J("formGroup",r.RecordForm))},directives:[Jr,sp,p_,wh,tm,Yf,_h,zc,Zn],styles:[""]}),n})(),data:{breadcrumb:"Exercise",URL:"exercises"}}];let LO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[gn.forRoot(FO)],gn]}),n})(),VO=(()=>{class n{constructor(t){this.router=t,this._breadcrumbs$=new Hr([]),this.breadcrumbs$=this._breadcrumbs$.asObservable(),this.router.events.pipe(Yn(r=>r instanceof os)).subscribe(r=>{const u=[];this.addBreadcrumb(this.router.routerState.snapshot.root,[],u),this._breadcrumbs$.next(u)})}addBreadcrumb(t,r,o){if(t){const u=r.concat(t.url.map(c=>c.path));if(t.data.breadcrumb){const c={label:this.getLabel(t.data),url:"/"+u.join("/")};o.push(c)}this.addBreadcrumb(t.firstChild,u,o)}}getLabel(t){return"function"==typeof t.breadcrumb?t.breadcrumb(t):t.breadcrumb}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Or))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"li")(1,"a",2),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().route(u.label)}),f._UZ(2,"img",3),f._uU(3),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(3),f.hij("\xa0\xa0",t.label,"")}}let BO=(()=>{class n{constructor(t,r){this.breadcrumbService=t,this.router=r,this.breadcrumbs$=this.breadcrumbService.breadcrumbs$}route(t){"Exercise"==t&&this.router.navigate(["/exercises"]),"Home"==t&&this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(VO),f.Y36(Or))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-breadcrumb"]],decls:4,vars:3,consts:[[1,"container","mt-2"],[4,"ngFor","ngForOf"],[2,"font-weight","bold",3,"click"],["src","../../../assets/back.png",1,"image"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"ul"),f.YNc(2,UO,4,1,"li",1),f.ALo(3,"async"),f.qZA()()),2&t&&(f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,r.breadcrumbs$)))},directives:[Zn],pipes:[Od],styles:['ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:">";margin:0 6px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before{content:"";margin:0}.image[_ngcontent-%COMP%]{margin-top:-2px;width:18px}a[_ngcontent-%COMP%]:hover{cursor:pointer}']}),n})(),jO=(()=>{class n{constructor(){this.title="SetTrackerApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"navbar","bg-body-tertiary","navbg"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../assets/logo-no-background.png","alt","set tracker logo",2,"width","156px"],["routerLink","/"],["src","../assets/house-solid.svg","alt","home",2,"width","28px"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._UZ(3,"img",3),f.qZA(),f.TgZ(4,"a",4),f._UZ(5,"img",5),f.qZA()()(),f._UZ(6,"app-breadcrumb")(7,"router-outlet"))},directives:[xl,BO,ih],styles:[".navbg[_ngcontent-%COMP%]{background:#642B73;background:linear-gradient(to right,#C6426E,#642B73)}"]}),n})();const FM_firebaseConfig={apiKey:"AIzaSyAm6RL2E5wSt0drLJ-a_o0ORlOtSdKkJXs",authDomain:"settrackerapp-b0b97.firebaseapp.com",projectId:"settrackerapp-b0b97",storageBucket:"settrackerapp-b0b97.appspot.com",messagingSenderId:"995817019071",appId:"1:995817019071:web:eafdcb370875cdcdff980a",measurementId:"G-YL8J501H27"};let $O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[jO]}),n.\u0275inj=f.cJS({providers:[oc],imports:[[uo,LO,Jw,Qs.hO.initializeApp(FM_firebaseConfig),vO]]}),n})();(0,f.G48)(),qa().bootstrapModule($O).catch(n=>console.error(n))},2011:(Xe,Ce,k)=>{k.d(Ce,{Dh:()=>pe,GT:()=>ce,cc:()=>X,hO:()=>Ie,on:()=>$,pX:()=>se,xv:()=>fe});var f=k(5e3),Q=k(9260),O=k(4976);Xe=k.hmd(Xe);const ae=["ngOnDestroy"],se=(Se,et,at,Pe={})=>new Proxy(Se,{get:(_e,me)=>at.runOutsideAngular(()=>{var ze;if(Se[me])return(null===(ze=null==Pe?void 0:Pe.spy)||void 0===ze?void 0:ze.get)&&Pe.spy.get(me,Se[me]),Se[me];if(ae.indexOf(me)>-1)return()=>{};const je=et.toPromise().then(gt=>{const ie=gt&&gt[me];return"function"==typeof ie?ie.bind(gt):ie&&ie.then?ie.then(wt=>at.run(()=>wt)):at.run(()=>ie)});return new Proxy(()=>{},{get:(gt,ie)=>je[ie],apply:(gt,ie,wt)=>je.then(Tt=>{var mt;const Zt=Tt&&Tt(...wt);return(null===(mt=null==Pe?void 0:Pe.spy)||void 0===mt?void 0:mt.apply)&&Pe.spy.apply(me,wt,Zt),Zt})})})}),ce=(Se,et)=>{et.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(Pe=>{Object.defineProperty(Se.prototype,Pe,Object.getOwnPropertyDescriptor(at.prototype||at,Pe))})})};class de{constructor(et){return et}}const pe=new f.OlP("angularfire2.app.options"),fe=new f.OlP("angularfire2.app.name");function $(Se,et,at){const _e="object"==typeof at&&at||{};_e.name=_e.name||"string"==typeof at&&at||"[DEFAULT]";const ze=Q.Z.apps.filter(je=>je&&je.name===_e.name)[0]||et.runOutsideAngular(()=>Q.Z.initializeApp(Se,_e));try{JSON.stringify(Se)!==JSON.stringify(ze.options)&&L("error",`${ze.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new de(ze)}const L=(Se,...et)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Se](...et)},q={provide:de,useFactory:$,deps:[pe,f.R0b,[new f.FiY,fe]]};let Ie=(()=>{class Se{constructor(at){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",f.q4F.full,at.toString())}static initializeApp(at,Pe){return{ngModule:Se,providers:[{provide:pe,useValue:at},{provide:fe,useValue:Pe}]}}}return Se.\u0275fac=function(at){return new(at||Se)(f.LFG(f.Lbi))},Se.\u0275mod=f.oAB({type:Se}),Se.\u0275inj=f.cJS({providers:[q]}),Se})();function X(Se,et,at,Pe,_e){const[,me,ze]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Se)||[];if(me)return function Fe(Se,et){try{return Se.toString()===et.toString()}catch(at){return Se===et}}(_e,ze)||(he("error",`${et} was already initialized on the ${at} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:ze})),me;{const je=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Se,je,_e]),je}}const Be=!!Xe.hot,he=(Se,...et)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Se](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Xe,Ce,k)=>{k.d(Ce,{q4:()=>gl,iC:()=>Eo,HU:()=>ga,vb:()=>du,JM:()=>wr});var f=k(5e3),Q=k(259),O=k(5861),ae=k(6881),se=k(2090),ce=k(4859),de=k(1877);let fe,$;const Ie=new WeakMap,X=new WeakMap,Fe=new WeakMap,Be=new WeakMap,he=new WeakMap;let at={get(E,D,S){if(E instanceof IDBTransaction){if("done"===D)return X.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Fe.get(E);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return ze(E[D])},set:(E,D,S)=>(E[D]=S,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function me(E){return"function"==typeof E?function _e(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return $||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(je(this),D),ze(Ie.get(this))}:function(...D){return ze(E.apply(je(this),D))}:function(D,...S){const P=E.call(je(this),D,...S);return Fe.set(P,D.sort?D.sort():[D]),ze(P)}}(E):(E instanceof IDBTransaction&&function et(E){if(X.has(E))return;const D=new Promise((S,P)=>{const G=()=>{E.removeEventListener("complete",Z),E.removeEventListener("error",le),E.removeEventListener("abort",le)},Z=()=>{S(),G()},le=()=>{P(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",Z),E.addEventListener("error",le),E.addEventListener("abort",le)});X.set(E,D)}(E),((E,D)=>D.some(S=>E instanceof S))(E,function L(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,at):E)}function ze(E){if(E instanceof IDBRequest)return function Se(E){const D=new Promise((S,P)=>{const G=()=>{E.removeEventListener("success",Z),E.removeEventListener("error",le)},Z=()=>{S(ze(E.result)),G()},le=()=>{P(E.error),G()};E.addEventListener("success",Z),E.addEventListener("error",le)});return D.then(S=>{S instanceof IDBCursor&&Ie.set(S,E)}).catch(()=>{}),he.set(D,E),D}(E);if(Be.has(E))return Be.get(E);const D=me(E);return D!==E&&(Be.set(E,D),he.set(D,E)),D}const je=E=>he.get(E),wt=["get","getKey","getAll","getAllKeys","count"],Tt=["put","add","delete","clear"],mt=new Map;function Zt(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(mt.get(D))return mt.get(D);const S=D.replace(/FromIndex$/,""),P=D!==S,G=Tt.includes(S);if(!(S in(P?IDBIndex:IDBObjectStore).prototype)||!G&&!wt.includes(S))return;const Z=function(){var le=(0,O.Z)(function*(qe,...Ve){const it=this.transaction(qe,G?"readwrite":"readonly");let Ct=it.store;return P&&(Ct=Ct.index(Ve.shift())),(yield Promise.all([Ct[S](...Ve),G&&it.done]))[0]});return function(Ve){return le.apply(this,arguments)}}();return mt.set(D,Z),Z}!function Pe(E){at=E(at)}(E=>KD(ZD({},E),{get:(D,S,P)=>Zt(D,S)||E.get(D,S,P),has:(D,S)=>!!Zt(D,S)||E.has(D,S)}));const lt="@firebase/installations",es="w:0.6.4",te="FIS_v2",ut=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pt(E){return E instanceof se.ZR&&E.code.includes("request-failed")}function qt({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function dt(E){return{token:E.token,requestStatus:2,expiresIn:pi(E.expiresIn),creationTime:Date.now()}}function Yt(E,D){return bn.apply(this,arguments)}function bn(){return(bn=(0,O.Z)(function*(E,D){const P=(yield D.json()).error;return ut.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function _n({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Tn(E,{refreshToken:D}){const S=_n(E);return S.append("Authorization",function ft(E){return`${te} ${E}`}(D)),S}function dr(E){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function pi(E){return Number(E.replace("s","000"))}function La(E,D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:S}){const P=qt(E),G=_n(E),Z=D.getImmediate({optional:!0});if(Z){const it=yield Z.getHeartbeatsHeader();it&&G.append("x-firebase-client",it)}const qe={method:"POST",headers:G,body:JSON.stringify({fid:S,authVersion:te,appId:E.appId,sdkVersion:es})},Ve=yield dr(()=>fetch(P,qe));if(Ve.ok){const it=yield Ve.json();return{fid:it.fid||S,registrationStatus:2,refreshToken:it.refreshToken,authToken:dt(it.authToken)}}throw yield Yt("Create Installation",Ve)})).apply(this,arguments)}function $n(E){return new Promise(D=>{setTimeout(D,E)})}const Uu=/^[cdef][\w-]{21}$/;function hr(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const S=function fr(E){return function Vu(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Uu.test(S)?S:""}catch(E){return""}}function Qr(E){return`${E.appName}!${E.appId}`}const xt=new Map;function pt(E,D){const S=Qr(E);Ms(S,D),function Vt(E,D){const S=function Rn(){return!Br&&"BroadcastChannel"in self&&(Br=new BroadcastChannel("[Firebase] FID Change"),Br.onmessage=E=>{Ms(E.data.key,E.data.fid)}),Br}();S&&S.postMessage({key:E,fid:D}),function gi(){0===xt.size&&Br&&(Br.close(),Br=null)}()}(S,D)}function Ms(E,D){const S=xt.get(E);if(S)for(const P of S)P(D)}let Br=null;const Gt="firebase-installations-store";let Ni=null;function br(){return Ni||(Ni=function gt(E,D,{blocked:S,upgrade:P,blocking:G,terminated:Z}={}){const le=indexedDB.open(E,D),qe=ze(le);return P&&le.addEventListener("upgradeneeded",Ve=>{P(ze(le.result),Ve.oldVersion,Ve.newVersion,ze(le.transaction))}),S&&le.addEventListener("blocked",()=>S()),qe.then(Ve=>{Z&&Ve.addEventListener("close",()=>Z()),G&&Ve.addEventListener("versionchange",()=>G())}).catch(()=>{}),qe}("firebase-installations-database",1,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Gt)}})),Ni}function vn(E,D){return An.apply(this,arguments)}function An(){return(An=(0,O.Z)(function*(E,D){const S=Qr(E),G=(yield br()).transaction(Gt,"readwrite"),Z=G.objectStore(Gt),le=yield Z.get(S);return yield Z.put(D,S),yield G.done,(!le||le.fid!==D.fid)&&pt(E,D.fid),D})).apply(this,arguments)}function Ns(E){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(E){const D=Qr(E),P=(yield br()).transaction(Gt,"readwrite");yield P.objectStore(Gt).delete(D),yield P.done})).apply(this,arguments)}function ts(E,D){return _r.apply(this,arguments)}function _r(){return(_r=(0,O.Z)(function*(E,D){const S=Qr(E),G=(yield br()).transaction(Gt,"readwrite"),Z=G.objectStore(Gt),le=yield Z.get(S),qe=D(le);return void 0===qe?yield Z.delete(S):yield Z.put(qe,S),yield G.done,qe&&(!le||le.fid!==qe.fid)&&pt(E,qe.fid),qe})).apply(this,arguments)}function U(E){return V.apply(this,arguments)}function V(){return(V=(0,O.Z)(function*(E){let D;const S=yield ts(E.appConfig,P=>{const G=z(P),Z=Ae(E,G);return D=Z.registrationPromise,Z.installationEntry});return""===S.fid?{installationEntry:yield D}:{installationEntry:S,registrationPromise:D}})).apply(this,arguments)}function z(E){return hn(E||{fid:hr(),registrationStatus:0})}function Ae(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ut.create("app-offline"))};const S={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},P=function ne(E,D){return Qe.apply(this,arguments)}(E,S);return{installationEntry:S,registrationPromise:P}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:At(E)}:{installationEntry:D}}function Qe(){return(Qe=(0,O.Z)(function*(E,D){try{const S=yield La(E,D);return vn(E.appConfig,S)}catch(S){throw Pt(S)&&409===S.customData.serverCode?yield Ns(E.appConfig):yield vn(E.appConfig,{fid:D.fid,registrationStatus:0}),S}})).apply(this,arguments)}function At(E){return It.apply(this,arguments)}function It(){return(It=(0,O.Z)(function*(E){let D=yield In(E.appConfig);for(;1===D.registrationStatus;)yield $n(100),D=yield In(E.appConfig);if(0===D.registrationStatus){const{installationEntry:S,registrationPromise:P}=yield U(E);return P||S}return D})).apply(this,arguments)}function In(E){return ts(E,D=>{if(!D)throw ut.create("installation-not-found");return hn(D)})}function hn(E){return function tn(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Ut(E,D){return pr.apply(this,arguments)}function pr(){return(pr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},S){const P=mi(E,S),G=Tn(E,S),Z=D.getImmediate({optional:!0});if(Z){const it=yield Z.getHeartbeatsHeader();it&&G.append("x-firebase-client",it)}const qe={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:es,appId:E.appId}})},Ve=yield dr(()=>fetch(P,qe));if(Ve.ok)return dt(yield Ve.json());throw yield Yt("Generate Auth Token",Ve)})).apply(this,arguments)}function mi(E,{fid:D}){return`${qt(E)}/${D}/authTokens:generate`}function jr(E){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(E,D=!1){let S;const P=yield ts(E.appConfig,Z=>{if(!rt(Z))throw ut.create("not-registered");const le=Z.authToken;if(!D&&kt(le))return Z;if(1===le.requestStatus)return S=oe(E,D),Z;{if(!navigator.onLine)throw ut.create("app-offline");const qe=Wt(Z);return S=ge(E,qe),qe}});return S?yield S:P.authToken})).apply(this,arguments)}function oe(E,D){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(E,D){let S=yield xe(E.appConfig);for(;1===S.authToken.requestStatus;)yield $n(100),S=yield xe(E.appConfig);const P=S.authToken;return 0===P.requestStatus?jr(E,D):P})).apply(this,arguments)}function xe(E){return ts(E,D=>{if(!rt(D))throw ut.create("not-registered");return function er(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function ge(E,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(E,D){try{const S=yield Ut(E,D),P=Object.assign(Object.assign({},D),{authToken:S});return yield vn(E.appConfig,P),S}catch(S){if(!Pt(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const P=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield vn(E.appConfig,P)}else yield Ns(E.appConfig);throw S}})).apply(this,arguments)}function rt(E){return void 0!==E&&2===E.registrationStatus}function kt(E){return 2===E.requestStatus&&!function Sn(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+36e5}(E)}function Wt(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}function Os(){return(Os=(0,O.Z)(function*(E){const D=E,{installationEntry:S,registrationPromise:P}=yield U(D);return P?P.catch(console.error):jr(D).catch(console.error),S.fid})).apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(E,D=!1){const S=E;return yield Va(S),(yield jr(S,D)).token})).apply(this,arguments)}function Va(E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,O.Z)(function*(E){const{registrationPromise:D}=yield U(E);D&&(yield D)})).apply(this,arguments)}function Lo(E){return ut.create("missing-app-config-values",{valueName:E})}const Xr="installations",rc=E=>{const D=E.getProvider("app").getImmediate(),S=function nc(E){if(!E||!E.options)throw Lo("App Configuration");if(!E.name)throw Lo("App Name");const D=["projectId","apiKey","appId"];for(const S of D)if(!E.options[S])throw Lo(S);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:S,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Fs=E=>{const D=E.getProvider("app").getImmediate(),S=(0,ae._getProvider)(D,Xr).getImmediate();return{getId:()=>function an(E){return Os.apply(this,arguments)}(S),getToken:G=>function Fo(E){return Ot.apply(this,arguments)}(S,G)}};(function Vo(){(0,ae._registerComponent)(new ce.wA(Xr,rc,"PUBLIC")),(0,ae._registerComponent)(new ce.wA("installations-internal",Fs,"PRIVATE"))})(),(0,ae.registerVersion)(lt,"0.6.4"),(0,ae.registerVersion)(lt,"0.6.4","esm2017");const Ar="@firebase/remote-config",Sr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ns{constructor(D,S,P,G){this.client=D,this.storage=S,this.storageCache=P,this.logger=G}isCachedDataFresh(D,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-S,G=P<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${G}.`),G}fetch(D){var S=this;return(0,O.Z)(function*(){const[P,G]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(G&&S.isCachedDataFresh(D.cacheMaxAgeMillis,P))return G;D.eTag=G&&G.eTag;const Z=yield S.client.fetch(D),le=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&le.push(S.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(le),Z})()}}function Ba(E=navigator){return E.languages&&E.languages[0]||E.language}class Uo{constructor(D,S,P,G,Z,le){this.firebaseInstallations=D,this.sdkVersion=S,this.namespace=P,this.projectId=G,this.apiKey=Z,this.appId=le}fetch(D){var S=this;return(0,O.Z)(function*(){const[P,G]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ve={sdk_version:S.sdkVersion,app_instance_id:P,app_instance_id_token:G,app_id:S.appId,language_code:Ba()},it={method:"POST",headers:qe,body:JSON.stringify(Ve)},Ct=fetch(le,it),Rt=new Promise((zi,Rr)=>{D.signal.addEventListener(()=>{const rh=new Error("The operation was aborted.");rh.name="AbortError",Rr(rh)})});let gr;try{yield Promise.race([Ct,Rt]),gr=yield Ct}catch(zi){let Rr="fetch-client-network";throw"AbortError"===(null==zi?void 0:zi.name)&&(Rr="fetch-timeout"),Sr.create(Rr,{originalErrorMessage:null==zi?void 0:zi.message})}let Vn=gr.status;const Io=gr.headers.get("ETag")||void 0;let fu,Er;if(200===gr.status){let zi;try{zi=yield gr.json()}catch(Rr){throw Sr.create("fetch-client-parse",{originalErrorMessage:null==Rr?void 0:Rr.message})}fu=zi.entries,Er=zi.state}if("INSTANCE_STATE_UNSPECIFIED"===Er?Vn=500:"NO_CHANGE"===Er?Vn=304:("NO_TEMPLATE"===Er||"EMPTY_CONFIG"===Er)&&(fu={}),304!==Vn&&200!==Vn)throw Sr.create("fetch-status",{httpStatus:Vn});return{status:Vn,eTag:Io,config:fu}})()}}class Ud{constructor(D,S){this.client=D,this.storage=S}fetch(D){var S=this;return(0,O.Z)(function*(){const P=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(D,P)})()}attemptFetch(D,{throttleEndTimeMillis:S,backoffCount:P}){var G=this;return(0,O.Z)(function*(){yield function bf(E,D){return new Promise((S,P)=>{const G=Math.max(D-Date.now(),0),Z=setTimeout(S,G);E.addEventListener(()=>{clearTimeout(Z),P(Sr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,S);try{const Z=yield G.client.fetch(D);return yield G.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function Vd(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Z))throw Z;const le={throttleEndTimeMillis:Date.now()+(0,se.$s)(P),backoffCount:P+1};return yield G.storage.setThrottleMetadata(le),G.attemptFetch(D,le)}})()}}class uc{constructor(D,S,P,G,Z){this.app=D,this._client=S,this._storageCache=P,this._storage=G,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bo(E,D){const S=E.target.error||void 0;return Sr.create(D,{originalErrorMessage:S&&(null==S?void 0:S.message)})}const xn="app_namespace_store";class Zy{constructor(D,S,P,G=function jo(){return new Promise((E,D)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=P=>{D(Bo(P,"storage-open"))},S.onsuccess=P=>{E(P.target.result)},S.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(xn,{keyPath:"compositeKey"})}}catch(S){D(Sr.create("storage-open",{originalErrorMessage:null==S?void 0:S.message}))}})}()){this.appId=D,this.appName=S,this.namespace=P,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var S=this;return(0,O.Z)(function*(){const P=yield S.openDbPromise;return new Promise((G,Z)=>{const qe=P.transaction([xn],"readonly").objectStore(xn),Ve=S.createCompositeKey(D);try{const it=qe.get(Ve);it.onerror=Ct=>{Z(Bo(Ct,"storage-get"))},it.onsuccess=Ct=>{const Rt=Ct.target.result;G(Rt?Rt.value:void 0)}}catch(it){Z(Sr.create("storage-get",{originalErrorMessage:null==it?void 0:it.message}))}})})()}set(D,S){var P=this;return(0,O.Z)(function*(){const G=yield P.openDbPromise;return new Promise((Z,le)=>{const Ve=G.transaction([xn],"readwrite").objectStore(xn),it=P.createCompositeKey(D);try{const Ct=Ve.put({compositeKey:it,value:S});Ct.onerror=Rt=>{le(Bo(Rt,"storage-set"))},Ct.onsuccess=()=>{Z()}}catch(Ct){le(Sr.create("storage-set",{originalErrorMessage:null==Ct?void 0:Ct.message}))}})})()}delete(D){var S=this;return(0,O.Z)(function*(){const P=yield S.openDbPromise;return new Promise((G,Z)=>{const qe=P.transaction([xn],"readwrite").objectStore(xn),Ve=S.createCompositeKey(D);try{const it=qe.delete(Ve);it.onerror=Ct=>{Z(Bo(Ct,"storage-delete"))},it.onsuccess=()=>{G()}}catch(it){Z(Sr.create("storage-delete",{originalErrorMessage:null==it?void 0:it.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class lc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const S=D.storage.getLastFetchStatus(),P=D.storage.getLastSuccessfulFetchTimestampMillis(),G=D.storage.getActiveConfig(),Z=yield S;Z&&(D.lastFetchStatus=Z);const le=yield P;le&&(D.lastSuccessfulFetchTimestampMillis=le);const qe=yield G;qe&&(D.activeConfig=qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function vg(){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(E){return!1}})).apply(this,arguments)}let Gu,rn;!function Oi(){(0,ae._registerComponent)(new ce.wA("remote-config",function E(D,{instanceIdentifier:S}){const P=D.getProvider("app").getImmediate(),G=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sr.create("registration-window");if(!(0,se.hl)())throw Sr.create("indexed-db-unavailable");const{projectId:Z,apiKey:le,appId:qe}=P.options;if(!Z)throw Sr.create("registration-project-id");if(!le)throw Sr.create("registration-api-key");if(!qe)throw Sr.create("registration-app-id");const Ve=new Zy(qe,P.name,S=S||"firebase"),it=new lc(Ve),Ct=new de.Yd(Ar);Ct.logLevel=de.in.ERROR;const Rt=new Uo(G,ae.SDK_VERSION,S,Z,le,qe),gr=new Ud(Rt,Ve),Vn=new ns(gr,Ve,it,Ct),Io=new uc(P,Vn,it,Ve,Ct);return function oc(E){const D=(0,se.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Io),Io},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ar,"0.4.4"),(0,ae.registerVersion)(Ar,"0.4.4","esm2017")}();const Go=new WeakMap,Kn=new WeakMap,zu=new WeakMap,vr=new WeakMap,Pi=new WeakMap;let ki={get(E,D,S){if(E instanceof IDBTransaction){if("done"===D)return Kn.get(E);if("objectStoreNames"===D)return E.objectStoreNames||zu.get(E);if("store"===D)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return $r(E[D])},set:(E,D,S)=>(E[D]=S,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function zo(E){return"function"==typeof E?function is(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ho(){return rn||(rn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(vt(this),D),$r(Go.get(this))}:function(...D){return $r(E.apply(vt(this),D))}:function(D,...S){const P=E.call(vt(this),D,...S);return zu.set(P,D.sort?D.sort():[D]),$r(P)}}(E):(E instanceof IDBTransaction&&function io(E){if(Kn.has(E))return;const D=new Promise((S,P)=>{const G=()=>{E.removeEventListener("complete",Z),E.removeEventListener("error",le),E.removeEventListener("abort",le)},Z=()=>{S(),G()},le=()=>{P(E.error||new DOMException("AbortError","AbortError")),G()};E.addEventListener("complete",Z),E.addEventListener("error",le),E.addEventListener("abort",le)});Kn.set(E,D)}(E),((E,D)=>D.some(S=>E instanceof S))(E,function Af(){return Gu||(Gu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ki):E)}function $r(E){if(E instanceof IDBRequest)return function ti(E){const D=new Promise((S,P)=>{const G=()=>{E.removeEventListener("success",Z),E.removeEventListener("error",le)},Z=()=>{S($r(E.result)),G()},le=()=>{P(E.error),G()};E.addEventListener("success",Z),E.addEventListener("error",le)});return D.then(S=>{S instanceof IDBCursor&&Go.set(S,E)}).catch(()=>{}),Pi.set(D,E),D}(E);if(vr.has(E))return vr.get(E);const D=zo(E);return D!==E&&(vr.set(E,D),Pi.set(D,E)),D}const vt=E=>Pi.get(E);function so(E,D,{blocked:S,upgrade:P,blocking:G,terminated:Z}={}){const le=indexedDB.open(E,D),qe=$r(le);return P&&le.addEventListener("upgradeneeded",Ve=>{P($r(le.result),Ve.oldVersion,Ve.newVersion,$r(le.transaction))}),S&&le.addEventListener("blocked",()=>S()),qe.then(Ve=>{Z&&Ve.addEventListener("close",()=>Z()),G&&Ve.addEventListener("versionchange",()=>G())}).catch(()=>{}),qe}function qo(E,{blocked:D}={}){const S=indexedDB.deleteDatabase(E);return D&&S.addEventListener("blocked",()=>D()),$r(S).then(()=>{})}const qu=["get","getKey","getAll","getAllKeys","count"],Bd=["put","add","delete","clear"],$a=new Map;function Wu(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if($a.get(D))return $a.get(D);const S=D.replace(/FromIndex$/,""),P=D!==S,G=Bd.includes(S);if(!(S in(P?IDBIndex:IDBObjectStore).prototype)||!G&&!qu.includes(S))return;const Z=function(){var le=(0,O.Z)(function*(qe,...Ve){const it=this.transaction(qe,G?"readwrite":"readonly");let Ct=it.store;return P&&(Ct=Ct.index(Ve.shift())),(yield Promise.all([Ct[S](...Ve),G&&it.done]))[0]});return function(Ve){return le.apply(this,arguments)}}();return $a.set(D,Z),Z}!function dc(E){ki=E(ki)}(E=>KD(ZD({},E),{get:(D,S,P)=>Wu(D,S)||E.get(D,S,P),has:(D,S)=>!!Wu(D,S)||E.has(D,S)}));const hc="/firebase-messaging-sw.js",oo="/firebase-cloud-messaging-push-scope",Re="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ao="google.c.a.c_id",Nn="google.c.a.c_l",Zu="google.c.a.ts",Wo="google.c.a.e";var Ls=(()=>{return(E=Ls||(Ls={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",Ls;var E})();function ni(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ha(E){const S=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(S),G=new Uint8Array(P.length);for(let Z=0;Z<P.length;++Z)G[Z]=P.charCodeAt(Z);return G}const Ga="fcm_token_details_db",Li="fcm_token_object_Store";function xr(E){return ri.apply(this,arguments)}function ri(){return ri=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(Ga))return null;let D=null;return(yield so(Ga,5,{upgrade:(P=(0,O.Z)(function*(G,Z,le,qe){var Ve;if(Z<2||!G.objectStoreNames.contains(Li))return;const it=qe.objectStore(Li),Ct=yield it.index("fcmSenderId").get(E);if(yield it.clear(),Ct)if(2===Z){const Rt=Ct;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;D={token:Rt.fcmToken,createTime:null!==(Ve=Rt.createTime)&&void 0!==Ve?Ve:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:ni(Rt.vapidKey)}}}else if(3===Z){const Rt=Ct;D={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:ni(Rt.auth),p256dh:ni(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:ni(Rt.vapidKey)}}}else if(4===Z){const Rt=Ct;D={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:ni(Rt.auth),p256dh:ni(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:ni(Rt.vapidKey)}}}}),function(Z,le,qe,Ve){return P.apply(this,arguments)})})).close(),yield qo(Ga),yield qo("fcm_vapid_details_db"),yield qo("undefined"),$d(D)?D:null;var P}),ri.apply(this,arguments)}function $d(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const _s="firebase-messaging-store";let za=null;function qa(){return za||(za=so("firebase-messaging-database",1,{upgrade:(E,D)=>{0===D&&E.createObjectStore(_s)}})),za}function Hd(E){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(E){const D=Ko(E),P=yield(yield qa()).transaction(_s).objectStore(_s).get(D);if(P)return P;{const G=yield xr(E.appConfig.senderId);if(G)return yield Ku(E,G),G}})).apply(this,arguments)}function Ku(E,D){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(E,D){const S=Ko(E),G=(yield qa()).transaction(_s,"readwrite");return yield G.objectStore(_s).put(D,S),yield G.done,D})).apply(this,arguments)}function Gd(E){return zd.apply(this,arguments)}function zd(){return(zd=(0,O.Z)(function*(E){const D=Ko(E),P=(yield qa()).transaction(_s,"readwrite");yield P.objectStore(_s).delete(D),yield P.done})).apply(this,arguments)}function Ko({appConfig:E}){return E.appId}const tr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function fc(E,D){return pc.apply(this,arguments)}function pc(){return(pc=(0,O.Z)(function*(E,D){const S=yield Vi(E),P=Sf(D),G={method:"POST",headers:S,body:JSON.stringify(P)};let Z;try{Z=yield(yield fetch(Fn(E.appConfig),G)).json()}catch(le){throw tr.create("token-subscribe-failed",{errorInfo:null==le?void 0:le.toString()})}if(Z.error)throw tr.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw tr.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Wa(E,D){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(E,D){const S=yield Vi(E),P=Sf(D.subscriptionOptions),G={method:"PATCH",headers:S,body:JSON.stringify(P)};let Z;try{Z=yield(yield fetch(`${Fn(E.appConfig)}/${D.token}`,G)).json()}catch(le){throw tr.create("token-update-failed",{errorInfo:null==le?void 0:le.toString()})}if(Z.error)throw tr.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw tr.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Qu(E,D){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(E,D){const P={method:"DELETE",headers:yield Vi(E)};try{const Z=yield(yield fetch(`${Fn(E.appConfig)}/${D}`,P)).json();if(Z.error)throw tr.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(G){throw tr.create("token-unsubscribe-failed",{errorInfo:null==G?void 0:G.toString()})}})).apply(this,arguments)}function Fn({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Vi(E){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*({appConfig:E,installations:D}){const S=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function Sf({p256dh:E,auth:D,endpoint:S,vapidKey:P}){const G={web:{endpoint:S,auth:D,p256dh:E}};return P!==Re&&(G.web.applicationPubKey=P),G}const qd=6048e5;function xf(E){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,O.Z)(function*(E){const D=yield Kd(E.swRegistration,E.vapidKey),S={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:ni(D.getKey("auth")),p256dh:ni(D.getKey("p256dh"))},P=yield Hd(E.firebaseDependencies);if(P){if(co(P.subscriptionOptions,S))return Date.now()>=P.createTime+qd?Xu(E,{token:P.token,createTime:Date.now(),subscriptionOptions:S}):P.token;try{yield Qu(E.firebaseDependencies,P.token)}catch(G){console.warn(G)}return Za(E.firebaseDependencies,S)}return Za(E.firebaseDependencies,S)})).apply(this,arguments)}function Wd(E){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,O.Z)(function*(E){const D=yield Hd(E.firebaseDependencies);D&&(yield Qu(E.firebaseDependencies,D.token),yield Gd(E.firebaseDependencies));const S=yield E.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function Xu(E,D){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(E,D){try{const S=yield Wa(E.firebaseDependencies,D),P=Object.assign(Object.assign({},D),{token:S,createTime:Date.now()});return yield Ku(E.firebaseDependencies,P),S}catch(S){throw yield Wd(E),S}})).apply(this,arguments)}function Za(E,D){return vs.apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(E,D){const P={token:yield fc(E,D),createTime:Date.now(),subscriptionOptions:D};return yield Ku(E,P),P.token})).apply(this,arguments)}function Kd(E,D){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,O.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ha(D)})})).apply(this,arguments)}function co(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}function Ka(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function wg(E,D){if(!D.notification)return;E.notification={};const S=D.notification.title;S&&(E.notification.title=S);const P=D.notification.body;P&&(E.notification.body=P);const G=D.notification.image;G&&(E.notification.image=G);const Z=D.notification.icon;Z&&(E.notification.icon=Z)}(D,E),function Eg(E,D){!D.data||(E.data=D.data)}(D,E),function mc(E,D){var S,P,G,Z,le;if(!D.fcmOptions&&!(null===(S=D.notification)||void 0===S?void 0:S.click_action))return;E.fcmOptions={};const qe=null!==(G=null===(P=D.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==G?G:null===(Z=D.notification)||void 0===Z?void 0:Z.click_action;qe&&(E.fcmOptions.link=qe);const Ve=null===(le=D.fcmOptions)||void 0===le?void 0:le.analytics_label;Ve&&(E.fcmOptions.analyticsLabel=Ve)}(D,E),D}function Qd(E){return"object"==typeof E&&!!E&&ao in E}function Mf(E,D){const S=[];for(let P=0;P<E.length;P++)S.push(E.charAt(P)),P<D.length&&S.push(D.charAt(P));return S.join("")}function Yo(E){return tr.create("missing-app-config-values",{valueName:E})}Mf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mt{constructor(D,S,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function On(E){if(!E||!E.options)throw Yo("App Configuration Object");if(!E.name)throw Yo("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:S}=E;for(const P of D)if(!S[P])throw Yo(P);return{appName:E.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:G,installations:S,analyticsProvider:P}}_delete(){return Promise.resolve()}}function Ui(E){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(hc,{scope:oo}),E.swRegistration.update().catch(()=>{})}catch(D){throw tr.create("failed-service-worker-registration",{browserErrorMessage:null==D?void 0:D.message})}})).apply(this,arguments)}function ss(E,D){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield Ui(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw tr.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function Bs(E,D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Re)})).apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(E,D){if(!navigator)throw tr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tr.create("permission-blocked");return yield Bs(E,null==D?void 0:D.vapidKey),yield ss(E,null==D?void 0:D.serviceWorkerRegistration),xf(E)})).apply(this,arguments)}function Jo(E,D,S){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(E,D,S){const P=Ft(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:S[ao],message_name:S[Nn],message_time:S[Zu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ft(E){switch(E){case Ls.NOTIFICATION_CLICKED:return"notification_open";case Ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xo(){return(Xo=(0,O.Z)(function*(E,D){const S=D.data;if(!S.isFirebaseMessaging)return;E.onMessageHandler&&S.messageType===Ls.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Ka(S)):E.onMessageHandler.next(Ka(S)));const P=S.data;Qd(P)&&"1"===P[Wo]&&(yield Jo(E,S.messageType,P))})).apply(this,arguments)}const ea="@firebase/messaging",nr=E=>{const D=new Mt(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function Ig(E,D){return Xo.apply(this,arguments)}(D,S)),D},ta=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:P=>function ho(E,D){return el.apply(this,arguments)}(D,P)}};function tl(){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(){try{yield(0,se.eu)()}catch(E){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _c(){(0,ae._registerComponent)(new ce.wA("messaging",nr,"PUBLIC")),(0,ae._registerComponent)(new ce.wA("messaging-internal",ta,"PRIVATE")),(0,ae.registerVersion)(ea,"0.12.4"),(0,ae.registerVersion)(ea,"0.12.4","esm2017")}();const cn="analytics",ji="firebase_id",Qa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$s="https://www.googletagmanager.com/gtag/js",Qt=new de.Yd("@firebase/analytics"),Gn=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Es(E){if(!E.startsWith($s)){const D=Gn.create("invalid-gtag-resource",{gtagURL:E});return Qt.warn(D.message),""}return E}function wi(E){return Promise.all(E.map(D=>D.catch(S=>S)))}function Ei(E,D){const S=function Yn(E,D){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(E,D)),S}("firebase-js-sdk-policy",{createScriptURL:Es}),P=document.createElement("script"),G=`${$s}?l=${E}&id=${D}`;P.src=S?null==S?void 0:S.createScriptURL(G):G,P.async=!0,document.head.appendChild(P)}function Ii(E,D,S,P,G,Z){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(E,D,S,P,G,Z){const le=P[G];try{if(le)yield D[le];else{const Ve=(yield wi(S)).find(it=>it.measurementId===G);Ve&&(yield D[Ve.appId])}}catch(qe){Qt.error(qe)}E("config",G,Z)})).apply(this,arguments)}function sl(E,D,S,P,G){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(E,D,S,P,G){try{let Z=[];if(G&&G.send_to){let le=G.send_to;Array.isArray(le)||(le=[le]);const qe=yield wi(S);for(const Ve of le){const it=qe.find(Rt=>Rt.measurementId===Ve),Ct=it&&D[it.appId];if(!Ct){Z=[];break}Z.push(Ct)}}0===Z.length&&(Z=Object.values(D)),yield Promise.all(Z),E("event",P,G||{})}catch(Z){Qt.error(Z)}})).apply(this,arguments)}function ia(E){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes($s)&&S.src.includes(E))return S;return null}const wc=new class si{constructor(D={},S=1e3){this.throttleMetadata=D,this.intervalMillis=S}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,S){this.throttleMetadata[D]=S}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function os(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Of(E){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(E){var D;const{appId:S,apiKey:P}=E,G={method:"GET",headers:os(P)},Z=Qa.replace("{app-id}",S),le=yield fetch(Z,G);if(200!==le.status&&304!==le.status){let qe="";try{const Ve=yield le.json();(null===(D=Ve.error)||void 0===D?void 0:D.message)&&(qe=Ve.error.message)}catch(Ve){}throw Gn.create("config-fetch-failed",{httpStatus:le.status,responseMessage:qe})}return le.json()})).apply(this,arguments)}function Ec(E){return as.apply(this,arguments)}function as(){return(as=(0,O.Z)(function*(E,D=wc,S){const{appId:P,apiKey:G,measurementId:Z}=E.options;if(!P)throw Gn.create("no-app-id");if(!G){if(Z)return{measurementId:Z,appId:P};throw Gn.create("no-api-key")}const le=D.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Dc;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==S?S:6e4),Pf({appId:P,apiKey:G,measurementId:Z},le,qe,D)})).apply(this,arguments)}function Pf(E,D,S){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,O.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:S},P,G=wc){var Z;const{appId:le,measurementId:qe}=E;try{yield Ci(P,D)}catch(Ve){if(qe)return Qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${null==Ve?void 0:Ve.message}]`),{appId:le,measurementId:qe};throw Ve}try{const Ve=yield Of(E);return G.deleteThrottleMetadata(le),Ve}catch(Ve){const it=Ve;if(!oi(it)){if(G.deleteThrottleMetadata(le),qe)return Qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${null==it?void 0:it.message}]`),{appId:le,measurementId:qe};throw Ve}const Ct=503===Number(null===(Z=null==it?void 0:it.customData)||void 0===Z?void 0:Z.httpStatus)?(0,se.$s)(S,G.intervalMillis,30):(0,se.$s)(S,G.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:S+1};return G.setThrottleMetadata(le,Rt),Qt.debug(`Calling attemptFetch again in ${Ct} millis`),Pf(E,Rt,P,G)}})).apply(this,arguments)}function Ci(E,D){return new Promise((S,P)=>{const G=Math.max(D-Date.now(),0),Z=setTimeout(S,G);E.addEventListener(()=>{clearTimeout(Z),P(Gn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function oi(E){if(!(E instanceof se.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Dc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let sa,bi;function al(){return(al=(0,O.Z)(function*(E,D,S,P,G){if(G&&G.global)E("event",S,P);else{const Z=yield D;E("event",S,Object.assign(Object.assign({},P),{send_to:Z}))}})).apply(this,arguments)}function nu(E){bi=E}function aa(E){sa=E}function ul(){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,O.Z)(function*(){if(!(0,se.hl)())return Qt.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(E){return Qt.warn(Gn.create("indexeddb-unavailable",{errorInfo:null==E?void 0:E.toString()}).message),!1}return!0})).apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(E,D,S,P,G,Z,le){var qe;const Ve=Ec(E);Ve.then(Vn=>{S[Vn.measurementId]=Vn.appId,E.options.measurementId&&Vn.measurementId!==E.options.measurementId&&Qt.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vn=>Qt.error(Vn)),D.push(Ve);const it=ul().then(Vn=>{if(Vn)return P.getId()}),[Ct,Rt]=yield Promise.all([Ve,it]);ia(Z)||Ei(Z,Ct.measurementId),bi&&(G("consent","default",bi),nu(void 0)),G("js",new Date);const gr=null!==(qe=null==le?void 0:le.config)&&void 0!==qe?qe:{};return gr.origin="firebase",gr.update=!0,null!=Rt&&(gr[ji]=Rt),G("config",Ct.measurementId,gr),sa&&(G("set",sa),aa(void 0)),Ct.measurementId})).apply(this,arguments)}class ls{constructor(D){this.app=D}_delete(){return delete $i[this.app.options.appId],Promise.resolve()}}let $i={},go=[];const ru={};let Cc,Hi,mo="dataLayer",su=!1;function $t(E,D,S){!function Gi(){const E=[];if((0,se.ru)()&&E.push("This is a browser extension environment."),(0,se.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((P,G)=>`(${G+1}) ${P}`).join(" "),S=Gn.create("invalid-analytics-context",{errorInfo:D});Qt.warn(S.message)}}();const P=E.options.appId;if(!P)throw Gn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Gn.create("no-api-key");Qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$i[P])throw Gn.create("already-exists",{id:P});if(!su){!function rr(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(mo);const{wrappedGtag:Z,gtagCore:le}=function Nf(E,D,S,P,G){let Z=function(...le){window[P].push(arguments)};return window[G]&&"function"==typeof window[G]&&(Z=window[G]),window[G]=function ol(E,D,S,P){function Z(){return(Z=(0,O.Z)(function*(le,...qe){try{if("event"===le){const[Ve,it]=qe;yield sl(E,D,S,Ve,it)}else if("config"===le){const[Ve,it]=qe;yield Ii(E,D,S,P,Ve,it)}else if("consent"===le){const[Ve]=qe;E("consent","update",Ve)}else if("get"===le){const[Ve,it,Ct]=qe;E("get",Ve,it,Ct)}else if("set"===le){const[Ve]=qe;E("set",Ve)}else E(le,...qe)}catch(Ve){Qt.error(Ve)}})).apply(this,arguments)}return function G(le){return Z.apply(this,arguments)}}(Z,E,D,S),{gtagCore:Z,wrappedGtag:window[G]}}($i,go,ru,mo,"gtag");Hi=Z,Cc=le,su=!0}return $i[P]=function zn(E,D,S,P,G,Z,le){return sr.apply(this,arguments)}(E,go,ru,D,Cc,mo,S),new ls(E)}function cs(){return bc.apply(this,arguments)}function bc(){return(bc=(0,O.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(E){return!1}})).apply(this,arguments)}const ca="@firebase/analytics";!function hl(){(0,ae._registerComponent)(new ce.wA(cn,(D,{options:S})=>$t(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,ae._registerComponent)(new ce.wA("analytics-internal",function E(D){try{const S=D.getProvider(cn).getImmediate();return{logEvent:(P,G,Z)=>function cl(E,D,S,P){E=(0,se.m9)(E),function Xa(E,D,S,P,G){return al.apply(this,arguments)}(Hi,$i[E.app.options.appId],D,S,P).catch(G=>Qt.error(G))}(S,P,G,Z)}}catch(S){throw Gn.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,ae.registerVersion)(ca,"0.10.0"),(0,ae.registerVersion)(ca,"0.10.0","esm2017")}();var da=k(4408),Ff=k(7565);const fa=new class ha extends Ff.v{}(class eh extends da.o{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}schedule(D,S=0){return S>0?super.schedule(D,S):(this.delay=S,this.state=D,this.scheduler.flush(this),this)}execute(D,S){return S>0||this.closed?super.execute(D,S):this._execute(D,S)}requestAsyncId(D,S,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(D,S,P):(D.flush(this),0)}});var Ac=k(4986),Cg=k(8505),pl=k(9468),lu=k(5363);const gl=new f.GfV("7.6.1"),pa="__angularfire_symbol__analyticsIsSupportedValue",ai="__angularfire_symbol__analyticsIsSupported",Hs="__angularfire_symbol__remoteConfigIsSupportedValue",cu="__angularfire_symbol__remoteConfigIsSupported",ml="__angularfire_symbol__messagingIsSupportedValue",ui="__angularfire_symbol__messagingIsSupported";function wr(E,D,S){if(D){if(1===D.length)return D[0];const Z=D.filter(le=>le.app===S);if(1===Z.length)return Z[0]}return S.container.getProvider(E).getImmediate({optional:!0})}globalThis[ai]||(globalThis[ai]=cs().then(E=>globalThis[pa]=E).catch(()=>globalThis[pa]=!1)),globalThis[ui]||(globalThis[ui]=tl().then(E=>globalThis[ml]=E).catch(()=>globalThis[ml]=!1)),globalThis[cu]||(globalThis[cu]=vg().then(E=>globalThis[Hs]=E).catch(()=>globalThis[Hs]=!1));const du=(E,D)=>{const S=D?[D]:(0,Q.C6)(),P=[];return S.forEach(G=>{G.container.getProvider(E).instances.forEach(le=>{P.includes(le)||P.push(le)})}),P};function ds(){}class hu{constructor(D,S=fa){this.zone=D,this.delegate=S}now(){return this.delegate.now()}schedule(D,S,P){const G=this.zone;return this.delegate.schedule(function(le){G.runGuarded(()=>{D.apply(this,[le])})},S,P)}}class or{constructor(D){this.zone=D,this.task=null}call(D,S){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ds,{},ds,ds)),S.pipe((0,Cg.b)({next:P,complete:P,error:P})).subscribe(D).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ga=(()=>{class E{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new hu(Zone.current)),this.insideAngular=S.run(()=>new hu(Zone.current,Ac.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(S){return new(S||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function li(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Eo(E){return li(),function xc(E){return function(S){return(S=S.lift(new or(E.ngZone))).pipe((0,pl.R)(E.outsideAngular),(0,lu.Q)(E.insideAngular))}}(li())(E)}},2090:(Xe,Ce,k)=>{k.d(Ce,{$s:()=>Ns,BH:()=>me,G6:()=>es,L:()=>fe,LL:()=>ye,Pz:()=>_e,Sg:()=>ze,UG:()=>ie,US:()=>ce,ZB:()=>q,ZR:()=>Oe,aH:()=>Pe,b$:()=>mt,eu:()=>J,hl:()=>te,jU:()=>wt,m9:()=>_r,ne:()=>Qr,pd:()=>hr,r3:()=>jn,ru:()=>Tt,tV:()=>$,uI:()=>gt,vZ:()=>Pn,w1:()=>lt,xO:()=>Uu,xb:()=>ft,z$:()=>je,zI:()=>be,zd:()=>Hn});const ae=function(U){const V=[];let z=0;for(let Ae=0;Ae<U.length;Ae++){let ne=U.charCodeAt(Ae);ne<128?V[z++]=ne:ne<2048?(V[z++]=ne>>6|192,V[z++]=63&ne|128):55296==(64512&ne)&&Ae+1<U.length&&56320==(64512&U.charCodeAt(Ae+1))?(ne=65536+((1023&ne)<<10)+(1023&U.charCodeAt(++Ae)),V[z++]=ne>>18|240,V[z++]=ne>>12&63|128,V[z++]=ne>>6&63|128,V[z++]=63&ne|128):(V[z++]=ne>>12|224,V[z++]=ne>>6&63|128,V[z++]=63&ne|128)}return V},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,V){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let ne=0;ne<U.length;ne+=3){const Qe=U[ne],At=ne+1<U.length,It=At?U[ne+1]:0,In=ne+2<U.length,hn=In?U[ne+2]:0;let pr=(15&It)<<2|hn>>6,mi=63&hn;In||(mi=64,At||(pr=64)),Ae.push(z[Qe>>2],z[(3&Qe)<<4|It>>4],z[pr],z[mi])}return Ae.join("")},encodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(U):this.encodeByteArray(ae(U),V)},decodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(U):function(U){const V=[];let z=0,Ae=0;for(;z<U.length;){const ne=U[z++];if(ne<128)V[Ae++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Qe=U[z++];V[Ae++]=String.fromCharCode((31&ne)<<6|63&Qe)}else if(ne>239&&ne<365){const In=((7&ne)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;V[Ae++]=String.fromCharCode(55296+(In>>10)),V[Ae++]=String.fromCharCode(56320+(1023&In))}else{const Qe=U[z++],At=U[z++];V[Ae++]=String.fromCharCode((15&ne)<<12|(63&Qe)<<6|63&At)}}return V.join("")}(this.decodeStringToByteArray(U,V))},decodeStringToByteArray(U,V){this.init_();const z=V?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let ne=0;ne<U.length;){const Qe=z[U.charAt(ne++)],It=ne<U.length?z[U.charAt(ne)]:0;++ne;const hn=ne<U.length?z[U.charAt(ne)]:64;++ne;const Ut=ne<U.length?z[U.charAt(ne)]:64;if(++ne,null==Qe||null==It||null==hn||null==Ut)throw new de;Ae.push(Qe<<2|It>>4),64!==hn&&(Ae.push(It<<4&240|hn>>2),64!==Ut&&Ae.push(hn<<6&192|Ut))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class de extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(U){return function(U){const V=ae(U);return ce.encodeByteArray(V,!0)}(U).replace(/\./g,"")},$=function(U){try{return ce.decodeString(U,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function q(U,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return V}for(const z in V)!V.hasOwnProperty(z)||!Ie(z)||(U[z]=q(U[z],V[z]));return U}function Ie(U){return"__proto__"!==U}const Se=()=>{try{return function X(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if("undefined"==typeof document)return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(z){return}const V=U&&$(U[1]);return V&&JSON.parse(V)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Pe=()=>{var U;return null===(U=Se())||void 0===U?void 0:U.config},_e=U=>{var V;return null===(V=Se())||void 0===V?void 0:V[`_${U}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,z)=>{this.resolve=V,this.reject=z})}wrapCallback(V){return(z,Ae)=>{z?this.reject(z):this.resolve(Ae),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(z):V(z,Ae))}}}function ze(U,V){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=V||"demo-project",ne=U.iat||0,Qe=U.sub||U.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const At=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:ne,exp:ne+3600,auth_time:ne,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},U);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(At)),""].join(".")}function je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function ie(){var U;const V=null===(U=Se())||void 0===U?void 0:U.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function wt(){return"object"==typeof self&&self.self===self}function Tt(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function mt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function lt(){const U=je();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function es(){return!ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch(U){return!1}}function J(){return new Promise((U,V)=>{try{let z=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ae);ne.onsuccess=()=>{ne.result.close(),z||self.indexedDB.deleteDatabase(Ae),U(!0)},ne.onupgradeneeded=()=>{z=!1},ne.onerror=()=>{var Qe;V((null===(Qe=ne.error)||void 0===Qe?void 0:Qe.message)||"")}}catch(z){V(z)}})}function be(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(V,z,Ae){super(z),this.code=V,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ye.prototype.create)}}class ye{constructor(V,z,Ae){this.service=V,this.serviceName=z,this.errors=Ae}create(V,...z){const Ae=z[0]||{},ne=`${this.service}/${V}`,Qe=this.errors[V],At=Qe?function ut(U,V){return U.replace(Pt,(z,Ae)=>{const ne=V[Ae];return null!=ne?String(ne):`<${Ae}?>`})}(Qe,Ae):"Error";return new Oe(ne,`${this.serviceName}: ${At} (${ne}).`,Ae)}}const Pt=/\{\$([^}]+)}/g;function jn(U,V){return Object.prototype.hasOwnProperty.call(U,V)}function ft(U){for(const V in U)if(Object.prototype.hasOwnProperty.call(U,V))return!1;return!0}function Pn(U,V){if(U===V)return!0;const z=Object.keys(U),Ae=Object.keys(V);for(const ne of z){if(!Ae.includes(ne))return!1;const Qe=U[ne],At=V[ne];if($n(Qe)&&$n(At)){if(!Pn(Qe,At))return!1}else if(Qe!==At)return!1}for(const ne of Ae)if(!z.includes(ne))return!1;return!0}function $n(U){return null!==U&&"object"==typeof U}function Uu(U){const V=[];for(const[z,Ae]of Object.entries(U))Array.isArray(Ae)?Ae.forEach(ne=>{V.push(encodeURIComponent(z)+"="+encodeURIComponent(ne))}):V.push(encodeURIComponent(z)+"="+encodeURIComponent(Ae));return V.length?"&"+V.join("&"):""}function Hn(U){const V={};return U.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[ne,Qe]=Ae.split("=");V[decodeURIComponent(ne)]=decodeURIComponent(Qe)}}),V}function hr(U){const V=U.indexOf("?");if(!V)return"";const z=U.indexOf("#",V);return U.substring(V,z>0?z:void 0)}function Qr(U,V){const z=new xt(U,V);return z.subscribe.bind(z)}class xt{constructor(V,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{V(this)}).catch(Ae=>{this.error(Ae)})}next(V){this.forEachObserver(z=>{z.next(V)})}error(V){this.forEachObserver(z=>{z.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,z,Ae){let ne;if(void 0===V&&void 0===z&&void 0===Ae)throw new Error("Missing Observer.");ne=function Dt(U,V){if("object"!=typeof U||null===U)return!1;for(const z of V)if(z in U&&"function"==typeof U[z])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:z,complete:Ae},void 0===ne.next&&(ne.next=xs),void 0===ne.error&&(ne.error=xs),void 0===ne.complete&&(ne.complete=xs);const Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(At){}}),this.observers.push(ne),Qe}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,V)}sendOne(V,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{z(this.observers[V])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xs(){}function Ns(U,V=1e3,z=2){const Ae=V*Math.pow(z,U),ne=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+ne)}function _r(U){return U&&U._delegate?U._delegate:U}},8306:(Xe,Ce,k)=>{k.d(Ce,{y:()=>$});var f=k(2961),Q=k(727),O=k(8822),ae=k(4671);var de=k(2416),pe=k(576),fe=k(2806);let $=(()=>{class X{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const he=new X;return he.source=this,he.operator=Be,he}subscribe(Be,he,Se){const et=function Ie(X){return X&&X instanceof f.Lv||function q(X){return X&&(0,pe.m)(X.next)&&(0,pe.m)(X.error)&&(0,pe.m)(X.complete)}(X)&&(0,Q.Nn)(X)}(Be)?Be:new f.Hp(Be,he,Se);return(0,fe.x)(()=>{const{operator:at,source:Pe}=this;et.add(at?at.call(et,Pe):Pe?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Be){try{return this._subscribe(Be)}catch(he){Be.error(he)}}forEach(Be,he){return new(he=L(he))((Se,et)=>{const at=new f.Hp({next:Pe=>{try{Be(Pe)}catch(_e){et(_e),at.unsubscribe()}},error:et,complete:Se});this.subscribe(at)})}_subscribe(Be){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Be)}[O.L](){return this}pipe(...Be){return function ce(X){return 0===X.length?ae.y:1===X.length?X[0]:function(Be){return X.reduce((he,Se)=>Se(he),Be)}}(Be)(this)}toPromise(Be){return new(Be=L(Be))((he,Se)=>{let et;this.subscribe(at=>et=at,at=>Se(at),()=>he(et))})}}return X.create=Fe=>new X(Fe),X})();function L(X){var Fe;return null!==(Fe=null!=X?X:de.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(Xe,Ce,k)=>{k.d(Ce,{x:()=>de});var f=k(8306),Q=k(727);const ae=(0,k(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(8737),ce=k(2806);let de=(()=>{class fe extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(L){const q=new pe(this,this);return q.operator=L,q}_throwIfClosed(){if(this.closed)throw new ae}next(L){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(L)}})}error(L){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=L;const{observers:q}=this;for(;q.length;)q.shift().error(L)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:L}=this;for(;L.length;)L.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var L;return(null===(L=this.observers)||void 0===L?void 0:L.length)>0}_trySubscribe(L){return this._throwIfClosed(),super._trySubscribe(L)}_subscribe(L){return this._throwIfClosed(),this._checkFinalizedStatuses(L),this._innerSubscribe(L)}_innerSubscribe(L){const{hasError:q,isStopped:Ie,observers:X}=this;return q||Ie?Q.Lc:(this.currentObservers=null,X.push(L),new Q.w0(()=>{this.currentObservers=null,(0,se.P)(X,L)}))}_checkFinalizedStatuses(L){const{hasError:q,thrownError:Ie,isStopped:X}=this;q?L.error(Ie):X&&L.complete()}asObservable(){const L=new f.y;return L.source=this,L}}return fe.create=($,L)=>new pe($,L),fe})();class pe extends de{constructor($,L){super(),this.destination=$,this.source=L}next($){var L,q;null===(q=null===(L=this.destination)||void 0===L?void 0:L.next)||void 0===q||q.call(L,$)}error($){var L,q;null===(q=null===(L=this.destination)||void 0===L?void 0:L.error)||void 0===q||q.call(L,$)}complete(){var $,L;null===(L=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===L||L.call($)}_subscribe($){var L,q;return null!==(q=null===(L=this.source)||void 0===L?void 0:L.subscribe($))&&void 0!==q?q:Q.Lc}}},2961:(Xe,Ce,k)=>{k.d(Ce,{Hp:()=>Be,Lv:()=>q});var f=k(576),Q=k(727),O=k(2416),ae=k(7849);function se(){}const ce=fe("C",void 0,void 0);function fe(Pe,_e,me){return{kind:Pe,value:_e,error:me}}var $=k(3410),L=k(2806);class q extends Q.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Q.Nn)(_e)&&_e.add(this)):this.destination=at}static create(_e,me,ze){return new Be(_e,me,ze)}next(_e){this.isStopped?et(function pe(Pe){return fe("N",Pe,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?et(function de(Pe){return fe("E",void 0,Pe)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?et(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ie=Function.prototype.bind;function X(Pe,_e){return Ie.call(Pe,_e)}class Fe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:me}=this;if(me.next)try{me.next(_e)}catch(ze){he(ze)}}error(_e){const{partialObserver:me}=this;if(me.error)try{me.error(_e)}catch(ze){he(ze)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(me){he(me)}}}class Be extends q{constructor(_e,me,ze){let je;if(super(),(0,f.m)(_e)||!_e)je={next:null!=_e?_e:void 0,error:null!=me?me:void 0,complete:null!=ze?ze:void 0};else{let gt;this&&O.v.useDeprecatedNextContext?(gt=Object.create(_e),gt.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&X(_e.next,gt),error:_e.error&&X(_e.error,gt),complete:_e.complete&&X(_e.complete,gt)}):je=_e}this.destination=new Fe(je)}}function he(Pe){O.v.useDeprecatedSynchronousErrorHandling?(0,L.O)(Pe):(0,ae.h)(Pe)}function et(Pe,_e){const{onStoppedNotification:me}=O.v;me&&$.z.setTimeout(()=>me(Pe,_e))}const at={closed:!0,next:se,error:function Se(Pe){throw Pe},complete:se}},727:(Xe,Ce,k)=>{k.d(Ce,{Lc:()=>ce,w0:()=>se,Nn:()=>de});var f=k(576);const O=(0,k(3888).d)(fe=>function(L){fe(this),this.message=L?`${L.length} errors occurred during unsubscription:\n${L.map((q,Ie)=>`${Ie+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=L});var ae=k(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:L}=this;if(L)if(this._parentage=null,Array.isArray(L))for(const X of L)X.remove(this);else L.remove(this);const{initialTeardown:q}=this;if((0,f.m)(q))try{q()}catch(X){$=X instanceof O?X.errors:[X]}const{_finalizers:Ie}=this;if(Ie){this._finalizers=null;for(const X of Ie)try{pe(X)}catch(Fe){$=null!=$?$:[],Fe instanceof O?$=[...$,...Fe.errors]:$.push(Fe)}}if($)throw new O($)}}add($){var L;if($&&$!==this)if(this.closed)pe($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(L=this._finalizers)&&void 0!==L?L:[]).push($)}}_hasParent($){const{_parentage:L}=this;return L===$||Array.isArray(L)&&L.includes($)}_addParent($){const{_parentage:L}=this;this._parentage=Array.isArray(L)?(L.push($),L):L?[L,$]:$}_removeParent($){const{_parentage:L}=this;L===$?this._parentage=null:Array.isArray(L)&&(0,ae.P)(L,$)}remove($){const{_finalizers:L}=this;L&&(0,ae.P)(L,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const fe=new se;return fe.closed=!0,fe})();const ce=se.EMPTY;function de(fe){return fe instanceof se||fe&&"closed"in fe&&(0,f.m)(fe.remove)&&(0,f.m)(fe.add)&&(0,f.m)(fe.unsubscribe)}function pe(fe){(0,f.m)(fe)?fe():fe.unsubscribe()}},2416:(Xe,Ce,k)=>{k.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Xe,Ce,k)=>{k.d(Ce,{E:()=>Q});const Q=new(k(8306).y)(se=>se.complete())},8996:(Xe,Ce,k)=>{k.d(Ce,{D:()=>_e});var f=k(8421),Q=k(5363),O=k(9468),ce=k(8306),pe=k(2202),fe=k(576),$=k(9672);function q(me,ze){if(!me)throw new Error("Iterable cannot be null");return new ce.y(je=>{(0,$.f)(je,ze,()=>{const gt=me[Symbol.asyncIterator]();(0,$.f)(je,ze,()=>{gt.next().then(ie=>{ie.done?je.complete():je.next(ie.value)})},0,!0)})})}var Ie=k(3670),X=k(8239),Fe=k(1144),Be=k(6495),he=k(2206),Se=k(4532),et=k(3260);function _e(me,ze){return ze?function Pe(me,ze){if(null!=me){if((0,Ie.c)(me))return function ae(me,ze){return(0,f.Xf)(me).pipe((0,O.R)(ze),(0,Q.Q)(ze))}(me,ze);if((0,Fe.z)(me))return function de(me,ze){return new ce.y(je=>{let gt=0;return ze.schedule(function(){gt===me.length?je.complete():(je.next(me[gt++]),je.closed||this.schedule())})})}(me,ze);if((0,X.t)(me))return function se(me,ze){return(0,f.Xf)(me).pipe((0,O.R)(ze),(0,Q.Q)(ze))}(me,ze);if((0,he.D)(me))return q(me,ze);if((0,Be.T)(me))return function L(me,ze){return new ce.y(je=>{let gt;return(0,$.f)(je,ze,()=>{gt=me[pe.h](),(0,$.f)(je,ze,()=>{let ie,wt;try{({value:ie,done:wt}=gt.next())}catch(Tt){return void je.error(Tt)}wt?je.complete():je.next(ie)},0,!0)}),()=>(0,fe.m)(null==gt?void 0:gt.return)&&gt.return()})}(me,ze);if((0,et.L)(me))return function at(me,ze){return q((0,et.Q)(me),ze)}(me,ze)}throw(0,Se.z)(me)}(me,ze):(0,f.Xf)(me)}},8421:(Xe,Ce,k)=>{k.d(Ce,{Xf:()=>Ie});var f=k(7582),Q=k(1144),O=k(8239),ae=k(8306),se=k(3670),ce=k(2206),de=k(4532),pe=k(6495),fe=k(3260),$=k(576),L=k(7849),q=k(8822);function Ie(Pe){if(Pe instanceof ae.y)return Pe;if(null!=Pe){if((0,se.c)(Pe))return function X(Pe){return new ae.y(_e=>{const me=Pe[q.L]();if((0,$.m)(me.subscribe))return me.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,Q.z)(Pe))return function Fe(Pe){return new ae.y(_e=>{for(let me=0;me<Pe.length&&!_e.closed;me++)_e.next(Pe[me]);_e.complete()})}(Pe);if((0,O.t)(Pe))return function Be(Pe){return new ae.y(_e=>{Pe.then(me=>{_e.closed||(_e.next(me),_e.complete())},me=>_e.error(me)).then(null,L.h)})}(Pe);if((0,ce.D)(Pe))return Se(Pe);if((0,pe.T)(Pe))return function he(Pe){return new ae.y(_e=>{for(const me of Pe)if(_e.next(me),_e.closed)return;_e.complete()})}(Pe);if((0,fe.L)(Pe))return function et(Pe){return Se((0,fe.Q)(Pe))}(Pe)}throw(0,de.z)(Pe)}function Se(Pe){return new ae.y(_e=>{(function at(Pe,_e){var me,ze,je,gt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(me=(0,f.KL)(Pe);!(ze=yield me.next()).done;)if(_e.next(ze.value),_e.closed)return}catch(ie){je={error:ie}}finally{try{ze&&!ze.done&&(gt=me.return)&&(yield gt.call(me))}finally{if(je)throw je.error}}_e.complete()})})(Pe,_e).catch(me=>_e.error(me))})}},6451:(Xe,Ce,k)=>{k.d(Ce,{T:()=>ce});var f=k(8189),Q=k(8421),O=k(515),ae=k(7669),se=k(8996);function ce(...de){const pe=(0,ae.yG)(de),fe=(0,ae._6)(de,1/0),$=de;return $.length?1===$.length?(0,Q.Xf)($[0]):(0,f.J)(fe)((0,se.D)($,pe)):O.E}},5403:(Xe,Ce,k)=>{k.d(Ce,{x:()=>Q});var f=k(2961);function Q(ae,se,ce,de,pe){return new O(ae,se,ce,de,pe)}class O extends f.Lv{constructor(se,ce,de,pe,fe,$){super(se),this.onFinalize=fe,this.shouldUnsubscribe=$,this._next=ce?function(L){try{ce(L)}catch(q){se.error(q)}}:super._next,this._error=pe?function(L){try{pe(L)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(L){se.error(L)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(Xe,Ce,k)=>{k.d(Ce,{U:()=>O});var f=k(4482),Q=k(5403);function O(ae,se){return(0,f.e)((ce,de)=>{let pe=0;ce.subscribe((0,Q.x)(de,fe=>{de.next(ae.call(se,fe,pe++))}))})}},8189:(Xe,Ce,k)=>{k.d(Ce,{J:()=>O});var f=k(5577),Q=k(4671);function O(ae=1/0){return(0,f.z)(Q.y,ae)}},5577:(Xe,Ce,k)=>{k.d(Ce,{z:()=>pe});var f=k(4004),Q=k(8421),O=k(4482),ae=k(9672),se=k(5403),de=k(576);function pe(fe,$,L=1/0){return(0,de.m)($)?pe((q,Ie)=>(0,f.U)((X,Fe)=>$(q,X,Ie,Fe))((0,Q.Xf)(fe(q,Ie))),L):("number"==typeof $&&(L=$),(0,O.e)((q,Ie)=>function ce(fe,$,L,q,Ie,X,Fe,Be){const he=[];let Se=0,et=0,at=!1;const Pe=()=>{at&&!he.length&&!Se&&$.complete()},_e=ze=>Se<q?me(ze):he.push(ze),me=ze=>{X&&$.next(ze),Se++;let je=!1;(0,Q.Xf)(L(ze,et++)).subscribe((0,se.x)($,gt=>{null==Ie||Ie(gt),X?_e(gt):$.next(gt)},()=>{je=!0},void 0,()=>{if(je)try{for(Se--;he.length&&Se<q;){const gt=he.shift();Fe?(0,ae.f)($,Fe,()=>me(gt)):me(gt)}Pe()}catch(gt){$.error(gt)}}))};return fe.subscribe((0,se.x)($,_e,()=>{at=!0,Pe()})),()=>{null==Be||Be()}}(q,Ie,fe,L)))}},5363:(Xe,Ce,k)=>{k.d(Ce,{Q:()=>ae});var f=k(9672),Q=k(4482),O=k(5403);function ae(se,ce=0){return(0,Q.e)((de,pe)=>{de.subscribe((0,O.x)(pe,fe=>(0,f.f)(pe,se,()=>pe.next(fe),ce),()=>(0,f.f)(pe,se,()=>pe.complete(),ce),fe=>(0,f.f)(pe,se,()=>pe.error(fe),ce)))})}},3099:(Xe,Ce,k)=>{k.d(Ce,{B:()=>se});var f=k(8421),Q=k(7579),O=k(2961),ae=k(4482);function se(de={}){const{connector:pe=(()=>new Q.x),resetOnError:fe=!0,resetOnComplete:$=!0,resetOnRefCountZero:L=!0}=de;return q=>{let Ie,X,Fe,Be=0,he=!1,Se=!1;const et=()=>{null==X||X.unsubscribe(),X=void 0},at=()=>{et(),Ie=Fe=void 0,he=Se=!1},Pe=()=>{const _e=Ie;at(),null==_e||_e.unsubscribe()};return(0,ae.e)((_e,me)=>{Be++,!Se&&!he&&et();const ze=Fe=null!=Fe?Fe:pe();me.add(()=>{Be--,0===Be&&!Se&&!he&&(X=ce(Pe,L))}),ze.subscribe(me),!Ie&&Be>0&&(Ie=new O.Hp({next:je=>ze.next(je),error:je=>{Se=!0,et(),X=ce(at,fe,je),ze.error(je)},complete:()=>{he=!0,et(),X=ce(at,$),ze.complete()}}),(0,f.Xf)(_e).subscribe(Ie))})(q)}}function ce(de,pe,...fe){if(!0===pe)return void de();if(!1===pe)return;const $=new O.Hp({next:()=>{$.unsubscribe(),de()}});return pe(...fe).subscribe($)}},9468:(Xe,Ce,k)=>{k.d(Ce,{R:()=>Q});var f=k(4482);function Q(O,ae=0){return(0,f.e)((se,ce)=>{ce.add(O.schedule(()=>se.subscribe(ce),ae))})}},8505:(Xe,Ce,k)=>{k.d(Ce,{b:()=>se});var f=k(576),Q=k(4482),O=k(5403),ae=k(4671);function se(ce,de,pe){const fe=(0,f.m)(ce)||de||pe?{next:ce,error:de,complete:pe}:ce;return fe?(0,Q.e)(($,L)=>{var q;null===(q=fe.subscribe)||void 0===q||q.call(fe);let Ie=!0;$.subscribe((0,O.x)(L,X=>{var Fe;null===(Fe=fe.next)||void 0===Fe||Fe.call(fe,X),L.next(X)},()=>{var X;Ie=!1,null===(X=fe.complete)||void 0===X||X.call(fe),L.complete()},X=>{var Fe;Ie=!1,null===(Fe=fe.error)||void 0===Fe||Fe.call(fe,X),L.error(X)},()=>{var X,Fe;Ie&&(null===(X=fe.unsubscribe)||void 0===X||X.call(fe)),null===(Fe=fe.finalize)||void 0===Fe||Fe.call(fe)}))}):ae.y}},4408:(Xe,Ce,k)=>{k.d(Ce,{o:()=>se});var f=k(727);class Q extends f.w0{constructor(de,pe){super()}schedule(de,pe=0){return this}}const O={setInterval(ce,de,...pe){const{delegate:fe}=O;return(null==fe?void 0:fe.setInterval)?fe.setInterval(ce,de,...pe):setInterval(ce,de,...pe)},clearInterval(ce){const{delegate:de}=O;return((null==de?void 0:de.clearInterval)||clearInterval)(ce)},delegate:void 0};var ae=k(8737);class se extends Q{constructor(de,pe){super(de,pe),this.scheduler=de,this.work=pe,this.pending=!1}schedule(de,pe=0){var fe;if(this.closed)return this;this.state=de;const $=this.id,L=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(L,$,pe)),this.pending=!0,this.delay=pe,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(L,this.id,pe),this}requestAsyncId(de,pe,fe=0){return O.setInterval(de.flush.bind(de,this),fe)}recycleAsyncId(de,pe,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return pe;null!=pe&&O.clearInterval(pe)}execute(de,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(de,pe);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,pe){let $,fe=!1;try{this.work(de)}catch(L){fe=!0,$=L||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:de,scheduler:pe}=this,{actions:fe}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(fe,this),null!=de&&(this.id=this.recycleAsyncId(pe,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xe,Ce,k)=>{k.d(Ce,{v:()=>O});var f=k(6063);class Q{constructor(se,ce=Q.now){this.schedulerActionCtor=se,this.now=ce}schedule(se,ce=0,de){return new this.schedulerActionCtor(this,se).schedule(de,ce)}}Q.now=f.l.now;class O extends Q{constructor(se,ce=Q.now){super(se,ce),this.actions=[],this._active=!1}flush(se){const{actions:ce}=this;if(this._active)return void ce.push(se);let de;this._active=!0;do{if(de=se.execute(se.state,se.delay))break}while(se=ce.shift());if(this._active=!1,de){for(;se=ce.shift();)se.unsubscribe();throw de}}}},4986:(Xe,Ce,k)=>{k.d(Ce,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(Xe,Ce,k)=>{k.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Xe,Ce,k)=>{k.d(Ce,{z:()=>f});const f={setTimeout(Q,O,...ae){const{delegate:se}=f;return(null==se?void 0:se.setTimeout)?se.setTimeout(Q,O,...ae):setTimeout(Q,O,...ae)},clearTimeout(Q){const{delegate:O}=f;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(Xe,Ce,k)=>{k.d(Ce,{h:()=>Q});const Q=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xe,Ce,k)=>{k.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Xe,Ce,k)=>{k.d(Ce,{_6:()=>ce,jO:()=>ae,yG:()=>se});var f=k(576);function O(de){return de[de.length-1]}function ae(de){return(0,f.m)(O(de))?de.pop():void 0}function se(de){return function Q(de){return de&&(0,f.m)(de.schedule)}(O(de))?de.pop():void 0}function ce(de,pe){return"number"==typeof O(de)?de.pop():pe}},8737:(Xe,Ce,k)=>{function f(Q,O){if(Q){const ae=Q.indexOf(O);0<=ae&&Q.splice(ae,1)}}k.d(Ce,{P:()=>f})},3888:(Xe,Ce,k)=>{function f(Q){const ae=Q(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Ce,{d:()=>f})},2806:(Xe,Ce,k)=>{k.d(Ce,{O:()=>ae,x:()=>O});var f=k(2416);let Q=null;function O(se){if(f.v.useDeprecatedSynchronousErrorHandling){const ce=!Q;if(ce&&(Q={errorThrown:!1,error:null}),se(),ce){const{errorThrown:de,error:pe}=Q;if(Q=null,de)throw pe}}else se()}function ae(se){f.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=se)}},9672:(Xe,Ce,k)=>{function f(Q,O,ae,se=0,ce=!1){const de=O.schedule(function(){ae(),ce?Q.add(this.schedule(null,se)):this.unsubscribe()},se);if(Q.add(de),!ce)return de}k.d(Ce,{f:()=>f})},4671:(Xe,Ce,k)=>{function f(Q){return Q}k.d(Ce,{y:()=>f})},1144:(Xe,Ce,k)=>{k.d(Ce,{z:()=>f});const f=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(Xe,Ce,k)=>{k.d(Ce,{D:()=>Q});var f=k(576);function Q(O){return Symbol.asyncIterator&&(0,f.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Xe,Ce,k)=>{function f(Q){return"function"==typeof Q}k.d(Ce,{m:()=>f})},3670:(Xe,Ce,k)=>{k.d(Ce,{c:()=>O});var f=k(8822),Q=k(576);function O(ae){return(0,Q.m)(ae[f.L])}},6495:(Xe,Ce,k)=>{k.d(Ce,{T:()=>O});var f=k(2202),Q=k(576);function O(ae){return(0,Q.m)(null==ae?void 0:ae[f.h])}},8239:(Xe,Ce,k)=>{k.d(Ce,{t:()=>Q});var f=k(576);function Q(O){return(0,f.m)(null==O?void 0:O.then)}},3260:(Xe,Ce,k)=>{k.d(Ce,{L:()=>ae,Q:()=>O});var f=k(7582),Q=k(576);function O(se){return(0,f.FC)(this,arguments,function*(){const de=se.getReader();try{for(;;){const{value:pe,done:fe}=yield(0,f.qq)(de.read());if(fe)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(pe)}}finally{de.releaseLock()}})}function ae(se){return(0,Q.m)(null==se?void 0:se.getReader)}},4482:(Xe,Ce,k)=>{k.d(Ce,{A:()=>Q,e:()=>O});var f=k(576);function Q(ae){return(0,f.m)(null==ae?void 0:ae.lift)}function O(ae){return se=>{if(Q(se))return se.lift(function(ce){try{return ae(ce,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Xe,Ce,k)=>{k.d(Ce,{h:()=>O});var f=k(2416),Q=k(3410);function O(ae){Q.z.setTimeout(()=>{const{onUnhandledError:se}=f.v;if(!se)throw ae;se(ae)})}},4532:(Xe,Ce,k)=>{function f(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>f})},7732:(Xe,Ce)=>{function f(L){return L instanceof Date&&"function"==typeof L.getMonth}function Q(L){return"string"==typeof L}function O(L){return"number"==typeof L&&!Number.isNaN(L)}const ae=L=>Array.isArray(L);function se(L){return null==L}function ce(L){return"bigint"==typeof L}function de(L){return"symbol"==typeof L}function pe(L,q){return L.reduce((Ie,X)=>Ie[X],q)}function fe(L){return"boolean"==typeof L}function $(L,q){return(Ie,X)=>{if("asc"===L){if(O(Ie)&&O(X))return Ie-X;if(Q(Ie)&&Q(X))return isNaN(Ie)||isNaN(X)?Ie.localeCompare(X,null==q?void 0:q.locale):parseFloat(Ie)-parseFloat(X);if(f(Ie)&&f(X))return+Ie-+X;if(ae(Ie)&&ae(X))return Ie.sort($(L,q)).toString().localeCompare(X.sort($(L,q)).toString(),null==q?void 0:q.locale);if(ce(Ie)&&ce(X))return Ie<X?-1:Ie>X?1:0;if(de(Ie)&&de(X))return Ie.toString().localeCompare(X.toString(),null==q?void 0:q.locale);if(fe(Ie)&&fe(X))return Ie?-1:X?1:0}if(O(Ie)&&O(X))return X-Ie;if(Q(Ie)&&Q(X))return isNaN(Ie)||isNaN(X)?X.localeCompare(Ie,null==q?void 0:q.locale):parseFloat(X)-parseFloat(Ie);if(f(Ie)&&f(X))return+X-+Ie;if(ae(Ie)&&ae(X))return X.sort($(L,q)).toString().localeCompare(Ie.sort($(L,q)).toString(),null==q?void 0:q.locale);if(ce(Ie)&&ce(X))return Ie<X?1:Ie>X?-1:0;if(de(Ie)&&de(X))return X.toString().localeCompare(Ie.toString(),null==q?void 0:q.locale);if(fe(Ie)&&fe(X))return X?-1:Ie?1:0;if(se(Ie)&&X)return 1;if(Ie&&se(X))return-1;throw new Error(`Can't sort, typeof a (${typeof Ie}: ${JSON.stringify(Ie)}) and typeof b (${typeof X}: ${JSON.stringify(X)}) are not handled by any sorting logic.`)}}Ce.h=function(L,q,Ie){const X=L.split(".");return(Fe,Be)=>{let he=Fe[X[0]],Se=Be[X[0]];return X.length>1&&(he=pe(X,Fe),Se=pe(X,Be)),$(q,Ie)(he,Se)}}},5e3:(Xe,Ce,k)=>{k.d(Ce,{$8M:()=>Gn,$Z:()=>gp,AFp:()=>C0,ALo:()=>h0,AaK:()=>pe,CHM:()=>ao,CRH:()=>xi,CZH:()=>my,CqO:()=>xm,EJc:()=>vy,EpF:()=>pE,F4k:()=>wp,FYo:()=>ty,FiY:()=>_o,G48:()=>wd,GfV:()=>Mn,Gpc:()=>L,JOm:()=>ui,LFG:()=>Qn,LSH:()=>v,Lbi:()=>HI,NdJ:()=>Mm,OlP:()=>Dn,Oqu:()=>Vm,PXZ:()=>JI,Q6J:()=>Sm,QGY:()=>vp,Qsj:()=>Zr,R0b:()=>bs,RDi:()=>$o,Rgc:()=>Zh,SBq:()=>Uh,Sil:()=>zI,Suo:()=>Wl,TTD:()=>Ba,TgZ:()=>yp,VLi:()=>ZI,X6Q:()=>Cy,XFs:()=>ft,Xpm:()=>kn,Y36:()=>Iu,YKP:()=>$h,YNc:()=>_m,Yjl:()=>At,Yz7:()=>ye,ZZ4:()=>lf,_Bn:()=>iI,_UZ:()=>_p,_Vd:()=>ey,_c5:()=>dD,_uU:()=>Nv,aQg:()=>Ry,c2e:()=>eg,cJS:()=>Pt,cg1:()=>Hl,dDg:()=>Ey,deG:()=>ol,dqk:()=>Vt,eFA:()=>M0,ekj:()=>Om,g9A:()=>$I,h0i:()=>xu,hGG:()=>Xl,hij:()=>rd,iGM:()=>qp,ifc:()=>xt,ip1:()=>nn,kL8:()=>zv,lG2:()=>Qe,lcZ:()=>Nu,n5z:()=>Qt,oAB:()=>z,oxw:()=>Ep,q4F:()=>Up,qLn:()=>Nl,qOj:()=>zr,qZA:()=>jl,sBO:()=>rD,sIi:()=>lp,s_b:()=>uy,soG:()=>vd,tBr:()=>la,tb:()=>T0,tp0:()=>vo,uIk:()=>rv,vHH:()=>Fe,vpe:()=>Qi,wAp:()=>st,xp6:()=>Mw,z2F:()=>O0,zSh:()=>op,zs3:()=>Ys});var f=k(7579),Q=k(727),O=k(8306),ae=k(6451),se=k(3099);function ce(i){for(let s in i)if(i[s]===ce)return s;throw Error("Could not find renamed property on target object.")}function de(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function pe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(pe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ce({__forward_ref__:ce});function L(i){return i.__forward_ref__=L,i.toString=function(){return pe(this())},i}function q(i){return Ie(i)?i():i}function Ie(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===L}class Fe extends Error{constructor(s,a){super(function Be(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Se(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Fe(-201,`No provider for ${Se(i)} found${a}`)}function te(i,s){null==i&&function J(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function ye(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Pt(i){return{providers:i.providers||[],imports:i.imports||[]}}function qt(i){return dt(i,Tn)||dt(i,jn)}function dt(i,s){return i.hasOwnProperty(s)?i[s]:null}function _n(i){return i&&(i.hasOwnProperty(dr)||i.hasOwnProperty(pi))?i[dr]:null}const Tn=ce({\u0275prov:ce}),dr=ce({\u0275inj:ce}),jn=ce({ngInjectableDef:ce}),pi=ce({ngInjectorDef:ce});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let La;function $n(i){const s=La;return La=i,s}function Vu(i,s,a){const l=qt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void _e(pe(i),"Injector")}function Hn(i){return{toString:i}.toString()}var hr=(()=>((hr=hr||{})[hr.OnPush=0]="OnPush",hr[hr.Default=1]="Default",hr))(),xt=(()=>{return(i=xt||(xt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",xt;var i})();const pt="undefined"!=typeof globalThis&&globalThis,Dt="undefined"!=typeof window&&window,xs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=pt||"undefined"!=typeof global&&global||Dt||xs,gi={},Et=[],Rs=ce({\u0275cmp:ce}),Gt=ce({\u0275dir:ce}),Ni=ce({\u0275pipe:ce}),br=ce({\u0275mod:ce}),vn=ce({\u0275fac:ce}),An=ce({__NG_ELEMENT_ID__:ce});let Ns=0;function kn(i){return Hn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===hr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Et,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||xt.Emulated,id:"c",styles:i.styles||Et,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,g=i.features,_=i.pipes;return l.id+=Ns++,l.inputs=ne(i.inputs,a),l.outputs=ne(i.outputs),g&&g.forEach(I=>I(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(_r):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(U):null,l})}function _r(i){return It(i)||function In(i){return i[Gt]||null}(i)}function U(i){return function hn(i){return i[Ni]||null}(i)}const V={};function z(i){return Hn(()=>{const s={type:i.type,bootstrap:i.bootstrap||Et,declarations:i.declarations||Et,imports:i.imports||Et,exports:i.exports||Et,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(V[i.id]=i.type),s})}function ne(i,s){if(null==i)return gi;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,s&&(s[d]=g)}return a}const Qe=kn;function At(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function It(i){return i[Rs]||null}function tn(i,s){const a=i[br]||null;if(!a&&!0===s)throw new Error(`Type ${pe(i)} does not have '\u0275mod' property.`);return a}function Xr(i){return Array.isArray(i)&&"object"==typeof i[1]}function _i(i){return Array.isArray(i)&&!0===i[1]}function rc(i){return 0!=(8&i.flags)}function Fs(i){return 2==(2&i.flags)}function Vo(i){return 1==(1&i.flags)}function Ar(i){return null!==i.template}function ic(i){return 0!=(512&i[2])}function ro(i,s){return i.hasOwnProperty(vn)?i[vn]:null}class ns{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ba(){return Uo}function Uo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Vd),bf}function bf(){const i=ja(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===gi)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Vd(i,s,a,l){const d=ja(i)||function Tf(i,s){return i[Ud]=s}(i,{previous:gi,current:null}),g=d.current||(d.current={}),_=d.previous,I=this.declaredInputs[a],C=_[I];g[I]=new ns(C&&C.currentValue,s,_===gi),i[l]=s}Ba.ngInherit=!0;const Ud="__ngSimpleChanges__";function ja(i){return i[Ud]||null}let Oi;function $o(i){Oi=i}function En(i){return!!i.listen}const cc={createRenderer:(i,s)=>function rs(){return void 0!==Oi?Oi:"undefined"!=typeof document?document:void 0}()};function rn(i){for(;Array.isArray(i);)i=i[0];return i}function Go(i,s){return rn(s[i])}function Kn(i,s){return rn(s[i.index])}function vr(i,s){return i.data[s]}function ti(i,s){const a=s[i];return Xr(a)?a:a[0]}function io(i){return 4==(4&i[2])}function ki(i){return 128==(128&i[2])}function is(i,s){return null==s?null:i[s]}function zo(i){i[18]=0}function $r(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const vt={lFrame:fc(null),bindingsEnabled:!0};function Wu(){return vt.bindingsEnabled}function Re(){return vt.lFrame.lView}function Kt(){return vt.lFrame.tView}function ao(i){return vt.lFrame.contextLView=i,i[8]}function Nn(){let i=Zu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Zu(){return vt.lFrame.currentTNode}function Fi(i,s){const a=vt.lFrame;a.currentTNode=i,a.isParent=s}function Ls(){return vt.lFrame.isParent}function Vs(){return vt.lFrame.bindingIndex++}function qa(i,s){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,uo(s)}function uo(i){vt.lFrame.currentDirectiveIndex=i}function Zo(){return vt.lFrame.currentQueryIndex}function Gd(i){vt.lFrame.currentQueryIndex=i}function zd(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Ko(i,s,a){if(a&ft.SkipSelf){let d=s,g=i;for(;!(d=d.parent,null!==d||a&ft.Host||(d=zd(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;s=d,i=g}const l=vt.lFrame=tr();return l.currentTNode=s,l.lView=i,!0}function Yu(i){const s=tr(),a=i[1];vt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function tr(){const i=vt.lFrame,s=null===i?null:i.child;return null===s?fc(i):s}function fc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function pc(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Wa=pc;function ii(){const i=pc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Fn(){return vt.lFrame.selectedIndex}function Vi(i){vt.lFrame.selectedIndex=i}function pn(){const i=vt.lFrame;return vr(i.tView,i.selectedIndex)}function Xu(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:M}=g;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function lo(i,s,a){Kd(i,s,3,a)}function Za(i,s,a,l){(3&i[2])===a&&Kd(i,s,a,l)}function vs(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Kd(i,s,a,l){const g=null!=l?l:-1,_=s.length-1;let I=0;for(let C=void 0!==l?65535&i[18]:0;C<_;C++)if("number"==typeof s[C+1]){if(I=s[C],null!=l&&I>=l)break}else s[C]<0&&(i[18]+=65536),(I<g||-1==g)&&(Yd(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Yd(i,s,a,l){const d=a[l]<0,g=a[l+1],I=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class Ka{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ui(i,s,a){const l=En(i);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const _=a[d++],I=a[d++],C=a[d++];l?i.setAttribute(s,I,C,_):s.setAttributeNS(_,I,C)}else{const _=g,I=a[++d];ss(_)?l&&i.setProperty(s,_,I):l?i.setAttribute(s,_,I):s.setAttribute(_,I),d++}}return d}function Hr(i){return 3===i||4===i||6===i}function ss(i){return 64===i.charCodeAt(0)}function Us(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Bs(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Bs(i,s,a,l,d){let g=0,_=i.length;if(-1===s)_=-1;else for(;g<i.length;){const I=i[g++];if("number"==typeof I){if(I===s){_=-1;break}if(I>s){_=g-1;break}}}for(;g<i.length;){const I=i[g];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==d&&(i[g+1]=d));if(l===i[g+1])return void(i[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==_&&(i.splice(_,0,s),g=_+1),i.splice(g++,0,a),null!==l&&i.splice(g++,0,l),null!==d&&i.splice(g++,0,d)}function Qo(i){return-1!==i}function ho(i){return 32767&i}function Jo(i,s){let a=function el(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let js=!0;function Ft(i){const s=js;return js=i,s}let yc=0;function ta(i,s){const a=tl(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,_c(l.data,i),_c(s,null),_c(l.blueprint,null));const d=fo(i,s),g=i.injectorIndex;if(Qo(d)){const _=ho(d),I=Jo(d,s),C=I[1].data;for(let A=0;A<8;A++)s[g+A]=I[_+A]|C[_+A]}return s[g+8]=d,g}function _c(i,s){i.push(0,0,0,0,0,0,0,0,s)}function tl(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function fo(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const g=d[1],_=g.type;if(l=2===_?g.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ya(i,s,a){!function nr(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(An)&&(l=a[An]),null==l&&(l=a[An]=yc++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Rf(i,s,a){if(a&ft.Optional)return i;_e(s,"NodeInjector")}function Bi(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const d=i[9],g=$n(void 0);try{return d?d.get(s,l,a&ft.Optional):Vu(s,l,a&ft.Optional)}finally{$n(g)}}return Rf(l,s,a)}function nl(i,s,a,l=ft.Default,d){if(null!==i){const g=function il(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(An)?i[An]:void 0;return"number"==typeof s?s>=0?255&s:na:s}(a);if("function"==typeof g){if(!Ko(s,i,l))return l&ft.Host?Rf(d,a,l):Bi(s,a,l,d);try{const _=g(l);if(null!=_||l&ft.Optional)return _;_e(a)}finally{Wa()}}else if("number"==typeof g){let _=null,I=tl(i,s),C=-1,A=l&ft.Host?s[16][6]:null;for((-1===I||l&ft.SkipSelf)&&(C=-1===I?fo(i,s):s[I+8],-1!==C&&Qa(l,!1)?(_=s[1],I=ho(C),s=Jo(C,s)):I=-1);-1!==I;){const M=s[1];if(Mr(g,I,M.data)){const F=vc(I,s,a,_,l,A);if(F!==rl)return F}C=s[I+8],-1!==C&&Qa(l,s[1].data[I+8]===A)&&Mr(g,I,s)?(_=M,I=ho(C),s=Jo(C,s)):I=-1}}}return Bi(s,a,l,d)}const rl={};function na(){return new $s(Nn(),Re())}function vc(i,s,a,l,d,g){const _=s[1],I=_.data[i+8],M=cn(I,_,a,null==l?Fs(I)&&js:l!=_&&0!=(3&I.type),d&ft.Host&&g===I);return null!==M?ji(s,_,M,I):rl}function cn(i,s,a,l,d){const g=i.providerIndexes,_=s.data,I=1048575&g,C=i.directiveStart,M=g>>20,j=d?I+M:i.directiveEnd;for(let K=l?I:I+M;K<j;K++){const we=_[K];if(K<C&&a===we||K>=C&&we.type===a)return K}if(d){const K=_[C];if(K&&Ar(K)&&K.type===a)return C}return null}function ji(i,s,a,l){let d=i[a];const g=s.data;if(function wg(i){return i instanceof Ka}(d)){const _=d;_.resolving&&function et(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Se(g[a]));const I=Ft(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?$n(_.injectImpl):null;Ko(i,l,ft.Default);try{d=i[a]=_.factory(void 0,g,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Zd(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(l){const _=Uo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==C&&$n(C),Ft(I),_.resolving=!1,Wa()}}return d}function Mr(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Qa(i,s){return!(i&ft.Self||i&ft.Host&&s)}class $s{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return nl(this._tNode,this._lView,s,l,a)}}function Qt(i){return Hn(()=>{const s=i.prototype.constructor,a=s[vn]||ra(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const g=d[vn]||ra(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function ra(i){return Ie(i)?()=>{const s=ra(q(i));return s&&s()}:ro(i)}function Gn(i){return function ws(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(Hr(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(Nn(),i)}const wi="__parameters__";function Ii(i,s,a){return Hn(()=>{const l=function rr(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...g){if(this instanceof d)return l.apply(this,g),this;const _=new d(...g);return I.annotation=_,I;function I(C,A,M){const F=C.hasOwnProperty(wi)?C[wi]:Object.defineProperty(C,wi,{value:[]})[wi];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(_),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ye({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ol=new Dn("AnalyzeForEntryComponents");function Ci(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Ci(l,s)):s!==i&&s.push(l)}return s}function oi(i,s){i.forEach(a=>Array.isArray(a)?oi(a,s):s(a))}function Dc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function sa(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ir(i,s,a){let l=us(i,s);return l>=0?i[1|l]=a:(l=~l,function eu(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function tu(i,s){const a=us(i,s);if(a>=0)return i[1|a]}function us(i,s){return function oa(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const g=l+(d-l>>1),_=i[g<<a];if(s===_)return g<<a;_>s?d=g:l=g+1}return~(d<<a)}(i,s,1)}const go={},ru="__NG_DI_FLAG__",mo="ngTempTokenPath",Cc=/\n/gm,su="__source",ou=ce({provide:String,useValue:ce});let Gi;function $t(i){const s=Gi;return Gi=i,s}function ll(i,s=ft.Default){if(void 0===Gi)throw new Fe(203,"");return null===Gi?Vu(i,void 0,s):Gi.get(i,s&ft.Optional?null:void 0,s)}function Qn(i,s=ft.Default){return(function Pn(){return La}()||ll)(q(i),s)}const bc=Qn;function yo(i){const s=[];for(let a=0;a<i.length;a++){const l=q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Fe(900,"");let d,g=ft.Default;for(let _=0;_<l.length;_++){const I=l[_],C=Tc(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}s.push(Qn(d,g))}else s.push(Qn(l))}return s}function au(i,s){return i[ru]=s,i.prototype[ru]=s,i}function Tc(i){return i[ru]}const la=au(Ii("Inject",i=>({token:i})),-1),_o=au(Ii("Optional"),8),vo=au(Ii("SkipSelf"),4);var ui=(()=>((ui=ui||{})[ui.Important=1]="Important",ui[ui.DashCase=2]="DashCase",ui))();const hu="__ngContext__";function or(i,s){i[hu]=s}function li(i){const s=function ga(i){return i[hu]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function S(i,s){return undefined(i,s)}function Z(i){const s=i[3];return _i(s)?s[3]:s}function Ve(i){return Ct(i[13])}function it(i){return Ct(i[4])}function Ct(i){for(;null!==i&&!_i(i);)i=i[4];return i}function gr(i,s,a,l,d){if(null!=l){let g,_=!1;_i(l)?g=l:Xr(l)&&(_=!0,l=l[0]);const I=rn(l);0===i&&null!==a?null==d?bg(s,a,I):pu(s,a,I,d||null,!0):1===i&&null!==a?pu(s,a,I,d||null,!0):2===i?function vl(i,s,a){const l=sh(i,s);l&&function hs(i,s,a,l){En(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,I,_):3===i&&s.destroyNode(I),null!=g&&function Jy(i,s,a,l,d){const g=a[7];g!==rn(a)&&gr(s,i,l,g,d);for(let I=10;I<a.length;I++){const C=a[I];Do(C[1],C,i,s,l,g)}}(s,i,g,a,d)}}function Er(i,s,a){if(En(i))return i.createElement(s,a);{const l=null!==a?function lc(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function ma(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,$r(d,-1)),a.splice(l,1)}function ya(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&ma(d,l),s>0&&(i[a-1][4]=l[4]);const g=sa(i,10+s);!function zi(i,s){Do(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=g[19];null!==_&&_.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Rc(i,s){if(!(256&s[2])){const a=s[11];En(a)&&a.destroyNode&&Do(i,s,a,3,null,null),function Uf(i){let s=i[13];if(!s)return _a(i[1],i);for(;s;){let a=null;if(Xr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Xr(s)&&_a(s[1],s),s=s[3];null===s&&(s=i),Xr(s)&&_a(s[1],s),a=s&&s[4]}s=a}}(s)}}function _a(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Qy(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Ka)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const I=d[g[_]],C=g[_+1];try{C.call(I)}finally{}}else try{g.call(d)}finally{}}}}(i,s),function ih(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],I="function"==typeof _?_(s):rn(s[_]),C=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?I.removeEventListener(a[g],C,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const _=l[d=a[g+1]];a[g].call(_)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();s[7]=null}}(i,s),1===s[1].type&&En(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&_i(s[3])){a!==s[3]&&ma(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Bf(i,s,a){return function jf(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===xt.None||d===xt.Emulated)return null}return Kn(l,a)}(i,s.parent,a)}function pu(i,s,a,l,d){En(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function bg(i,s,a){En(i)?i.appendChild(s,a):s.appendChild(a)}function Nc(i,s,a,l,d){null!==l?pu(i,s,a,l,d):bg(i,s,a)}function sh(i,s){return En(i)?i.parentNode(s):s.parentNode}let oh=function Pc(i,s,a){return 40&i.type?Kn(i,a):null};function uh(i,s,a,l){const d=Bf(i,l,s),g=s[11],I=function Oc(i,s,a){return oh(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Nc(g,d,a[C],I,!1);else Nc(g,d,a,I,!1)}function gu(i,s){if(null!==s){const a=s.type;if(3&a)return Kn(s,i);if(4&a)return lh(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return gu(i,l);{const d=i[s.index];return _i(d)?lh(-1,d):rn(d)}}if(32&a)return S(s,i)()||rn(i[s.index]);{const l=kc(i,s);return null!==l?Array.isArray(l)?l[0]:gu(Z(i[16]),l):gu(i,s.next)}}return null}function kc(i,s){return null!==s?i[16][6].projection[s.projection]:null}function lh(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return gu(l,d)}return s[7]}function wl(i,s,a,l,d,g,_){for(;null!=a;){const I=l[a.index],C=a.type;if(_&&0===s&&(I&&or(rn(I),l),a.flags|=4),64!=(64&a.flags))if(8&C)wl(i,s,a.child,l,d,g,!1),gr(s,i,d,I,g);else if(32&C){const A=S(a,l);let M;for(;M=A();)gr(s,i,d,M,g);gr(s,i,d,I,g)}else 16&C?Ag(i,s,l,a,d,g):gr(s,i,d,I,g);a=_?a.projectionNext:a.next}}function Do(i,s,a,l,d,g){wl(a,l,i.firstChild,s,d,g,!1)}function Ag(i,s,a,l,d,g){const _=a[16],C=_[6].projection[l.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)gr(s,i,d,C[A],g);else wl(i,s,C,_[3],d,g,!0)}function Hf(i,s,a){En(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Fc(i,s,a){En(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}class xg{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wa(i){return i instanceof xg?i.changingThisBreaksApplicationSecurity:i}const Cl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var y=(()=>((y=y||{})[y.NONE=0]="NONE",y[y.HTML=1]="HTML",y[y.STYLE=2]="STYLE",y[y.SCRIPT=3]="SCRIPT",y[y.URL=4]="URL",y[y.RESOURCE_URL=5]="RESOURCE_URL",y))();function v(i){const s=function gn(){const i=Re();return i&&i[12]}();return s?s.sanitize(y.URL,i)||"":function Vc(i,s){const a=function i_(i){return i instanceof xg&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?wa(i):function bl(i){return(i=String(i)).match(Cl)||i.match(kg)?i:"unsafe:"+i}(he(i))}function Rl(i){return i.ngOriginalError}function jg(i,...s){i.error(...s)}class Nl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Bg(i){return i&&i.ngErrorLogger||jg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Rl(s);for(;a&&Rl(a);)a=Rl(a);return a||null}}const l_=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function bo(i){return i instanceof Function?i():i}function _u(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=s.length;if(d+g===l||i.charCodeAt(d+g)<=32)return d}a=d+1}}const ci="ng-template";function Ol(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==_u(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function ww(i){return 4===i.type&&i.value!==ci}function jA(i,s,a){return s===(4!==i.type||a?i.value:ci)}function Ew(i,s,a){let l=4;const d=i.attrs||[],g=function Cw(i){for(let s=0;s<i.length;s++)if(Hr(i[s]))return s;return i.length}(d);let _=!1;for(let I=0;I<s.length;I++){const C=s[I];if("number"!=typeof C){if(!_)if(4&l){if(l=2|1&l,""!==C&&!jA(i,C,a)||""===C&&1===s.length){if(Zs(l))return!1;_=!0}}else{const A=8&l?C:s[++I];if(8&l&&null!==i.attrs){if(!Ol(i.attrs,A,a)){if(Zs(l))return!1;_=!0}continue}const F=Iw(8&l?"class":C,d,ww(i),a);if(-1===F){if(Zs(l))return!1;_=!0;continue}if(""!==A){let j;j=F>g?"":d[F+1].toLowerCase();const K=8&l?j:null;if(K&&-1!==_u(K,A,0)||2&l&&A!==j){if(Zs(l))return!1;_=!0}}}}else{if(!_&&!Zs(l)&&!Zs(C))return!1;if(_&&Zs(C))continue;_=!1,l=C|1&l}}return Zs(l)||_}function Zs(i){return 0==(1&i)}function Iw(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let g=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let I=s[++d];for(;"string"==typeof I;)I=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function bw(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function c_(i,s,a=!1){for(let l=0;l<s.length;l++)if(Ew(i,s[l],a))return!0;return!1}function Qf(i,s){return i?":not("+s.trim()+")":s}function Aw(i){let s=i[0],a=1,l=2,d="",g=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const I=i[++a];d+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Zs(_)&&(s+=Qf(g,d),d=""),l=_,g=g||!Zs(l);a++}return""!==d&&(s+=Qf(g,d)),s}const Lt={};function Mw(i){d_(Kt(),Re(),Fn()+i,!1)}function d_(i,s,a,l){if(!l)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&lo(s,g,a)}else{const g=i.preOrderHooks;null!==g&&Za(s,g,0,a)}Vi(a)}function yh(i,s){return i<<17|s<<2}function Ks(i){return i>>17&32767}function zg(i){return 2|i}function Ia(i){return(131068&i)>>2}function Jf(i,s){return-131069&i|s<<2}function qg(i){return 1|i}function A_(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const _=i.data[g];Gd(d),_.contentQueries(2,s[g],g)}}}function Kg(i,s,a,l,d,g,_,I,C,A){const M=s.blueprint.slice();return M[0]=d,M[2]=140|l,zo(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=I||i&&i[11],M[12]=C||i&&i[12]||null,M[9]=A||i&&i[9]||null,M[6]=g,M[16]=2==s.type?i[16]:M,M}function kl(i,s,a,l,d){let g=i.data[s];if(null===g)g=function Gc(i,s,a,l,d){const g=Zu(),_=Ls(),C=i.data[s]=function P_(i,s,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=C),null!==g&&(_?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(i,s,a,l,d),function _s(){return vt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const _=function Wo(){const i=vt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Fi(g,!0),g}function vu(i,s,a,l){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Da(i,s,a){Yu(s);try{const l=i.viewQuery;null!==l&&om(1,l,a);const d=i.template;null!==d&&Yg(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&A_(i,s),i.staticViewQueries&&om(2,i.viewQuery,a);const g=i.components;null!==g&&function x_(i,s){for(let a=0;a<s.length;a++)$_(i,s[a])}(s,g)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,ii()}}function Ca(i,s,a,l){const d=s[2];if(256!=(256&d)){Yu(s);try{zo(s),function $d(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Yg(i,s,a,2,l);const _=3==(3&d);if(_){const A=i.preOrderCheckHooks;null!==A&&lo(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Za(s,A,0,null),vs(s,0)}if(function fC(i){for(let s=Ve(i);null!==s;s=it(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&$r(g,1),d[2]|=1024}}}(s),function wh(i){for(let s=Ve(i);null!==s;s=it(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];ki(l)&&Ca(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&A_(i,s),_){const A=i.contentCheckHooks;null!==A&&lo(s,A)}else{const A=i.contentHooks;null!==A&&Za(s,A,1),vs(s,1)}!function rC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Vi(~d);else{const g=d,_=a[++l],I=a[++l];qa(_,g),I(2,s[g])}}}finally{Vi(-1)}}(i,s);const I=i.components;null!==I&&function S_(i,s){for(let a=0;a<s.length;a++)B_(i,s[a])}(s,I);const C=i.viewQuery;if(null!==C&&om(2,C,l),_){const A=i.viewCheckHooks;null!==A&&lo(s,A)}else{const A=i.viewHooks;null!==A&&Za(s,A,2),vs(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,$r(s[3],-1))}finally{ii()}}}function iC(i,s,a,l){const d=s[10],_=io(s);try{!_&&d.begin&&d.begin(),_&&Da(i,s,l),Ca(i,s,a,l)}finally{!_&&d.end&&d.end()}}function Yg(i,s,a,l,d){const g=Fn(),_=2&l;try{Vi(-1),_&&s.length>20&&d_(i,s,20,!1),a(l,d)}finally{Vi(g)}}function np(i,s,a){!Wu()||(function Lw(i,s,a,l){const d=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||ta(a,s),or(l,s);const _=a.initialInputs;for(let I=d;I<g;I++){const C=i.data[I],A=Ar(C);A&&Bw(s,a,C);const M=ji(s,i,I,a);or(M,s),null!==_&&U_(0,I-d,M,C,0,_),A&&(ti(a.index,s)[8]=M)}}(i,s,a,Kn(a,s)),128==(128&a.flags)&&function Vw(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,I=function Hd(){return vt.lFrame.currentDirectiveIndex}();try{Vi(_);for(let C=l;C<d;C++){const A=i.data[C],M=s[C];uo(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&sp(A,M)}}finally{Vi(-1),uo(I)}}(i,s,a))}function Qg(i,s,a=Kn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],I=-1===_?a(s,i):i[_];i[d++]=I}}}function rp(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=vh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function vh(i,s,a,l,d,g,_,I,C,A){const M=20+l,F=M+d,j=function Jg(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Lt);return a}(M,F),K="function"==typeof A?A():A;return j[1]={type:i,blueprint:j,template:a,queries:null,viewQuery:I,declTNode:s,data:j.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function O_(i,s,a,l){const d=am(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Hw(i).push(l,d.length-1))}function Xg(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function F_(i,s,a,l){let d=!1;if(Wu()){const g=function lC(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const _=l[g];c_(a,_.selectors,!1)&&(d||(d=[]),Ya(ta(a,s),i,_.type),Ar(_)?(tm(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==g){d=!0,V_(a,i.data.length,g.length);for(let M=0;M<g.length;M++){const F=g[M];F.providersResolver&&F.providersResolver(F)}let I=!1,C=!1,A=vu(i,s,g.length,null);for(let M=0;M<g.length;M++){const F=g[M];a.mergedAttrs=Us(a.mergedAttrs,F.hostAttrs),Uw(i,a,s,A,F),QA(A,F,_),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const j=F.type.prototype;!I&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),A++}!function em(i,s){const l=s.directiveEnd,d=i.data,g=s.attrs,_=[];let I=null,C=null;for(let A=s.directiveStart;A<l;A++){const M=d[A],F=M.inputs,j=null===g||ww(s)?null:dC(F,g);_.push(j),I=Xg(F,A,I),C=Xg(M.outputs,A,C)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=I,s.outputs=C}(i,a)}_&&function cC(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new Fe(-301,!1);l.push(s[d],g)}}}(a,l,_)}return a.mergedAttrs=Us(a.mergedAttrs,a.attrs),d}function L_(i,s,a,l,d,g){const _=g.hostBindings;if(_){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const C=~s.index;(function uC(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=C&&I.push(C),I.push(l,d,_)}}function sp(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function tm(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function QA(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ar(s)&&(a[""]=i)}}function V_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Uw(i,s,a,l,d){i.data[l]=d;const g=d.factory||(d.factory=ro(d.type)),_=new Ka(g,Ar(d),null);i.blueprint[l]=_,a[l]=_,L_(i,s,0,l,vu(i,a,d.hostVars,Lt),d)}function Bw(i,s,a){const l=Kn(s,i),d=rp(a),g=i[10],_=rm(i,Kg(i,d,null,a.onPush?64:16,l,s,g,g.createRenderer(l,a),null,null));i[s.index]=_}function ba(i,s,a,l,d,g){const _=Kn(i,s);!function nm(i,s,a,l,d,g,_){if(null==g)En(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const I=null==_?he(g):_(g,l||"",d);En(i)?i.setAttribute(s,d,I,a):a?s.setAttributeNS(a,d,I):s.setAttribute(d,I)}}(s[11],_,g,i.value,a,l,d)}function U_(i,s,a,l,d,g){const _=g[s];if(null!==_){const I=l.setInput;for(let C=0;C<_.length;){const A=_[C++],M=_[C++],F=_[C++];null!==I?l.setInput(a,F,A,M):a[M]=F}}}function dC(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function jw(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function B_(i,s){const a=ti(s,i);if(ki(a)){const l=a[1];80&a[2]?Ca(l,a,l.template,a[8]):a[5]>0&&j_(a)}}function j_(i){for(let l=Ve(i);null!==l;l=it(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const _=g[1];Ca(_,g,_.template,g[8])}else g[5]>0&&j_(g)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=ti(a[l],i);ki(d)&&d[5]>0&&j_(d)}}function $_(i,s){const a=ti(s,i),l=a[1];(function $w(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Da(l,a,a[8])}function rm(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function zc(i){for(;i;){i[2]|=64;const s=Z(i);if(ic(i)&&!s)return i;i=s}return null}function sm(i){!function im(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=li(a),d=l[1];iC(d,l,d.template,a)}}(i[8])}function om(i,s,a){Gd(0),s(i,a)}const tS=(()=>Promise.resolve(null))();function am(i){return i[7]||(i[7]=[])}function Hw(i){return i.cleanup||(i.cleanup=[])}function Gw(i,s){const a=i[9],l=a?a.get(Nl,null):null;l&&l.handleError(s)}function z_(i,s,a,l,d){for(let g=0;g<a.length;){const _=a[g++],I=a[g++],C=s[_],A=i.data[_];null!==A.setInput?A.setInput(C,d,l,I):C[I]=d}}function Wi(i,s,a){const l=Go(s,i);!function Io(i,s,a){En(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function um(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==s)for(let _=0;_<s.length;_++){const I=s[_];"number"==typeof I?g=I:1==g?d=fe(d,I):2==g&&(l=fe(l,I+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const q_=new Dn("INJECTOR",-1);class qw{get(s,a=go){if(a===go){const l=new Error(`NullInjectorError: No provider for ${pe(s)}!`);throw l.name="NullInjectorError",l}return a}}const op=new Dn("Set Injector scope."),Eh={},yC={};let lm;function Ww(){return void 0===lm&&(lm=new qw),lm}function W_(i,s=null,a=null,l){const d=Zw(i,s,a,l);return d._resolveInjectorDefTypes(),d}function Zw(i,s=null,a=null,l){return new Kw(i,a,s||Ww(),l)}class Kw{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&oi(a,I=>this.processProvider(I,s,a)),oi([s],I=>this.processInjectorType(I,[],g)),this.records.set(q_,ap(void 0,this));const _=this.records.get(op);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:pe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=go,l=ft.Default){this.assertNotDestroyed();const d=$t(this),g=$n(void 0);try{if(!(l&ft.SkipSelf)){let I=this.records.get(s);if(void 0===I){const C=function di(i){return"function"==typeof i||"object"==typeof i&&i instanceof Dn}(s)&&qt(s);I=C&&this.injectableDefInScope(C)?ap(Z_(s),Eh):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(l&ft.Self?Ww():this.parent).get(s,a=l&ft.Optional&&a===go?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[mo]=_[mo]||[]).unshift(pe(s)),d)throw _;return function uu(i,s,a,l){const d=i[mo];throw s[su]&&d.unshift(s[su]),i.message=function ua(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=pe(s);if(Array.isArray(s))d=s.map(pe).join(" -> ");else if("object"==typeof s){let g=[];for(let _ in s)if(s.hasOwnProperty(_)){let I=s[_];g.push(_+":"+("string"==typeof I?JSON.stringify(I):pe(I)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Cc,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[mo]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{$n(g),$t(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(pe(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(s,a,l){if(!(s=q(s)))return!1;let d=_n(s);const g=null==d&&s.ngModule||void 0,_=void 0===g?s:g,I=-1!==l.indexOf(_);if(void 0!==g&&(d=_n(g)),null==d)return!1;if(null!=d.imports&&!I){let M;l.push(_);try{oi(d.imports,F=>{this.processInjectorType(F,a,l)&&(void 0===M&&(M=[]),M.push(F))})}finally{}if(void 0!==M)for(let F=0;F<M.length;F++){const{ngModule:j,providers:K}=M[F];oi(K,we=>this.processProvider(we,j,K||Et))}}this.injectorDefTypes.add(_);const C=ro(_)||(()=>new _);this.records.set(_,ap(C,Eh));const A=d.providers;if(null!=A&&!I){const M=s;oi(A,F=>this.processProvider(F,M,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,l){let d=Ih(s=q(s))?s:q(s&&s.provide);const g=function nS(i,s,a){return Qw(i)?ap(void 0,i.useValue):ap(_C(i),Eh)}(s);if(Ih(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=ap(void 0,Eh,!0),_.factory=()=>yo(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,g)}hydrate(s,a){return a.value===Eh&&(a.value=yC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function vC(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Z_(i){const s=qt(i),a=null!==s?s.factory:ro(i);if(null!==a)return a;if(i instanceof Dn)throw new Fe(204,!1);if(i instanceof Function)return function Yw(i){const s=i.length;if(s>0)throw function Xa(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Fe(204,!1);const a=function Yt(i){const s=i&&(i[Tn]||i[jn]);if(s){const a=function bn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Fe(204,!1)}function _C(i,s,a){let l;if(Ih(i)){const d=q(i);return ro(d)||Z_(d)}if(Qw(i))l=()=>q(i.useValue);else if(function Jw(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...yo(i.deps||[]));else if(function rS(i){return!(!i||!i.useExisting)}(i))l=()=>Qn(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function iS(i){return!!i.deps}(i))return ro(d)||Z_(d);l=()=>new d(...yo(i.deps))}return l}function ap(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Qw(i){return null!==i&&"object"==typeof i&&ou in i}function Ih(i){return"function"==typeof i}let Ys=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return W_({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return W_({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=go,i.NULL=new qw,i.\u0275prov=ye({token:i,providedIn:"any",factory:()=>Qn(q_)}),i.__NG_ELEMENT_ID__=-1,i})();function rE(i,s){Xu(li(i)[1],Nn())}function zr(i){let s=function ev(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(Ar(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Fe(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=Zc(i.inputs),_.declaredInputs=Zc(i.declaredInputs),_.outputs=Zc(i.outputs);const I=d.hostBindings;I&&tv(i,I);const C=d.viewQuery,A=d.contentQueries;if(C&&hm(i,C),A&&Ta(i,A),de(i.inputs,d.inputs),de(i.declaredInputs,d.declaredInputs),de(i.outputs,d.outputs),Ar(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const I=g[_];I&&I.ngInherit&&I(i),I===zr&&(a=!1)}}s=Object.getPrototypeOf(s)}!function IC(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Us(d.hostAttrs,a=Us(a,d.hostAttrs))}}(l)}function Zc(i){return i===gi?{}:i===Et?[]:i}function hm(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function Ta(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,g)=>{s(l,d,g),a(l,d,g)}:s}function tv(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let up=null;function Ll(){if(!up){const i=Vt.Symbol;if(i&&i.iterator)up=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(up=l)}}}return up}function lp(i){return!!cp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ll()in i)}function cp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function qr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function rv(i,s,a,l){const d=Re();return qr(d,Vs(),s)&&(Kt(),ba(pn(),d,i,s,a,l)),rv}function _m(i,s,a,l,d,g,_,I){const C=Re(),A=Kt(),M=i+20,F=A.firstCreatePass?function uE(i,s,a,l,d,g,_,I,C){const A=s.consts,M=kl(s,i,4,_||null,is(A,I));F_(s,a,M,is(A,C)),Xu(s,M);const F=M.tViews=vh(2,M,l,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,M),F.queries=s.queries.embeddedTView(M)),M}(M,A,C,s,a,l,d,g,_):A.data[M];Fi(F,!1);const j=C[11].createComment("");uh(A,C,j,F),or(j,C),rm(C,C[M]=jw(j,C,j,F)),Vo(F)&&np(A,C,F),null!=_&&Qg(C,F,I)}function Iu(i,s=ft.Default){const a=Re();return null===a?Qn(i,s):nl(Nn(),a,q(i),s)}function gp(){throw new Error("invalid")}function Sm(i,s,a){const l=Re();return qr(l,Vs(),s)&&function Is(i,s,a,l,d,g,_,I){const C=Kn(s,a);let M,A=s.inputs;!I&&null!=A&&(M=A[l])?(z_(i,a,M,l,d),Fs(s)&&function ip(i,s){const a=ti(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Fw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,En(g)?g.setProperty(C,l,d):ss(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}(Kt(),pn(),l,i,s,l[11],a,!1),Sm}function mp(i,s,a,l,d){const _=d?"class":"style";z_(i,a,s.inputs[_],_,l)}function yp(i,s,a,l){const d=Re(),g=Kt(),_=20+i,I=d[11],C=d[_]=Er(I,s,function Wd(){return vt.lFrame.currentNamespace}()),A=g.firstCreatePass?function hE(i,s,a,l,d,g,_){const I=s.consts,A=kl(s,i,2,d,is(I,g));return F_(s,a,A,is(I,_)),null!==A.attrs&&um(A,A.attrs,!1),null!==A.mergedAttrs&&um(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,g,d,0,s,a,l):g.data[_];Fi(A,!0);const M=A.mergedAttrs;null!==M&&Ui(I,C,M);const F=A.classes;null!==F&&Fc(I,C,F);const j=A.styles;return null!==j&&Hf(I,C,j),64!=(64&A.flags)&&uh(g,d,C,A),0===function qu(){return vt.lFrame.elementDepthCount}()&&or(C,d),function Bd(){vt.lFrame.elementDepthCount++}(),Vo(A)&&(np(g,d,A),function M_(i,s,a){if(rc(s)){const d=s.directiveEnd;for(let g=s.directiveStart;g<d;g++){const _=i.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&Qg(d,A),yp}function jl(){let i=Nn();Ls()?function ni(){vt.lFrame.isParent=!1}():(i=i.parent,Fi(i,!1));const s=i;!function $a(){vt.lFrame.elementDepthCount--}();const a=Kt();return a.firstCreatePass&&(Xu(a,i),rc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Mf(i){return 0!=(16&i.flags)}(s)&&mp(a,s,Re(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function On(i){return 0!=(32&i.flags)}(s)&&mp(a,s,Re(),s.stylesWithoutHost,!1),jl}function _p(i,s,a,l){return yp(i,s,a,l),jl(),_p}function pE(){return Re()}function vp(i){return!!i&&"function"==typeof i.then}function wp(i){return!!i&&"function"==typeof i.subscribe}const xm=wp;function Mm(i,s,a,l){const d=Re(),g=Kt(),_=Nn();return function mE(i,s,a,l,d,g,_,I){const C=Vo(l),M=i.firstCreatePass&&Hw(i),F=s[8],j=am(s);let K=!0;if(3&l.type||I){const We=Kn(l,s),ot=I?I(We):We,ve=j.length,yt=I?Jt=>I(rn(Jt[l.index])):l.index;if(En(a)){let Jt=null;if(!I&&C&&(Jt=function gE(i,s,a,l){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===a&&d[g+1]===l){const I=s[7],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof _&&(g+=2)}return null}(i,s,d,l.index)),null!==Jt)(Jt.__ngLastListenerFn__||Jt).__ngNextListenerFn__=g,Jt.__ngLastListenerFn__=g,K=!1;else{g=Rm(l,s,F,g,!1);const yn=a.listen(ot,d,g);j.push(g,yn),M&&M.push(d,yt,ve,ve+1)}}else g=Rm(l,s,F,g,!0),ot.addEventListener(d,g,_),j.push(g),M&&M.push(d,yt,ve,_)}else g=Rm(l,s,F,g,!1);const we=l.outputs;let Ue;if(K&&null!==we&&(Ue=we[d])){const We=Ue.length;if(We)for(let ot=0;ot<We;ot+=2){const Ts=s[Ue[ot]][Ue[ot+1]].subscribe(g),Lu=j.length;j.push(g,Ts),M&&M.push(d,l.index,Lu,-(Lu+1))}}}(g,d,d[11],_,i,s,!!a,l),Mm}function Mh(i,s,a,l){try{return!1!==a(l)}catch(d){return Gw(i,d),!1}}function Rm(i,s,a,l,d){return function g(_){if(_===Function)return l;const I=2&i.flags?ti(i.index,s):s;0==(32&s[2])&&zc(I);let C=Mh(s,0,l,_),A=g.__ngNextListenerFn__;for(;A;)C=Mh(s,0,A,_)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Ep(i=1){return function Qu(i){return(vt.lFrame.contextLView=function gc(i,s){for(;i>0;)s=s[15],i--;return s}(i,vt.lFrame.contextLView))[8]}(i)}function Rh(i,s,a,l,d){const g=i[a+1],_=null===s;let I=l?Ks(g):Ia(g),C=!1;for(;0!==I&&(!1===C||_);){const M=i[I+1];PC(i[I],s)&&(C=!0,i[I+1]=l?qg(M):zg(M)),I=l?Ks(M):Ia(M)}C&&(i[a+1]=l?zg(g):qg(g))}function PC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&us(i,s)>=0}function Om(i,s){return function xo(i,s,a,l){const d=Re(),g=Kt(),_=function ys(i){const s=vt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function bE(i,s,a,l){const d=i.data;if(null===d[a+1]){const g=d[Fn()],_=function CE(i,s){return s>=i.expandoStartIndex}(i,a);(function Rv(i,s){return 0!=(i.flags&(s?16:32))})(g,l)&&null===s&&!_&&(s=!1),s=function Pm(i,s,a,l){const d=function Ku(i){const s=vt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Cu(a=Fm(null,i,s,a,l),s.attrs,l),g=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Fm(d,i,s,a,l),null===g){let C=function Ap(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Ia(l))return i[Ks(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=Fm(null,i,s,C[1],l),C=Cu(C,s.attrs,l),function km(i,s,a,l){i[Ks(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else g=function xv(i,s,a){let l;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)l=Cu(l,i[g].hostAttrs,a);return Cu(l,s.attrs,a)}(i,s,l)}return void 0!==g&&(l?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,l),function Nm(i,s,a,l,d,g){let _=g?s.classBindings:s.styleBindings,I=Ks(_),C=Ia(_);i[l]=a;let M,A=!1;if(Array.isArray(a)){const F=a;M=F[1],(null===M||us(F,M)>0)&&(A=!0)}else M=a;if(d)if(0!==C){const j=Ks(i[I+1]);i[l+1]=yh(j,I),0!==j&&(i[j+1]=Jf(i[j+1],l)),i[I+1]=function Rw(i,s){return 131071&i|s<<17}(i[I+1],l)}else i[l+1]=yh(I,0),0!==I&&(i[I+1]=Jf(i[I+1],l)),I=l;else i[l+1]=yh(C,0),0===I?I=l:i[C+1]=Jf(i[C+1],l),C=l;A&&(i[l+1]=zg(i[l+1])),Rh(i,M,l,!0),Rh(i,M,l,!1),function bp(i,s,a,l,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&us(g,s)>=0&&(a[l+1]=qg(a[l+1]))}(s,M,i,l,g),_=yh(I,C),g?s.classBindings=_:s.styleBindings=_}(d,g,s,a,_,l)}}(g,i,_,l),s!==Lt&&qr(d,_,s)&&function Mv(i,s,a,l,d,g,_,I){if(!(3&s.type))return;const C=i.data,A=C[I+1];Lm(function Xf(i){return 1==(1&i)}(A)?AE(C,s,a,d,Ia(A),_):void 0)||(Lm(g)||function Gg(i){return 2==(2&i)}(A)&&(g=AE(C,null,a,d,I,_)),function Xy(i,s,a,l,d){const g=En(i);if(s)d?g?i.addClass(a,l):a.classList.add(l):g?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ui.DashCase;if(null==d)g?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const I="string"==typeof d&&d.endsWith("!important");I&&(d=d.slice(0,-10),_|=ui.Important),g?i.setStyle(a,l,d,_):a.style.setProperty(l,d,I?"important":"")}}}(l,_,Go(Fn(),a),d,g))}(g,g.data[Fn()],d,d[11],i,d[_+1]=function VC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=pe(wa(i)))),i}(s,a),l,_)}(i,s,null,!0),Om}function Fm(i,s,a,l,d){let g=null;const _=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<_&&(g=s[I],l=Cu(l,g.hostAttrs,d),g!==i);)I++;return null!==i&&(a.directiveStylingLast=I),l}function Cu(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ir(i,_,!!a||s[++g]))}return void 0===i?null:i}function AE(i,s,a,l,d,g){const _=null===s;let I;for(;d>0;){const C=i[d],A=Array.isArray(C),M=A?C[1]:C,F=null===M;let j=a[d+1];j===Lt&&(j=F?Et:void 0);let K=F?tu(j,l):M===l?j:void 0;if(A&&!Lm(K)&&(K=tu(C,l)),Lm(K)&&(I=K,_))return I;const we=i[d+1];d=_?Ks(we):Ia(we)}if(null!==s){let C=g?s.residualClasses:s.residualStyles;null!=C&&(I=tu(C,l))}return I}function Lm(i){return void 0!==i}function Nv(i,s=""){const a=Re(),l=Kt(),d=i+20,g=l.firstCreatePass?kl(l,d,1,s,null):l.data[d],_=a[d]=function Vn(i,s){return En(i)?i.createText(s):i.createTextNode(s)}(a[11],s);uh(l,a,_,g),Fi(g,!1)}function Vm(i){return rd("",i,""),Vm}function rd(i,s,a){const l=Re(),d=function Ch(i,s,a,l){return qr(i,Vs(),a)?s+he(a)+l:Lt}(l,i,s,a);return d!==Lt&&Wi(l,Fn(),d),rd}const od=void 0;var xa=["en",[["a","p"],["AM","PM"],od],[["AM","PM"],od,od],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],od,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],od,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",od,"{1} 'at' {0}",od],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Gv(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ad={};function Hl(i){const s=function Gm(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ma(s);if(a)return a;const l=s.split("-")[0];if(a=Ma(l),a)return a;if("en"===l)return xa;throw new Error(`Missing locale data for the locale "${i}".`)}function zv(i){return Hl(i)[st.PluralCase]}function Ma(i){return i in ad||(ad[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),ad[i]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const ud="en-US";let HE=ud;function Xm(i,s,a,l,d){if(i=q(i),Array.isArray(i))for(let g=0;g<i.length;g++)Xm(i[g],s,a,l,d);else{const g=Kt(),_=Re();let I=Ih(i)?i:q(i.provide),C=_C(i);const A=Nn(),M=1048575&A.providerIndexes,F=A.directiveStart,j=A.providerIndexes>>20;if(Ih(i)||!i.multi){const K=new Ka(C,d,Iu),we=r0(I,s,d?M:M+j,F);-1===we?(Ya(ta(A,_),g,I),n0(g,i,s.length),s.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(K),_.push(K)):(a[we]=K,_[we]=K)}else{const K=r0(I,s,M+j,F),we=r0(I,s,M,M+j),Ue=K>=0&&a[K],We=we>=0&&a[we];if(d&&!We||!d&&!Ue){Ya(ta(A,_),g,I);const ot=function XC(i,s,a,l,d){const g=new Ka(i,a,Iu);return g.multi=[],g.index=s,g.componentProviders=0,rI(g,d,l&&!a),g}(d?JC:QC,a.length,d,l,C);!d&&We&&(a[we].providerFactory=ot),n0(g,i,s.length,0),s.push(I),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(ot),_.push(ot)}else n0(g,i,K>-1?K:we,rI(a[d?we:K],C,!d&&l));!d&&l&&We&&a[we].componentProviders++}}}function n0(i,s,a,l){const d=Ih(s),g=function K_(i){return!!i.useClass}(s);if(d||g){const C=(g?q(s.useClass):s).prototype.ngOnDestroy;if(C){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,C]):A[M+1].push(l,C)}else A.push(a,C)}}}function rI(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function r0(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function QC(i,s,a,l){return s0(this.multi,[])}function JC(i,s,a,l){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=ji(a,a[1],this.providerFactory.index,l);g=I.slice(0,_),s0(d,g);for(let C=_;C<I.length;C++)g.push(I[C])}else g=[],s0(d,g);return g}function s0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function iI(i,s=[]){return a=>{a.providersResolver=(l,d)=>function Jm(i,s,a){const l=Kt();if(l.firstCreatePass){const d=Ar(i);Xm(a,l.data,l.blueprint,d,!0),Xm(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class sI{}class nb{resolveComponentFactory(s){throw function tb(i){const s=Error(`No component factory found for ${pe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let ey=(()=>{class i{}return i.NULL=new nb,i})();function aI(){return Vh(Nn(),Re())}function Vh(i,s){return new Uh(Kn(i,s))}let Uh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=aI,i})();function uI(i){return i instanceof Uh?i.nativeElement:i}class ty{}let Zr=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function zl(){const i=Re(),a=ti(Nn().index,i);return function lI(i){return i[11]}(Xr(a)?a:i)}(),i})(),cI=(()=>{class i{}return i.\u0275prov=ye({token:i,providedIn:"root",factory:()=>null}),i})();class Mn{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Up=new Mn("13.3.12"),Fr={};function Cn(i,s,a,l,d=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&l.push(rn(g)),_i(g))for(let I=10;I<g.length;I++){const C=g[I],A=C[1].firstChild;null!==A&&Cn(C[1],C,A,l)}const _=a.type;if(8&_)Cn(i,s,a.child,l);else if(32&_){const I=S(a,s);let C;for(;C=I();)l.push(C)}else if(16&_){const I=kc(s,a);if(Array.isArray(I))l.push(...I);else{const C=Z(s[16]);Cn(C[1],C,I,l,!0)}}a=d?a.projectionNext:a.next}return l}class Bh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Cn(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(_i(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(ya(s,l),sa(a,l))}this._attachedToViewContainer=!1}Rc(this._lView[1],this._lView)}onDestroy(s){O_(this._lView[1],this._lView,null,s)}markForCheck(){zc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function H_(i,s,a){const l=s[10];l.begin&&l.begin();try{Ca(i,s,i.template,a)}catch(d){throw Gw(s,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rh(i,s){Do(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=s}}class jh extends Bh{constructor(s){super(s),this._view=s}detectChanges(){sm(this._view)}checkNoChanges(){}get context(){return null}}class Yi extends ey{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=It(s);return new a0(a,this.ngModule)}}function o0(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class a0 extends sI{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Sw(i){return i.map(Aw).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return o0(this.componentDef.inputs)}get outputs(){return o0(this.componentDef.outputs)}create(s,a,l,d){const g=(d=d||this.ngModule)?function Lr(i,s){return{get:(a,l,d)=>{const g=i.get(a,Fr,d);return g!==Fr||l===Fr?g:s.get(a,l,d)}}}(s,d.injector):s,_=g.get(ty,cc),I=g.get(cI,null),C=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=l?function N_(i,s,a){if(En(i))return i.selectRootElement(s,a===xt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):Er(_.createRenderer(null,this.componentDef),A,function rb(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),F=this.componentDef.onPush?576:528,j=function nE(i,s){return{components:[],scheduler:i||l_,clean:tS,playerHandler:s||null,flags:0}}(),K=vh(0,null,null,1,0,null,null,null,null,null),we=Kg(null,K,j,F,null,null,_,C,I,g);let Ue,We;Yu(we);try{const ot=function Pr(i,s,a,l,d,g){const _=a[1];a[20]=i;const C=kl(_,20,2,"#host",null),A=C.mergedAttrs=s.hostAttrs;null!==A&&(um(C,A,!0),null!==i&&(Ui(d,i,A),null!==C.classes&&Fc(d,i,C.classes),null!==C.styles&&Hf(d,i,C.styles)));const M=l.createRenderer(i,s),F=Kg(a,rp(s),null,s.onPush?64:16,a[20],C,l,M,g||null,null);return _.firstCreatePass&&(Ya(ta(C,a),_,s.type),tm(_,C),V_(C,a.length,1)),rm(a,F),a[20]=F}(M,this.componentDef,we,_,C);if(M)if(l)Ui(C,M,["ng-version",Up.full]);else{const{attrs:ve,classes:yt}=function xw(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let g=i[l];if("string"==typeof g)2===d?""!==g&&s.push(g,i[++l]):8===d&&a.push(g);else{if(!Zs(d))break;d=g}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);ve&&Ui(C,M,ve),yt&&yt.length>0&&Fc(C,M,yt.join(" "))}if(We=vr(K,20),void 0!==a){const ve=We.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Jt=a[yt];ve.push(null!=Jt?Array.from(Jt):null)}}Ue=function wu(i,s,a,l,d){const g=a[1],_=function YA(i,s,a){const l=Nn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Uw(i,l,s,vu(i,s,1,null),a));const d=ji(s,i,l.directiveStart,l);or(d,s);const g=Kn(l,s);return g&&or(g,s),d}(g,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(C=>C(_,s)),s.contentQueries){const C=Nn();s.contentQueries(1,_,C.directiveStart)}const I=Nn();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Vi(I.index),L_(a[1],I,0,I.directiveStart,I.directiveEnd,s),sp(s,_)),_}(ot,this.componentDef,we,j,[rE]),Da(K,we,null)}finally{ii()}return new Su(this.componentType,Ue,Vh(We,we),we,We)}}class Su extends class eb{}{constructor(s,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new jh(d),this.componentType=s}get injector(){return new $s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class xu{}class $h{}const Hh=new Map;class Ru extends xu{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Yi(this);const l=tn(s);this._bootstrapComponents=bo(l.bootstrap),this._r3Injector=Zw(s,a,[{provide:xu,useValue:this},{provide:ey,useValue:this.componentFactoryResolver}],pe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Ys.THROW_IF_NOT_FOUND,l=ft.Default){return s===Ys||s===xu||s===q_?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class sy extends $h{constructor(s){super(),this.moduleType=s,null!==tn(s)&&function ry(i){const s=new Set;!function a(l){const d=tn(l,!0),g=d.id;null!==g&&(function Mu(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${pe(s)} vs ${pe(s.name)}`)}(g,Hh.get(g),l),Hh.set(g,l));const _=bo(d.imports);for(const I of _)s.has(I)||(s.add(I),a(I))}(i)}(s)}create(s){return new Ru(this.moduleType,s)}}function fI(i,s,a,l,d,g){const _=s+a;return qr(i,_,d)?function Xs(i,s,a){return i[s]=a}(i,_+1,g?l.call(g,d):l(d)):function zh(i,s){const a=i[s];return a===Lt?void 0:a}(i,_+1)}function h0(i,s){const a=Kt();let l;const d=i+20;a.firstCreatePass?(l=function Bn(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=ro(l.type)),_=$n(Iu);try{const I=Ft(!1),C=g();return Ft(I),function lE(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,Re(),d,C),C}finally{$n(_)}}function Nu(i,s,a){const l=i+20,d=Re(),g=function Pi(i,s){return i[s]}(d,l);return function Wh(i,s){return i[1].data[s].pure}(d,l)?fI(d,function xr(){const i=vt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,g.transform,a,g):g.transform(a)}function dn(i){return s=>{setTimeout(i,void 0,s)}}const Qi=class en extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,g,_;let I=s,C=a||(()=>null),A=l;if(s&&"object"==typeof s){const F=s;I=null===(d=F.next)||void 0===d?void 0:d.bind(F),C=null===(g=F.error)||void 0===g?void 0:g.bind(F),A=null===(_=F.complete)||void 0===_?void 0:_.bind(F)}this.__isAsync&&(C=dn(C),I&&(I=dn(I)),A&&(A=dn(A)));const M=super.subscribe({next:I,error:C,complete:A});return s instanceof Q.w0&&s.add(M),M}};function f0(){return this._results[Ll()]()}class $p{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ll(),l=$p.prototype;l[a]||(l[a]=f0)}get changes(){return this._changes||(this._changes=new Qi)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Ci(s);(this._changesDetected=!function Ic(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],g=s[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Zh=(()=>{class i{}return i.__NG_ELEMENT_ID__=_I,i})();const p0=Zh,yI=class extends p0{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Kg(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Da(a,l,s),new Bh(l)}};function _I(){return Hp(Nn(),Re())}function Hp(i,s){return 4&i.type?new yI(s,i,Vh(i,s)):null}let uy=(()=>{class i{}return i.__NG_ELEMENT_ID__=sb,i})();function sb(){return wI(Nn(),Re())}const ob=uy,g0=class extends ob{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Vh(this._hostTNode,this._hostLView)}get injector(){return new $s(this._hostTNode,this._hostLView)}get parentInjector(){const s=fo(this._hostTNode,this._hostLView);if(Qo(s)){const a=Jo(s,this._hostLView),l=ho(s);return new $s(a[1].data[l+8],a)}return new $s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=vI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,g){const _=s&&!function as(i){return"function"==typeof i}(s);let I;if(_)I=a;else{const F=a||{};I=F.index,l=F.injector,d=F.projectableNodes,g=F.ngModuleRef}const C=_?s:new a0(It(s)),A=l||this.parentInjector;if(!g&&null==C.ngModule){const j=(_?A:this.parentInjector).get(xu,null);j&&(g=j)}const M=C.create(A,d,void 0,g);return this.insert(M.hostView,I),M}insert(s,a){const l=s._lView,d=l[1];if(function dc(i){return _i(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const F=l[3],j=new g0(F,F[6],F[3]);j.detach(j.indexOf(s))}}const g=this._adjustIndex(a),_=this._lContainer;!function Yy(i,s,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=s),l<g-10?(s[4]=a[d],Dc(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function dw(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=128}(d,l,_,g);const I=lh(g,_),C=l[11],A=sh(C,_[7]);return null!==A&&function Rr(i,s,a,l,d,g){l[0]=d,l[6]=s,Do(i,l,a,1,d,g)}(d,_[6],C,l,A,I),s.attachToViewContainerRef(),Dc(ly(_),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=vI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=ya(this._lContainer,a);l&&(sa(ly(this._lContainer),a),Rc(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=ya(this._lContainer,a);return l&&null!=sa(ly(this._lContainer),a)?new Bh(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function vI(i){return i[8]}function ly(i){return i[8]||(i[8]=[])}function wI(i,s){let a;const l=s[i.index];if(_i(l))a=l;else{let d;if(8&i.type)d=rn(l);else{const g=s[11];d=g.createComment("");const _=Kn(i,s);pu(g,sh(g,_),d,function va(i,s){return En(i)?i.nextSibling(s):s.nextSibling}(g,_),!1)}s[i.index]=a=jw(l,s,d,i),rm(s,a)}return new g0(a,i,s)}class Ou{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ou(this.queryList)}setDirty(){this.queryList.setDirty()}}class pd{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new pd(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==dy(s,a).matches&&this.queries[a].setDirty()}}class Gp{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Kh{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(s,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Kh(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class cy{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new cy(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(s,a,II(a,g)),this.matchTNodeWithReadOption(s,a,cn(a,s,g,!1,!1))}else l===Zh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,cn(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Uh||d===uy||d===Zh&&4&a.type)this.addMatch(a.index,-2);else{const g=cn(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function II(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function DI(i,s,a,l){return-1===a?function Pu(i,s){return 11&i.type?Vh(i,s):4&i.type?Hp(i,s):null}(s,i):-2===a?function Yh(i,s,a){return a===Uh?Vh(s,i):a===Zh?Hp(s,i):a===uy?wI(s,i):void 0}(i,s,l):ji(i,i[1],a,s)}function m0(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const g=i.data,_=a.matches,I=[];for(let C=0;C<_.length;C+=2){const A=_[C];I.push(A<0?null:DI(s,g[A],_[C+1],a.metadata.read))}d.matches=I}return d.matches}function zp(i,s,a,l){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const _=m0(i,s,d,a);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)l.push(_[I/2]);else{const A=g[I+1],M=s[-C];for(let F=10;F<M.length;F++){const j=M[F];j[17]===j[3]&&zp(j[1],j,A,l)}if(null!==M[9]){const F=M[9];for(let j=0;j<F.length;j++){const K=F[j];zp(K[1],K,A,l)}}}}}return l}function qp(i){const s=Re(),a=Kt(),l=Zo();Gd(l+1);const d=dy(a,l);if(i.dirty&&io(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?zp(a,s,l,[]):m0(a,s,d,l);i.reset(g,uI),i.notifyOnChanges()}return!0}return!1}function Wl(i,s,a,l){const d=Kt();if(d.firstCreatePass){const g=Nn();(function Qh(i,s,a){null===i.queries&&(i.queries=new Kh),i.queries.track(new cy(s,a))})(d,new Gp(s,a,l),g.index),function CI(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Wp(i,s,a){const l=new $p(4==(4&a));O_(i,s,l,l.destroy),null===s[19]&&(s[19]=new pd),s[19].queries.push(new Ou(l))}(d,Re(),a)}function xi(){return function _0(i,s){return i[19].queries[s].queryList}(Re(),Zo())}function dy(i,s){return i.queries.getByIndex(s)}function gy(...i){}const nn=new Dn("Application Initializer");let my=(()=>{class i{constructor(a){this.appInits=a,this.resolve=gy,this.reject=gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(vp(g))a.push(g);else if(xm(g)){const _=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Qn(nn,8))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const C0=new Dn("AppId",{providedIn:"root",factory:function yy(){return`${_y()}${_y()}${_y()}`}});function _y(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $I=new Dn("Platform Initializer"),HI=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),T0=new Dn("appBootstrapListener");let eg=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const vd=new Dn("LocaleId",{providedIn:"root",factory:()=>bc(vd,ft.Optional|ft.SkipSelf)||function tg(){return"undefined"!=typeof $localize&&$localize.locale||ud}()}),vy=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class _b{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let zI=(()=>{class i{compileModuleSync(a){return new sy(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=bo(tn(a).declarations).reduce((_,I)=>{const C=It(I);return C&&_.push(new a0(C)),_},[]);return new _b(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vb=(()=>Promise.resolve(0))();function A0(i){"undefined"==typeof Zone?vb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class bs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qi(!1),this.onMicrotaskEmpty=new Qi(!1),this.onStable=new Qi(!1),this.onError=new Qi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function wb(){let i=Vt.requestAnimationFrame,s=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function yr(i){const s=()=>{!function Eb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ng(i),i.isCheckStableRunning=!0,wy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ng(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,_,I)=>{try{return S0(i),a.invokeTask(d,g,_,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),nf(i)}},onInvoke:(a,l,d,g,_,I,C)=>{try{return S0(i),a.invoke(d,g,_,I,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),nf(i)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,ng(i),wy(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,s,tf,gy,gy);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const tf={};function wy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ng(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function S0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function nf(i){i._nesting--,wy(i)}class Oa{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qi,this.onMicrotaskEmpty=new Qi,this.onStable=new Qi,this.onError=new Qi}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Ey=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bs.assertNotInAngularZone(),A0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())A0(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Qn(bs))},i.\u0275prov=ye({token:i,factory:i.\u0275fac}),i})(),WI=(()=>{class i{constructor(){this._applications=new Map,Iy.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Iy.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class rg{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function ZI(i){Iy=i}let Iy=new rg,Yl=null;const KI=new Dn("AllowMultipleToken"),YI=new Dn("PlatformOnDestroy");class JI{constructor(s,a){this.name=s,this.token=a}}function M0(i,s,a=[]){const l=`Platform: ${s}`,d=new Dn(l);return(g=[])=>{let _=R0();if(!_||_.injector.get(KI,!1)){const I=[...a,...g,{provide:d,useValue:!0}];i?i(I):function x0(i){if(Yl&&!Yl.get(KI,!1))throw new Fe(400,"");Yl=i;const s=i.get(eD),a=i.get($I,null);a&&a.forEach(l=>l())}(function XI(i=[],s){return Ys.create({name:s,providers:[{provide:op,useValue:"platform"},{provide:YI,useValue:()=>Yl=null},...i]})}(I,l))}return function Db(i){const s=R0();if(!s)throw new Fe(401,"");return s}()}}function R0(){var i;return null!==(i=null==Yl?void 0:Yl.get(eD))&&void 0!==i?i:null}let eD=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const I=function Ql(i,s){let a;return a="noop"===i?new Oa:("zone.js"===i?void 0:i)||new bs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:bs,useValue:I}];return I.run(()=>{const A=Ys.create({providers:C,parent:this.injector,name:a.moduleType.name}),M=a.create(A),F=M.injector.get(Nl,null);if(!F)throw new Fe(402,"");return I.runOutsideAngular(()=>{const j=I.onError.subscribe({next:K=>{F.handleError(K)}});M.onDestroy(()=>{Dy(this._modules,M),j.unsubscribe()})}),function rf(i,s,a){try{const l=a();return vp(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(F,I,()=>{const j=M.injector.get(my);return j.runInitializers(),j.donePromise.then(()=>(function BC(i){te(i,"Expected localeId to be defined"),"string"==typeof i&&(HE=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(vd,ud)||ud),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=N0({},l);return function ig(i,s,a){const l=new sy(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(O0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Fe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(YI,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Qn(Ys))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function N0(i,s){return Array.isArray(s)?s.reduce(N0,i):Object.assign(Object.assign({},i),s)}let O0=(()=>{class i{constructor(a,l,d,g){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),I=new O.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{bs.assertNotInAngularZone(),A0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{bs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ae.T)(_,I.pipe((0,se.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Fe(405,"");let d;d=a instanceof sI?a:this._injector.get(ey).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function Ib(i){return i.isBoundToModule}(d)?void 0:this._injector.get(xu),I=d.create(Ys.NULL,[],l||d.selector,g),C=I.location.nativeElement,A=I.injector.get(Ey,null),M=A&&I.injector.get(WI);return A&&M&&M.registerApplication(C,A),I.onDestroy(()=>{this.detachView(I.hostView),Dy(this.components,I),M&&M.unregisterApplication(C)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Dy(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(T0,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Qn(bs),Qn(Ys),Qn(Nl),Qn(my))},i.\u0275prov=ye({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dy(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let nD=!0,P0=!1;function Cy(){return P0=!0,nD}function wd(){if(P0)throw new Error("Cannot enable prod mode after platform setup.");nD=!1}let rD=(()=>{class i{}return i.__NG_ELEMENT_ID__=k0,i})();function k0(i){return function F0(i,s,a){if(Fs(i)&&!a){const l=ti(i.index,s);return new Bh(l,l)}return 47&i.type?new Bh(s[16],s):null}(Nn(),Re(),16==(16&i))}class U0{constructor(){}supports(s){return lp(s)}create(s){return new j0(s)}}const B0=(i,s)=>s;class j0{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||B0}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<xy(l,d,g)?a:l,I=xy(_,d,g),C=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{g||(g=[]);const A=I-d,M=C-d;if(A!=M){for(let j=0;j<A;j++){const K=j<g.length?g[j]:g[j]=0,we=K+j;M<=we&&we<A&&(g[j]=K+1)}g[_.previousIndex]=M-A}}I!==C&&s(_,I,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!lp(s))throw new Fe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)g=s[I],_=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,I),l=!0),a=a._next}else d=0,function nv(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Ll()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,I=>{_=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,I,_,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new aD(a,l),g,d),s}_verifyReinsertion(s,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new uD),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class aD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sy{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class uD{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Sy,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xy(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class sg{constructor(){}supports(s){return s instanceof Map||cp(s)}create(){return new Mb}}class Mb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||cp(s)))throw new Fe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const l=new lD(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class lD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uf(){return new lf([new U0])}let lf=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||uf()),deps:[[i,new vo,new _o]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Fe(901,"")}}return i.\u0275prov=ye({token:i,providedIn:"root",factory:uf}),i})();function $0(){return new Ry([new sg])}let Ry=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$0()),deps:[[i,new vo,new _o]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Fe(901,"")}}return i.\u0275prov=ye({token:i,providedIn:"root",factory:$0}),i})();const dD=M0(null,"core",[]);let Xl=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Qn(O0))},i.\u0275mod=z({type:i}),i.\u0275inj=Pt({}),i})()},3942:(Xe,Ce,k)=>{k.d(Ce,{Z:()=>Fe});var f=k(2090),Q=k(4859),O=k(6881),ae=k(1877);class se{constructor(he,Se){this._delegate=he,this.firebase=Se,(0,O._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Se=O._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const at=this._delegate.container.getProvider(he);return!at.isInitialized()&&"EXPLICIT"===(null===(et=at.getComponent())||void 0===et?void 0:et.instantiationMode)&&at.initialize(),at.getImmediate({identifier:Se})}_removeServiceInstance(he,Se=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Se)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function fe(){const Be=function pe(Be){const he={},Se={__esModule:!0,initializeApp:function Pe(je,gt={}){const ie=O.initializeApp(je,gt);if((0,f.r3)(he,ie.name))return he[ie.name];const wt=new Be(ie,Se);return he[ie.name]=wt,wt},app:at,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function me(je){const gt=je.name,ie=gt.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const wt=(Tt=at())=>{if("function"!=typeof Tt[ie])throw de.create("invalid-app-argument",{appName:gt});return Tt[ie]()};void 0!==je.serviceProps&&(0,f.ZB)(wt,je.serviceProps),Se[ie]=wt,Be.prototype[ie]=function(...Tt){return this._getService.bind(this,gt).apply(this,je.multipleInstances?Tt:[])}}return"PUBLIC"===je.type?Se[ie]:null},removeApp:function et(je){delete he[je]},useAsService:function ze(je,gt){return"serverAuth"===gt?null:gt},modularAPIs:O}};function at(je){if(!(0,f.r3)(he,je=je||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:je});return he[je]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function _e(){return Object.keys(he).map(je=>he[je])}}),at.App=Be,Se}(se);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function he(Se){(0,f.ZB)(Be,Se)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Be}(),L=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){L.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&L.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=$;!function X(Be){(0,O.registerVersion)("@firebase/app-compat","0.2.13",Be)}()},6881:(Xe,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Et,_DEFAULT_ENTRY_NAME:()=>Hn,_addComponent:()=>xt,_addOrOverwriteComponent:()=>pt,_apps:()=>fr,_clearComponents:()=>Vt,_components:()=>Qr,_getProvider:()=>xs,_registerComponent:()=>Dt,_removeServiceInstance:()=>Ms,deleteApp:()=>br,getApp:()=>Gt,getApps:()=>Ni,initializeApp:()=>Rs,onLog:()=>Ns,registerVersion:()=>An,setLogLevel:()=>kn});var f=k(5861),Q=k(4859),O=k(1877),ae=k(2090);let ce,de;const $=new WeakMap,L=new WeakMap,q=new WeakMap,Ie=new WeakMap,X=new WeakMap;let he={get(oe,ee,xe){if(oe instanceof IDBTransaction){if("done"===ee)return L.get(oe);if("objectStoreNames"===ee)return oe.objectStoreNames||q.get(oe);if("store"===ee)return xe.objectStoreNames[1]?void 0:xe.objectStore(xe.objectStoreNames[0])}return Pe(oe[ee])},set:(oe,ee,xe)=>(oe[ee]=xe,!0),has:(oe,ee)=>oe instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in oe};function at(oe){return"function"==typeof oe?function et(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...ee){return oe.apply(_e(this),ee),Pe($.get(this))}:function(...ee){return Pe(oe.apply(_e(this),ee))}:function(ee,...xe){const ge=oe.call(_e(this),ee,...xe);return q.set(ge,ee.sort?ee.sort():[ee]),Pe(ge)}}(oe):(oe instanceof IDBTransaction&&function Be(oe){if(L.has(oe))return;const ee=new Promise((xe,ge)=>{const Ge=()=>{oe.removeEventListener("complete",rt),oe.removeEventListener("error",kt),oe.removeEventListener("abort",kt)},rt=()=>{xe(),Ge()},kt=()=>{ge(oe.error||new DOMException("AbortError","AbortError")),Ge()};oe.addEventListener("complete",rt),oe.addEventListener("error",kt),oe.addEventListener("abort",kt)});L.set(oe,ee)}(oe),((oe,ee)=>ee.some(xe=>oe instanceof xe))(oe,function pe(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,he):oe)}function Pe(oe){if(oe instanceof IDBRequest)return function Fe(oe){const ee=new Promise((xe,ge)=>{const Ge=()=>{oe.removeEventListener("success",rt),oe.removeEventListener("error",kt)},rt=()=>{xe(Pe(oe.result)),Ge()},kt=()=>{ge(oe.error),Ge()};oe.addEventListener("success",rt),oe.addEventListener("error",kt)});return ee.then(xe=>{xe instanceof IDBCursor&&$.set(xe,oe)}).catch(()=>{}),X.set(ee,oe),ee}(oe);if(Ie.has(oe))return Ie.get(oe);const ee=at(oe);return ee!==oe&&(Ie.set(oe,ee),X.set(ee,oe)),ee}const _e=oe=>X.get(oe),je=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],ie=new Map;function wt(oe,ee){if(!(oe instanceof IDBDatabase)||ee in oe||"string"!=typeof ee)return;if(ie.get(ee))return ie.get(ee);const xe=ee.replace(/FromIndex$/,""),ge=ee!==xe,Ge=gt.includes(xe);if(!(xe in(ge?IDBIndex:IDBObjectStore).prototype)||!Ge&&!je.includes(xe))return;const rt=function(){var kt=(0,f.Z)(function*(Sn,...Wt){const er=this.transaction(Sn,Ge?"readwrite":"readonly");let an=er.store;return ge&&(an=an.index(Wt.shift())),(yield Promise.all([an[xe](...Wt),Ge&&er.done]))[0]});return function(Wt){return kt.apply(this,arguments)}}();return ie.set(ee,rt),rt}!function Se(oe){he=oe(he)}(oe=>KD(ZD({},oe),{get:(ee,xe,ge)=>wt(ee,xe)||oe.get(ee,xe,ge),has:(ee,xe)=>!!wt(ee,xe)||oe.has(ee,xe)}));class Tt{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function mt(oe){const ee=oe.getComponent();return"VERSION"===(null==ee?void 0:ee.type)}(xe)){const ge=xe.getImmediate();return`${ge.library}/${ge.version}`}return null}).filter(xe=>xe).join(" ")}}const Zt="@firebase/app",fi=new O.Yd("@firebase/app"),Hn="[DEFAULT]",hr={[Zt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fr=new Map,Qr=new Map;function xt(oe,ee){try{oe.container.addComponent(ee)}catch(xe){fi.debug(`Component ${ee.name} failed to register with FirebaseApp ${oe.name}`,xe)}}function pt(oe,ee){oe.container.addOrOverwriteComponent(ee)}function Dt(oe){const ee=oe.name;if(Qr.has(ee))return fi.debug(`There were multiple attempts to register component ${ee}.`),!1;Qr.set(ee,oe);for(const xe of fr.values())xt(xe,oe);return!0}function xs(oe,ee){const xe=oe.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),oe.container.getProvider(ee)}function Ms(oe,ee,xe=Hn){xs(oe,ee).clearInstance(xe)}function Vt(){Qr.clear()}const Rn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gi{constructor(ee,xe,ge){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=ge,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}const Et="9.23.0";function Rs(oe,ee={}){let xe=oe;"object"!=typeof ee&&(ee={name:ee});const ge=Object.assign({name:Hn,automaticDataCollectionEnabled:!1},ee),Ge=ge.name;if("string"!=typeof Ge||!Ge)throw Rn.create("bad-app-name",{appName:String(Ge)});if(xe||(xe=(0,ae.aH)()),!xe)throw Rn.create("no-options");const rt=fr.get(Ge);if(rt){if((0,ae.vZ)(xe,rt.options)&&(0,ae.vZ)(ge,rt.config))return rt;throw Rn.create("duplicate-app",{appName:Ge})}const kt=new Q.H0(Ge);for(const Wt of Qr.values())kt.addComponent(Wt);const Sn=new gi(xe,ge,kt);return fr.set(Ge,Sn),Sn}function Gt(oe=Hn){const ee=fr.get(oe);if(!ee&&oe===Hn&&(0,ae.aH)())return Rs();if(!ee)throw Rn.create("no-app",{appName:oe});return ee}function Ni(){return Array.from(fr.values())}function br(oe){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(oe){const ee=oe.name;fr.has(ee)&&(fr.delete(ee),yield Promise.all(oe.container.getProviders().map(xe=>xe.delete())),oe.isDeleted=!0)})).apply(this,arguments)}function An(oe,ee,xe){var ge;let Ge=null!==(ge=hr[oe])&&void 0!==ge?ge:oe;xe&&(Ge+=`-${xe}`);const rt=Ge.match(/\s|\//),kt=ee.match(/\s|\//);if(rt||kt){const Sn=[`Unable to register library "${Ge}" with version "${ee}":`];return rt&&Sn.push(`library name "${Ge}" contains illegal characters (whitespace or "/")`),rt&&kt&&Sn.push("and"),kt&&Sn.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void fi.warn(Sn.join(" "))}Dt(new Q.wA(`${Ge}-version`,()=>({library:Ge,version:ee}),"VERSION"))}function Ns(oe,ee){if(null!==oe&&"function"!=typeof oe)throw Rn.create("invalid-log-argument");(0,O.Am)(oe,ee)}function kn(oe){(0,O.Ub)(oe)}const U="firebase-heartbeat-store";let V=null;function z(){return V||(V=function me(oe,ee,{blocked:xe,upgrade:ge,blocking:Ge,terminated:rt}={}){const kt=indexedDB.open(oe,ee),Sn=Pe(kt);return ge&&kt.addEventListener("upgradeneeded",Wt=>{ge(Pe(kt.result),Wt.oldVersion,Wt.newVersion,Pe(kt.transaction),Wt)}),xe&&kt.addEventListener("blocked",Wt=>xe(Wt.oldVersion,Wt.newVersion,Wt)),Sn.then(Wt=>{rt&&Wt.addEventListener("close",()=>rt()),Ge&&Wt.addEventListener("versionchange",er=>Ge(er.oldVersion,er.newVersion,er))}).catch(()=>{}),Sn}("firebase-heartbeat-database",1,{upgrade:(oe,ee)=>{0===ee&&oe.createObjectStore(U)}}).catch(oe=>{throw Rn.create("idb-open",{originalErrorMessage:oe.message})})),V}function ne(){return(ne=(0,f.Z)(function*(oe){try{return yield(yield z()).transaction(U).objectStore(U).get(It(oe))}catch(ee){if(ee instanceof ae.ZR)fi.warn(ee.message);else{const xe=Rn.create("idb-get",{originalErrorMessage:null==ee?void 0:ee.message});fi.warn(xe.message)}}})).apply(this,arguments)}function Qe(oe,ee){return At.apply(this,arguments)}function At(){return(At=(0,f.Z)(function*(oe,ee){try{const ge=(yield z()).transaction(U,"readwrite");yield ge.objectStore(U).put(ee,It(oe)),yield ge.done}catch(xe){if(xe instanceof ae.ZR)fi.warn(xe.message);else{const ge=Rn.create("idb-set",{originalErrorMessage:null==xe?void 0:xe.message});fi.warn(ge.message)}}})).apply(this,arguments)}function It(oe){return`${oe.name}!${oe.options.appId}`}class tn{constructor(ee){this.container=ee,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new mi(xe),this._heartbeatsCachePromise=this._storage.read().then(ge=>(this._heartbeatsCache=ge,ge))}triggerHeartbeat(){var ee=this;return(0,f.Z)(function*(){const ge=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ge=Ut();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==Ge&&!ee._heartbeatsCache.heartbeats.some(rt=>rt.date===Ge))return ee._heartbeatsCache.heartbeats.push({date:Ge,agent:ge}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(rt=>{const kt=new Date(rt.date).valueOf();return Date.now()-kt<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,f.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const xe=Ut(),{heartbeatsToSend:ge,unsentEntries:Ge}=function pr(oe,ee=1024){const xe=[];let ge=oe.slice();for(const Ge of oe){const rt=xe.find(kt=>kt.agent===Ge.agent);if(rt){if(rt.dates.push(Ge.date),jr(xe)>ee){rt.dates.pop();break}}else if(xe.push({agent:Ge.agent,dates:[Ge.date]}),jr(xe)>ee){xe.pop();break}ge=ge.slice(1)}return{heartbeatsToSend:xe,unsentEntries:ge}}(ee._heartbeatsCache.heartbeats),rt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ge}));return ee._heartbeatsCache.lastSentHeartbeatDate=xe,Ge.length>0?(ee._heartbeatsCache.heartbeats=Ge,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),rt})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class mi{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,f.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function Ae(oe){return ne.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var xe=this;return(0,f.Z)(function*(){var ge;if(yield xe._canUseIndexedDBPromise){const rt=yield xe.read();return Qe(xe.app,{lastSentHeartbeatDate:null!==(ge=ee.lastSentHeartbeatDate)&&void 0!==ge?ge:rt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var xe=this;return(0,f.Z)(function*(){var ge;if(yield xe._canUseIndexedDBPromise){const rt=yield xe.read();return Qe(xe.app,{lastSentHeartbeatDate:null!==(ge=ee.lastSentHeartbeatDate)&&void 0!==ge?ge:rt.lastSentHeartbeatDate,heartbeats:[...rt.heartbeats,...ee.heartbeats]})}})()}}function jr(oe){return(0,ae.L)(JSON.stringify({version:2,heartbeats:oe})).length}!function yi(oe){Dt(new Q.wA("platform-logger",ee=>new Tt(ee),"PRIVATE")),Dt(new Q.wA("heartbeat",ee=>new tn(ee),"PRIVATE")),An(Zt,"0.9.13",oe),An(Zt,"0.9.13","esm2017"),An("fire-js","")}("")},4859:(Xe,Ce,k)=>{k.d(Ce,{H0:()=>pe,wA:()=>O});var f=k(5861),Q=k(2090);class O{constructor($,L,q){this.name=$,this.instanceFactory=L,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class se{constructor($,L){this.name=$,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const L=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(L)){const q=new Q.BH;if(this.instancesDeferred.set(L,q),this.isInitialized(L)||this.shouldAutoInitialize())try{const Ie=this.getOrInitializeService({instanceIdentifier:L});Ie&&q.resolve(Ie)}catch(Ie){}}return this.instancesDeferred.get(L).promise}getImmediate($){var L;const q=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ie=null!==(L=null==$?void 0:$.optional)&&void 0!==L&&L;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Ie)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(X){if(Ie)return null;throw X}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function de(fe){return"EAGER"===fe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(L){}for(const[L,q]of this.instancesDeferred.entries()){const Ie=this.normalizeInstanceIdentifier(L);try{const X=this.getOrInitializeService({instanceIdentifier:Ie});q.resolve(X)}catch(X){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const L=Array.from($.instances.values());yield Promise.all([...L.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...L.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:L={}}=$,q=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ie=this.getOrInitializeService({instanceIdentifier:q,options:L});for(const[X,Fe]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(X)&&Fe.resolve(Ie);return Ie}onInit($,L){var q;const Ie=this.normalizeInstanceIdentifier(L),X=null!==(q=this.onInitCallbacks.get(Ie))&&void 0!==q?q:new Set;X.add($),this.onInitCallbacks.set(Ie,X);const Fe=this.instances.get(Ie);return Fe&&$(Fe,Ie),()=>{X.delete($)}}invokeOnInitCallbacks($,L){const q=this.onInitCallbacks.get(L);if(q)for(const Ie of q)try{Ie($,L)}catch(X){}}getOrInitializeService({instanceIdentifier:$,options:L={}}){let q=this.instances.get($);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=$,fe===ae?void 0:fe),options:L}),this.instances.set($,q),this.instancesOptions.set($,L),this.invokeOnInitCallbacks(q,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,q)}catch(Ie){}var fe;return q||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor($){this.name=$,this.providers=new Map}addComponent($){const L=this.getProvider($.name);if(L.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);L.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const L=new se($,this);return this.providers.set($,L),L}getProviders(){return Array.from(this.providers.values())}}},1877:(Xe,Ce,k)=>{k.d(Ce,{Am:()=>fe,Ub:()=>pe,Yd:()=>de,in:()=>Q});const f=[];var Q=(()=>{return($=Q||(Q={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",Q;var $})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ae=Q.INFO,se={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ce=($,L,...q)=>{if(L<$.logLevel)return;const Ie=(new Date).toISOString(),X=se[L];if(!X)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[X](`[${Ie}]  ${$.name}:`,...q)};class de{constructor(L){this.name=L,this._logLevel=ae,this._logHandler=ce,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in Q))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?O[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...L),this._logHandler(this,Q.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...L),this._logHandler(this,Q.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...L),this._logHandler(this,Q.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...L),this._logHandler(this,Q.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...L),this._logHandler(this,Q.ERROR,...L)}}function pe($){f.forEach(L=>{L.setLogLevel($)})}function fe($,L){for(const q of f){let Ie=null;L&&L.level&&(Ie=O[L.level]),q.userLogHandler=null===$?null:(X,Fe,...Be)=>{const he=Be.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(et){return null}}).filter(Se=>Se).join(" ");Fe>=(null!=Ie?Ie:X.logLevel)&&$({level:Q[Fe].toLowerCase(),message:he,args:Be,type:X.name})}}}},259:(Xe,Ce,k)=>{k.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(6881);(0,f.registerVersion)("firebase","9.23.0","app")},9260:(Xe,Ce,k)=>{k.d(Ce,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(Xe,Ce,k)=>{k.r(Ce);var f=k(5861),Q=k(3942),O=k(2090),ae=k(6881),se=k(7582),ce=k(1877),de=k(4859);const Fe=function Ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Be=function X(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new ce.Yd("@firebase/auth");function Pe(y,...h){et.logLevel<=ce.in.ERROR&&et.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function _e(y,...h){throw gt(y,...h)}function me(y,...h){return gt(y,...h)}function ze(y,h,p){const v=Object.assign(Object.assign({},Be()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&_e(y,"argument-error"),ze(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gt(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function ie(y,h,...p){if(!y)throw gt(h,...p)}function wt(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Pe(h),new Error(h)}function Tt(y,h){y||wt(h)}function mt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Zt(){return"http:"===lt()||"https:"===lt()}function lt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class es{constructor(h,p){this.shortDelay=h,this.longDelay=p,Tt(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function fi(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(y,h){Tt(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class J{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const be={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Te=new es(3e4,6e4);function Oe(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function ye(y,h,p,v){return ut.apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(y,h,p,v,T={}){return Pt(y,T,(0,f.Z)(function*(){let R={},B={};v&&("GET"===h?B=v:R={body:JSON.stringify(v)});const Y=(0,O.xO)(Object.assign({key:y.config.apiKey},B)).slice(1),Me=yield y._getAdditionalHeaders();return Me["Content-Type"]="application/json",y.languageCode&&(Me["X-Firebase-Locale"]=y.languageCode),J.fetch()(bn(y,y.config.apiHost,p,Y),Object.assign({method:h,headers:Me,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Pt(y,h,p){return qt.apply(this,arguments)}function qt(){return(qt=(0,f.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},be),h);try{const T=new _n(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const B=yield R.json();if("needConfirmation"in B)throw Tn(y,"account-exists-with-different-credential",B);if(R.ok&&!("errorMessage"in B))return B;{const Y=R.ok?B.errorMessage:B.error.message,[Me,$e]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Tn(y,"credential-already-in-use",B);if("EMAIL_EXISTS"===Me)throw Tn(y,"email-already-in-use",B);if("USER_DISABLED"===Me)throw Tn(y,"user-disabled",B);const Je=v[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw ze(y,Je,$e);_e(y,Je)}}catch(T){if(T instanceof O.ZR)throw T;_e(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function dt(y,h,p,v){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,f.Z)(function*(y,h,p,v,T={}){const R=yield ye(y,h,p,v,T);return"mfaPendingCredential"in R&&_e(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function bn(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?te(y.config,T):`${y.config.apiScheme}://${T}`}class _n{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(me(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tn(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=me(y,h,v);return T.customData._tokenResponse=p,T}function jn(){return(jn=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function pi(y,h){return ft.apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function La(y,h){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function $n(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Hn(){return(Hn=(0,f.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),T=fr(v);ie(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,B=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:$n(hr(T.auth_time)),issuedAtTime:$n(hr(T.iat)),expirationTime:$n(hr(T.exp)),signInProvider:B||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function hr(y){return 1e3*Number(y)}function fr(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Pe("Failed to decode base64 JWT payload"),null)}catch(T){return Pe("Caught error parsing JWT payload as JSON",null==T?void 0:T.toString()),null}}function xt(y,h){return pt.apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Dt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Dt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class xs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===(null==p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class Ms{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=$n(this.lastLoginAt),this.creationTime=$n(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vt(y){return Br.apply(this,arguments)}function Br(){return(Br=(0,f.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield xt(y,La(p,{idToken:v}));ie(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const B=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Rs(R.providerUserInfo):[],Y=Et(y.providerData,B),Je=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==Y?void 0:Y.length)),tt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Y,metadata:new Ms(R.createdAt,R.lastLoginAt),isAnonymous:Je};Object.assign(y,tt)})).apply(this,arguments)}function gi(){return(gi=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield Vt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Et(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function Rs(y){return y.map(h=>{var{providerId:p}=h,v=(0,se._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Ni(){return(Ni=(0,f.Z)(function*(y,h){const p=yield Pt(y,{},(0,f.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,B=bn(y,T,"/v1/token",`key=${R}`),Y=yield y._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",J.fetch()(B,{method:"POST",headers:Y,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class br{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ie(h.idToken,"internal-error"),ie(void 0!==h.idToken,"internal-error"),ie(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Qr(y){const h=fr(y);return ie(h,"internal-error"),ie(void 0!==h.exp,"internal-error"),ie(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,f.Z)(function*(){return ie(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:B}=yield function Gt(y,h){return Ni.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,R,Number(B))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,B=new br;return v&&(ie("string"==typeof v,"internal-error",{appName:h}),B.refreshToken=v),T&&(ie("string"==typeof T,"internal-error",{appName:h}),B.accessToken=T),R&&(ie("number"==typeof R,"internal-error",{appName:h}),B.expirationTime=R),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new br,this.toJSON())}_performRefresh(){return wt("not implemented")}}function vn(y,h){ie("string"==typeof y||void 0===y,"internal-error",{appName:h})}class An{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,R=(0,se._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Ms(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,f.Z)(function*(){const v=yield xt(p,p.stsTokenManager.getToken(p.auth,h));return ie(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function Uu(y){return Hn.apply(this,arguments)}(this,h)}reload(){return function Rn(y){return gi.apply(this,arguments)}(this)}_assign(h){this!==h&&(ie(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new An(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Vt(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const p=yield h.getIdToken();return yield xt(h,function dr(y,h){return jn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,R,B,Y,Me,$e,Je;const tt=null!==(v=p.displayName)&&void 0!==v?v:void 0,gn=null!==(T=p.email)&&void 0!==T?T:void 0,qi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,ph=null!==(B=p.photoURL)&&void 0!==B?B:void 0,Ug=null!==(Y=p.tenantId)&&void 0!==Y?Y:void 0,Rl=null!==(Me=p._redirectEventId)&&void 0!==Me?Me:void 0,Bg=null!==($e=p.createdAt)&&void 0!==$e?$e:void 0,jg=null!==(Je=p.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:Nl,emailVerified:gh,isAnonymous:$g,providerData:Zf,stsTokenManager:Kf}=p;ie(Nl&&Kf,h,"internal-error");const u_=br.fromJSON(this.name,Kf);ie("string"==typeof Nl,h,"internal-error"),vn(tt,h.name),vn(gn,h.name),ie("boolean"==typeof gh,h,"internal-error"),ie("boolean"==typeof $g,h,"internal-error"),vn(qi,h.name),vn(ph,h.name),vn(Ug,h.name),vn(Rl,h.name),vn(Bg,h.name),vn(jg,h.name);const Hg=new An({uid:Nl,auth:h,email:gn,emailVerified:gh,displayName:tt,isAnonymous:$g,photoURL:ph,phoneNumber:qi,tenantId:Ug,stsTokenManager:u_,createdAt:Bg,lastLoginAt:jg});return Zf&&Array.isArray(Zf)&&(Hg.providerData=Zf.map(l_=>Object.assign({},l_))),Rl&&(Hg._redirectEventId=Rl),Hg}static _fromIdTokenResponse(h,p,v=!1){return(0,f.Z)(function*(){const T=new br;T.updateFromServerResponse(p);const R=new An({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield Vt(R),R})()}}const Ns=new Map;function kn(y){Tt(y instanceof Function,"Expected a class definition");let h=Ns.get(y);return h?(Tt(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Ns.set(y,h),h)}const _r=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,f.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,f.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,f.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function U(y,h,p){return`firebase:${y}:${h}:${p}`}class V{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,R),this.fullPersistenceKey=U("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?An._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,f.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,f.Z)(function*(){if(!p.length)return new V(kn(_r),h,v);const T=(yield Promise.all(p.map(function(){var $e=(0,f.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return $e.apply(this,arguments)}}()))).filter($e=>$e);let R=T[0]||kn(_r);const B=U(v,h.config.apiKey,h.name);let Y=null;for(const $e of p)try{const Je=yield $e._get(B);if(Je){const tt=An._fromJSON(h,Je);$e!==R&&(Y=tt),R=$e;break}}catch(Je){}const Me=T.filter($e=>$e._shouldAllowMigration);return R._shouldAllowMigration&&Me.length?(R=Me[0],Y&&(yield R._set(B,Y.toJSON())),yield Promise.all(p.map(function(){var $e=(0,f.Z)(function*(Je){if(Je!==R)try{yield Je._remove(B)}catch(tt){}});return function(Je){return $e.apply(this,arguments)}}())),new V(R,h,v)):new V(R,h,v)})()}}function z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(At(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ae(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(In(h))return"Blackberry";if(hn(h))return"Webos";if(ne(h))return"Safari";if((h.includes("chrome/")||Qe(h))&&!h.includes("edge/"))return"Chrome";if(It(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Ae(y=(0,O.z$)()){return/firefox\//i.test(y)}function ne(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Qe(y=(0,O.z$)()){return/crios\//i.test(y)}function At(y=(0,O.z$)()){return/iemobile/i.test(y)}function It(y=(0,O.z$)()){return/android/i.test(y)}function In(y=(0,O.z$)()){return/blackberry/i.test(y)}function hn(y=(0,O.z$)()){return/webos/i.test(y)}function tn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function jr(y=(0,O.z$)()){return tn(y)||It(y)||hn(y)||In(y)||/windows phone/i.test(y)||At(y)}function oe(y,h=[]){let p;switch(y){case"Browser":p=z((0,O.z$)());break;case"Worker":p=`${z((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${v}`}function xe(){return(xe=(0,f.Z)(function*(y){return(yield ye(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ge(y,h){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(y,h){return ye(y,"GET","/v2/recaptchaConfig",Oe(y,h))})).apply(this,arguments)}function rt(y){return void 0!==y&&void 0!==y.getResponse}function kt(y){return void 0!==y&&void 0!==y.enterprise}class Sn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function er(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const R=me("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function Wt(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function an(y){return`__${y}${Math.floor(1e6*Math.random())}`}class Va{constructor(h){this.type="recaptcha-enterprise",this.auth=fn(h)}verify(h="verify",p=!1){var v=this;return(0,f.Z)(function*(){function R(){return R=(0,f.Z)(function*(Y){if(!p){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Me=(0,f.Z)(function*($e,Je){ge(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const gn=new Sn(tt);return null==Y.tenantId?Y._agentRecaptchaConfig=gn:Y._tenantRecaptchaConfigs[Y.tenantId]=gn,$e(gn.siteKey)}Je(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Je(tt)})});return function($e,Je){return Me.apply(this,arguments)}}())}),R.apply(this,arguments)}function B(Y,Me,$e){const Je=window.grecaptcha;kt(Je)?Je.enterprise.ready(()=>{Je.enterprise.execute(Y,{action:h}).then(tt=>{Me(tt)}).catch(()=>{Me("NO_RECAPTCHA")})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Me)=>{(function T(Y){return R.apply(this,arguments)})(v.auth).then($e=>{if(!p&&kt(window.grecaptcha))B($e,Y,Me);else{if("undefined"==typeof window)return void Me(new Error("RecaptchaVerifier is only supported in browser"));er("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{B($e,Y,Me)}).catch(Je=>{Me(Je)})}}).catch($e=>{Me($e)})})})()}}function Tr(y,h,p){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(y,h,p,v=!1){const T=new Va(y);let R;try{R=yield T.verify(p)}catch(Y){R=yield T.verify(p,!0)}const B=Object.assign({},h);return Object.assign(B,v?{captchaResp:R}:{captchaResponse:R}),Object.assign(B,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(B,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),B})).apply(this,arguments)}class Ps{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=R=>new Promise((B,Y)=>{try{B(h(R))}catch(Me){Y(Me)}});v.onAbort=p,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,f.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const T of p.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const R of v)try{R()}catch(B){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null==T?void 0:T.message})}})()}}class Zn{constructor(h,p,v,T){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=v,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ks(this),this.idTokenSubscription=new ks(this),this.beforeStateQueue=new Ps(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=kn(p)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield V.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(B){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,f.Z)(function*(){var v;const T=yield p.assertedPersistence.getCurrentUser();let R=T,B=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Y=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Me=null==R?void 0:R._redirectEventId,$e=yield p.tryRedirectSignIn(h);(!Y||Y===Me)&&(null==$e?void 0:$e.user)&&(R=$e.user,B=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(B)try{yield p.beforeStateQueue.runMiddleware(R)}catch(Y){R=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Y))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return ie(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,f.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,f.Z)(function*(){try{yield Vt(h)}catch(v){if("auth/network-request-failed"!==(null==v?void 0:v.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function no(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,f.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&ie(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,f.Z)(function*(){if(!v._deleted)return h&&ie(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,f.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,f.Z)(function*(){yield p.assertedPersistence.setPersistence(kn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,f.Z)(function*(){const p=yield ge(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),v=new Sn(p);null==h.tenantId?h._agentRecaptchaConfig=v:h._tenantRecaptchaConfigs[h.tenantId]=v,v.emailPasswordEnabled&&new Va(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,f.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,f.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&kn(h)||p._popupRedirectResolver;ie(v,p,"argument-error"),p.redirectPersistenceManager=yield V.create(p,[kn(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,f.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,f.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,f.Z)(function*(){if(h===p.currentUser)return p.queue((0,f.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),B=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(B,this,"internal-error"),B.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,f.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=oe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(v["X-Firebase-Client"]=T);const R=yield h._getAppCheckToken();return R&&(v["X-Firebase-AppCheck"]=R),v})()}_getAppCheckToken(){var h=this;return(0,f.Z)(function*(){var p;const v=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return(null==v?void 0:v.error)&&function at(y,...h){et.logLevel<=ce.in.WARN&&et.warn(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${v.error}`),null==v?void 0:v.token})()}}function fn(y){return(0,O.m9)(y)}class ks{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lo(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function _i(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Fs{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return wt("not implemented")}_getIdTokenResponse(h){return wt("not implemented")}_linkToIdToken(h,p){return wt("not implemented")}_getReauthenticationResolver(h){return wt("not implemented")}}function Vo(y,h){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:resetPassword",Oe(y,h))})).apply(this,arguments)}function ic(y,h){return Md.apply(this,arguments)}function Md(){return(Md=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wf(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:update",Oe(y,h))})).apply(this,arguments)}function Sr(y,h){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithPassword",Oe(y,h))})).apply(this,arguments)}function sc(y,h){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:sendOobCode",Oe(y,h))})).apply(this,arguments)}function Od(y,h){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,f.Z)(function*(y,h){return sc(y,h)})).apply(this,arguments)}function Bu(y,h){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,f.Z)(function*(y,h){return sc(y,h)})).apply(this,arguments)}function kd(y,h){return ju.apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(y,h){return sc(y,h)})).apply(this,arguments)}function oc(y,h){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,f.Z)(function*(y,h){return sc(y,h)})).apply(this,arguments)}function If(){return(If=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithEmailLink",Oe(y,h))})).apply(this,arguments)}function $u(){return($u=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithEmailLink",Oe(y,h))})).apply(this,arguments)}class ac extends Fs{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new ac(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new ac(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,f.Z)(function*(){var v;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null===(v=h._getRecaptchaConfig())||void 0===v?void 0:v.emailPasswordEnabled){const R=yield Tr(h,T,"signInWithPassword");return Sr(h,R)}return Sr(h,T).catch(function(){var R=(0,f.Z)(function*(B){if("auth/missing-recaptcha-token"===B.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield Tr(h,T,"signInWithPassword");return Sr(h,Y)}return Promise.reject(B)});return function(B){return R.apply(this,arguments)}}());case"emailLink":return function Ld(y,h){return If.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return ic(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Df(y,h){return $u.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function vi(y,h){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithIdp",Oe(y,h))})).apply(this,arguments)}class ns extends Fs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ns(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):_e("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,R=(0,se._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const B=new ns(v,T);return B.idToken=R.idToken||void 0,B.accessToken=R.accessToken||void 0,B.secret=R.secret,B.nonce=R.nonce,B.pendingToken=R.pendingToken||null,B}_getIdTokenResponse(h){return vi(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,vi(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,vi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Ba(y,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:sendVerificationCode",Oe(y,h))})).apply(this,arguments)}function Vd(){return(Vd=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithPhoneNumber",Oe(y,h))})).apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(y,h){const p=yield dt(y,"POST","/v1/accounts:signInWithPhoneNumber",Oe(y,h));if(p.temporaryProof)throw Tn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Tf={USER_NOT_FOUND:"user-not-found"};function Bo(){return(Bo=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithPhoneNumber",Oe(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Tf)})).apply(this,arguments)}class xn extends Fs{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new xn({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new xn({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function bf(y,h){return Vd.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Ud(y,h){return ja.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function uc(y,h){return Bo.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=h;return v||p||T||R?new xn({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class jo{constructor(h){var p,v,T,R,B,Y;const Me=(0,O.zd)((0,O.pd)(h)),$e=null!==(p=Me.apiKey)&&void 0!==p?p:null,Je=null!==(v=Me.oobCode)&&void 0!==v?v:null,tt=function Hu(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Me.mode)&&void 0!==T?T:null);ie($e&&Je&&tt,"argument-error"),this.apiKey=$e,this.operation=tt,this.code=Je,this.continueUrl=null!==(R=Me.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(B=Me.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(Y=Me.tenantId)&&void 0!==Y?Y:null}static parseLink(h){const p=function _g(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new jo(p)}catch(v){return null}}}let lc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return ac._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=jo.parseLink(v);return ie(T,"argument-error"),ac._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Oi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class $o extends Oi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class rs extends $o{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ie("providerId"in p&&"signInMethod"in p,"argument-error"),ns._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ie(h.idToken||h.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return rs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return rs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:B,providerId:Y}=h;if(!v&&!T&&!p&&!R||!Y)return null;try{return new rs(Y)._credential({idToken:p,accessToken:v,nonce:B,pendingToken:R})}catch(Me){return null}}}let vg=(()=>{class y extends $o{constructor(){super("facebook.com")}static credential(p){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),En=(()=>{class y extends $o{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),cc=(()=>{class y extends $o{constructor(){super("github.com")}static credential(p){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class rn extends Fs{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return vi(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,vi(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,vi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new rn(v,R):null}static _create(h,p){return new rn(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ho extends Oi{constructor(h){ie(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ho.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ho.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=rn.fromJSON(h);return ie(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return rn._create(v,p)}catch(T){return null}}}let Go=(()=>{class y extends $o{constructor(){super("twitter.com")}static credential(p,v){return ns._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Kn(y,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signUp",Oe(y,h))})).apply(this,arguments)}class vr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,f.Z)(function*(){const R=yield An._fromIdTokenResponse(h,v,T),B=Pi(v);return new vr({user:R,providerId:B,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Pi(v);return new vr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function Pi(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function io(){return(io=(0,f.Z)(function*(y){var h;const p=fn(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new vr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Kn(p,{returnSecureToken:!0}),T=yield vr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ki extends O.ZR{constructor(h,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,ki.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new ki(h,p,v,T)}}function dc(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?ki._fromErrorAndOperation(y,R,h,v):R})}function is(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function $r(){return($r=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);yield qo(!0,p,h);const{providerUserInfo:v}=yield pi(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=is(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function vt(y,h){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(y,h,p=!1){const v=yield xt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return vr._forOperation(y,"link",v)})).apply(this,arguments)}function qo(y,h,p){return qu.apply(this,arguments)}function qu(){return(qu=(0,f.Z)(function*(y,h,p){yield Vt(h);const T=!1===y?"provider-already-linked":"no-such-provider";ie(is(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Bd(y,h){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield xt(y,dc(v,T,h,y),p);ie(R.idToken,v,"internal-error");const B=fr(R.idToken);ie(B,v,"internal-error");const{sub:Y}=B;return ie(y.uid===Y,v,"user-mismatch"),vr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&_e(v,"user-mismatch"),R}})).apply(this,arguments)}function Wu(y,h){return hc.apply(this,arguments)}function hc(){return(hc=(0,f.Z)(function*(y,h,p=!1){const v="signIn",T=yield dc(y,v,h),R=yield vr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function oo(y,h){return Re.apply(this,arguments)}function Re(){return(Re=(0,f.Z)(function*(y,h){return Wu(fn(y),h)})).apply(this,arguments)}function Kt(y,h){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);return yield qo(!1,p,h.providerId),vt(p,h)})).apply(this,arguments)}function Nn(y,h){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,h){return Bd((0,O.m9)(y),h)})).apply(this,arguments)}function Wo(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(y,h){return dt(y,"POST","/v1/accounts:signInWithCustomToken",Oe(y,h))})).apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(y,h){const p=fn(y),v=yield Wo(p,{token:h,returnSecureToken:!0}),T=yield vr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ha{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ga._fromServerResponse(h,p):"totpInfo"in p?jd._fromServerResponse(h,p):_e(h,"internal-error")}}class Ga extends Ha{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ga(p)}}class jd extends Ha{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new jd(p)}}function Li(y,h,p){var v;ie((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ie(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ie(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ie(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function ri(){return ri=(0,f.Z)(function*(y,h,p){var v;const T=fn(y),R={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null===(v=T._getRecaptchaConfig())||void 0===v?void 0:v.emailPasswordEnabled){const B=yield Tr(T,R,"getOobCode",!0);p&&Li(T,B,p),yield Bu(T,B)}else p&&Li(T,R,p),yield Bu(T,R).catch(function(){var B=(0,f.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Me=yield Tr(T,R,"getOobCode",!0);p&&Li(T,Me,p),yield Bu(T,Me)}});return function(Y){return B.apply(this,arguments)}}())}),ri.apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(y,h,p){yield Vo((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(y,h){yield wf((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function za(y,h){return qa.apply(this,arguments)}function qa(){return(qa=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Vo(p,{oobCode:h}),T=v.requestType;switch(ie(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(v.mfaInfo,p,"internal-error");default:ie(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=Ha._fromServerResponse(fn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(y,h){const{data:p}=yield za((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Zo(){return Zo=(0,f.Z)(function*(y,h,p){var v;const T=fn(y),R={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let B;if(null===(v=T._getRecaptchaConfig())||void 0===v?void 0:v.emailPasswordEnabled){const $e=yield Tr(T,R,"signUpPassword");B=Kn(T,$e)}else B=Kn(T,R).catch(function(){var $e=(0,f.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tt=yield Tr(T,R,"signUpPassword");return Kn(T,tt)}return Promise.reject(Je)});return function(Je){return $e.apply(this,arguments)}}());const Y=yield B.catch($e=>Promise.reject($e)),Me=yield vr._fromIdTokenResponse(T,"signIn",Y);return yield T._updateCurrentUser(Me.user),Me}),Zo.apply(this,arguments)}function Ko(){return Ko=(0,f.Z)(function*(y,h,p){var v;const T=fn(y),R={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function B(Y,Me){ie(Me.handleCodeInApp,T,"argument-error"),Me&&Li(T,Y,Me)}if(null===(v=T._getRecaptchaConfig())||void 0===v?void 0:v.emailPasswordEnabled){const Y=yield Tr(T,R,"getOobCode",!0);B(Y,p),yield kd(T,Y)}else B(R,p),yield kd(T,R).catch(function(){var Y=(0,f.Z)(function*(Me){if("auth/missing-recaptcha-token"!==Me.code)return Promise.reject(Me);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield Tr(T,R,"getOobCode",!0);B($e,p),yield kd(T,$e)}});return function(Me){return Y.apply(this,arguments)}}())}),Ko.apply(this,arguments)}function fc(){return(fc=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=lc.credentialWithLink(h,p||mt());return ie(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),oo(v,T)})).apply(this,arguments)}function pc(y,h){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:createAuthUri",Oe(y,h))})).apply(this,arguments)}function Qu(){return(Qu=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:Zt()?mt():"http://localhost"},{signinMethods:T}=yield pc((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Li(p.auth,T,h);const{email:R}=yield Od(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Li(v.auth,R,p);const{email:B}=yield oc(v.auth,R);B!==y.email&&(yield y.reload())})).apply(this,arguments)}function Sf(y,h){return qd.apply(this,arguments)}function qd(){return(qd=(0,f.Z)(function*(y,h){return ye(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ju(){return(Ju=(0,f.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},B=yield xt(v,Sf(v.auth,R));v.displayName=B.displayName||null,v.photoURL=B.photoUrl||null;const Y=v.providerData.find(({providerId:Me})=>"password"===Me);Y&&(Y.displayName=v.displayName,Y.photoURL=v.photoURL),yield v._updateTokensIfNecessary(B)})).apply(this,arguments)}function Xu(y,h,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,f.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const B=yield xt(y,ic(v,R));yield y._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class vs{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Kd extends vs{constructor(h,p,v,T){super(h,p,v),this.username=T}}class Yd extends vs{constructor(h,p){super(h,"facebook.com",p)}}class co extends Kd{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ka extends vs{constructor(h,p){super(h,"google.com",p)}}class wg extends Kd{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Eg(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Za(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const B=null===(p=null===(h=fr(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(B)return new vs(R,"anonymous"!==B&&"custom"!==B?B:null)}if(!v)return null;switch(v){case"facebook.com":return new Yd(R,T);case"github.com":return new co(R,T);case"google.com":return new Ka(R,T);case"twitter.com":return new wg(R,T,y.screenName||null);case"custom":case"anonymous":return new vs(R,null);default:return new vs(R,v,T)}}(p)}class Bs{constructor(h,p,v){this.type=h,this.credential=p,this.auth=v}static _fromIdtoken(h,p){return new Bs("enroll",h,p)}static _fromMfaPendingCredential(h){return new Bs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Bs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Bs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Qo{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=fn(h),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(Y=>Ha._fromServerResponse(v,Y));ie(T.mfaPendingCredential,v,"internal-error");const B=Bs._fromMfaPendingCredential(T.mfaPendingCredential);return new Qo(B,R,function(){var Y=(0,f.Z)(function*(Me){const $e=yield Me._process(v,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Je=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(p.operationType){case"signIn":const tt=yield vr._fromIdTokenResponse(v,p.operationType,Je);return yield v._updateCurrentUser(tt.user),tt;case"reauthenticate":return ie(p.user,v,"internal-error"),vr._forOperation(p.user,p.operationType,Je);default:_e(v,"internal-error")}});return function(Me){return Y.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,f.Z)(function*(){return p.signInResolver(h)})()}}function el(y,h){return ye(y,"POST","/v2/accounts/mfaEnrollment:start",Oe(y,h))}class Xo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Ha._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Xo(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Bs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var v=this;return(0,f.Z)(function*(){const T=h,R=yield v.getSession(),B=yield xt(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(B),v.user.reload()})()}unenroll(h){var p=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken();try{const R=yield xt(p.user,function Ig(y,h){return ye(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Oe(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:B})=>B!==v),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const ea=new WeakMap,nr="__sak";class ta{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(nr,"1"),this.storage.removeItem(nr),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ws=(()=>{class y extends ta{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _c(){const y=(0,O.z$)();return ne(y)||tn(y)}()&&function yi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=jr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((Y,Me,$e)=>{this.notifyListeners(Y,$e)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(T);if(p.newValue!==Y)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const Y=this.storage.getItem(T);!v&&this.localCache[T]===Y||this.notifyListeners(T,Y)},B=this.storage.getItem(T);!function mi(){return(0,O.w1)()&&10===document.documentMode}()||B===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,f.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,f.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,f.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Bi=(()=>{class y extends ta{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let rl=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,f.Z)(function*(){const T=p,{eventId:R,eventType:B,data:Y}=T.data,Me=v.handlersMap[B];if(!(null==Me?void 0:Me.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:B});const $e=Array.from(Me).map(function(){var tt=(0,f.Z)(function*(gn){return gn(T.origin,Y)});return function(gn){return tt.apply(this,arguments)}}()),Je=yield function nl(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}($e);T.ports[0].postMessage({status:"done",eventId:R,eventType:B,response:Je})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function na(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class vc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let B,Y;return new Promise((Me,$e)=>{const Je=na("",20);R.port1.start();const tt=setTimeout(()=>{$e(new Error("unsupported_event"))},v);Y={messageChannel:R,onMessage(gn){const qi=gn;if(qi.data.eventId===Je)switch(qi.data.status){case"ack":clearTimeout(tt),B=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Me(qi.data.response);break;default:clearTimeout(tt),clearTimeout(B),$e(new Error("invalid_response"))}}},T.handlers.add(Y),R.port1.addEventListener("message",Y.onMessage),T.target.postMessage({eventType:h,eventId:Je,data:p},[R.port2])}).finally(()=>{Y&&T.removeMessageHandler(Y)})})()}}function cn(){return window}function il(){return void 0!==cn().WorkerGlobalScope&&"function"==typeof cn().importScripts}function Qa(){return(Qa=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const ra="firebaseLocalStorageDb",Es="firebaseLocalStorage",wi="fbase_key";class Yn{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Ei(y,h){return y.transaction([Es],h?"readwrite":"readonly").objectStore(Es)}function Ii(){const y=indexedDB.open(ra,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Es,{keyPath:wi})}catch(T){p(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Es)?h(v):(v.close(),yield function rr(){const y=indexedDB.deleteDatabase(ra);return new Yn(y).toPromise()}(),h(yield Ii()))}))})}function Ja(y,h,p){return sl.apply(this,arguments)}function sl(){return(sl=(0,f.Z)(function*(y,h,p){const v=Ei(y,!0).put({[wi]:h,value:p});return new Yn(v).toPromise()})).apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(y,h){const p=Ei(y,!1).get(h),v=yield new Yn(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Nf(y,h){const p=Ei(y,!0).delete(h);return new Yn(p).toPromise()}const si=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,f.Z)(function*(){return p.db||(p.db=yield Ii()),p.db})()}_withRetries(p){var v=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,f.Z)(function*(){return il()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,f.Z)(function*(){p.receiver=rl._getInstance(function Qt(){return il()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,f.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Mr(){return Qa.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new vc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function $s(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ii();return yield Ja(p,nr,"1"),yield Nf(p,nr),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(R=>Ja(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,f.Z)(function*(){const T=yield v._withRetries(R=>function Dn(y,h){return ol.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(T=>Nf(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,f.Z)(function*(){const v=yield p._withRetries(B=>{const Y=Ei(B,!1).getAll();return new Yn(Y).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:B,value:Y}of v)R.add(B),JSON.stringify(p.localCache[B])!==JSON.stringify(Y)&&(p.notifyListeners(B,Y),T.push(B));for(const B of Object.keys(p.localCache))p.localCache[B]&&!R.has(B)&&(p.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function wc(y,h){return ye(y,"POST","/v2/accounts/mfaSignIn:start",Oe(y,h))}const as=1e12;class Pf{constructor(h){this.auth=h,this.counter=as,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Ic(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||as;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||as))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,f.Z)(function*(){var v;return null===(v=p._widgets.get(h||as))||void 0===v||v.execute(),""})()}}class Ic{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ie(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ci(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const oi=an("rcb"),Dc=new es(3e4,6e4);class Xa{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(h=cn().grecaptcha)||void 0===h?void 0:h.render)}load(h,p=""){return ie(function al(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&rt(cn().grecaptcha)?Promise.resolve(cn().grecaptcha):new Promise((v,T)=>{const R=cn().setTimeout(()=>{T(me(h,"network-request-failed"))},Dc.get());cn()[oi]=()=>{cn().clearTimeout(R),delete cn()[oi];const Y=cn().grecaptcha;if(!Y||!rt(Y))return void T(me(h,"internal-error"));const Me=Y.render;Y.render=($e,Je)=>{const tt=Me($e,Je);return this.counter++,tt},this.hostLanguage=p,v(Y)},er(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:oi,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(me(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!!(null===(p=cn().grecaptcha)||void 0===p?void 0:p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kf{load(h){return(0,f.Z)(function*(){return new Pf(h)})()}clearedOneInstance(){}}const eu="recaptcha",zt={theme:"light",type:"image"};class Jd{constructor(h,p=Object.assign({},zt),v){this.parameters=p,this.type=eu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(v),this.isInvisible="invisible"===this.parameters.size,ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ie(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kf:new Xa,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const B=Y=>{!Y||(h.tokenChangeListeners.delete(B),R(Y))};h.tokenChangeListeners.add(B),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=cn()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){ie(Zt()&&!il(),h.auth,"internal-error"),yield function po(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function ee(y){return xe.apply(this,arguments)}(h.auth);ie(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ir{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=xn._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function us(){return(us=(0,f.Z)(function*(y,h,p){const v=fn(y),T=yield aa(v,h,(0,O.m9)(p));return new ir(T,R=>oo(v,R))})).apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield qo(!1,v,"phone");const T=yield aa(v.auth,h,(0,O.m9)(p));return new ir(T,R=>Kt(v,R))})).apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y),T=yield aa(v.auth,h,(0,O.m9)(p));return new ir(T,R=>Nn(v,R))})).apply(this,arguments)}function aa(y,h,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,f.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let R;if(ie("string"==typeof T,y,"argument-error"),ie(p.type===eu,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const B=R.session;if("phoneNumber"in R)return ie("enroll"===B.type,y,"internal-error"),(yield el(y,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ie("signin"===B.type,y,"internal-error");const Y=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ie(Y,y,"missing-multi-factor-info"),(yield wc(y,{mfaPendingCredential:B.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield Ba(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return B}}finally{p._reset()}})).apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(y,h){yield vt((0,O.m9)(y),h)})).apply(this,arguments)}let sr=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=fn(p)}verifyPhoneNumber(p,v){return aa(this.auth,p,(0,O.m9)(v))}static credential(p,v){return xn._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?xn._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ls(y,h){return h?kn(h):(ie(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class $i extends Fs{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return vi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return vi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return vi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function go(y){return Wu(y.auth,new $i(y),y.bypassAuthState)}function ru(y){const{auth:h,user:p}=y;return ie(p,h,"internal-error"),Bd(p,new $i(y),y.bypassAuthState)}function mo(y){return iu.apply(this,arguments)}function iu(){return(iu=(0,f.Z)(function*(y){const{auth:h,user:p}=y;return ie(p,h,"internal-error"),vt(p,new $i(y),y.bypassAuthState)})).apply(this,arguments)}class Cc{constructor(h,p,v,T,R=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,f.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:B,error:Y,type:Me}=h;if(Y)return void p.reject(Y);const $e={auth:p.auth,requestUri:v,sessionId:T,tenantId:B||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Me)($e))}catch(Je){p.reject(Je)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return go;case"linkViaPopup":case"linkViaRedirect":return mo;case"reauthViaPopup":case"reauthViaRedirect":return ru;default:_e(this.auth,"internal-error")}}resolve(h){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hi=new es(2e3,1e4);function ou(){return(ou=(0,f.Z)(function*(y,h,p){const v=fn(y);je(y,h,Oi);const T=ls(v,p);return new cs(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,Oi);const T=ls(v.auth,p);return new cs(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,Oi);const T=ls(v.auth,p);return new cs(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let cs=(()=>{class y extends Cc{constructor(p,v,T,R,B){super(p,v,R,B),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,f.Z)(function*(){const v=yield p.execute();return ie(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,f.Z)(function*(){Tt(1===p.filter.length,"Popup operations only handle one event");const v=na();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(me(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Hi.get())};p()}}return y.currentPopupAction=null,y})();const yo=new Map;class au extends Cc{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,f.Z)(function*(){let v=yo.get(p.auth._key());if(!v){try{const R=(yield function Tc(y,h){return uu.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}yo.set(p.auth._key(),v)}return p.bypassAuthState||yo.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function uu(){return(uu=(0,f.Z)(function*(y,h){const p=ca(h),v=vo(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function ua(y,h){return la.apply(this,arguments)}function la(){return(la=(0,f.Z)(function*(y,h){return vo(y)._set(ca(h),"true")})).apply(this,arguments)}function cl(y,h){yo.set(y._key(),h)}function vo(y){return kn(y._redirectPersistence)}function ca(y){return U("pendingRedirect",y.config.apiKey,y.name)}function da(){return(da=(0,f.Z)(function*(y,h,p){const v=fn(y);je(y,h,Oi),yield v._initializationPromise;const T=ls(v,p);return yield ua(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function ha(){return(ha=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,Oi),yield v.auth._initializationPromise;const T=ls(v.auth,p);yield ua(T,v.auth);const R=yield pa(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(y,h,p){const v=(0,O.m9)(y);je(v.auth,h,Oi),yield v.auth._initializationPromise;const T=ls(v.auth,p);yield qo(!1,v,h.providerId),yield ua(T,v.auth);const R=yield pa(v);return T._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function pl(){return(pl=(0,f.Z)(function*(y,h){return yield fn(y)._initializationPromise,lu(y,h,!1)})).apply(this,arguments)}function lu(y,h){return gl.apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(y,h,p=!1){const v=fn(y),T=ls(v,h),B=yield new au(v,T,p).execute();return B&&!p&&(delete B.user._redirectEventId,yield v._persistUserIfCurrent(B.user),yield v._setRedirectUser(null,h)),B})).apply(this,arguments)}function pa(y){return ai.apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(y){const h=na(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class cu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Gs(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ui(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!ui(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(me(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ml(h))}saveEventToCache(h){this.cachedEventUids.add(ml(h)),this.lastProcessedEventTime=Date.now()}}function ml(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ui({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function th(y){return nh.apply(this,arguments)}function nh(){return(nh=(0,f.Z)(function*(y,h={}){return ye(y,"GET","/v1/projects",h)})).apply(this,arguments)}const yl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^https?/;function ds(){return(ds=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield th(y);for(const p of h)try{if(hu(p))return}catch(v){}_e(y,"unauthorized-domain")})).apply(this,arguments)}function hu(y){const h=mt(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const B=new URL(y);return""===B.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&B.hostname===v}if(!wr.test(p))return!1;if(yl.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const or=new es(3e4,6e4);function ga(){const y=cn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let _l=null;function wo(y){return _l=_l||function li(y){return new Promise((h,p)=>{var v,T,R;function B(){ga(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ga(),p(me(y,"network-request-failed"))},timeout:or.get()})}if(null===(T=null===(v=cn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=cn().gapi)||void 0===R?void 0:R.load)){const Y=an("iframefcb");return cn()[Y]=()=>{gapi.load?B():p(me(y,"network-request-failed"))},er(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Me=>p(Me))}B()}}).catch(h=>{throw _l=null,h})}(y),_l}const Lf=new es(5e3,15e3),xc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vf(y){const h=y.config;ie(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?te(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},T=Mc.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function D(){return D=(0,f.Z)(function*(y){const h=yield wo(y),p=cn().gapi;return ie(p,y,"internal-error"),h.open({where:document.body,url:Vf(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xc,dontclear:!0},v=>new Promise(function(){var T=(0,f.Z)(function*(R,B){yield v.restyle({setHideOnLeave:!1});const Y=me(y,"network-request-failed"),Me=cn().setTimeout(()=>{B(Y)},Lf.get());function $e(){cn().clearTimeout(Me),R(v)}v.ping($e).then($e,()=>{B(Y)})});return function(R,B){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const S={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}const gr=encodeURIComponent("fac");function Vn(y,h,p,v,T,R){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(y,h,p,v,T,R){ie(y.config.authDomain,y,"auth-domain-config-required"),ie(y.config.apiKey,y,"invalid-api-key");const B={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ae.SDK_VERSION,eventId:T};if(h instanceof Oi){h.setDefaultLanguage(y.languageCode),B.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(B.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Je,tt]of Object.entries(R||{}))B[Je]=tt}if(h instanceof $o){const Je=h.getScopes().filter(tt=>""!==tt);Je.length>0&&(B.scopes=Je.join(","))}y.tenantId&&(B.tid=y.tenantId);const Y=B;for(const Je of Object.keys(Y))void 0===Y[Je]&&delete Y[Je];const Me=yield y._getAppCheckToken(),$e=Me?`#${gr}=${encodeURIComponent(Me)}`:"";return`${fu(y)}?${(0,O.xO)(Y).slice(1)}${$e}`})).apply(this,arguments)}function fu({config:y}){return y.emulator?te(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Er="webStorageSupport";class Uf extends class rh{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return wt("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Uf(h)}_finalizeEnroll(h,p,v){return function Jo(y,h){return ye(y,"POST","/v2/accounts/mfaEnrollment:finalize",Oe(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function os(y,h){return ye(y,"POST","/v2/accounts/mfaSignIn:finalize",Oe(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yy=(()=>{class y{constructor(){}static assertion(p){return Uf._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var _a="@firebase/auth";class Qy{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,f.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{h((null==v?void 0:v.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function va(){return window}function oh(){return(oh=(0,f.Z)(function*(y,h,p){var v;const{BuildInfo:T}=va();Tt(h.sessionId,"AuthEvent did not contain a session ID");const R=yield vl(h.sessionId),B={};return tn()?B.ibi=T.packageName:It()?B.apn=T.packageName:_e(y,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=R,Vn(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,B)})).apply(this,arguments)}function ah(){return(ah=(0,f.Z)(function*(y){const{BuildInfo:h}=va(),p={};tn()?p.iosBundleId=h.packageName:It()?p.androidPackageName=h.packageName:_e(y,"operation-not-supported-in-this-environment"),yield th(y,p)})).apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(y,h,p){const{cordova:v}=va();let T=()=>{};try{yield new Promise((R,B)=>{let Y=null;function Me(){var tt;R();const gn=null===(tt=v.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof gn&&gn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function $e(){Y||(Y=window.setTimeout(()=>{B(me(y,"redirect-cancelled-by-user"))},2e3))}function Je(){"visible"===(null==document?void 0:document.visibilityState)&&$e()}h.addPassiveListener(Me),document.addEventListener("resume",$e,!1),It()&&document.addEventListener("visibilitychange",Je,!1),T=()=>{h.removePassiveListener(Me),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",Je,!1),Y&&window.clearTimeout(Y)}})}finally{T()}})).apply(this,arguments)}function vl(y){return wl.apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(y){const h=Do(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Do(y){if(Tt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(0,O.Pz)("authIdTokenMaxAge"),function jf(y){(0,ae._registerComponent)(new de.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),R=h.getProvider("app-check-internal"),{apiKey:B,authDomain:Y}=v.options;ie(B&&!B.includes(":"),"invalid-api-key",{appName:v.name});const Me={apiKey:B,authDomain:Y,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oe(y)},$e=new Zn(v,T,R,Me);return function wn(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(kn);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}($e,p),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new de.wA("auth-internal",h=>{const p=fn(h.getProvider("auth").getImmediate());return new Qy(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(_a,"0.23.2",function Bf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(_a,"0.23.2","esm2017")}("Browser");class Ag extends cu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Hf(y){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,f.Z)(function*(y){const h=yield zs()._get(Il(y));return h&&(yield zs()._remove(Il(y))),h})).apply(this,arguments)}function Gf(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function zs(){return kn(ws)}function Il(y){return U("authEvent",y.config.apiKey,y.name)}function mu(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function zf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Lc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Mg(y=(0,O.z$)()){return!("file:"!==Lc()&&"ionic:"!==Lc()&&"capacitor:"!==Lc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function o_(){try{const y=self.localStorage,h=na();if(y)return y.setItem(h,"1"),y.removeItem(h),!function s_(y=(0,O.z$)()){return function Vc(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function i_(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Rg()&&(0,O.hl)()}return!1}function Rg(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ng(){return(function r_(){return"http:"===Lc()||"https:"===Lc()}()||(0,O.ru)()||Mg())&&!function wa(){return(0,O.b$)()||(0,O.UG)()}()&&o_()&&!Rg()}function a_(){return Mg()&&"undefined"!=typeof document}function dh(){return(dh=(0,f.Z)(function*(){return!!a_()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},Cl=ie,Pg="persistence";function bl(y){return hh.apply(this,arguments)}function hh(){return(hh=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Tl(),p=U(Pg,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Tl(){var y;try{return(null===(y=function fw(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const qf=ie;class Co{constructor(){this.browserResolver=kn(class zi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bi,this._completeRedirectFn=lu,this._overrideRedirectResult=cl}_openPopup(h,p,v,T){var R=this;return(0,f.Z)(function*(){var B;Tt(null===(B=R.eventManagers[h._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const Y=yield Vn(h,p,v,mt(),T);return function Ve(y,h,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-v)/2,0).toString();let Y="";const Me=Object.assign(Object.assign({},S),{width:v.toString(),height:T.toString(),top:R,left:B}),$e=(0,O.z$)().toLowerCase();p&&(Y=Qe($e)?"_blank":p),Ae($e)&&(h=h||"http://localhost",Me.scrollbars="yes");const Je=Object.entries(Me).reduce((gn,[qi,ph])=>`${gn}${qi}=${ph},`,"");if(function pr(y=(0,O.z$)()){var h;return tn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}($e)&&"_self"!==Y)return function it(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",Y),new qe(null);const tt=window.open(h||"",Y,Je);ie(tt,y,"popup-blocked");try{tt.focus()}catch(gn){}return new qe(tt)}(h,Y,na())})()}_openRedirect(h,p,v,T){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function ji(y){cn().location.href=y}(yield Vn(h,p,v,mt(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(Tt(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,f.Z)(function*(){const v=yield function E(y){return D.apply(this,arguments)}(h),T=new cu(h);return v.register("authEvent",R=>(ie(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Er,{type:Er},T=>{var R;const B=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Er];void 0!==B&&p(!!B),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function du(y){return ds.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return jr()||ne()||tn()}}),this.cordovaResolver=kn(class yu{constructor(){this._redirectPersistence=Bi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lu,this._overrideRedirectResult=cl}_initialize(h){var p=this;return(0,f.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new Ag(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var R=this;return(0,f.Z)(function*(){!function lh(y){var h,p,v,T,R,B,Y,Me,$e,Je;const tt=va();ie("function"==typeof(null===(h=null==tt?void 0:tt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(void 0!==(null===(p=null==tt?void 0:tt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie("function"==typeof(null===(R=null===(T=null===(v=null==tt?void 0:tt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(Me=null===(Y=null===(B=null==tt?void 0:tt.cordova)||void 0===B?void 0:B.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Me?void 0:Me.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie("function"==typeof(null===(Je=null===($e=null==tt?void 0:tt.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===Je?void 0:Je.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const B=yield R._initialize(h);yield B.initialized(),B.resetRedirect(),function _o(){yo.clear()}(),yield R._originValidation(h);const Y=function Jy(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Gf(),postBody:null,tenantId:y.tenantId,error:me(y,"no-auth-event")}}(h,v,T);yield function Xy(y,h){return zs()._set(Il(y),h)}(h,Y);const Me=yield function Pc(y,h,p){return oh.apply(this,arguments)}(h,Y,p),$e=yield function uh(y){const{cordova:h}=va();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Ut(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Me);return function gu(y,h,p){return kc.apply(this,arguments)}(h,B,$e)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function $f(y){return ah.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=va(),B=setTimeout((0,f.Z)(function*(){yield Hf(h),p.onEvent(zf())}),500),Y=function(){var Je=(0,f.Z)(function*(tt){clearTimeout(B);const gn=yield Hf(h);let qi=null;gn&&(null==tt?void 0:tt.url)&&(qi=function El(y,h){var p,v;const T=function hw(y){const h=mu(y),p=h.link?decodeURIComponent(h.link):void 0,v=mu(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return mu(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const R=mu(T),B=R.firebaseError?function e_(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,Y=null===(v=null===(p=null==B?void 0:B.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Me=Y?me(Y):null;return Me?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(gn,tt.url)),p.onEvent(qi||zf())});return function(gn){return Je.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,Y);const Me=T,$e=`${R.packageName.toLowerCase()}://`;va().handleOpenURL=function(){var Je=(0,f.Z)(function*(tt){if(tt.toLowerCase().startsWith($e)&&Y({url:tt}),"function"==typeof Me)try{Me(tt)}catch(gn){console.error(gn)}});return function(tt){return Je.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Bi,this._completeRedirectFn=lu,this._overrideRedirectResult=cl}_initialize(h){var p=this;return(0,f.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return a_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Og(){return dh.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Uc(y){return y.unwrap()}function gw(y){return Al(y)}function Al(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return sr.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=En;break;case"facebook.com":v=vg;break;case"github.com":v=cc;break;case"twitter.com":v=Go;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:B,pendingToken:Y,nonce:Me}=h;return R||B||T||Y?Y?p.startsWith("saml.")?rn._create(p,Y):ns._fromParams({providerId:p,signInMethod:p,pendingToken:Y,idToken:T,accessToken:R}):new rs(p).credential({idToken:T,accessToken:R,rawNonce:Me}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Nr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function mw(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null==h?void 0:h.code))h.resolver=new yw(y,function ho(y,h){var p;const v=(0,O.m9)(y),T=h;return ie(h.customData.operationType,v,"argument-error"),ie(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Qo._fromError(v,T)}(y,h));else if(v){const T=Al(h),R=h;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:gw(p),additionalUserInfo:Eg(p),user:Ws.getOrCreate(T)}})}function Bc(y,h){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,f.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>Nr(y,p.confirm(v))}})).apply(this,arguments)}class yw{constructor(h,p){this.resolver=p,this.auth=function pw(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Nr(Uc(this.auth),this.resolver.resolveSignIn(h))}}class Ws{constructor(h){this._delegate=h,this.multiFactor=function yc(y){const h=(0,O.m9)(y);return ea.has(h)||ea.set(h,Xo._fromUser(h)),ea.get(h)}(h)}static getOrCreate(h){return Ws.USER_MAP.has(h)||Ws.USER_MAP.set(h,new Ws(h)),Ws.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,f.Z)(function*(){return Nr(p.auth,Kt(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,f.Z)(function*(){return Bc(v.auth,function Dg(y,h,p){return oa.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,f.Z)(function*(){return Nr(p.auth,function ll(y,h,p){return Qn.apply(this,arguments)}(p._delegate,h,Co))})()}linkWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield bl(fn(p.auth)),function fa(y,h,p){return function fl(y,h,p){return Ac.apply(this,arguments)}(y,h,p)}(p._delegate,h,Co)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,f.Z)(function*(){return Nr(p.auth,Nn(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Bc(this.auth,function bi(y,h,p){return nu.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Nr(this.auth,function Gi(y,h,p){return $t.apply(this,arguments)}(this._delegate,h,Co))}reauthenticateWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield bl(fn(p.auth)),function eh(y,h,p){return function Ff(y,h,p){return ha.apply(this,arguments)}(y,h,p)}(p._delegate,h,Co)})()}sendEmailVerification(h){return function gc(y,h){return Fn.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,f.Z)(function*(){return yield function zo(y,h){return $r.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Wd(y,h){return Xu((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Zd(y,h){return Xu((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Xd(y,h){return zn.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function xf(y,h){return Ju.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Vi(y,h,p){return pn.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ws.USER_MAP=new WeakMap;const Sl=ie;let Lg=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Sl(T,"invalid-api-key",{appName:p.name}),Sl(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Co:void 0;this._delegate=v.initialize({options:{persistence:Or(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ws.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function nc(y,h,p){const v=fn(y);ie(v._canInitEmulator,v,"emulator-config-failed"),ie(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=Lo(h),{host:B,port:Y}=function Xr(y){const h=Lo(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:_i(v.substr(R.length+1))}}{const[R,B]=v.split(":");return{host:R,port:_i(B)}}}(h);v.config.emulator={url:`${R}//${B}${null===Y?"":`:${Y}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:B,port:Y,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function rc(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function ys(y,h){return _s.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return za(this._delegate,p)}confirmPasswordReset(p,v){return function $d(y,h,p){return Vs.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,f.Z)(function*(){return Nr(T._delegate,function Ku(y,h,p){return Zo.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ii(y,h){return Qu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Yu(y,h){const p=jo.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,f.Z)(function*(){Sl(Ng(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Cg(y,h){return pl.apply(this,arguments)}(p._delegate,Co);return v?Nr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Dl(y,h){fn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:B,complete:Y}=Vg(p,v,T);return this._delegate.onAuthStateChanged(R,B,Y)}onIdTokenChanged(p,v,T){const{next:R,error:B,complete:Y}=Vg(p,v,T);return this._delegate.onIdTokenChanged(R,B,Y)}sendSignInLinkToEmail(p,v){return function zd(y,h,p){return Ko.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function xr(y,h,p){return ri.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,f.Z)(function*(){let T;switch(function kg(y,h){Cl(Object.values(Ti).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Cl(h!==Ti.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Cl(h===Ti.NONE,y,"unsupported-persistence-type"):Rg()?Cl(h===Ti.NONE||h===Ti.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Cl(h===Ti.NONE||o_(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Ti.SESSION:T=Bi;break;case Ti.LOCAL:T=(yield kn(si)._isAvailable())?si:ws;break;case Ti.NONE:T=_r;break;default:return _e("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Nr(this._delegate,function ti(y){return io.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Nr(this._delegate,oo(this._delegate,p))}signInWithCustomToken(p){return Nr(this._delegate,function Ls(y,h){return ni.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return Nr(this._delegate,function Gd(y,h,p){return oo((0,O.m9)(y),lc.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return Nr(this._delegate,function tr(y,h,p){return fc.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Bc(this._delegate,function tu(y,h,p){return us.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,f.Z)(function*(){return Sl(Ng(),v._delegate,"operation-not-supported-in-this-environment"),Nr(v._delegate,function su(y,h,p){return ou.apply(this,arguments)}(v._delegate,p,Co))})()}signInWithRedirect(p){var v=this;return(0,f.Z)(function*(){return Sl(Ng(),v._delegate,"operation-not-supported-in-this-environment"),yield bl(v._delegate),function dl(y,h,p){return function hl(y,h,p){return da.apply(this,arguments)}(y,h,p)}(v._delegate,p,Co)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Hd(y,h){return uo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ti,y})();function Vg(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:B=>T(B&&Ws.getOrCreate(B)),error:h,complete:p}}function Or(y,h){const p=function qs(y,h){const p=Tl();if(!p)return[];const v=U(Pg,y,h);switch(p.getItem(v)){case Ti.NONE:return[_r];case Ti.LOCAL:return[si,Bi];case Ti.SESSION:return[Bi];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(si)&&p.push(si),"undefined"!=typeof window)for(const v of[ws,Bi])p.includes(v)||p.push(v);return p.includes(_r)||p.push(_r),p}class fh{constructor(){this.providerId="phone",this._delegate=new sr(Uc(Q.Z.auth()))}static credential(h,p){return sr.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}fh.PHONE_SIGN_IN_METHOD=sr.PHONE_SIGN_IN_METHOD,fh.PROVIDER_ID=sr.PROVIDER_ID;const jc=ie;class Wf{constructor(h,p,v=Q.Z.app()){var T;jc(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Jd(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ml(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Lg(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lc,FacebookAuthProvider:vg,GithubAuthProvider:cc,GoogleAuthProvider:En,OAuthProvider:rs,SAMLAuthProvider:Ho,PhoneAuthProvider:fh,PhoneMultiFactorGenerator:Yy,RecaptchaVerifier:Wf,TwitterAuthProvider:Go,Auth:Lg,AuthCredential:Fs,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Q.Z)},5861:(Xe,Ce,k)=>{function f(O,ae,se,ce,de,pe,fe){try{var $=O[pe](fe),L=$.value}catch(q){return void se(q)}$.done?ae(L):Promise.resolve(L).then(ce,de)}function Q(O){return function(){var ae=this,se=arguments;return new Promise(function(ce,de){var pe=O.apply(ae,se);function fe(L){f(pe,ce,de,fe,$,"next",L)}function $(L){f(pe,ce,de,fe,$,"throw",L)}fe(void 0)})}}k.d(Ce,{Z:()=>Q})},7582:(Xe,Ce,k)=>{function ae(te,J){var be={};for(var Te in te)Object.prototype.hasOwnProperty.call(te,Te)&&J.indexOf(Te)<0&&(be[Te]=te[Te]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Te=Object.getOwnPropertySymbols(te);Oe<Te.length;Oe++)J.indexOf(Te[Oe])<0&&Object.prototype.propertyIsEnumerable.call(te,Te[Oe])&&(be[Te[Oe]]=te[Te[Oe]])}return be}function q(te,J,be,Te){return new(be||(be=Promise))(function(ye,ut){function Pt(Yt){try{dt(Te.next(Yt))}catch(bn){ut(bn)}}function qt(Yt){try{dt(Te.throw(Yt))}catch(bn){ut(bn)}}function dt(Yt){Yt.done?ye(Yt.value):function Oe(ye){return ye instanceof be?ye:new be(function(ut){ut(ye)})}(Yt.value).then(Pt,qt)}dt((Te=Te.apply(te,J||[])).next())})}function Pe(te){return this instanceof Pe?(this.v=te,this):new Pe(te)}function _e(te,J,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Te=be.apply(te,J||[]),ye=[];return Oe={},ut("next"),ut("throw"),ut("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function ut(_n){Te[_n]&&(Oe[_n]=function(Tn){return new Promise(function(dr,jn){ye.push([_n,Tn,dr,jn])>1||Pt(_n,Tn)})})}function Pt(_n,Tn){try{!function qt(_n){_n.value instanceof Pe?Promise.resolve(_n.value.v).then(dt,Yt):bn(ye[0][2],_n)}(Te[_n](Tn))}catch(dr){bn(ye[0][3],dr)}}function dt(_n){Pt("next",_n)}function Yt(_n){Pt("throw",_n)}function bn(_n,Tn){_n(Tn),ye.shift(),ye.length&&Pt(ye[0][0],ye[0][1])}}function ze(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,J=te[Symbol.asyncIterator];return J?J.call(te):(te=function Be(te){var J="function"==typeof Symbol&&Symbol.iterator,be=J&&te[J],Te=0;if(be)return be.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&Te>=te.length&&(te=void 0),{value:te&&te[Te++],done:!te}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),be={},Te("next"),Te("throw"),Te("return"),be[Symbol.asyncIterator]=function(){return this},be);function Te(ye){be[ye]=te[ye]&&function(ut){return new Promise(function(Pt,qt){!function Oe(ye,ut,Pt,qt){Promise.resolve(qt).then(function(dt){ye({value:dt,done:Pt})},ut)}(Pt,qt,(ut=te[ye](ut)).done,ut.value)})}}}k.d(Ce,{FC:()=>_e,KL:()=>ze,_T:()=>ae,mG:()=>q,qq:()=>Pe}),"function"==typeof SuppressedError&&SuppressedError}},Xe=>{Xe(Xe.s=9841)}]);